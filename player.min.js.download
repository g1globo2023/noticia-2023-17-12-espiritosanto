var WP3=function(e){"use strict";function t(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=g(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},v.apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function _(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,K(i.key),i)}}function I(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=L(e);if(t){var r=L(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return x(this,n)}}function N(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=N(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},B.apply(this,arguments)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function K(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var G,W={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},Y=function(){var e,t,n,i,r,a,s=[],o=s.concat,l=s.filter,u=s.slice,c=window.document,d={},h={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],E=c.createElement("table"),A=c.createElement("tr"),_={tr:c.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:A,th:A,"*":c.createElement("div")},T=/complete|loaded|interactive/,k=/^[\w-]*$/,S={},w=S.toString,C={},I=c.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},R=Array.isArray||function(e){return e instanceof Array};function L(e){return null==e?String(e):S[w.call(e)]||"object"}function P(e){return"function"==L(e)}function O(e){return null!=e&&e==e.window}function x(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==L(e)}function N(e){return M(e)&&!O(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!O(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||p[U(e)]?t:t+"px"}function H(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function j(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function K(n,i,r){for(t in i)r&&(N(i[t])||R(i[t]))?(N(i[t])&&!N(n[t])&&(n[t]={}),R(i[t])&&!R(n[t])&&(n[t]=[]),K(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function G(e,t){return null==t?n(e):n(e).filter(t)}function W(e,t,n,i){return P(t)?t.call(e,n,i):t}function Y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function z(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function q(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function $(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)$(e.childNodes[n],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=I).appendChild(e),i=~C.qsa(r,t).indexOf(e),a&&I.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},C.fragment=function(t,i,r){var a,s,o;return g.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(v,"<$1></$2>")),i===e&&(i=f.test(t)&&RegExp.$1),i in _||(i="*"),(o=_[i]).innerHTML=""+t,a=n.each(u.call(o.childNodes),(function(){o.removeChild(this)}))),N(r)&&(s=n(a),n.each(r,(function(e,t){b.indexOf(e)>-1?s[e](t):s.attr(e,t)}))),a},C.Z=function(e,t){return new j(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,i){var r,a;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&f.test(t))r=C.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}else{if(P(t))return n(c).ready(t);if(C.isZ(t))return t;if(R(t))a=t,r=l.call(a,(function(e){return null!=e}));else if(M(t))r=[t],t=null;else if(f.test(t))r=C.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}}return C.Z(r,t)},(n=function(e,t){return C.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){K(e,n,t)})),e},C.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,s=k.test(a);return e.getElementById&&s&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(s&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=L,n.isFunction=P,n.isWindow=O,n.isArray=R,n.isPlainObject=N,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return s.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var i,r,a,s,o=[];if(B(e))for(r=0;r<e.length;r++)null!=(i=t(e[r],r))&&o.push(i);else for(a in e)null!=(i=t(e[a],a))&&o.push(i);return(s=o).length>0?n.fn.concat.apply([],s):s},n.each=function(e,t){var n,i;if(B(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){S["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:C.Z,length:0,forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,splice:s.splice,indexOf:s.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return o.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return T.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return s.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var i=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):B(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return M(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return s.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:C.matches(a,e));)a=a!==t&&!x(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!x(e)&&t.indexOf(e)<0)return t.push(e),e}));return G(t,e)},parent:function(e){return G(a(this.pluck("parentNode")),e)},children:function(e){return G(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return G(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(i){var r=n(this),a=r.contents(),s=t?e.call(this,i):e;a.length?a.wrapAll(s):r.append(s)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append(W(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=W(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(n))for(t in n)Y(this,t,n[t]);else Y(this,n,W(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Y(this,e)}),this)}))},prop:function(e,t){return e=D[e]||e,1 in arguments?this.each((function(n){this[e]=W(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=D[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(y,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?q(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=W(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=W(this,e,t,i.offset()),a=i.offsetParent().offset(),s={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(R(e)){if(!a)return;var s={},o=getComputedStyle(a,"");return n.each(e,(function(e,t){s[t]=a.style[r(t)]||o.getPropertyValue(t)})),s}}var l="";if("string"==L(e))i||0===i?l=U(e)+":"+V(e,i):this.each((function(){this.style.removeProperty(U(e))}));else for(t in e)e[t]||0===e[t]?l+=U(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(U(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&s.some.call(this,(function(e){return this.test(z(e))}),F(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=z(this);W(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&z(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return z(this,"");i=z(this),W(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(F(e)," ")})),z(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);W(this,t,r,z(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=m.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!m.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,s=this[0];return r===e?O(s)?s["inner"+i]:x(s)?s.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(s=n(this)).css(t,W(this,r,e,s[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,s=n.map(arguments,(function(i){var r=[];return"array"==(t=L(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(C.fragment(t)))})),r):"object"==t||null==i?i:C.fragment(i)})),o=this.length>1;return s.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);s.forEach((function(e){if(o)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&$(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),C.Z.prototype=j.prototype=n.fn,C.uniq=a,C.deserializeValue=q,n.zepto=C,n}();window.Zepto=Y,void 0===window.$&&(window.$=Y),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i,a){if(t.global)return function(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}(n||r,i,a)}function p(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===h(t,n,"ajaxBeforeSend",[e,t]))return!1;h(t,n,"ajaxSend",[e,t])}function f(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),h(n,r,"ajaxSuccess",[t,n,e]),v(a,t,n)}function g(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),h(i,a,"ajaxError",[n,i,e||t]),v(t,n,i)}function v(t,n,i){var r=i.context;i.complete.call(r,n,t),h(i,r,"ajaxComplete",[n,i]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(i)}function m(){}function y(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,s,o=t.jsonpCallback,l=(e.isFunction(o)?o():o)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(s),e(u).off().remove(),"error"!=i.type&&a?f(a[0],h,t,n):g(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===p(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(s=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:m,success:m,error:m,complete:m,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:m},e.ajax=function(i){var a,v,b=e.extend({},i||{}),E=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===b[t]&&(b[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(b),b.crossDomain||((a=r.createElement("a")).href=b.url,a.href=a.href,b.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),b.url||(b.url=window.location.toString()),(v=b.url.indexOf("#"))>-1&&(b.url=b.url.slice(0,v)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=y(t.url,t.data),t.data=void 0)}(b);var A=b.dataType,_=/\?.+=\?/.test(b.url);if(_&&(A="jsonp"),!1!==b.cache&&(i&&!0===i.cache||"script"!=A&&"jsonp"!=A)||(b.url=y(b.url,"_="+Date.now())),"jsonp"==A)return _||(b.url=y(b.url,b.jsonp?b.jsonp+"=?":!1===b.jsonp?"":"callback=?")),e.ajaxJSONP(b,E);var T,k=b.accepts[A],S={},w=function(e,t){S[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,I=b.xhr(),D=I.setRequestHeader;if(E&&E.promise(I),b.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",k||"*/*"),(k=b.mimeType||k)&&(k.indexOf(",")>-1&&(k=k.split(",",2)[0]),I.overrideMimeType&&I.overrideMimeType(k)),(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())&&w("Content-Type",b.contentType||"application/x-www-form-urlencoded"),b.headers)for(n in b.headers)w(n,b.headers[n]);if(I.setRequestHeader=w,I.onreadystatechange=function(){if(4==I.readyState){I.onreadystatechange=m,clearTimeout(T);var t,n=!1;if(I.status>=200&&I.status<300||304==I.status||0==I.status&&"file:"==C){if(A=A||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":s.test(e)?"script":o.test(e)&&"xml")||"text"}(b.mimeType||I.getResponseHeader("content-type")),"arraybuffer"==I.responseType||"blob"==I.responseType)t=I.response;else{t=I.responseText;try{t=function(e,t,n){if(n.dataFilter==m)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(t,A,b),"script"==A?(0,eval)(t):"xml"==A?t=I.responseXML:"json"==A&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return g(n,"parsererror",I,b,E)}f(t,I,b,E)}else g(I.statusText||null,I.status?"error":"abort",I,b,E)}},!1===p(I,b))return I.abort(),g(null,"abort",I,b,E),I;var R=!("async"in b)||b.async;if(I.open(b.type,b.url,R,b.username,b.password),b.xhrFields)for(n in b.xhrFields)I[n]=b.xhrFields[n];for(n in S)D.apply(I,S[n]);return b.timeout>0&&(T=setTimeout((function(){I.onreadystatechange=m,I.abort(),g(null,"timeout",I,b,E)}),b.timeout)),I.send(b.data?b.data:null),I},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,s=this,o=t.split(/\s/),l=b(t,n,i),u=l.success;return o.length>1&&(l.url=o[0],r=o[1]),l.success=function(t){s.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(s,arguments)},e.ajax(l),this};var E=encodeURIComponent;function A(t,n,i,r){var a,s=e.isArray(n),o=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(o||"object"==a||"array"==a?n:"")+"]"),!r&&s?t.add(l.name,l.value):"array"==a||!i&&"object"==a?A(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(E(t)+"="+E(n))},A(i,t,n),i.join("&").replace(/%20/g,"+")}}(Y),(G=Y).Callbacks=function(e){e=G.extend({},e);var t,n,i,r,a,s,o=[],l=!e.once&&[],u=function(d){for(t=e.memory&&d,n=!0,s=r||0,r=0,a=o.length,i=!0;o&&s<a;++s)if(!1===o[s].apply(d[0],d[1])&&e.stopOnFalse){t=!1;break}i=!1,o&&(l?l.length&&u(l.shift()):t?o.length=0:c.disable())},c={add:function(){if(o){var n=o.length,s=function(t){G.each(t,(function(t,n){"function"==typeof n?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),i?a=o.length:t&&(r=n,u(t))}return this},remove:function(){return o&&G.each(arguments,(function(e,t){for(var n;(n=G.inArray(t,o,n))>-1;)o.splice(n,1),i&&(n<=a&&--a,n<=s&&--s)})),this},has:function(e){return!(!o||!(e?G.inArray(e,o)>-1:o.length))},empty:function(){return a=o.length=0,this},disable:function(){return o=l=t=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!o||n&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments)},fired:function(){return!!n}};return c},function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var o=e.isFunction(t[i])&&t[i];s[r[1]]((function(){var t=o&&o.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,s=o?[t]:arguments;n[r[0]+"With"](i,s)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},s={};return e.each(i,(function(e,t){var n=t[2],o=t[3];a[t[1]]=n.add,o&&n.add((function(){r=o}),i[1^e][2].disable,i[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith})),a.promise(s),t&&t.call(s,s),s}e.when=function(i){var r,a,s,o=t.call(arguments),l=o.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),s=new Array(l);u<l;++u)o[u]&&e.isFunction(o[u].promise)?o[u].promise().done(h(u,s,o)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(s,o),d.promise()},e.Deferred=n}(Y),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},s={},o={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=p(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(s[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e,t){return e.del&&!l&&e.e in u||!!t}function g(e){return c[e]||l&&u[e]||e}function v(n,i,r,a,o,l,u){var h=d(n),v=s[h]||(s[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var s=p(i);s.fn=r,s.sel=o,s.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)}),s.del=l;var d=l||r;s.proxy=function(e){if(!(e=_(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},s.i=v.length,v.push(s),"addEventListener"in n&&n.addEventListener(g(s.e),s.proxy,f(s,u))}))}function m(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete s[a][t.i],"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,f(t,r))}))}))}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",e.event={add:v,remove:m},e.proxy=function(t,n){var s=2 in arguments&&i.call(arguments,2);if(r(t)){var o=function(){return t.apply(n,s?s.concat(i.call(arguments)):arguments)};return o._zid=d(t),o}if(a(n))return s?(s.unshift(t[n],t),e.proxy.apply(null,s)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var y=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function _(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(A,(function(e,t){var r=i[e];n[e]=function(){return this[t]=y,r&&r.apply(i,arguments)},n[t]=b})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=y)),n}function T(e){var n,i={originalEvent:e};for(n in e)E.test(n)||e[n]===t||(i[n]=e[n]);return _(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,s,o,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,s,o,t,u)})),h):(a(s)||r(l)||!1===l||(l=o,o=s,s=t),l!==t&&!1!==o||(l=o,o=t),!1===l&&(l=b),h.each((function(t,r){u&&(c=function(e){return m(r,e.type,l),l.apply(this,arguments)}),s&&(d=function(t){var n,a=e(t.target).closest(s,r).get(0);if(a&&a!==r)return n=e.extend(T(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),v(r,n,l,o,s,d||c)})))},e.fn.off=function(n,i,s){var o=this;return n&&!a(n)?(e.each(n,(function(e,t){o.off(e,i,t)})),o):(a(i)||r(s)||!1===s||(s=i,i=t),!1===s&&(s=b),o.each((function(){m(this,n,s,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):_(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(s,o){(i=T(a(t)?e.Event(t):t))._args=n,i.target=o,e.each(h(o,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(o[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),_(n)}}(Y),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),o=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=s.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var o=Number(i);i=isNaN(o)?i.replace(/^["']|["']$/g,""):o}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,s,u){try{var c;!a&&s?a="*":o.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return s?t.uniq(e.map(d,(function(e,t){return s.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(Y);var z,q,$,X=Y,Z=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],Q=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],J={},ee=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},te=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},ne=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}}(navigator.userAgent);J.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),J.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!J.isEdge,J.isSafari=/Safari/i.test(navigator.userAgent)&&!J.isChrome&&!J.isEdge,J.isFirefox=/Firefox/i.test(navigator.userAgent),J.isLegacyIE=!!window.ActiveXObject,J.isIE=J.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),J.isIE11=/trident.*rv:11/i.test(navigator.userAgent),J.isChromecast=J.isChrome&&/CrKey/i.test(navigator.userAgent),J.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),J.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),J.isAndroid=/Android/i.test(navigator.userAgent),J.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),J.isWin8App=/MSAppHost/i.test(navigator.userAgent),J.isWiiU=/WiiU/i.test(navigator.userAgent),J.isPS4=/PlayStation 4/i.test(navigator.userAgent),J.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),J.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),J.name=ne.name,J.version=ne.version,J.userAgent=navigator.userAgent,J.data=function(){var e,t={},n=J.userAgent.toLowerCase(),i=j(Z);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var s=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=s&&s[1]&&ee(s[1],t)}else ee(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t}(),J.os=function(){var e,t={},n=J.userAgent.toLowerCase(),i=j(Q);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)te(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])te(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var s=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=s&&s[1]&&te(s[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t}(),J.isWindows=/^Windows$/i.test(J.os.group),J.isMacOS=/^Mac OS$/i.test(J.os.group),J.isLinux=/^Linux$/i.test(J.os.group),J.viewport=((z={}).width=X(window).width(),z.height=X(window).height(),z),J.device=(q=J.userAgent,($=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(q))&&($[1]||$[2])||""),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:J.viewport.orientation="landscape";break;default:J.viewport.orientation="portrait"}}();var ie={},re=[],ae=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),se=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function oe(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function le(e,t){var n=function(e){R(i,e);var n=M(i);function i(){var e;w(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),t.initialize&&t.initialize.apply(O(e),a),e}return I(i)}(e);return oe(n.prototype,t),n}var ue={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},ce=function(){function e(){w(this,e)}return I(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return J.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(J.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),e}(),de=function(){function e(){w(this,e)}return I(e,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}]),e}();function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=de.params[e]||de.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}function pe(e){return ie[e]||(ie[e]=0),e+ ++ie[e]}function fe(e){return e-parseFloat(e)+1>=0}function ge(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function ve(){return window.navigator&&window.navigator.language}function me(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:W.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var ye=function(){function e(){w(this,e)}return I(e,null,[{key:"configure",value:function(e){this.options=X.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&re.length>0?re.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(X(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),re.push(e))}}]),e}();ye.options={recycleVideo:!1};var be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;w(this,e),this.delay=t,this.lastTime=0}return I(e,[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}]),e}(),Ee={Config:ce,Fullscreen:ue,QueryString:de,DomRecycler:ye,assign:oe,extend:le,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),s="";return a&&a>0&&(s+=a+":",r<1&&(s+="00:")),(r&&r>0||t)&&(s+=("0"+r).slice(-2)+":"),s+=("0"+i).slice(-2)+":",(s+=("0"+n).slice(-2)).trim()},seekStringToSeconds:he,uniqueId:pe,currentScriptUrl:ge,isNumber:fe,requestAnimationFrame:ae,cancelAnimationFrame:se,getBrowserLanguage:ve,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))},canAutoPlayMedia:me,Media:W,DoubleEventHandler:be},Ae="font-weight: bold; font-size: 13px;",_e="color: #ff8000;"+Ae,Te="color: #ff0000;"+Ae,ke=["color: #0000ff;"+Ae,"color: #006600;"+Ae,_e,Te,Te],Se=["debug","info","warn","error","disabled"],we=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;w(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.previousLevel=this.level,this.offLevel=n}return I(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+Se[this.level],_e)}},{key:"log",value:function(e,t,n){if(!(this.EXCLUDE_LIST.indexOf(n[0])>=0||t<this.level)){n||(n=e,e=null);var i=ke[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+Se[t]+"]"+r,i].concat(n))}}}]),e}();we.LEVEL_DEBUG=0,we.LEVEL_INFO=1,we.LEVEL_WARN=2,we.LEVEL_ERROR=3,we.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},we.setLevel=function(e){this.getInstance().level=e},we.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},we.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},we.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},we.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Ce=Array.prototype.slice,Ie=/\s+/,De=function(e,t,n,i){if(!n)return!0;if("object"===S(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(Ie.test(n)){for(var a=n.split(Ie),s=0,o=a.length;s<o;s++)e[t].apply(e,[a[s]].concat(i));return!1}return!0},Re=function(e,t,n,i){var r,a=-1,s=e.length,o=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++a<s;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<s;)(r=e[a]).callback.call(r.ctx,o);return;case 2:for(;++a<s;)(r=e[a]).callback.call(r.ctx,o,l);return;case 3:for(;++a<s;)(r=e[a]).callback.call(r.ctx,o,l,u);return;default:for(;++a<s;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){we.error.apply(we,[n,"error on event",i,"trigger","-",e]),c()}}()},Le=function(){function e(){w(this,e)}return I(e,[{key:"on",value:function(e,t,n){return De(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!De(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,s,o,l,u,c;if(!this._events||!De(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(o=0,l=(s=e?[e]:Object.keys(this._events)).length;o<l;o++)if(e=s[o],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(we.debug.apply(we,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=Ce.call(arguments,1);if(!De(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&Re(i,n,t,e),r&&Re(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==S(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):we.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}]),e}(),Pe={listenTo:"on",listenToOnce:"once"};Object.keys(Pe).forEach((function(e){Le.prototype[e]=function(t,n,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=pe("l"))]=t,i||"object"!==S(n)||(i=this),t[Pe[e]](n,i,this),this}})),Le.PLAYER_READY="ready",Le.PLAYER_RESIZE="resize",Le.PLAYER_FULLSCREEN="fullscreen",Le.PLAYER_PLAY="play",Le.PLAYER_PAUSE="pause",Le.PLAYER_STOP="stop",Le.PLAYER_ENDED="ended",Le.PLAYER_SEEK="seek",Le.PLAYER_ERROR="playererror",Le.ERROR="error",Le.PLAYER_TIMEUPDATE="timeupdate",Le.PLAYER_VOLUMEUPDATE="volumeupdate",Le.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",Le.PLAYBACK_PIP_ENTER="playback:picture-in-picture:enter",Le.PLAYBACK_PIP_EXIT="playback:picture-in-picture:exit",Le.PLAYBACK_PROGRESS="playback:progress",Le.PLAYBACK_TIMEUPDATE="playback:timeupdate",Le.PLAYBACK_READY="playback:ready",Le.PLAYBACK_BUFFERING="playback:buffering",Le.PLAYBACK_BUFFERFULL="playback:bufferfull",Le.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",Le.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",Le.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",Le.PLAYBACK_BITRATE="playback:bitrate",Le.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",Le.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",Le.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",Le.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",Le.PLAYBACK_DVR="playback:dvr",Le.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",Le.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",Le.PLAYBACK_ENDED="playback:ended",Le.PLAYBACK_PLAY_INTENT="playback:play:intent",Le.PLAYBACK_PLAY="playback:play",Le.PLAYBACK_PAUSE="playback:pause",Le.PLAYBACK_SEEK="playback:seek",Le.PLAYBACK_SEEKED="playback:seeked",Le.PLAYBACK_STOP="playback:stop",Le.PLAYBACK_ERROR="playback:error",Le.PLAYBACK_STATS_ADD="playback:stats:add",Le.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",Le.PLAYBACK_LEVEL_SWITCH="playback:level:switch",Le.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",Le.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",Le.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",Le.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",Le.CORE_CONTAINERS_CREATED="core:containers:created",Le.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",Le.CORE_OPTIONS_CHANGE="core:options:change",Le.CORE_READY="core:ready",Le.CORE_FULLSCREEN="core:fullscreen",Le.CORE_RESIZE="core:resize",Le.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",Le.CORE_MOUSE_MOVE="core:mousemove",Le.CORE_MOUSE_LEAVE="core:mouseleave",Le.CONTAINER_PLAYBACKSTATE="container:playbackstate",Le.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",Le.CONTAINER_BITRATE="container:bitrate",Le.CONTAINER_STATS_REPORT="container:stats:report",Le.CONTAINER_DESTROYED="container:destroyed",Le.CONTAINER_READY="container:ready",Le.CONTAINER_RESIZE="container:resize",Le.CONTAINER_ERROR="container:error",Le.CONTAINER_LOADEDMETADATA="container:loadedmetadata",Le.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",Le.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",Le.CONTAINER_AUDIO_AVAILABLE="container:audio:available",Le.CONTAINER_AUDIO_CHANGED="container:audio:changed",Le.CONTAINER_TIMEUPDATE="container:timeupdate",Le.CONTAINER_PROGRESS="container:progress",Le.CONTAINER_PLAY="container:play",Le.CONTAINER_STOP="container:stop",Le.CONTAINER_PAUSE="container:pause",Le.CONTAINER_ENDED="container:ended",Le.CONTAINER_CLICK="container:click",Le.CONTAINER_DBLCLICK="container:dblclick",Le.CONTAINER_CONTEXTMENU="container:contextmenu",Le.CONTAINER_MOUSE_ENTER="container:mouseenter",Le.CONTAINER_MOUSE_LEAVE="container:mouseleave",Le.CONTAINER_MOUSE_UP="container:mouseup",Le.CONTAINER_MOUSE_DOWN="container:mousedown",Le.CONTAINER_PIP_ENTER="container:picture-in-picture:enter",Le.CONTAINER_PIP_EXIT="container:picture-in-picture:exit",Le.CONTAINER_SEEK="container:seek",Le.CONTAINER_SEEKED="container:seeked",Le.CONTAINER_VOLUME="container:volume",Le.CONTAINER_FULLSCREEN="container:fullscreen",Le.CONTAINER_STATE_BUFFERING="container:state:buffering",Le.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",Le.CONTAINER_SETTINGSUPDATE="container:settingsupdate",Le.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",Le.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",Le.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",Le.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",Le.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",Le.CONTAINER_STATS_ADD="container:stats:add",Le.CONTAINER_OPTIONS_CHANGE="container:options:change",Le.MEDIACONTROL_RENDERED="mediacontrol:rendered",Le.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",Le.MEDIACONTROL_SHOW="mediacontrol:show",Le.MEDIACONTROL_HIDE="mediacontrol:hide",Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",Le.MEDIACONTROL_PLAYING="mediacontrol:playing",Le.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",Le.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",Le.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Oe=function(e){R(n,e);var t=M(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w(this,n),(e=t.call(this,i))._options=i,e.uniqueId=pe("o"),e}return I(n,[{key:"options",get:function(){return this._options}}]),n}(Le),xe={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Me=/(.)^/,Ne={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Be=/\\|'|\r|\n|\t|\u2028|\u2029/g,Ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Fe=new RegExp("[&<>\"']","g"),Ve=function(e){return null===e?"":(""+e).replace(Fe,(function(e){return Ue[e]}))},He=0,je=function(e,t){var n,i=new RegExp([(xe.escape||Me).source,(xe.interpolate||Me).source,(xe.evaluate||Me).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,s,o){return a+=e.slice(r,o).replace(Be,(function(e){return"\\"+Ne[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),r=o+t.length,t})),a+="';\n",xe.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+He+++"]";try{n=new Function(xe.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,Ve);var s=function(e){return n.call(this,e,Ve)};return s.source="function("+(xe.variable||"obj")+"){\n"+a+"}",s};je.settings=xe;var Ke={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return X('<style class="clappr-style"></style>').html(je(e.toString())(t))}},Ge=/^(\S+)\s*(.*)$/,We=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e)).cid=pe("c"),i._ensureElement(),i.delegateEvents(),i}return I(n,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=X.zepto.isZ(e)?e:X(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(Ge),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=X.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=X(ye.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),n}(Oe),Ye=function(e){R(n,e);var t=M(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return w(this,n),(e=t.call(this,i)).core=r,e}return I(n,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(Le.ERROR,e):we.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),n}(Oe),ze={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),s={description:"",level:Ye.Levels.FATAL,origin:i,scope:n,raw:{}},o=Object.assign({},s,e,{code:t.useCodePrefix?a:e.code});if(r&&o.level==Ye.Levels.FATAL&&!o.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};o.UI=l}return this.playerError?this.playerError.createError(o):we.warn(i,"PlayerError is not defined. Error: ",o),o}},qe=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i.render(),i}return I(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),n}(We);Object.assign(qe.prototype,ze),qe.extend=function(e){return le(qe,e)},qe.type="core";var $e=function(e){R(n,e);var t=M(n);function n(e,i,r){var a;return w(this,n),(a=t.call(this,e))._i18n=i,a.currentTime=0,a.volume=100,a.playback=e.playback,a.playerError=r,a.settings=X.extend(!0,{},a.playback.settings),a.isReady=!1,a.mediaControlDisabled=!1,a.plugins=[a.playback],a.dblTapHandler=new be(500),a.clickTimer=null,a.clickDelay=200,a.actionsMetadata={},a.bindEvents(),a}return I(n,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"isPiPActive",get:function(){return this.playback.isPiPActive}},{key:"bindEvents",value:function(){this.listenTo(this.playback,Le.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,Le.PLAYBACK_READY,this.ready),this.listenTo(this.playback,Le.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,Le.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,Le.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,Le.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,Le.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,Le.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,Le.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,Le.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,Le.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,Le.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,Le.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,Le.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,Le.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,Le.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,Le.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,Le.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,Le.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,Le.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,Le.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,Le.PLAYBACK_AUDIO_CHANGED,this.audioChanged),this.listenTo(this.playback,Le.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,Le.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"subtitleAvailable",value:function(){this.trigger(Le.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(Le.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(Le.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(Le.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(Le.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(Le.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(Le.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(Le.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(Le.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(Le.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(Le.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(Le.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(Le.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[Le.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(Le.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(Le.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(Le.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(Le.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(Le.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(Le.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(Le.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Le.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(Le.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(Le.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(Le.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(Le.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(Le.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(Le.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"onEnterPiP",value:function(){this.trigger(Le.CONTAINER_PIP_ENTER,this.name)}},{key:"onExitPiP",value:function(){this.trigger(Le.CONTAINER_PIP_EXIT,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Le.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Le.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Le.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Le.CONTAINER_MOUSE_DOWN)}},{key:"enterPiP",value:function(){this.playback.enterPiP()}},{key:"exitPiP",value:function(){this.playback.exitPiP()}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(Le.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(Le.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(Le.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(Le.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(Le.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=X.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(Le.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=Ke.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),n}(We);Object.assign($e.prototype,ze);var Xe=function(e){R(n,e);var t=M(n);function n(e,i,r){var a;return w(this,n),(a=t.call(this,e)).settings={},a._i18n=i,a.playerError=r,a._consented=!1,a}return I(n,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"latency",get:function(){return 0}},{key:"currentProgramDateTime",get:function(){return null}},{key:"isPiPActive",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"enterPiP",value:function(){}},{key:"exitPiP",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return n.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=X.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}}]),n}(We);Object.assign(Xe.prototype,ze),Xe.extend=function(e){return le(Xe,e)},Xe.canPlay=function(e,t){return!1},Xe.VOD="vod",Xe.AOD="aod",Xe.LIVE="live",Xe.NO_OP="no_op",Xe.type="playback";var Ze=function(e){R(n,e);var t=M(n);function n(e,i,r,a){var s;return w(this,n),(s=t.call(this,e))._i18n=r,s.loader=i,s.playerError=a,s}return I(n,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var e=this;return X.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===S(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=k(k({},this.options),{},{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new Xe;i=k(k({},i),{},{playback:a});var s=new $e(i,this._i18n,this.playerError),o=X.Deferred();return o.promise(s),this.addContainerPlugins(s),this.listenToOnce(s,Le.CONTAINER_READY,(function(){return o.resolve(s)})),s}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),n}(Oe),Qe=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e)).playerError=new Ye(e,O(i)),i.configureDomRecycler(),i.firstResize=!0,i.styleRendered=!1,i.plugins=[],i.containers=[],i._boundFullscreenHandler=function(){return i.handleFullscreenChange()},X(document).bind("fullscreenchange",i._boundFullscreenHandler),X(document).bind("MSFullscreenChange",i._boundFullscreenHandler),X(document).bind("mozfullscreenchange",i._boundFullscreenHandler),J.isMobile&&X(window).bind("resize",(function(e){i.handleWindowResize(e)})),i}return I(n,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new qe(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(Le.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.find("video")[0]:this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;ye.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=X.Deferred(),this.defer.promise(this),this.containerFactory=new Ze(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){J.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:X(window).width(),height:X(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:X(window).width(),height:X(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){fe(e.height)||fe(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})}),500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(Le.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;X.when.apply(X,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(Le.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=X.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),X(document).unbind("fullscreenchange",this._boundFullscreenHandler),X(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),X(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(Le.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(Le.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,Le.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(Le.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=ue.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen()){var t=J.isiOS?this.activePlaybackEl:document;ue.cancelFullscreen(t),!J.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var n=J.isiOS?this.activePlaybackEl:this.el;if(!n)return;J.isSafari||J.isiOS?ue.requestFullscreen(n):ue.requestFullscreen(n).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!J.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(Le.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(Le.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=X.extend(!0,this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(Le.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"appendStyles",value:function(){if(!this.styleRendered){var e=Ke.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl});if(this.$el.append(e[0]),this.options.includeResetStyle){var t=Ke.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0])}this.styleRendered=!0}}},{key:"render",value:function(){this.appendStyles(),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),n}(We);Object.assign(Qe.prototype,ze);var Je,et,tt=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e.options)).player=e,i}return I(n,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new Qe(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}]),n}(Oe),nt=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,it=function(){function e(t,n,i){w(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return I(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(nt)||[],i=U(n,4),r=i[1],a=i[2],s=i[3];return void 0===r?null:new e(r,a,s)}}]),e}(),rt=function(e,t){return e&&t?Object.entries(e).filter((function(e){return U(e,2)[1].type===t})).reduce((function(e,t){var n=U(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},at=(Je={plugins:{},playbacks:[]},et="0.7.1",function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;w(this,e),this.playerId=n,this.playbackPlugins=F(Je.playbacks);var i=e.registeredPlugins,r=i.core,a=i.container;this.containerPlugins=Object.values(a),this.corePlugins=Object.values(r),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return I(e,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(t){var n="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,i="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var r=t.playback.filter((function(t){return e.checkVersionSupport(t),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(t.container){var a=t.container.filter((function(t){return e.checkVersionSupport(t),!0}));this.containerPlugins=n?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var s=t.core.filter((function(t){return e.checkVersionSupport(t),!0}));this.corePlugins=n?this.removeDups(s.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(s),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}],[{key:"registeredPlaybacks",get:function(){return F(Je.playbacks)}},{key:"registeredPlugins",get:function(){var e=Je.plugins;return{core:rt(e,"core"),container:rt(e,"container")}}},{key:"checkVersionSupport",value:function(e){var t=e.prototype,n=t.supportedVersion,i=t.name;if(!n||!n.min)return we.warn("Loader","missing version information for ".concat(i)),!1;var r=n.max?it.parse(n.max):it.parse(n.min).inc("minor"),a=it.parse(n.min);return!!it.parse(et).satisfies(a,r)||(we.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(et," does not match required range [").concat(a,",").concat(r,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return we.warn("Loader","missing information to register plugin: ".concat(t)),!1;e.checkVersionSupport(t);var n=Je.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&we.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;e.checkVersionSupport(t);var n=Je.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var r=n[i];n.splice(i,1),we.warn("Loader","overriding playback entry: ".concat(r.name," - ").concat(r))}return Je.playbacks=[t].concat(F(n)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=Je.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(e){if(!e)return!1;var t=Je.playbacks,n=t.findIndex((function(t){return t.prototype.name===e}));return!(n<0||(t.splice(n,1),Je.playbacks=t,0))}},{key:"clearPlugins",value:function(){Je.plugins={}}},{key:"clearPlaybacks",value:function(){Je.playbacks=[]}}]),e}()),st=ge().replace(/\/[^/]+$/,""),ot=function(e){R(n,e);var t=M(n);function n(e){var i;w(this,n),i=t.call(this,e);var r={playerId:pe(""),persistConfig:!0,width:640,height:360,baseUrl:st,allowUserInteraction:J.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};i._options=X.extend(!0,r,e),i.options.sources=i._normalizeSources(e),i.options.chromeless||(i.options.allowUserInteraction=!0),i.options.allowUserInteraction||(i.options.disableKeyboardShortcuts=!0),i._registerOptionEventListeners(i.options.events),i._coreFactory=new tt(O(i));var a=i._getParentElement(i.options);return a&&i.attachTo(a),i}return I(n,[{key:"loader",get:function(){return this._loader||(this._loader=new at(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:Le.PLAYER_READY,onResize:Le.PLAYER_RESIZE,onPlay:Le.PLAYER_PLAY,onPause:Le.PLAYER_PAUSE,onStop:Le.PLAYER_STOP,onEnded:Le.PLAYER_ENDED,onSeek:Le.PLAYER_SEEK,onError:Le.PLAYER_ERROR,onTimeUpdate:Le.PLAYER_TIMEUPDATE,onVolumeUpdate:Le.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:Le.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(e){var t=e.parentId,n=e.parent;return t?document.querySelector(t):n}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,Le.CORE_READY,this._onReady),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,Le.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,Le.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,Le.CONTAINER_PLAY,this._onPlay),this.listenTo(e,Le.CONTAINER_PAUSE,this._onPause),this.listenTo(e,Le.CONTAINER_STOP,this._onStop),this.listenTo(e,Le.CONTAINER_ENDED,this._onEnded),this.listenTo(e,Le.CONTAINER_SEEK,this._onSeek),this.listenTo(e,Le.CONTAINER_ERROR,this._onError),this.listenTo(e,Le.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,Le.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,Le.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(t).length>0;return i&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(Le.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(Le.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(Le.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(Le.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(Le.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(Le.PLAYER_PLAY,t)}},{key:"_onPause",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(Le.PLAYER_PAUSE,t)}},{key:"_onStop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(Le.PLAYER_STOP,this.getCurrentTime(),e)}},{key:"_onEnded",value:function(){this.trigger(Le.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(Le.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(Le.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(Le.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.play(e),this}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.pause(e),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.stop(e),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),n}(Oe);Object.assign(ot.prototype,ze);var lt=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return I(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),n}(Oe);Object.assign(lt.prototype,ze),lt.extend=function(e){return le(lt,e)},lt.type="container";var ut=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i}return I(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),n}(Oe);Object.assign(ut.prototype,ze),ut.extend=function(e){return le(ut,e)},ut.type="core";var ct=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return I(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),n}(We);Object.assign(ct.prototype,ze),ct.extend=function(e){return le(ct,e)},ct.type="container";var dt={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};dt.ogv=dt.ogg,dt["3gp"]=dt["3gpp"];var ht={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},pt=Object.keys(ht).reduce((function(e,t){return[].concat(F(e),F(ht[t]))}),[]),ft={code:"unknown",message:"unknown"},gt=function(e){R(n,e);var t=M(n);function n(){var e;w(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];(e=t.call.apply(t,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._playheadMovingCheckEnabled=!e.options.disablePlayheadMovingCheck,e._setupSrc(e.options.src),e._playheadMovingCheckInterval=e.options.playheadMovingCheckInterval||500,e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var s,o=e.options.playback,l=o.preload||(J.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?s=e.options.poster:"string"==typeof e.options.poster.url&&(s=e.options.poster.url)),X.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:s,preload:l||"metadata",crossOrigin:o.crossOrigin,"x-webkit-playsinline":o.playInline}),(o.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),o.playInline&&e.$el.attr({playsinline:"playsinline"}),o.crossOrigin&&e.$el.attr({crossorigin:o.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],o.externalTracks&&e._setupExternalTracks(o.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return I(n,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=n._mimeTypesForUrl(e,ht,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||pt.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting",enterpictureinpicture:"_onEnterPiP",leavepictureinpicture:"_onExitPiP"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isPiPActive",get:function(){return this.el===document.pictureInPictureElement}},{key:"isLive",get:function(){return this.getPlaybackType()===Xe.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"sourceMedia",get:function(){return this._src}},{key:"configure",value:function(e){B(L(n.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&we.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};J.isMobile&&ye.options.recycleVideo&&(t.element=this.el),me(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"load",value:function(e){this._setupSrc(e)}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==Xe.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===Xe.VOD||this.getPlaybackType()===Xe.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Le.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?Xe.AOD:Xe.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?Xe.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying()||this.el._consented)B(L(n.prototype),"consent",this).call(this,e);else{var i=function i(){t.el.removeEventListener("loadedmetadata",i,!1),t.el.removeEventListener("error",i,!1),t.el._consented=!0,B(L(n.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){var e=this;this.trigger(Le.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();return t&&t.catch&&t.catch((function(t){return we.warn(e.name,"HTML5 play failed",t)})),t}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&this._playheadMovingCheckEnabled&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),this._playheadMovingCheckInterval))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(Le.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(Le.PLAYBACK_ENDED,this.name)}},{key:"_onEnterPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_ENTER,this.name)}},{key:"_onExitPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_EXIT,this.name)}},{key:"enterPiP",value:function(){var e=this;this.el.requestPictureInPicture().then((function(){we.info(e.name,"enter PIP success")})).catch((function(t){we.warn(e.name,"enter PIP failed",t)}))}},{key:"exitPiP",value:function(){var e=this;document.exitPictureInPicture().then((function(){we.info(e.name,"exit PIP success")})).catch((function(t){we.warn(e.name,"exit PIP failed",t)}))}},{key:"_handleBufferingEvents",value:function(){var e=this._loadStarted&&!this.el.ended&&!this._stopped,t=this.el.readyState<this.el.HAVE_FUTURE_DATA,n=!this.el.ended&&!this.el.paused&&!this._playheadMoving,i=e&&t;this._playheadMovingCheckEnabled&&(i=i||e&&n),this._isBuffering!==i&&(this._isBuffering=i,i?this.trigger(Le.PLAYBACK_BUFFERING,this.name):this.trigger(Le.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||ft,t=e.code,n=e.message,i=t===ft.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?Ye.Levels.WARN:Ye.Levels.FATAL});i?we.warn(this.name,"HTML5 unknown error: ",r):this.trigger(Le.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),this.$el.off("contextmenu"),B(L(n.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,ye.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(Le.PLAYBACK_DVR,e),this.trigger(Le.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(we.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=he();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(Le.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(F(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(Le.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var t=n._mimeTypesForUrl(e,dt,this.options.mimeType);return 0===t.length&&(t=n._mimeTypesForUrl(e,ht,this.options.mimeType)),(t[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(Le.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(Le.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(Le.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===n.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(t){return{id:e++,name:t.label,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(fe(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(Le.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return je('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=Ke.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}]),n}(Xe);gt._mimeTypesForUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=n||i&&t[i.toLowerCase()]||[];return r.constructor===Array?r:[r]},gt._canPlay=function(e,t,n,i){var r=gt._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},gt.canPlay=function(e,t){return gt._canPlay("audio",ht,e,t)||gt._canPlay("video",dt,e,t)};var vt=function(e){R(n,e);var t=M(n);function n(){return w(this,n),t.apply(this,arguments)}return I(n,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Le.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return Xe.AOD}}]),n}(gt);vt.canPlay=function(e,t){return gt._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};var mt=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e)).el.src=e.src,i}return I(n,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return Xe.NO_OP}},{key:"render",value:function(){var e=Ke.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(Le.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(Le.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(Le.PLAYBACK_ERROR,{message:t},this.name)}}]),n}(Xe);mt.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var yt=function(e){R(n,e);var t=M(n);function n(){var e;w(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._noiseFrameNum=-1,e}return I(n,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=Ke.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(Le.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,s=0,o=0,l=0;l<r;){if(s<0)s=a*Math.random(),o=255*Math.pow(Math.random(),.4)<<24;s-=1,e[l++]=o}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=ae((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(se(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),n}(Xe);yt.canPlay=function(e){return!0};var bt=function(e){R(n,e);var t=M(n);function n(e){var i;return w(this,n),(i=t.call(this,e))._initializeMessages(),i}return I(n,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||ve()}},{key:"_initializeMessages",value:function(){this._messages=X.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não suporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}]),n}(ut),Et=function(e){R(n,e);var t=M(n);function n(){return w(this,n),t.apply(this,arguments)}return I(n,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}}]),n}(ut),At="0.7.1";at.registerPlugin(bt),at.registerPlugin(Et),at.registerPlayback(yt),at.registerPlayback(mt),at.registerPlayback(vt),at.registerPlayback(gt);var _t,Tt,kt,St,wt,Ct={Player:ot,Events:Le,Browser:J,ContainerPlugin:lt,UIContainerPlugin:ct,CorePlugin:ut,UICorePlugin:qe,Playback:Xe,Container:$e,Core:Qe,PlayerError:Ye,Loader:at,BaseObject:Oe,UIObject:We,Utils:Ee,HTML5Audio:vt,HTML5Video:gt,HTMLImg:mt,Log:we,Styler:Ke,version:At,template:je,$:X},It=Object.freeze({__proto__:null,$:X,BaseObject:Oe,Browser:J,Container:$e,ContainerPlugin:lt,Core:Qe,CorePlugin:ut,Events:Le,HTML5Audio:vt,HTML5Video:gt,HTMLImg:mt,Loader:at,Log:we,Playback:Xe,Player:ot,PlayerError:Ye,Styler:Ke,UIContainerPlugin:ct,UICorePlugin:qe,UIObject:We,Utils:Ee,default:Ct,template:je,version:At});J.isCrawlerBot=(_t=window.navigator.userAgent,Tt=/Applebot/i.test(_t),kt=/YandexBot|YandexRenderResourcesBot/i.test(_t),St=/Googlebot|AdsBot-Google/i.test(_t),wt=/BingPreview|bingbot/i.test(_t),Tt||St||kt||wt),J.supportsFakeLocation=/puffin/i.test(navigator.userAgent),J.supportsTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,J.isHybridDevice=J.supportsTouchEvents&&!J.isMobile,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(n[a]===e)return!0;a++}return!1}}),Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Dt=function(){function e(){a(this,e)}return o(e,null,[{key:"s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"generate",value:function(){return"".concat(this.s4()+this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4()).concat(this.s4()).concat(this.s4())}}]),e}(),Rt=function(e){try{if("object"===r(e))return JSON.stringify(e)}catch(e){}return e};function Lt(e,t){return"".concat(e).concat(t>1?"s":"")}var Pt=Ee.formatTime,Ot=function(e){return e&&"function"==typeof e.getTime?Math.trunc(e.getTime()/1e3):NaN};var xt=!J.isChrome&&!J.isChromecast&&!J.isSmartTvEnvironment,Mt="playback.video.globo.com/v4/video-session",Nt="playback2.video.globo.com/v4/video-session",Bt="playback.video.dev.globoi.com/v4/video-session",Ut="internal-playback.backstage.globoi.com/internal/v4/video-session",Ft="internal-playback.backstage.dev.globoi.com/internal/v4/video-session",Vt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.httpOnly=t,this.protocol="http".concat(t?"":"s"),this.customEnv=n}return o(e,[{key:"blackVideoUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mp4")}},{key:"blackVideoStreamingUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.m3u8")}},{key:"blackDashUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mpd")}},{key:"browserReportScript",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/cdn/libs/browser-report/3.5.0/browser-report.min.js")}},{key:"googleImaSdkUrl",get:function(){return"".concat(this.protocol,"://imasdk.googleapis.com/js/sdkloader/ima3_dai.js")}},{key:"googleDaiSSBUrlTemplate",get:function(){return"".concat(this.protocol,"://dai.google.com/linear/v1/hls/event/<%= ASSET_KEY %>/stream")}},{key:"googleAnalyticsTagScript",get:function(){return"".concat(this.protocol,"://www.googletagmanager.com/gtag/js")}}],[{key:"isInternal",get:function(){return/(ef(-.*)?|publish\.api\.video|player)(\.qa01|\.local|\.dev)?\.globoi\.com$/.test(location.hostname)}},{key:"isLocalhost",get:function(){return["localhost","127.0.0.1"].includes(location.hostname)}},{key:"isGloboiDomain",get:function(){return/\.globoi\.com$/.test(location.hostname)}},{key:"isGloboDomain",get:function(){return!this.isInternal&&/\.globo\.com$/.test(location.hostname)}},{key:"playerId",get:function(){return this._playerId||(this._playerId=Dt.generate()),this._playerId}},{key:"hashQueryString",get:function(){var e="&version=".concat("1.49.0"),t="hash?".concat("resource_id=<%= resourceId %>").concat("<%= callback ? '&callback=' + callback : '' %>").concat(e).concat("&player=<%= player %>").concat("&tz=<%= tz %>").concat("&cdn=<%= cdn %>").concat("&profile=<%= profile %>").concat("<% if (flatUrl) { %>&flat_url=true<% } %>");return xt&&(t+="&ts=<%= ts %>"),t}},{key:"get",value:function(t,n,i){return"qa1"===t&&(t="dev"),new e[t=e.isInternal?"dev"===t?"internalDev":"internal":t||"prod"](n,i)}}]),e}();Vt.local=Ee.extend(Vt,{get name(){return"local"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://").concat(Mt)},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Nt)},get hashTemplate(){return je("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Vt.hashQueryString))},get playlistTemplate(){return je("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return je("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Vt.dev=Ee.extend(Vt,{get name(){return"dev"},get securityHost(){return"".concat(this.protocol,"://security.video.dev.globoi.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://").concat(Bt)},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Bt)},get hashTemplate(){return je("".concat(this.protocol,"://security.video.dev.globoi.com/videos/<%= videoId %>/").concat(Vt.hashQueryString))},get playlistTemplate(){return je("".concat(this.protocol,"://api.globovideos.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return je("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Vt.internalDev=Ee.extend(Vt,{get name(){return"internalDev"},get securityHost(){return"".concat(this.protocol,"://api.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://").concat(Ft)},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Ft)},get hashTemplate(){return je("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(Vt.hashQueryString))},get playlistTemplate(){return je("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return je("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Vt.internal=Ee.extend(Vt,{get name(){return"internal"},get securityHost(){return"".concat(this.protocol,"://api.video.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://").concat(Ut)},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Ut)},get hashTemplate(){return je("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(Vt.hashQueryString))},get playlistTemplate(){return je("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return je("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Vt.prod=Ee.extend(Vt,{get name(){return"prod"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://playback.video.globo.com/v4/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://").concat(Nt)},get hashTemplate(){return je("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Vt.hashQueryString))},get playlistTemplate(){return je("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return je("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Vt.custom=Ee.extend(Vt.prod,{get name(){return"custom"},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v4/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://").concat(Nt)}});var Ht=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.options=n,this.id=t.id,this.title=t.title,this.kind=t.kind,this.program=t.program,this.channel=t.channel,this.category=t.category,this.createdAt=t.created_at,this.exhibitedAt=t.exhibited_at,this.programId=t.program_id,this.channelId=t.channel_id,this.duration=t.duration,this.serviceId=t.service_id,this.providerId=t.provider_id,this.providerUrl=t.provider_url,this.type=t.type,this.affiliate=t.affiliate,this.geofencing=!!t.geofencing,this.isSubscriberOnly=!!t.subscriber_only,this.encrypted=!!t.encrypted,this.isArchived=t.archived,this.urlForConsumption=t.url_for_consumption,this.adult=t.adult,this.contentRating=t.content_rating,this.contentRatingCriteria=t.content_rating_criteria,this.isSelfRated=t.self_rated,this.verifyContentRating=t.verify_content_rating,this.maxHeight=t.max_height,this.codec=t.codec,this.adUnit=t.ad_unit,this.adCustomData=t.ad_custom_data,this.adAccountId=t.ad_account_id,this.adCmsId=t.ad_cms_id,this.cuepoints=t.cuepoints,this.rawData=t,this.rawData.videos=[t],this.selectedLevel=n.selectedLevel,this.preferredLevel=n.preferredLevel,this.preferredCDN=n.preferredCDN,this.posterImageUrls=this.createPosterImageUrl(),this.drm=e.getDRMProtocol()}return o(e,[{key:"isLive",get:function(){return"Live"===this.type}},{key:"posterTemplate",get:function(){var e;return null===(e=this.options.env)||void 0===e?void 0:e.posterTemplate}},{key:"createPosterImageUrl",value:function(){var e=this,t=this.posterTemplate;if(t){var n=Number(this.id)%4+1,i={};return[240,360,720].forEach((function(r){i[r]=t({domainNumber:n,size:"x".concat(r),videoId:e.id})})),i}}}],[{key:"getDRMProtocol",value:function(){var t=(e.overrides||{}).getDRMProtocol;return"function"==typeof t?t():J.isSmartTvEnvironment?"playready":e.getDesktopDRMProtocol()}},{key:"getDesktopDRMProtocol",value:function(){return J.isSafari||J.isiOS?"fairplay":J.isChrome||J.isFirefox||J.isChromecast||J.isEdge?"widevine":"playready"}},{key:"getPlayerType",value:function(){var t=(e.overrides||{}).getPlayerType;return"function"==typeof t?t():J.isMobile?J.isAndroid?J.preventUsingCookies?"android_flat":"android":J.isiOS?"safari_mobile":J.isWindowsPhone?"windows_phone":"html5":J.isChromecast?"chromecast":J.isSafari?"safari":J.preventUsingCookies?"desktop_flat":"desktop"}}]),e}(),jt=function(e,t){var n=t+1-e.toString().length;return new Array(Math.max(0,n)).join("0")+e},Kt="0123456789abcdef",Gt=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=Kt.charAt(i>>>4&15)+Kt.charAt(15&i)}return t},Wt=function(){return new Date},Yt=function(){return Wt().getTime()},zt=function(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(t){return!(t&&void 0===(e=e[t]))}))?e:n},qt=function(){var e=-Wt().getTimezoneOffset(),t=Math.abs(e)/60,n=Math.abs(e)%60;return"".concat(0===e?"":e>0?"+":"-").concat(jt(t,2),":").concat(jt(n,2))},$t=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?window.unescape(t[2]):null},Xt=function(e){var t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},n=function(e,n,i,r,a,s){return t((o=t(t(n,e),t(r,s)))<<(l=a)|o>>>32-l,i);var o,l},i=function(e,t,i,r,a,s,o){return n(t&i|~t&r,e,t,a,s,o)},r=function(e,t,i,r,a,s,o){return n(t&r|i&~r,e,t,a,s,o)},a=function(e,t,i,r,a,s,o){return n(t^i^r,e,t,a,s,o)},s=function(e,t,i,r,a,s,o){return n(i^(t|~r),e,t,a,s,o)};return function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var o=1732584193,l=-271733879,u=-1732584194,c=271733878,d=0;d<e.length;d+=16){var h=o,p=l,f=u,g=c;o=i(o,l,u,c,e[d+0],7,-680876936),c=i(c,o,l,u,e[d+1],12,-389564586),u=i(u,c,o,l,e[d+2],17,606105819),l=i(l,u,c,o,e[d+3],22,-1044525330),o=i(o,l,u,c,e[d+4],7,-176418897),c=i(c,o,l,u,e[d+5],12,1200080426),u=i(u,c,o,l,e[d+6],17,-1473231341),l=i(l,u,c,o,e[d+7],22,-45705983),o=i(o,l,u,c,e[d+8],7,1770035416),c=i(c,o,l,u,e[d+9],12,-1958414417),u=i(u,c,o,l,e[d+10],17,-42063),l=i(l,u,c,o,e[d+11],22,-1990404162),o=i(o,l,u,c,e[d+12],7,1804603682),c=i(c,o,l,u,e[d+13],12,-40341101),u=i(u,c,o,l,e[d+14],17,-1502002290),l=i(l,u,c,o,e[d+15],22,1236535329),o=r(o,l,u,c,e[d+1],5,-165796510),c=r(c,o,l,u,e[d+6],9,-1069501632),u=r(u,c,o,l,e[d+11],14,643717713),l=r(l,u,c,o,e[d+0],20,-373897302),o=r(o,l,u,c,e[d+5],5,-701558691),c=r(c,o,l,u,e[d+10],9,38016083),u=r(u,c,o,l,e[d+15],14,-660478335),l=r(l,u,c,o,e[d+4],20,-405537848),o=r(o,l,u,c,e[d+9],5,568446438),c=r(c,o,l,u,e[d+14],9,-1019803690),u=r(u,c,o,l,e[d+3],14,-187363961),l=r(l,u,c,o,e[d+8],20,1163531501),o=r(o,l,u,c,e[d+13],5,-1444681467),c=r(c,o,l,u,e[d+2],9,-51403784),u=r(u,c,o,l,e[d+7],14,1735328473),l=r(l,u,c,o,e[d+12],20,-1926607734),o=a(o,l,u,c,e[d+5],4,-378558),c=a(c,o,l,u,e[d+8],11,-2022574463),u=a(u,c,o,l,e[d+11],16,1839030562),l=a(l,u,c,o,e[d+14],23,-35309556),o=a(o,l,u,c,e[d+1],4,-1530992060),c=a(c,o,l,u,e[d+4],11,1272893353),u=a(u,c,o,l,e[d+7],16,-155497632),l=a(l,u,c,o,e[d+10],23,-1094730640),o=a(o,l,u,c,e[d+13],4,681279174),c=a(c,o,l,u,e[d+0],11,-358537222),u=a(u,c,o,l,e[d+3],16,-722521979),l=a(l,u,c,o,e[d+6],23,76029189),o=a(o,l,u,c,e[d+9],4,-640364487),c=a(c,o,l,u,e[d+12],11,-421815835),u=a(u,c,o,l,e[d+15],16,530742520),l=a(l,u,c,o,e[d+2],23,-995338651),o=s(o,l,u,c,e[d+0],6,-198630844),c=s(c,o,l,u,e[d+7],10,1126891415),u=s(u,c,o,l,e[d+14],15,-1416354905),l=s(l,u,c,o,e[d+5],21,-57434055),o=s(o,l,u,c,e[d+12],6,1700485571),c=s(c,o,l,u,e[d+3],10,-1894986606),u=s(u,c,o,l,e[d+10],15,-1051523),l=s(l,u,c,o,e[d+1],21,-2054922799),o=s(o,l,u,c,e[d+8],6,1873313359),c=s(c,o,l,u,e[d+15],10,-30611744),u=s(u,c,o,l,e[d+6],15,-1560198380),l=s(l,u,c,o,e[d+13],21,1309151649),o=s(o,l,u,c,e[d+4],6,-145523070),c=s(c,o,l,u,e[d+11],10,-1120210379),u=s(u,c,o,l,e[d+2],15,718787259),l=s(l,u,c,o,e[d+9],21,-343485551),o=t(o,h),l=t(l,p),u=t(u,f),c=t(c,g)}return[o,l,u,c]}(function(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}(function(e,t){var n,i,r="",a=-1;for(e+=t.substr(1,8);++a<e.length;)n=e.charCodeAt(a),i=a+1<e.length?e.charCodeAt(a+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((1023&n)<<10)+(1023&i),a++),n<=127?r+=String.fromCharCode(n):n<=2047?r+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r}(e,"=0xAC10FD"))},Zt={applySizeClass:function(e,t,n){if(t&&"number"==typeof t){if(e.removeClass("w960 w640 w540 w480 w360 h720 h1080"),n&&"number"==typeof n){var i=n<=720?"h720":"h1080";e.addClass(i)}t<=360?e.addClass("w360"):t<=480?e.addClass("w480"):t<540?e.addClass("w540"):t<=640?e.addClass("w640"):e.addClass("w960")}},toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},embedScript:function(e){var t=X.Deferred(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){t.resolve()},n.onerror=function(e){t.reject(e)},document.head.appendChild(n),t.promise()},get:zt,getCookie:$t,getCurrentDate:Wt,getCurrentTime:Yt,getExpiresDateInGMT:function(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},getHostname:function(){return location.hostname},getHostAndPathName:function(){var e=(location.pathname||"").split("/")||[];return location.hostname+(e.length>0?"/".concat(e[1]):"")},isNaN:function(e){return e!=e},iso8601TimezoneOffset:qt,loadUrlAsImage:function(e){var t=new Image;return t.src=e,t},now:function(){return window.performance&&window.performance.now&&performance.now()||Date.now()},percent:function(e,t){return 0===e?e:e/t*100},toDurationString:function(e){var t,n=e/6e4,i=[0,1,2,3,4,5,7,10];for(t=0;t<i.length&&!(n<i[t]);t++);return t<i.length?"".concat(jt(i[t-1],2),":0").concat(0===t?0:1," - ").concat(jt(i[t],2),":00"):"10:01 +"},secondsToMillis:function(e){return 1e3*e>>0},copyToClipboard:function(e,t){if(t){var n=X('<textarea style="opacity:0" class="copytextarea"/>');n.text(e),t.append(n[0]);var i=t.find(".copytextarea")[0],r=document.activeElement;i.focus(),i.select();var a=document.execCommand("copy");return n.remove(),r.focus(),a}},mergePlugins:function(e,t){var n=[];return e.concat(t).filter((function(e){if(!e)return!1;var t=e.prototype.name,i=-1===n.indexOf(t);return i&&n.push(t),i}))},hexGrf:function(e){return Gt(Xt(e))}},Qt={jsonp:function(e){var t=new X.Deferred;e.callbackName=e.callbackName||"json_callback",e.timeout=e.timeout||15e3,window[e.callbackName]=function(e){Qt.isErrorObject(e)?t.reject(e):t.resolve(e)};var n=X("head")[0],i=document.createElement("script");return i.setAttribute("src",e.url),i.setAttribute("async","async"),i.onload=i.onreadystatechange=function(t){i.readyState&&!/loaded|complete/.test(i.readyState)||(e.timeoutId&&window.clearTimeout(e.timeoutId),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=void 0)},i.onerror=function(){t.reject({error:!0,message:"jsonp load error"})},n.insertBefore(i,n.firstChild),e.error&&(e.timeoutId=window.setTimeout(e.error,e.timeout)),t.promise()},isErrorObject:function(e){return e&&e.http_status_code&&200!==e.http_status_code}},Jt={isFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.webkitDisplayingFullscreen},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}},en=new Set,tn=function(){function e(){a(this,e),this.loadScriptsIntervalId=null,this.loadScriptsAttempts=5}return o(e,[{key:"ready",value:function(){return!Array.from(en).filter((function(e){return void 0===zt(window,e,void 0)})).length}},{key:"isAvailable",value:function(){var e=this,t=new X.Deferred;return this.loadScriptsIntervalId=setInterval((function(){e.ready()?(clearInterval(e.loadScriptsIntervalId),t.resolve()):e.loadScriptsAttempts--,e.loadScriptsAttempts||(clearInterval(e.loadScriptsIntervalId),t.reject())}),200),t.promise()}}]),e}(),nn=window.WM&&window.WM.version||"legacy_api",rn=function(e){return"object"===r(e.playerExperiments)},an=function(e,t){return e.playerExperiments&&e.playerExperiments[t]},sn=function(){function e(){a(this,e)}return o(e,null,[{key:"keyspaceFor",value:function(e){return"wm.player.".concat(e)}},{key:"load",value:function(e,t){return this.loadRaw(this.keyspaceFor(e),t)}},{key:"loadRaw",value:function(e,t){if(J.hasLocalstorage&&localStorage[e])return t?t(localStorage[e]):localStorage[e]}},{key:"store",value:function(e,t){return this.storeRaw(this.keyspaceFor(e),t)}},{key:"storeRaw",value:function(e,t){if(J.hasLocalstorage)try{return localStorage[e]=t,!0}catch(e){return!1}return!1}}]),e}(),on={code:"default-error",clientCode:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0},ln={DEFAULT_ERROR:on,AUTH_REQUIRED:i(i({},on),{},{code:"login-required",clientCode:"login-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:i(i({},on),{},{code:"player-type-not-supported",clientCode:"webmedia-service-error",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:i(i({},on),{},{code:"geo-fencing",clientCode:"geo-fencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:i(i({},on),{},{code:"geo-block",clientCode:"geo-block",description:"This video cannot be played in the current region.",reportAs:"INFO"}),PLAYER_NOT_RECOGNIZED:i(i({},on),{},{code:"PNR",clientCode:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:i(i({},on),{},{code:"resource-load-error",clientCode:"webmedia-service-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:i(i({},on),{},{code:"location-unavailable",clientCode:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:i(i({},on),{},{code:"not-allowed-domain",clientCode:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:i(i({},on),{},{code:"video-not-found",clientCode:"video-not-found",description:"Content not available.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:i(i({},on),{},{code:"playlist-load-error",clientCode:"webmedia-service-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:i(i({},on),{},{code:"restricted-content-error",clientCode:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:i(i({},on),{},{code:"simultaneous-access-exceeded",clientCode:"simultaneous-access-exceeded",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:i(i({},on),{},{code:"streaming-pause-time-expired",clientCode:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:i(i({},on),{},{code:"user-not-authorized",clientCode:"user-not-authorized",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:i(i({},on),{},{code:"unsupported-browser",clientCode:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:i(i({},on),{},{code:"unsupported-mobile-device",clientCode:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:i(i({},on),{},{code:"timestamp-error",clientCode:"webmedia-service-error",description:"Timestamp error.",reportAs:"INFO"})},un=function(){function e(){a(this,e)}return o(e,null,[{key:"getLocation",value:function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(i({error:e},ln.LOCATION_UNAVAILABLE))})):t(ln.LOCATION_UNAVAILABLE)}))}}]),e}(),cn=function(){function e(){a(this,e)}return o(e,null,[{key:"params",get:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1),a={};e=n.exec(r);)a[i(e[1]).toLowerCase()]=i(e[2]);return a}}]),e}(),dn=function(){var e=0,t=cn.params.s||"",n=t.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else t&&(e=parseInt(t,10));return e},hn=function(){function e(){a(this,e)}return o(e,null,[{key:"uid",get:function(){var e="user.uid",t=sn.load(e);return t||(t=Dt.generate(),sn.store(e,t)),t}},{key:"getProviderCookieName",value:function(e){return e?"WMPTOKEN_".concat(e):"GLBID"}},{key:"hasGlbId",value:function(){var e=$t("GLBID");return"string"==typeof e&&e.length>10}},{key:"hasTokenForProvider",value:function(e){if(!e)return this.hasGlbId();var t=this.getProviderCookieName(e);return!!t&&"string"==typeof $t(t)}},{key:"isExperimentEnabled",value:function(e,t){var n="experiment.".concat(e),i=sn.load(n,parseFloat);return i||(i=Math.random(),sn.store(n,i)),i<=t}}]),e}(),pn={hasPlayerElement:function(e){if(e&&e.childNodes.length>0){var t=Array.prototype.slice.call(e.childNodes).find((function(e){return"DIV"===e.tagName&&-1!==e.id.indexOf("wp3-player-")}));return t&&!!document.getElementById(t.id)}return!1},hasChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=e.id||"function"==typeof e.attr&&e.attr("id"),i="#".concat(n," ").concat(t),r=!!document.querySelectorAll(i).length;return r}},isIframe:function(){return window.top!==window}},fn=new(function(){function e(){a(this,e),this.sessions={}}return o(e,[{key:"startSession",value:function(e){if(e){var t=this.sessions[e]||{};this.sessions[e]=i(i({},t),{},{sessionId:Dt.generate()})}}},{key:"getVideoSessionId",value:function(e){if(this.sessions[e])return this.sessions[e].sessionId}},{key:"storeLockId",value:function(e,t){this.sessions[e]&&t&&(this.sessions[e].lockId=t)}},{key:"getLockId",value:function(e){if(this.sessions[e])return this.sessions[e].lockId}}]),e}()),gn="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO=document.createElement("video"),window.WM_PLAYER_VIDEO_TAG_TEST_MUTE=document.createElement("video");var vn=function(){function e(){a(this,e),this._deferred=new X.Deferred,this.playerHasConsent=!1,this._setBrowserFlags()}return o(e,[{key:"canAutoPlayMuted",get:function(){return this.isAvailable(!0)}},{key:"canAutoPlayUnmuted",get:function(){return this.isAvailable(!1)}},{key:"isAutoPlayMutedAllowed",value:function(e){return this.isAvailable(!0)&&e.autoPlay}},{key:"allowAutoplay",value:function(e){return e.autoPlay&&this.canAutoPlayMuted||J.isSmartTvEnvironment&&e.autoPlay||J.isChromecast}},{key:"onAutoplayAvailable",value:function(e,t,n){var i=this;return this._deferred.then((function(){i.allowAutoplay(t)?e():null==n||n()}))}},{key:"isAvailable",value:function(e){return!J.isCrawlerBot&&(J.isSmartTvEnvironment||this.playerHasConsent||this.isAllowedWithAudio||e&&this.isAllowedWithoutAudio)}},{key:"consent",value:function(){this.playerHasConsent=!0}},{key:"_setBrowserFlags",value:function(){var e=this;if(J.isSmartTvEnvironment||J.isChromecast)this._deferred.resolve();else{var t=this._createVideoElement(gn,!1),n=this._createVideoElement(gn,!0);J.isMobile?this.isAllowedWithAudio=!1:this._setFlag(t,"isAllowedWithAudio"),this._setFlag(n,"isAllowedWithoutAudio"),setTimeout((function(){return e._deferred.resolve()}),5e3)}}},{key:"_setFlag",value:function(e,t){var n=this,i=e.play();i?i.then((function(){n[t]=!0}),(function(){n[t]=!1})).then((function(){return n._resolve()})):(this[t]=!J.isMobile,this._resolve())}},{key:"_resolve",value:function(){"isAllowedWithAudio"in this&&"isAllowedWithoutAudio"in this&&this._deferred.resolve()}},{key:"_createVideoElement",value:function(e,t){var n=t?window.WM_PLAYER_VIDEO_TAG_TEST_MUTE:window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO;return n.src=e,n.muted=t,n.playsInline=!0,n}}]),e}(),mn=new vn,yn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n[e]&&n[e](t)},bn=function(e,t){return t&&"function"==typeof t.getTime?Math.trunc(t.getTime()/1e3+e):NaN},En=function(e){var t=e.getCurrentTime(),n=e.getProgramDateTime?new Date(e.getProgramDateTime()):null;return bn(t,n)},An=function(e,t){return En(e)-t},_n=function(e,t){return e.getCurrentTime()-An(e,t)},Tn=/^\d+$/,kn=Object.freeze({VIDEO_ID:"application/vnd.globo.videoid"}),Sn=function(e,t){return Tn.test(e)||t===kn.VIDEO_ID},wn=i(i({},Zt),{},{Ajax:Qt,getExperimentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!rn(e))return[];var t=Object.keys(e.playerExperiments)||[],n=t.map((function(t){var n=e.playerExperiments[t];return n&&n.alternative||""}))||[];return n=n.filter((function(e){return""!==e}))},getExperimentAlternative:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!rn(e))return"";var n=an(e,t);return n&&n.alternative||""},Fullscreen:Jt,getDeviceType:function(){return J.isChromecast?"cast":J.isSmartTvEnvironment?"tv":J.isMobile?"mobile":"desktop"},getPlatformName:function(e){return"web-".concat(e)},isNaN:isNaN,LocalStorage:sn,Location:un,QueryString:cn,toQueryString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return e[t]||""===e[t]||0===e[t]},n=encodeURIComponent,i=Object.keys(e);return i.filter(t).map((function(t){return"".concat(n(t),"=").concat(n(e[t]))})).join("&")},seekStringToSeconds:dn,rstr2hex:Gt,rstr2b64:function(e){for(var t="",n=e.length,i=0;i<n;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),a=0;a<4;a++)8*i+6*a>8*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-a)&63);return t},zeroPad:jt,User:hn,Uid:Dt,registerGlobal:function(e){en.add(e)},GlobalsManager:tn,getUnixTimestamp:Ot,truncateTimeSeconds:function(e){var t=new Date(1e3*e);return t.setSeconds(0,0),Ot(t)},isTimestampOnHashNeeded:xt,getTimeValues:function(e){return Pt(e,!0).split(":").map(Number)},getLiteralTimeValues:function(e,t,n){return{hoursText:e>0?" ".concat(e," ").concat(Lt("hora",e),","):"",minutesText:"".concat(t," ").concat(Lt("minuto",t)),secondsText:"".concat(n," ").concat(Lt("segundo",n))}},DOM:pn,API_VERSION:nn,convertToString:Rt,pluralize:Lt,autoplayManager:mn,session:fn,checkRecoverableError:yn,getTimeFromPosition:bn,getCurrentTime:En,getLiveDifferenceFromTime:An,getPositionFromTime:_n,isVideoId:Sn}),Cn={getStyleFrom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""},n=t||{},i=je(e.toString())(n);return n.playerId&&(i=i.replace(/\#wp3-player-0/g,"#wp3-player-".concat(n.playerId))),X('<style class="clappr-style"></style>').html(i)}},In=o((function e(){a(this,e)}));In.WM_PLAY_REQUESTED="wm:play:requested",In.WM_USER_PLAY_REQUESTED="wm:user:play:requested",In.WM_PLAY_REQUESTED_READY="wm:play:requested:ready",In.CHROMECAST_SCRIPT_ERROR="chromecast:script:error",In.CHROMECAST_SCRIPT_LOADED="chromecast:script:loaded",In.CHROMECAST_API_ERROR="chromecast:api:error",In.CHROMECAST_API_READY="chromecast:api:ready",In.CHROMECAST_INITIALIZE_ERROR="chromecast:initialize:error",In.CHROMECAST_INITIALIZE_SUCCESS="chromecast:initialize:success",In.CHROMECAST_AVAILABLE="chromecast:available",In.CHROMECAST_UNAVAILABLE="chromecast:unavailable",In.CHROMECAST_LAUNCH_REQUEST="chromecast:launch:request",In.CHROMECAST_LAUNCH_ERROR="chromecast:launch:error",In.CHROMECAST_LAUNCH_SUCCESS="chromecast:launch:success",In.CHROMECAST_MEDIA_LOAD_ERROR="chromecast:mediaload:error",In.CHROMECAST_MEDIA_LOAD_SUCCESS="chromecast:mediaload:success",In.CHROMECAST_MEDIA_WATCHING="chromecast:media:watching",In.CHROMECAST_MEDIA_STOP_WATCHING="chromecast:mediastop:watching",In.DID_START_ADS_MANAGER="did:startads:manager",In.ADS_REQUEST_READY="ads:request:ready",In.ADS_REQUEST_ERROR="ads:request:error",In.DFP_MANAGER_LOADED="dfp:manager:loaded",In.DFP_ENABLE="dfp:enable",In.DFP_DISABLE="dfp:disable",In.DFP_AD_LOADED="dfp:ad:loaded",In.DFP_AD_CLOSED="dfp:ad:closed",In.DFP_AD_STARTED="dfp:ad:started",In.DFP_AD_RESUME="dfp:playback:resume",In.DFP_AD_PAUSE="dfp:playback:pause",In.DFP_AD_CLICKED="dfp:ad:clicked",In.DFP_AD_COMPLETED="dfp:ad:completed",In.DFP_AD_SKIPPED="dfp:ad:skipped",In.DFP_AD_NOTSERVED="dfp:ad:notserved",In.DFP_AD_ERROR="dfp:ad:error",In.DFP_AD_METADATA="dfp:metadata",In.DFP_ALL_ADS_COMPLETED="dfp:allads:completed",In.DFP_CONTENT_PAUSE="dfp:content:pause",In.DFP_CONTENT_RESUME="dfp:content:resume",In.DFP_CONTENT_STARTED="dfp:content:started",In.DFP_CONTENT_ENDED="dfp:content:ended",In.DFP_FINISHED="dfp:finished",In.DFP_AD_BREAK_READY="dfp:adbreak:ready",In.DFP_INVALID_AD="dfp:invalid:ad",In.DID_SET_AD_PLAYBACK="did:setad:playback",In.YOUBORA_TIMEMARK="youbora:timemark",In.DID_LOAD_CUEPOINTS="wm:didloadcuepoints",In.DID_REACH_CUEPOINT="wm:didreachcuepoint",In.DID_LOAD_EPG="wm:didloadepg",In.DID_CHANGE_CURRENT_PROGRAM="wm:didchangecurrentprogram",In.WM_STREAMING_DATA_LOADED="wm:streamingdata:loaded",In.WM_VIDEO_METADATA_REQUEST_COMPLETE="wm:videometadata:request:complete",In.WM_VIDEO_METADATA_LOADED="wm:videometadata:loaded",In.WM_VIDEO_METADATA_ERROR="wm:videometadata:error",In.WM_RESOURCE_LOADED="wm:resource:loaded",In.WM_RESOURCE_SELECTED="wm:resource:selected",In.WM_RESOURCE_REQUEST_STATS="wm:resource:request:stats",In.WM_AUTOPLAY_BLOCKED="wm:autoplay:blocked",In.WM_REQUEST_HASH="wm:request:hash",In.WM_HASH_RECEIVED="wm:hash:received",In.WM_RESOURCE_READY="wm:resource:ready",In.WM_RESOURCE_ERROR="wm:resource:error",In.WM_SETTINGS_SHOW="wm:settings:show",In.WM_VOLUME_SHOW="wm:volume:show",In.WM_VOLUME_HIDE="wm:volume:hide",In.WM_MUTED="wm:muted",In.WM_UNMUTED="wm:unmuted",In.WM_SHARE_SHOW="wm:share:show",In.WM_SHARE_HIDE="wm:share:hide",In.WM_SPINNER_START="wm:spinner:start",In.WM_SPINNER_STOP="wm:spinner:stop",In.WM_SETTINGS_HIDE="wm:settings:hide",In.WM_SETTINGS_OPTIONS_CHANGED="wm:settings:options:changed",In.WM_AUDIOSELECTOR_READY="wm:audioselector:ready",In.STREAMSENSE_READY="streamsense:ready",In.WM_SUBTITLE_CHANGED="wm:subtitle:changed",In.WM_SUBTITLE_CONTENT_CHANGED="wm:subtitle:content:changed",In.WM_SUBTITLE_AVAILABLE="wm:subtitle:available",In.WM_AUDIO_CHANGED="wm:audio:changed",In.WM_AUDIO_AVAILABLE="wm:audio:available",In.WM_WROOM_WAITING="wm:waiting:wroom",In.WM_PLAYBACK_CAN_PLAY="wm:playback:canplay",In.WM_PLAYBACK_WILL_PLAY="wm:playback:willplay",In.WM_PIP_ADDED="wm:pip:added",In.WM_PIP_DISCARDED="wm:pip:discarded",In.WM_MASTER_ADDED="wm:master:added",In.WM_MASTER_CHANGED="wm:master:changed",In.WM_PIPTOMASTER="wm:piptomaster",In.WM_MASTERTOPIP="wm:mastertopip",In.WM_STATS_REPORTED="wm:stats:reported",In.WM_LOCATION_AVAILABLE="wm:location:available",In.WM_GA_UNTRACKED_EVENT="wm:ga:untracked:event",In.NETWORK_DISCONNECT="wm:check:connect:ping",In.NETWORK_CHECK_COMPLETED="wm:check:connect:return",In.WILL_CHANGE_SOURCE="willChangeSource",In.WILL_SELECT_FALLBACK_SOURCE="will:select:fallback:source",In.FALLBACK_SOURCE_SELECTED="fallback:source:selected",In.WILL_RENEW_RESOURCE="willRenewResource",In.WM_BITRATE_CAP="wm:bitrate:cap",In.PLAYER_PIP_ADDED="player:pip:added",In.PLAYER_PIP_DISCARDED="player:pip:discarded",In.PLAYER_MASTER_ADDED="player:master:added",In.PLAYER_MASTER_CHANGED="player:master:changed",In.PLAYER_PIPTOMASTER="player:piptomaster",In.PLAYER_CAN_PLAY="player:canplay",In.WILL_SHOW_MODAL_ELEMENT="will:show:mediacontrol:element:modal",In.DID_HIDE_MODAL_ELEMENT="did:hide:mediacontrol:element:modal",In.MEDIACONTROL_MODAL_SHOW="mediacontrol:showmodal",In.MEDIACONTROL_MODAL_HIDE="mediacontrol:hidemodal",In.MEDIACONTROL_KEEPVISIBLE="mediacontrol:keepvisible",In.MEDIACONTROL_ITEMCLICKED="mediacontrol:itemclicked",In.MEDIACONTROL_DOUBLE_TAP="mediacontrol:doubletap",In.MEDIACONTROL_KEYDOWN="mediacontrol:keydown",In.WILL_QUICK_SEEK="will:quickseek",In.WILL_SHOW_QUICK_SEEK_HINT="will:show:quick:seek:hint",In.WILL_HIDE_QUICK_SEEK_HINT="will:hide:quick:seek:hint",In.PLAYER_MEDIACONTROL_SHOW="player:mediacontrol:show",In.PLAYER_MEDIACONTROL_HIDE="player:mediacontrol:hide",In.SKIP_BUTTON_SHOW="skip:button:show",In.SKIP_BUTTON_HIDE="skip:button:hide",In.SKIP_BUTTON_CLICKED="skip:button:clicked",In.STICKY_MODE_ENABLED="sticky:mode:enabled",In.STICKY_MODE_DISABLED="sticky:mode:disabled",In.BACK_BUTTON_CLICKED="back:button:clicked",In.TAP_TO_UNMUTE_CLICKED="taptounmute:clicked",In.TAP_TO_UNMUTE_SHOW="taptounmute:show",In.WILL_AUTO_SKIP_RECAP="will:auto:skip:recap",In.START_DRAGGING_SEEKBAR="start:dragging:seekbar",In.STOP_DRAGGING_SEEKBAR="stop:dragging:seekbar",In.SIMULCAST_PING="simulcastPing",In.SHOW_HEADER_REQUESTED="show:header:requested",In.WILL_SHOW_HEADER="will:show:header",In.DID_SHOW_HEADER="did:show:header",In.CLOSE_HEADER_REQUESTED="close:header:requested",In.WILL_CLOSE_HEADER="will:close:header",In.DID_CLOSE_HEADER="did:close:header",In.WILL_SHOW_DRAWER="will:show:drawer",In.DID_SHOW_DRAWER="did:show:drawer",In.DID_SHOW_DRAWER_HINT="did:show:drawer:hint",In.WILL_HIDE_DRAWER="will:hide:drawer",In.DID_HIDE_DRAWER="did:hide:drawer",In.DID_HIDE_DRAWER_HINT="did:hide:drawer:hint",In.HIDE_DRAWER_REQUESTED="hide:drawer:requested",In.SHOW_DRAWER_REQUESTED="show:drawer:requested",In.DRAWER_HAS_PLACEHOLDER="drawer:has:placeholder",In.SHOW_HEADER_REQUESTED="show:header:requested",In.SYNC_DRAWER_STATE_REQUEST="sync:drawer:state:request",In.SYNC_DRAWER_STATE_RESPONSE="sync:drawer:state:response",In.DID_SHOW_OVERLAY="did:show:overlay",In.DID_HIDE_OVERLAY="did:hide:overlay",In.WILL_RESTART_PLAYBACK="will:restart:playback",In.DID_RESTART_PLAYBACK="did:restart:playback",In.WATCH_SESSION_START="watchsession:start",In.WATCH_SESSION_END="watchsession:end",In.LANGUAGE_MENU_WILL_OPEN="language:menu:will:open",In.LANGUAGE_MENU_WILL_CLOSE="language:menu:will:close",In.WILL_SEND_ENVIRONMENT_REPORT="will:send:environment:report",In.DID_SEND_ENVIRONMENT_REPORT="did:send:environment:report",In.ENVIRONMENT_REPORT_ERROR="error:environment:report",In.ACTING_DRAWER_FOCUSED="acting:drawer:focused",In.ACTING_DRAWER_ENABLED="acting:drawer:enabled",In.ACTING_DRAWER_DISABLED="acting:drawer:disabled";var Dn=window.WM&&window.WM.Settings||{},Rn={hlsMinimumDvrSize:120,playback:{controls:!0,preload:"none",playInline:!0,recycleVideo:J.isMobile},allowLocation:!1,disableVideoTagContextMenu:!0,maxQualityLevel:"max",skipWaitingRoom:!1,playerExperiments:Dn.PlayerExperiments||{}},Ln=wn.session,Pn=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"eventsMapping",get:function(){return Object.assign(v(c(n.prototype),"eventsMapping",this),{onCanPlay:In.PLAYER_CAN_PLAY,onWatchSessionEnded:In.WATCH_SESSION_END})}},{key:"defaultOptions",get:function(){return Rn}},{key:"_addContainerEventListeners",value:function(){v(c(n.prototype),"_addContainerEventListeners",this).call(this);var e=this.core.getCurrentPlayback(),t=this.core.getCurrentContainer();this.listenToOnce(e,In.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(e,In.WM_PLAYBACK_CAN_PLAY,this.onCanPlay),this.listenToOnce(t,In.WATCH_SESSION_END,this.onWatchSessionEnded)}},{key:"onCanPlay",value:function(){this.trigger(In.PLAYER_CAN_PLAY)}},{key:"onWatchSessionEnded",value:function(){this.trigger(In.WATCH_SESSION_END)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.core.createError(e)}},{key:"_onError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.level===Ye.Levels.FATAL){var r=i(i({},t),{},{videoSessionId:Ln.getVideoSessionId(this.options.playerId)});v(c(n.prototype),"_onError",this).call(this,r),this.options.onError&&this.options.onError(r),this.container&&setTimeout((function(){e.container.disableMediaControl(),e.container.stop(),e.container.destroy()}))}}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}},{key:"resize",value:function(e){X(this.element).css({width:e.width,height:e.height}),this.core&&v(c(n.prototype),"resize",this).call(this,e)}}],[{key:"version",get:function(){return"1.49.0"}},{key:"allVersions",get:function(){return{Player:n.version,Clappr:Ct.version}}}]),n}(Ct.Player);if(!window.console){window.console={log:function(){}}}Ct.Log.setLevel(Ct.Log.LEVEL_WARN);var On=window.WM&&window.WM.Settings||{},xn=On&&On.Domains||[],Mn=wn.DOM.isIframe,Nn=function(e){u(n,e);var t=f(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n);var r=i(i({},Rn),e);r.env=Vt.get(r.env,r.httpOnly,r.customEnv),Ht.overrides=r.overrides||{};var s=!1,o=Vt.isLocalhost&&s,l=!Vt.isGloboDomain,u=J.isSafari||J.isiOS||J.isSmartTvEnvironment,c=J.isMobile&&(Mn()||r.isIFrame),d=window.location&&"https:"!==window.location.protocol;return J.preventUsingCookies=(l||u||c||d)&&!o,t.call(this,r)}return o(n,[{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"_renderCustomStyles",value:function(e,t){var n=this;Object.values(t).forEach((function(t){var i=Cn.getStyleFrom(t,{playerId:n.options.playerId});X(e).append(i)}))}}]),n}(Pn);J.supportsFakeLocation=/puffin/i.test(navigator.userAgent),Nn.isAllowedDomain=function(e){return!On.Domains||xn.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Ct;var Bn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Un(){throw new Error("setTimeout has not been defined")}function Fn(){throw new Error("clearTimeout has not been defined")}var Vn=Un,Hn=Fn;function jn(e){if(Vn===setTimeout)return setTimeout(e,0);if((Vn===Un||!Vn)&&setTimeout)return Vn=setTimeout,setTimeout(e,0);try{return Vn(e,0)}catch(t){try{return Vn.call(null,e,0)}catch(t){return Vn.call(this,e,0)}}}"function"==typeof Bn.setTimeout&&(Vn=setTimeout),"function"==typeof Bn.clearTimeout&&(Hn=clearTimeout);var Kn,Gn=[],Wn=!1,Yn=-1;function zn(){Wn&&Kn&&(Wn=!1,Kn.length?Gn=Kn.concat(Gn):Yn=-1,Gn.length&&qn())}function qn(){if(!Wn){var e=jn(zn);Wn=!0;for(var t=Gn.length;t;){for(Kn=Gn,Gn=[];++Yn<t;)Kn&&Kn[Yn].run();Yn=-1,t=Gn.length}Kn=null,Wn=!1,function(e){if(Hn===clearTimeout)return clearTimeout(e);if((Hn===Fn||!Hn)&&clearTimeout)return Hn=clearTimeout,clearTimeout(e);try{Hn(e)}catch(t){try{return Hn.call(null,e)}catch(t){return Hn.call(this,e)}}}(e)}}function $n(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Gn.push(new Xn(e,t)),1!==Gn.length||Wn||jn(qn)}function Xn(e,t){this.fun=e,this.array=t}Xn.prototype.run=function(){this.fun.apply(null,this.array)};var Zn=Bn.performance||{};Zn.now||Zn.mozNow||Zn.msNow||Zn.oNow||Zn.webkitNow,Le.register("PLAYBACK_METADATA_TRACK_CUE_CHANGE");var Qn=function(e){u(n,e);var t=f(n);function n(){var e;a(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60,e.onAddTrack=e.onAddTrack.bind(h(e)),e}return o(n,[{key:"name",get:function(){return"html5"}},{key:"isLive",get:function(){return this.getPlaybackType()===Xe.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"_updateDvr",value:function(e){this.trigger(Le.PLAYBACK_DVR,e),this.trigger(Le.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){var t=e;e<0&&(we.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(Le.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"onAddTrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(){var e,i=A(n.activeCues);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=l({},r.value.key,r.value.data);t.trigger(Le.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,a)}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"destroy",value:function(){this.el.textTracks.removeEventListener("addtrack",this.onAddTrack),v(c(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return v(c(n.prototype),"render",this).call(this),this.el.textTracks.addEventListener("addtrack",this.onAddTrack),this}}]),n}(gt),Jn=/{{deviceId}}/g,ei=function(e,t){return(t?e.replace("https://","http://"):e).replace(Jn,"ZDY4NDM5MDgtMzQ4Mi0zZGU5LThlZDQtYjRiNWM5ZjBmOWU5")},ti=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.drm||{},i=e.selectedResource.contentProtection,r={};return r[n]=ei(i.server,t),{shakaConfiguration:{drm:{servers:{"com.microsoft.playready":r.playready||"","com.widevine.alpha":r.widevine||""}}},fairplay:{server:r.fairplay||"",certificate:i&&i.cert},html5TvsPlayback:r.playready&&{drm:{licenseServerURL:r.playready}},licenseServer:r}},ni=function(e,t,n){return t.loader.playbackPlugins.find((function(t){return t.canPlay(e.toString(),"",n)}))},ii=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=this,a=!J.isChromecast&&t&&t.url,s=e||a||n,o=this.video&&this.video.encrypted,l=J.isiOS&&!o&&Qn.canPlay(s.toString(),"",this.video),u=l?Qn:ni(s,r.options,this.video),c=t&&t.contentProtection,d=o&&c?ti(this.video,r.options.httpOnly):{},h=d.shakaConfiguration&&d.shakaConfiguration.drm||{},p=r.options.shakaConfiguration&&r.options.shakaConfiguration.drm||{},f={drm:i(i({},h),p)},g=i(i(i({},r.options),d),{},{html5TvsPlayback:i(i({},d.html5TvsPlayback||{}),r.options.html5TvsPlayback),shakaConfiguration:i(i(i({},r.options.shakaConfiguration||{}),d.shakaConfiguration||{}),f),autoPlay:!1,isLivePlayback:"live"===r.getPlaybackType(),src:s});return new u(g,r.i18n,r.playerError)},ri=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.customErrors?t.customErrors:ln,a="function"==typeof t.onUnauthorized;return e.code===r.NOT_FOUND.code||"Not found"===e.message?r.NOT_FOUND:e.code===r.SUBSCRIBERS_ONLY.code?(a&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r.SUBSCRIBERS_ONLY):e.code===r.AUTH_REQUIRED.code?(a&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r.AUTH_REQUIRED):e.code===r.GEO_BLOCKED.code?r.GEO_BLOCKED:e.code===r.SIMULTANEOUS_ACCESS.code?r.SIMULTANEOUS_ACCESS:e.code===r.DEVICE_NOT_SUPPORTED.code?r.DEVICE_NOT_SUPPORTED:e.code===r.GEOFENCING.code||400===e.http_status_code&&"SRF"===e.code?r.GEOFENCING:e.code===r.TIMESTAMP_ERROR.code?i(i({},r.TIMESTAMP_ERROR),{},{description:"".concat(r.TIMESTAMP_ERROR.description,", ts: ").concat(Math.trunc(Yt()/1e3))}):e.code===r.LOCATION_UNAVAILABLE.code?r.LOCATION_UNAVAILABLE:e.code===r.RESTRICTED_CONTENT.code?r.RESTRICTED_CONTENT:e.code===r.NOT_ALLOWED_DOMAIN.code?r.NOT_ALLOWED_DOMAIN:e.code===r.UNSUPPORTED_BROWSER.code?r.UNSUPPORTED_BROWSER:e.code===r.PLAYER_NOT_RECOGNIZED.code?r.PLAYER_NOT_RECOGNIZED:r.DEFAULT_ERROR},ai=Ct.Log.getInstance();Le.register("PLAYBACK_AUTHORIZED");var si=function(e){u(n,e);var t=f(n);function n(){var e;a(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._isReady=!1,e.bindEvents(),e.$el.css("height","100%"),e.settings=e.defaultSettings,e.options.swfBasePath=e.options.baseUrl,e.options.startFromBitrate=4e5,e.currentVolume=null,e.currentTime=0,e.duration=0,e.isRenewingResource=!1,e.skipWaitingGlobals=!1,e.actionsMetadata={},e.globalsManager=new tn,e.setupSession(),e}return o(n,[{key:"name",get:function(){return"id_playback"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"attributes",get:function(){return{class:"id-playback","data-id-playback":""}}},{key:"srcUrl",get:function(){var e=this.playback&&this.playback.options&&this.playback.options.src,t=this.playback&&this.playback._src;return e||t||this.options.src}},{key:"blackResourceUrl",get:function(){return J.isChromecast?this.options.env.blackVideoUrl:J.isiOS||J.isSafari||!this.video.encrypted?this.options.env.blackVideoStreamingUrl:this.options.env.blackDashUrl}},{key:"src",get:function(){return this.options.src}},{key:"selectedResource",get:function(){return this.video&&this.video.selectedResource}},{key:"isEncrypted",get:function(){return this.video&&this.video.encrypted}},{key:"isReady",get:function(){return this._isReady}},{key:"defaultSettings",get:function(){return{seekEnabled:!0}}},{key:"dvrEnabled",get:function(){return!!this.playback&&!!this.playback.dvrEnabled}},{key:"levels",get:function(){return this.playback.levels}},{key:"buffering",get:function(){return this.playback&&this.playback.buffering}},{key:"videoEl",get:function(){return this.playback&&this.playback.el}},{key:"innerPlaybackName",get:function(){return this.playback&&this.playback.name||""}},{key:"isPiPActive",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.isPiPActive}},{key:"isLive",get:function(){return this.getPlaybackType()===Xe.LIVE}},{key:"liveInitialPosition",get:function(){return _n(this.playback,this.options.liveStartTime)}},{key:"useSingleAudioUrls",get:function(){return J.isSmartTvEnvironment}},{key:"audioTracks",get:function(){var e,t;return this.useSingleAudioUrls?(null===(e=this.selectedResource)||void 0===e||null===(t=e.audios)||void 0===t?void 0:t.audioTracksForSingleAudioUrls)||[]:this.playback&&this.playback.audioTracks||[]}},{key:"currentAudioTrack",get:function(){var e,t,n,r=(null===(e=this.selectedResource)||void 0===e?void 0:e.shouldPlayWithDAI)&&this.useSingleAudioUrls?this.selectedResource.signDAIUrl(null===(t=this.currentAudio)||void 0===t?void 0:t.url):null===(n=this.currentAudio)||void 0===n?void 0:n.url;return i(i({},this.currentAudio),{},{url:r})}},{key:"bandwidthEstimate",get:function(){return this.playback&&this.playback.bandwidthEstimate}},{key:"bindEvents",value:function(){this.on(In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.on(In.WM_VIDEO_METADATA_ERROR,this.onVideoMetadataError),this.on(In.WM_RESOURCE_READY,this.onResourceReady),this.on(In.WM_RESOURCE_ERROR,this.onResourceLoadError),this.on(In.WM_PLAYBACK_WILL_PLAY,this.onBeforePlay),this.on(In.DID_RESTART_PLAYBACK,this.onPlaybackRestarted),this.on(In.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onPlaybackRestarted",value:function(){this.isRestarting=!1}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(In.WM_PLAY_REQUESTED),this.actionsMetadata.playEvent=t,this.isRestarting&&this.trigger(In.DID_RESTART_PLAYBACK),this.canRequestPlay()?(this.loadingResource=!0,setTimeout((function(){return e.trigger(In.WM_PLAY_REQUESTED_READY,e.video)}))):this.checkingAutoplayPermission?this.isStopped?this.onBeforePlay():this.isPaused?this.playWhenReady():ai.debug(this.name,"Call to play was ignored"):this.startAutoPlayCheck({autoPlay:!0})}},{key:"canRequestPlay",value:function(){var e=this.waitToPlay()||this.playbackError||this.isPlaying(),t=this.video&&!this._resourceReady&&!this.loadingResource,n=mn.isAvailable(this.options.mute)||this.mutedAutoplay||J.isSmartTvEnvironment;return!e&&t&&n}},{key:"playWhenReady",value:function(){var e=this;this.isReady?setTimeout((function(){return e.playback.play()})):this.listenToOnce(this,In.WM_PLAYBACK_WILL_PLAY,this.playWhenReady)}},{key:"onBeforePlay",value:function(){!this.isRestarting&&this.disablePlayWhenReady||this.playWhenReady()}},{key:"consent",value:function(){this.playback.consent(),mn.consent(),this.mutedAutoplay=!1}},{key:"waitToPlay",value:function(){var e=this,t=!0,n=this.skipWaitingGlobals||this.globalsManager.ready(),i=!(J.isSmartTvEnvironment||this.video&&this.playback);return n?i?this.listenToOnce(this,In.WM_VIDEO_METADATA_LOADED,this.play):t=!1:(this.globalsManager.isAvailable().then((function(){return e.play()}),(function(){return e.play()})),this.skipWaitingGlobals=!0),t}},{key:"isPlaying",value:function(){return!!this.playback&&this.playback.isPlaying()}},{key:"setInitialTime",value:function(e){var t=this;J.isChromecast||J.isiOS||!this.isPlaying()?this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,(function(){return t.seek(e)})):this.seek(e)}},{key:"getDuration",value:function(){return this.playback&&this.playback.getDuration()}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.stopAndClearPlayback(),this.playback&&this.trigger(Le.PLAYBACK_STOP,this.name,this.actionsMetadata.stopEvent)}},{key:"stopAndClearPlayback",value:function(){this.playback&&(this.playback.stop(),this.currentTime=0)}},{key:"mute",value:function(){this.playback&&this.playback.mute()}},{key:"unmute",value:function(){this.playback&&this.playback.unmute()}},{key:"volume",value:function(e){var t=this;this.playback&&(this.playback.isReady?(this.playback.volume(e),this.currentVolume=e):this.listenToOnce(this.playback,Le.PLAYBACK_READY,(function(){return t.volume(e)})))}},{key:"getVolume",value:function(){return this.currentVolume}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback&&this.playback.pause()}},{key:"switchAudioTrack",value:function(e){if(this.useSingleAudioUrls){var t=this.audioTracks.find((function(t){return t.id===e}));if(!t||!this.currentAudioTrack||t.id===this.currentAudioTrack.id)return;this.currentAudio=t,this.load(t.url),this.trigger(Le.PLAYBACK_AUDIO_CHANGED,t)}else this.playback&&this.playback.switchAudioTrack(e)}},{key:"getInitialAudioTrack",value:function(){var e=this.options.defaultAudio||{},t=e.language,n=e.role,i=this.findAudioTrack(t,n),r=this.findAudioTrack(t),a=this.findAudioTrack("por"),s=m(this.audioTracks,1)[0];return i||r||a||s}},{key:"findAudioTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.audioTracks.find((function(n){return n.keys.includes(e)&&n.role===t}))}},{key:"seek",value:function(e){var t=this.playback&&this.playback.getCurrentTime(),n=Math.round(t)!==Math.round(e);this.playback&&n&&this.playback.seek(e)}},{key:"getStartTimeOffset",value:function(){return this.playback&&"function"==typeof this.playback.getStartTimeOffset?this.playback.getStartTimeOffset():0}},{key:"isPip",value:function(e){this.onPip=e}},{key:"destroy",value:function(){this.playback&&(this.stopListening(this.playback),this.playback.stop(),this.playback.destroy(),this.playback=null),this.reportID&&clearInterval(this.reportID),this.$el.remove()}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.validateRestrictedContent(),this.setPlaybackConfig(),!J.isSmartTvEnvironment&&this.initInnerPlayback(),this.onIdPlaybackReady(),this.options.autoPlay&&this.startAutoPlayCheck()}},{key:"setPlaybackConfig",value:function(){var e,t,n,i;null===(e=this.options.playback)||void 0===e||null===(t=e.setHLSJSConfig)||void 0===t||t.call(e,this.options,this),null===(n=this.options.playback)||void 0===n||null===(i=n.setShakaConfig)||void 0===i||i.call(n,this.options,this)}},{key:"validateRestrictedContent",value:function(){this.video.adult&&!this.options.allowRestrictedContent&&this.onError(ln.RESTRICTED_CONTENT)}},{key:"onPlaybackReady",value:function(){var e=this;this.playback.isReady?this.ready():this.playback.once(Le.PLAYBACK_READY,(function(){return e.ready()}))}},{key:"onVideoMetadataError",value:function(e){this.onError(e,ln.PLAYLIST_LOAD_ERROR)}},{key:"onResourceLoadError",value:function(e){var t=i(i({},ln.RESOURCE_LOAD_ERROR),{},{description:"".concat(ln.RESOURCE_LOAD_ERROR.description," ").concat(e.message||Rt(e)),raw:e});this.onError(e,t)}},{key:"onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ai.warn(this.name,"id playback error:",e),this.playbackError=ri(e,this.options,this.video);var n=this.playbackError.code===ln.DEFAULT_ERROR.code,i=n&&t;i&&(this.playbackError=t);var r={useCodePrefix:!1};this.trigger(Le.PLAYBACK_ERROR,this.createError(this.playbackError,r))}},{key:"onResourceReady",value:function(e){var t=this;this.video=e,this._resourceReady=!0,this.loadingResource=!1,J.isSmartTvEnvironment&&(this.initInnerPlayback(),this.configureSmartTvResourceParams()),this.useSingleAudioUrls&&(this.currentAudio=this.getInitialAudioTrack(),this.trigger(Le.PLAYBACK_AUDIO_AVAILABLE,this.audioTracks)),setTimeout((function(){return t.setupAuthorized()}))}},{key:"setupAuthorized",value:function(){!this.disableAuthorized&&this._resourceReady&&this.trigger(Le.Custom.PLAYBACK_AUTHORIZED)}},{key:"setupVideoResource",value:function(e){this.setupPlayback(e),this.onPlaybackReady()}},{key:"configureSmartTvResourceParams",value:function(){var e=this.video&&this.video.encrypted,t=this.selectedResource&&this.selectedResource.contentProtection,n=e&&t?ti(this.video,this.options.httpOnly):{};this.playback&&this.playback.configure(i(i({contentProtection:t},n),{},{shakaConfiguration:i(i({},this.options.shakaConfiguration),n.shakaConfiguration)}))}},{key:"getPlaybackType",value:function(){if(this.video)return"Live"===this.video.type||this.video.isLive?"live":"vod"}},{key:"initInnerPlayback",value:function(e){if(this.playback=ii.call(this,e,this.selectedResource,this.blackResourceUrl),"no_op"===this.playback.name&&!J.isCrawlerBot)return this.onError(ln.DEVICE_NOT_SUPPORTED);this.bindPlaybackEvents(),this.renderInnerPlayback()}},{key:"startAutoPlayCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,n=void 0===t?this.options.autoPlay:t;this.checkingAutoplayPermission=!0,mn.onAutoplayAvailable(this.onAutoplaySuccess.bind(this),i(i({},this.options),{},{autoPlay:n}),this.onAutoplayFail.bind(this))}},{key:"onAutoplaySuccess",value:function(){var e=this;mn.canAutoPlayUnmuted?$n((function(){return e.play()})):this.playMuted()}},{key:"onAutoplayFail",value:function(){this.trigger(In.WM_AUTOPLAY_BLOCKED)}},{key:"playMuted",value:function(){var e=this;this.mutedAutoplay=!0,this.playback&&(this.playback.volume(0),this.currentVolume=0),$n((function(){return e.play()}))}},{key:"setupPlayback",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedResource.url,n=this.useSingleAudioUrls&&(null===(e=this.currentAudioTrack)||void 0===e?void 0:e.url),i=n||t;if(this.trigger(Le.PLAYBACK_STATS_ADD,{midia:this.options.src,url:i}),this.configureInnerPlaybackDRM(),"Tizen"===this.innerPlaybackName){var r=this.video.maxHeight;this.playback.isUHDContent=2160===r}if(this.playback.load(i),this.options.selectedLevel)try{this.play()}catch(e){ai.warn(this.name,"play()",e)}else this.onPip&&this.playWhenReady()}},{key:"configureInnerPlaybackDRM",value:function(){if(this.isEncrypted){var e=ti(this.video,this.options.httpOnly);this.playback.options.fairplay=e.fairplay,"dash_shaka_playback"===this.playback.name&&(this.playback._options.shakaConfiguration.drm=i(i({},e.shakaConfiguration.drm),this.playback._options.shakaConfiguration.drm))}}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,Le.PLAYBACK_SETTINGSUPDATE,this.settingsupdate),this.listenTo(this.playback,Le.PLAYBACK_LOADEDMETADATA,this.loadedmetadata),this.listenTo(this.playback,Le.PLAYBACK_PLAYBACKSTATE,this.playbackstate),this.listenTo(this.playback,Le.PLAYBACK_ERROR,this.onInnerPlaybackError),this.listenTo(this.playback,Le.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this.timeupdate),this.listenTo(this.playback,Le.PLAYBACK_PLAY_INTENT,this.playintent),this.listenTo(this.playback,Le.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,Le.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,Le.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,Le.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,Le.PLAYBACK_STATS_ADD,this.statsAdd),this.listenTo(this.playback,Le.PLAYBACK_DVR,this.onDvr),this.listenTo(this.playback,Le.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,Le.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,Le.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,Le.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this.ended),this.listenTo(this.playback,Le.PLAYBACK_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.playback,Le.PLAYBACK_AUDIO_AVAILABLE,this.onAudioAvailable),this.listenTo(this.playback,Le.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,Le.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"onEnterPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_ENTER)}},{key:"onExitPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_EXIT)}},{key:"enterPiP",value:function(){this.playback.enterPiP()}},{key:"exitPiP",value:function(){this.playback.exitPiP()}},{key:"playbackstate",value:function(e){this.trigger(Le.PLAYBACK_PLAYBACKSTATE,e)}},{key:"updateBitrate",value:function(e){this.trigger(Le.PLAYBACK_BITRATE,e)}},{key:"progress",value:function(e){this.trigger(Le.PLAYBACK_PROGRESS,e)}},{key:"statsAdd",value:function(e){this.trigger(Le.PLAYBACK_STATS_ADD,e)}},{key:"onDvr",value:function(e){this.trigger(Le.PLAYBACK_DVR,e)}},{key:"timeupdate",value:function(e){e.current&&(this.currentTime=e.current,this.duration=e.total,this.trigger(Le.PLAYBACK_TIMEUPDATE,i(i({},e),{},{playbackType:this.getPlaybackType()})))}},{key:"ready",value:function(){this._isReady=!0,this.settingsupdate(),this.trigger(In.WM_PLAYBACK_WILL_PLAY,this.name)}},{key:"onSeek",value:function(){this.trigger(Le.PLAYBACK_SEEK,this.name)}},{key:"onSeeked",value:function(){this.trigger(Le.PLAYBACK_SEEKED,this.name),this.isPaused&&this.trigger(Le.PLAYBACK_PAUSE,this.name)}},{key:"onBuffering",value:function(){this.trigger(Le.PLAYBACK_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(Le.PLAYBACK_BUFFERFULL,this.name)}},{key:"settingsupdate",value:function(){var e=this.getPlaybackType();e&&("ad"===e?this.settings=this.playback.settings:(this.settings=i({},this.defaultSettings),"vod"!==e&&this.playback&&!this.playback.dvrEnabled&&(this.settings.seekEnabled=!1)),this.trigger(Le.PLAYBACK_SETTINGSUPDATE))}},{key:"loadedmetadata",value:function(e){this.trigger(Le.PLAYBACK_LOADEDMETADATA,e),this.checkInitialSeek()}},{key:"checkInitialSeek",value:function(){var e=this.isLive?this.options.liveStartTime&&this.liveInitialPosition:this.options.resumeAt||dn();e&&e>0&&this.setInitialTime(e)}},{key:"setupSession",value:function(){fn.startSession(this.options.playerId)}},{key:"stopped",value:function(){this.isStopped=!0}},{key:"ended",value:function(){var e=this;this.stopAndClearPlayback(),this.isStopped=!0,this.trigger(Le.PLAYBACK_ENDED,this.name),$n((function(){return e.setupSession()}))}},{key:"onAudioChanged",value:function(e){this.useSingleAudioUrls||(this.currentAudio=e,this.trigger(Le.PLAYBACK_AUDIO_CHANGED,e))}},{key:"onAudioAvailable",value:function(e){if(!this.useSingleAudioUrls){this.currentAudio=this.playback.currentAudioTrack,this.trigger(Le.PLAYBACK_AUDIO_AVAILABLE,e);var t=this.getInitialAudioTrack();t&&this.playback.switchAudioTrack(t.id)}}},{key:"playintent",value:function(){this.trigger(Le.PLAYBACK_PLAY_INTENT,this.name)}},{key:"playing",value:function(){this.isPaused=!1,this.isStopped=!1,this.trigger(Le.PLAYBACK_PLAY,this.name,this.actionsMetadata.playEvent)}},{key:"paused",value:function(){this.isPaused=!0,this.trigger(Le.PLAYBACK_PAUSE,this.name,this.actionsMetadata.pauseEvent)}},{key:"onInnerPlaybackError",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.selectedResource.hasFallbackSource(),i=null===(e=this.options.playback)||void 0===e?void 0:e.recoverableErros,r=J.isSmartTvEnvironment||yn(this.playback.name,t,i);if(!this.isRenewingResource)return r&&n?this.useFallbackSource(t):this.renewResource(t);t.clientCode="playback-error",this.trigger(Le.PLAYBACK_ERROR,t)}},{key:"useFallbackSource",value:function(e){var t=e.code,n=e.description;ai.info(this.name,"Will select fallback source, previous: ".concat(this.srcUrl)),this.trigger(In.WILL_SELECT_FALLBACK_SOURCE,{recoveredError:JSON.stringify({code:t,description:n}),currentSrc:this.srcUrl}),this.selectedResource.nextFallbackSource(),this.trigger(In.WILL_CHANGE_SOURCE,{source:this.selectedResource.url,errorCode:t,errorMessage:n}),this.currentAudio=this.getInitialAudioTrack(),this.trigger(In.FALLBACK_SOURCE_SELECTED,{currentSrc:this.selectedResource.url}),ai.info(this.name,"Fallback source selected: ".concat(this.srcUrl))}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.load(t)}},{key:"renewResource",value:function(e){var t=e.code;this.initPlaybackRestart(),this.isRenewingResource=!0,this.trigger(In.WILL_RENEW_RESOURCE,{renewReason:t}),this.listenToOnce(this,Le.PLAYBACK_PLAY,this.onResourceRenewed)}},{key:"onResourceRenewed",value:function(){this.isRenewingResource=!1}},{key:"onIdPlaybackReady",value:function(){var e=this;this.trigger(Le.PLAYBACK_READY,this.name),$n((function(){return e.trigger(In.WM_PLAYBACK_CAN_PLAY,e.name)}))}},{key:"load",value:function(e){this.initPlaybackRestart(),this.setupVideoResource(e)}},{key:"initPlaybackRestart",value:function(){this._isReady=!1,this.resetOptions(),this.isRestarting=!0}},{key:"resetOptions",value:function(){var e={resumeAt:this.currentTime};this.currentAudio&&(e.defaultAudio={language:this.currentAudio.language,role:this.currentAudio.role}),this.currentSubtitle&&(e.defaultSubtitle={language:this.currentSubtitle.language,role:this.currentSubtitle.role}),this.playback&&this.playback.configure(X.extend(this.options,e))}},{key:"renderInnerPlayback",value:function(){this.playback.render(),this.playback.el.id=this.cid,this.playback.el.controlsList="nodownload noremoteplayback",this.playback.el.removeAttribute("src"),this.$el.html(this.playback.el);var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Cn.getStyleFrom(".clappr-player#wp3-player-0 .id-playback.cover-viewport video {\n  -o-object-fit: cover;\n     object-fit: cover;\n}".toString(),e);this.$el.append(t[0]);var n="cover-viewport";this.options.preventBlackBars?this.$el.addClass(n):this.$el.removeClass(n)}}]),n}(Xe);si.canPlay=function(e){return Sn(e.toString())};var oi=we.getInstance(),li=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).options.src&&Sn(i.options.src)?(mn.onAutoplayAvailable(i.onAutoPlayAvailable.bind(h(i)),i.options,i.onAutoPlayDisabled.bind(h(i))),i):p(i)}return o(n,[{key:"name",get:function(){return"video_metadata"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"callbackPrefix",get:function(){return"wmPlayerPlaylistLoaded"}},{key:"playback",get:function(){return this.container.playback}},{key:"metadataOptions",get:function(){return{selectedLevel:this.options.selectedLevel,preferredLevel:this.options.preferredLevel,preferredCDN:this.options.cdn,env:this.options.env,profile:this.options.maxQualityLevel,getPlayerType:this.options.overrides&&this.options.overrides.getPlayerType}}},{key:"onAutoPlayAvailable",value:function(){this.listenToOnce(this.playback,In.WM_VIDEO_METADATA_REQUEST_COMPLETE,this.parseMetadataRequest)}},{key:"onAutoPlayDisabled",value:function(){var e=this;this.setRequestData(),this.load().then((function(t){return e.playback.trigger(In.WM_VIDEO_METADATA_LOADED,t)}),(function(t){return e.playback.trigger(In.WM_VIDEO_METADATA_ERROR,t)}))}},{key:"setRequestData",value:function(){var e=this.options.src,t=this.options.env;this.callback=this.callbackPrefix+this.options.playerId+e,this.url=t.playlistTemplate({videoId:e,callback:this.callback})}},{key:"load",value:function(){var e=this;return oi.info(this.name,"loading playlist from:",this.url),Qt.jsonp({callbackName:this.callback,url:this.url}).then((function(t){return e.parsePlaylist(t)}))}},{key:"parsePlaylist",value:function(e){var t=new X.Deferred;if(this.isValidPlaylist(e)){var n=this.getMetadataModel(e.videos[0],this.metadataOptions);t.resolve(n)}else oi.warn(this.name,"error on playlist: ",e),t.reject(e);return t}},{key:"isValidPlaylist",value:function(e){return!!e&&!!e.videos&&e.videos.length>0}},{key:"getMetadataModel",value:function(e,t){var n=new Ht(e,t);return oi.info(this.name,"video:",n),n}},{key:"parseMetadataRequest",value:function(e){var t=e.metadata,n=this.getMetadataModel(t,this.metadataOptions);this.playback.trigger(In.WM_VIDEO_METADATA_LOADED,n)}}]),n}(lt),ui={d:function(e,t){for(var n in t)ui.o(t,n)&&!ui.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},ci={};ui.d(ci,{U:function(){return di}});var di=function(e){var t=e.action,n=e.maxAttempts,i=void 0===n?3:n,r=e.baseDelay,a=void 0===r?100:r,s=e.backOffFactor,o=void 0===s?2:s,l=e.retryableErrors,u=void 0===l?null:l,c=0,d=[];return function e(){return t&&"function"==typeof t?t().then((function(e){return{retryResponse:e,retryHistory:d}})).catch((function(t){if(u&&!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.includes(t)}(u,t.statusCode))return Promise.reject({retryError:t,retryHistory:d});var n,r,s;if(d.push((n={},s=t,(r="attempt_".concat(c))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n)),c===i)return Promise.reject({retryError:t,retryHistory:d});c++;var l=Math.pow(o,c-1)*a,h=l*function(e){return!e||Number.isNaN(e)?1:Math.random()+e}(.5);return console.log("Retrying...\nIf the retries fail we delay the next attempt in ".concat(l/1e3," seconds\n Fuzz factor for retry: ").concat(h)),new Promise((function(t){setTimeout((function(){t(e())}),h)}))})):Promise.reject({retryError:"Action must be defined and a function",retryHistory:d})}()},hi=ci.U,pi=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).options.src&&Sn(i.options.src)?(mn.onAutoplayAvailable(i.onAutoPlayAvailable.bind(h(i)),i.options,i.onAutoPlayDisabled.bind(h(i))),i):p(i)}return o(n,[{key:"name",get:function(){return"cdn_router"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"retryableErrors",get:function(){return[0,500,501,502,503,504]}},{key:"retrySettings",get:function(){var e=window.WM&&window.WM.Settings||{};return{maxAttempts:e.maxAttempts,baseDelay:e.baseDelay,backOffFactor:e.backOffFactor}}},{key:"onAutoPlayAvailable",value:function(){this.loadMetadataFromRequest=!0,this.loadResource()}},{key:"onAutoPlayDisabled",value:function(){this.loadMetadataFromRequest=!1,this.listenToOnce(this.playback,In.WM_PLAY_REQUESTED_READY,this.loadResource)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.playback,In.WILL_RENEW_RESOURCE,this.loadResource),this.listenToOnce(this.playback,In.WM_PLAY_REQUESTED_READY,(function(){return e.playRequestedReady=!0}))}},{key:"loadResource",value:function(){var e=this;return this.createPayload().then((function(t){return e.getResource(t)})).then((function(t){return e.onResourceLoaded(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mountAjaxErrorBody(t);try{n=i(i({},n),JSON.parse(t.xhr.response))}catch(e){}e.onResourceError(n)}))}},{key:"createPayload",value:function(){var e=this;return new Promise((function(t){var n={player_type:Ht.getPlayerType(),video_id:"".concat(e.options.src),quality:e.options.maxQualityLevel||"max",content_protection:Ht.getDRMProtocol(),vsid:fn.getVideoSessionId(e.options.playerId),tz:qt()};"boolean"==typeof e.options.httpOnly&&(n.ho=e.options.httpOnly),xt&&(n.ts=Math.trunc(Yt())),e.options.allowLocation?e.getLocation().then((function(e){t(i(i({},n),{},{lat:"".concat(e.latitude),long:"".concat(e.longitude)}))})).catch((function(){return t(n)})):t(n)}))}},{key:"getLocation",value:function(){var e=this;if(Vt.isGloboiDomain&&this.options.lat&&this.options.long){var t={latitude:this.options.lat,longitude:this.options.long};return this.container.trigger(In.WM_LOCATION_AVAILABLE,t),new Promise((function(e){return e(t)}))}return new Promise((function(t,n){un.getLocation().then((function(n){var i={latitude:n.coords.latitude,longitude:n.coords.longitude};e.container.trigger(In.WM_LOCATION_AVAILABLE,i),t(i)})).catch((function(t){we.warn(e.name,"Failed to get location. We make the request to /cdn without passing lat/long params",t),n(t)}))}))}},{key:"getResource",value:function(e){var t=this;return this.sendRequestWithRetry(this.options.env.CDNRouterHost,e).then((function(e){var n=e.retryResponse,i=e.retryHistory;return t.onResourceRequestFinished(i,i.length+1,!1),n})).catch((function(n){var i=n.retryError,r=n.retryHistory;return t.retryableErrors.includes(i.statusCode)?t.sendRequest(t.options.env.CDNRouterFallbackHost,e).then((function(e){return t.onResourceRequestFinished(r,r.length+1,!0),e})).catch((function(e){return t.onResourceRequestFinished([].concat(y(r),[i]),r.length+1,!0),Promise.reject(e)})):(t.onResourceRequestFinished(r,Math.max(r.length,1),!1),Promise.reject(i))}))}},{key:"sendRequest",value:function(e,t){var n=fn.getLockId(this.options.playerId),r={url:e,type:"POST",contentType:"application/json",xhrFields:{withCredentials:!0},data:JSON.stringify(t)},a=this.options.token||$t("GLBID");return a&&(r.headers={Authorization:"Bearer ".concat(a)}),n&&(r.headers=i(i({},r.headers),{},{"X-Session-ID":n})),this.executeAjaxRequest(r)}},{key:"sendRequestWithRetry",value:function(e,t){var n=this,i=this.retrySettings,r={action:function(){return n.sendRequest(e,t)},maxAttempts:i.maxAttempts,baseDelay:i.baseDelay,backOffFactor:i.backOffFactor,retryableErrors:this.retryableErrors};return hi(r)}},{key:"executeAjaxRequest",value:function(e){var t=this;return new Promise((function(n,r){X.ajax(e).then((function(e,i,r){e.playback_api_version=t.getPlaybackApiVersion(r),n({resource:e})}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=i({},t),s=a[0],o=a[1],l=a[2],u=s.status;r({xhr:s,status:o,error:l,statusCode:u})}))}))}},{key:"getPlaybackApiVersion",value:function(e){return e.getResponseHeader("x-app-version")}},{key:"mountAjaxErrorBody",value:function(e){var t=e.xhr,n=e.status,i=e.error;return{status:n,error:t&&t.statusText||i,url:t&&t.responseURL||this.options.env.CDNRouterHost,http_status_code:t&&t.status}}},{key:"onResourceLoaded",value:function(e){var t=this,n=e.resource,i=void 0===n?{}:n,r=i.session;r&&fn.storeLockId(this.options.playerId,r);var a=function(){return setTimeout((function(){return t.playback.trigger(In.WM_RESOURCE_LOADED,i)}))};this.loadMetadataFromRequest&&!this.playRequestedReady?(this.listenToOnce(this.playback,In.WM_PLAY_REQUESTED_READY,a),this.playback.trigger(In.WM_VIDEO_METADATA_REQUEST_COMPLETE,i)):a()}},{key:"onResourceError",value:function(e){if("CDN not available"===e.message)return this.playback.trigger(In.WM_WROOM_WAITING,e);this.playback.trigger(In.WM_RESOURCE_ERROR,e)}},{key:"onResourceRequestFinished",value:function(e,t,n){this.container.trigger(In.WM_RESOURCE_REQUEST_STATS,{retries:e,totalAttempts:t,usedFallback:n})}}]),n}(lt),fi={pt_br:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},pt_pt:{label:"Português (Portugal)",language:"pt-pt",languageISO_639_2B:"",keys:["pt-pt","pt-PT"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},gi=function(){function e(){a(this,e)}return o(e,[{key:"_createResourceModel",value:function(e){var t=e.id,n=e.languageISO_639_2B,i=e.role,r=e.url,a=e.type,s=e.kind,o=e.asset_key,l={id:t,role:i,url:r};return void 0!==a&&(l.type=a),void 0!==s&&(l.kind=s),void 0!==o&&(l.asset_key=o),this._formatLanguageResource(l,n)}},{key:"_findLanguageByKey",value:function(e){return Object.values(fi).find((function(t){return t.keys.includes(e)}))}},{key:"_formatLanguageResource",value:function(e,t){var n=this._findLanguageByKey(t.toLowerCase());return i(n?i({},n):{label:t,language:t,languageISO_639_2B:t,keys:[t]},e)}}]),e}(),vi=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this)).audioTracks=[].concat(y(i._formatSingleAudioTracks(null==e?void 0:e.original)),y(i._formatSingleAudioTracks(null==e?void 0:e.description,!0))),i.audioTracksForSingleAudioUrls=i.audioTracks.map((function(e,t){var n=e.language,r=e.role,a=e.url,s=e.asset_key;return i._createResourceModel({id:String(t),kind:r?"description":"main",languageISO_639_2B:n,role:r,url:a,asset_key:s})})),i}return o(n,[{key:"_formatSingleAudioTracks",value:function(e,t){return e?Object.keys(e).map((function(n){return{language:n,url:e[n].url,asset_key:e[n].asset_key,role:t?"description":""}})):[]}}]),n}(gi),mi=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),i=t.call(this),e?(i.sourceText=e||{},i.srt=i._buildSubtitles("srt"),i.webVTT=i._buildSubtitles("webvtt"),i):p(i,[])}return o(n,[{key:"_buildSubtitles",value:function(e){var t=this,n=this._formatSubtitlesCaptions(e),i=n.subtitles,r=n.captions;return[].concat(y(Object.values(i)),y(Object.values(r))).map((function(n,i){return t._createResourceModel({id:String(i),languageISO_639_2B:n.language,role:n.role,url:n.url,type:e})}))}},{key:"_formatSubtitlesCaptions",value:function(e){var t=this;return Object.keys(this.sourceText).reduce((function(n,i){var r,a,s,o,l=null===(r=t.sourceText[i].subtitle)||void 0===r||null===(a=r[e])||void 0===a?void 0:a.url;l&&(n.subtitles[i]=t._formatBaseResource(i,l,"subtitle"));var u=null===(s=t.sourceText[i].caption)||void 0===s||null===(o=s[e])||void 0===o?void 0:o.url;return u&&(n.captions[i]=t._formatBaseResource(i,u,"caption")),n}),{subtitles:{},captions:{}})}},{key:"_formatBaseResource",value:function(e,t,n){return{language:e,url:t,role:n}}}]),n}(gi),yi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),t&&t.sources&&t.resource&&(this.options=n,this.sources=t.sources,this.contentProtection=t.resource.content_protection||{},this.signal=t.resource.signal,this.thumbUrl=t.thumbs_preview_base_url,this.session=t.session,this.rawData=t,this.playbackApiVersion=t.playback_api_version,this._isDAIEnabled=!1,this.options.forceDRMServer&&this.forceDRMServer(),this.setExpirationTime(),this.useSource(this.sources[0]))}return o(e,[{key:"cdn",get:function(){return this.resourceCDN}},{key:"isGloboCDN",get:function(){return"globo"===this.cdn}},{key:"url",get:function(){return this.shouldPlayWithDAI?this.signDAIUrl(this.originalURL):this.originalURL}},{key:"shouldPlayWithDAI",get:function(){return!!(this.dai&&this.daiURL&&this._isDAIEnabled)}},{key:"forceGloboCDN",get:function(){return J.isiOS&&!J.isSafari||J.isSmartTvEnvironment}},{key:"useFlatURL",get:function(){return J.preventUsingCookies&&this.isGloboCDN||this.dai}},{key:"subtitles",get:function(){return this.subtitleResource}},{key:"sourceIndex",get:function(){return this.sources.indexOf(this.source)}},{key:"fallbackSourceIndex",get:function(){return this.sourceIndex+1}},{key:"audios",get:function(){return this.audioResource}},{key:"isDAIEnabled",get:function(){return this._isDAIEnabled},set:function(e){this._isDAIEnabled=e}},{key:"daiURL",get:function(){return this._daiURL},set:function(e){this._daiURL=e}},{key:"setExpirationTime",value:function(){var e=(new Date).getTime();this.sources.forEach((function(t){t.expirationDate=t.expiration_time&&e+t.expiration_time}))}},{key:"hasFallbackSource",value:function(){if(this.fallbackSourceIndex>=this.sources.length)return!1;var e=(new Date).getTime(),t=this.sources[this.fallbackSourceIndex];return e<(null==t?void 0:t.expirationDate)}},{key:"nextFallbackSource",value:function(){var e=this.sources[this.fallbackSourceIndex];this.hasFallbackSource()&&this.useSource(e)}},{key:"useSource",value:function(e){this.source=e,this.originalURL=e.url,this.resourceCDN=e.cdn,this.resourcePOP=e.pop,this.dai=e.dai,this.assetKey=e.asset_key,this.token=e.token,this.contentSourceId=e.content_source_id,this.audioResource=new vi(e.audio),this.subtitleResource=new mi(e.text)}},{key:"signDAIUrl",value:function(e){var t=je.settings.interpolate;je.settings.interpolate=/\{\{(.+?)\}\}/g;var n=je("".concat(e,"{{ queryString }}"))({queryString:{queryString:this.daiURL.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/)[6]||""}.queryString});return je.settings.interpolate=t,n}},{key:"forceDRMServer",value:function(){this.contentProtection.server=this.options.forceDRMServer}}]),e}(),bi=o((function e(t){a(this,e),this.id=t.transmission_id,this.affiliate={code:t.affiliate_code},this.signal=t.signal})),Ei=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"resource"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isDAIAvailable",get:function(){return this.options.enableDAIResourceLoader}},{key:"bindEvents",value:function(){this.idPlayback=this.playback,this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,In.WM_RESOURCE_LOADED,this.onResourceLoaded),this.listenTo(this.playback,In.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenTo(this.playback,Le.Custom.PLAYBACK_AUTHORIZED,this.onPlaybackAuthorized),this.listenToOnce(this.container,Le.Custom.DAI_RESOURCE_LOADED,this.onDAIResourceLoaded)}},{key:"onPlaybackAuthorized",value:function(){if(!this.idPlayback.isRestarting&&this.isDAIAvailable)return this.setupDAIResource();this.setupVideoResource()}},{key:"setupDAIResource",value:function(){if(we.info(this.name,"Setting up DAI resource. Is DAI resource ready? ".concat(this.DAIResourceReady)),!this.DAIResourceReady)return this.listenToOnce(this.container,Le.Custom.DAI_RESOURCE_LOADED,this.setupDAIResource),void this.listenToOnce(this.container,Le.Custom.DAI_ERROR,this.onDAIError);this.video.selectedResource.daiURL=this.DAIUrlTemplate,this.video.selectedResource.isDAIEnabled=!0,this.setupVideoResource()}},{key:"onDAIResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;this.DAIResourceReady=!0,this.DAIUrlTemplate=t}},{key:"onDAIError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};we.warn(this.name,"Skipping DAI. Loading original resource. DAI Error: ",e),this.video.selectedResource.isDAIEnabled=!1,this.setupVideoResource()}},{key:"setupVideoResource",value:function(){this.idPlayback.setupVideoResource(this.video.selectedResource.url)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onResourceLoaded",value:function(e){this.resource=new yi(e,this.options),this.selectResource()}},{key:"selectResource",value:function(){this.video.selectedResource=this.resource,this.video.isLive&&(this.video.transmission=new bi(this.video.selectedResource.rawData.resource)),this.playback.trigger(In.WM_RESOURCE_SELECTED,this.video,this.resource)}},{key:"onResourceSelected",value:function(e){this.video=e,this.resource&&this.resource.cdn&&(this.video.cdn=this.resource.cdn),this.isResourceValid()&&this.playback.trigger(In.WM_RESOURCE_READY,this.video)}},{key:"isResourceValid",value:function(){return!Array.isArray(this.resource)||(this.trigger(Le.PLAYBACK_ERROR,ln.PLAYLIST_LOAD_ERROR),!1)}}]),n}(lt),Ai={VideoMetadata:li,CDNRouter:pi,Resource:Ei};at.registerPlayback(si),Object.values(Ai).forEach((function(e){return at.registerPlugin(e)}));var _i={Video:Ht},Ti=function(e){u(n,e);var t=f(n);function n(e,i){var s;a(this,n);var o=(s=t.call(this,e)).core.options.adUnit,l=s.core.options.adCompanion;if(l&&i&&o){var u=("object"===r(l)&&Object.keys(l)||[])[0];s.unitcode="/".concat(i,"/").concat(o),s.companionWidth=+u.split("x")[0],s.companionHeight=+u.split("x")[1],s.companionDiv=l[u],s.embedScript(),s.setup(),s.show()}else s.disable();return s}return o(n,[{key:"name",get:function(){return"dfp_companion"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,In.DFP_CONTENT_RESUME,this.hide),this.listenTo(this.core.options.dfp,In.DFP_AD_ERROR,this.hide),this.listenTo(this.core.options.dfp,In.DFP_CONTENT_ENDED,this.hide)}},{key:"embedScript",value:function(){var e="//www.googletagservices.com/tag/js/gpt.js";if(0===X('script[src="'.concat(e,'"]')).length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",e),document.head.appendChild(t)}}},{key:"setup",value:function(){var e=this;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){googletag.defineSlot(e.unitcode,[e.companionWidth,e.companionHeight],e.companionDiv).addService(googletag.companionAds()).addService(googletag.pubads()).addService(googletag.content()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()}))}},{key:"show",value:function(){var e=this;googletag.cmd.push((function(){googletag.display(e.companionDiv)}))}},{key:"hide",value:function(){X("#".concat(this.companionDiv)).hide()}}]),n}(ut),ki=function(){function e(){a(this,e)}return o(e,null,[{key:"Full",get:function(){return""}},{key:"Overlay",get:function(){return"dfp-ad-overlay--overlay-mode dfp-ad-overlay--over-media-control"}},{key:"Hidden",get:function(){return"dfp-ad-overlay--poster-mode"}},{key:"HiddenMobile",get:function(){return"dfp-ad-overlay--poster-mobile-mode"}}]),e}(),Si=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).setHiddenMode(),i.dfp||i.disable(),i}return o(n,[{key:"name",get:function(){return"dfp_ad_overlay"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"attributes",get:function(){return{class:"dfp-ad-overlay"}}},{key:"bindEvents",value:function(){this.dfp=this.core.options.dfp,this.listenTo(this.dfp,In.DFP_AD_STARTED,this.adStarted),this.listenTo(this.dfp,In.DFP_AD_CLOSED,this.setHiddenMode),this.listenTo(this.dfp,In.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.dfp,In.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.dfp,In.DFP_ALL_ADS_COMPLETED,this.adEnded),this.listenTo(this.dfp,In.DFP_CONTENT_STARTED,this.setHiddenMode),this.listenTo(this.dfp,In.DFP_CONTENT_ENDED,this.setHiddenMode),this.listenTo(this.core,Le.CORE_RESIZE,this.updateSize),this.listenToOnce(this.core,Le.CORE_READY,this.bindMediaControlPluginsEvents),this.bindMediaControlEvents()}},{key:"bindMediaControlEvents",value:function(){this.unbindMediaControlEvents(),this.listenTo(this.core,Le.MEDIACONTROL_SHOW,this.mediaControlShow),this.listenTo(this.core,Le.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.removeClass("dfp-ad-overlay--notransition")}},{key:"unbindMediaControlEvents",value:function(){this.stopListening(this.core,Le.MEDIACONTROL_SHOW,this.mediaControlShow),this.stopListening(this.core,Le.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.addClass("dfp-ad-overlay--notransition")}},{key:"bindMediaControlPluginsEvents",value:function(){this.listenTo(this.core.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.mediaControlInteractionEnd),this.listenTo(this.core.mediaControl,In.MEDIACONTROL_MODAL_SHOW,this.mediaControlModalShow),this.listenTo(this.core.mediaControl,In.MEDIACONTROL_MODAL_HIDE,this.mediaControlModalHide),this.listenTo(this.core.mediaControl,In.WM_VOLUME_SHOW,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,In.WM_VOLUME_HIDE,this.mediaControlInteractionEnd)}},{key:"adStarted",value:function(e){var t=e.isLinear();this.setMode(t?ki.Full:ki.Overlay),t&&(this.unbindMediaControlEvents(),this.mediaControlHide()),J.isMobile&&!t&&this.mediaControlShow()}},{key:"adEnded",value:function(e){this.setHiddenMode(),e&&this.bindMediaControlEvents()}},{key:"setHiddenMode",value:function(){this.setMode(J.isMobile?ki.HiddenMobile:ki.Hidden)}},{key:"mediaControlShow",value:function(){this.$el.addClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlHide",value:function(){this.$el.removeClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlModalShow",value:function(){this._modalVisible=!0,this.mediaControlInteractionStart()}},{key:"mediaControlModalHide",value:function(){this._modalVisible=!1,this.mediaControlInteractionEnd()}},{key:"mediaControlInteractionStart",value:function(){this._mode==ki.Overlay&&this.$el.removeClass("dfp-ad-overlay--over-media-control")}},{key:"mediaControlInteractionEnd",value:function(){this._modalVisible||this._mode==ki.Overlay&&this.$el.addClass("dfp-ad-overlay--over-media-control")}},{key:"setMode",value:function(e){var t=this;this._mode=e,this.$el.removeClass(ki.Overlay),this.$el.removeClass(ki.Hidden),this.$el.removeClass(ki.HiddenMobile),e&&(this.$el.addClass(e),$n((function(){return t.updateSize()})))}},{key:"updateSize",value:function(){var e=this.$el.width(),t=this.$el.height();this.dfp.adsManager&&e&&t&&this.dfp.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"render",value:function(){return this.$el.append(Cn.getStyleFrom(".clappr-player#wp3-player-0 .dfp-ad-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 994;\n  transform: translateY(0);\n  transition: transform 0.3s ease;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--notransition {\n  transition: none !important;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mode {\n  visibility: hidden !important;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mobile-mode {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--overlay-mode {\n  transform: translateY(-20px);\n  height: 80px;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--over-media-control {\n  z-index: 998;\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay--media-control-show {\n  transform: translateY(-80px);\n}\n.clappr-player#wp3-player-0 .dfp-ad-overlay video {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}",{playerId:this.core.options.playerId})[0]),this}}],[{key:"Mode",get:function(){return ki}}]),n}(qe),wi=function(e){u(n,e);var t=f(n);function n(e,i){var r,s,o;return a(this,n),(o=t.call(this,e)).dfp=i,o.settings=o.defaultSettings,o.onEnterPiP=o.onEnterPiP.bind(h(o)),o.onExitPiP=o.onExitPiP.bind(h(o)),null===(r=o.dfpVideoEl)||void 0===r||r.addEventListener("enterpictureinpicture",o.onEnterPiP),null===(s=o.dfpVideoEl)||void 0===s||s.addEventListener("leavepictureinpicture",o.onExitPiP),o.bindEvents(),o}return o(n,[{key:"name",get:function(){return"dfp_playback"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"tagName",get:function(){return"video"}},{key:"attributes",get:function(){return{"data-dfp-playback":""}}},{key:"adsManager",get:function(){return this.dfp&&this.dfp.adsManager}},{key:"defaultSettings",get:function(){return{seekEnabled:!1}}},{key:"dfpLimaVideoEl",get:function(){var e,t;return null===(e=this.dfp.dfpAdOverlay.el.querySelector("lima-video"))||void 0===e||null===(t=e.shadowRoot)||void 0===t?void 0:t.querySelector("video")}},{key:"dfpVideoEl",get:function(){return this.dfp.dfpAdOverlay.el.querySelector("video")||this.dfpLimaVideoEl}},{key:"isPiPActive",get:function(){return this.dfpVideoEl&&this.dfpVideoEl===document.pictureInPictureElement}},{key:"ready",value:function(){this.trigger(Le.PLAYBACK_READY,this.name)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.dfp,In.DFP_AD_LOADED,(function(t){return e.duration=t&&t.getDuration()})),this.listenTo(this,Le.PLAYBACK_PLAY,(function(){return e.playing=!0})),this.listenTo(this,Le.PLAYBACK_PAUSE,(function(){return e.playing=!1}))}},{key:"render",value:function(){return this}},{key:"getPlaybackType",value:function(){return"ad"}},{key:"getDuration",value:function(){return this.duration}},{key:"getRemainingTime",value:function(){var e;return null===(e=this.adsManager)||void 0===e?void 0:e.getRemainingTime()}},{key:"getCurrentTime",value:function(){var e=this.getRemainingTime(),t=this.getDuration();return e>=0?t-e:0}},{key:"play",value:function(){this.adsManager&&(this.adsManager.resume(),!this.updateTimer&&this.startUpdateTimer())}},{key:"pause",value:function(){this.adsManager&&(this.adsManager.pause(),this.stopUpdateTimer())}},{key:"stop",value:function(){var e;this.stopUpdateTimer(),this.isPiPActive&&(null===(e=this.dfpVideoEl)||void 0===e||e.pause()),v(c(n.prototype),"stop",this).call(this)}},{key:"enterPiP",value:function(){var e=this;if(!this.dfpVideoEl)return we.warn(this.name,"video ad tag not available");this.dfpVideoEl.requestPictureInPicture().then((function(){we.info(e.name,"enter PIP success")})).catch((function(t){we.warn(e.name,"enter PIP failed",t)}))}},{key:"exitPiP",value:function(){var e=this;document.exitPictureInPicture().then((function(){we.info(e.name,"exit PIP success")})).catch((function(t){we.warn(e.name,"exit PIP failed",t)}))}},{key:"onEnterPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_ENTER)}},{key:"onExitPiP",value:function(){this.trigger(Le.PLAYBACK_PIP_EXIT)}},{key:"startUpdateTimer",value:function(){var e=this;this.stopUpdateTimer(),this.updateTimer=setInterval((function(){e.trigger(Le.PLAYBACK_TIMEUPDATE,{current:e.getCurrentTime(),total:e.duration,playbackType:e.getPlaybackType()})}),100)}},{key:"stopUpdateTimer",value:function(){clearInterval(this.updateTimer),delete this.updateTimer}},{key:"isPlaying",value:function(){return this.playing}},{key:"destroy",value:function(){var e,t;this.stop(),null===(e=this.dfpVideoEl)||void 0===e||e.removeEventListener("enterpictureinpicture",this.onEnterPiP),null===(t=this.dfpVideoEl)||void 0===t||t.removeEventListener("leavepictureinpicture",this.onExitPiP),v(c(n.prototype),"destroy",this).call(this)}},{key:"volume",value:function(e){this.adsManager&&this.adsManager.setVolume(e/100)}},{key:"getVolume",value:function(){return this.adsManager?this.adsManager.getVolume():this.dfp.container.playback.getVolume()/100}}]),n}(Xe),Ci=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).isServedAd=!1,i}return o(n,[{key:"name",get:function(){return"dfp_video_ad"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"videoElement",get:function(){var e=this.container.playback,t=e&&e.playback;return t&&t.el}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,In.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,Le.CONTAINER_ENDED,this.containerEnded),this.listenTo(this.container,Le.CONTAINER_STOP,this.containerEnded),this.listenTo(this.container,Le.CONTAINER_ERROR,this.containerError),this.listenTo(this.options.dfp,In.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.options.dfp,In.DFP_CONTENT_PAUSE,this.adBreakStarted),this.listenTo(this.container,In.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,In.DFP_AD_RESUME,this.onDFPAdResume),this.listenTo(this.options.dfp,In.DFP_CONTENT_RESUME,this.adBreakEnded),this.listenTo(this.options.dfp,In.DFP_AD_ERROR,this.adError),this.listenTo(this.container,In.WM_MASTERTOPIP,this.onPip),this.listenTo(this.container,In.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onDFPAdResume",value:function(){this.syncVolumeWithIdPlayback()}},{key:"onSessionEnd",value:function(){this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED,this.containerPlay)}},{key:"onPlayRequestedReady",value:function(){this.container.playback.disablePlayWhenReady=!this.options.dfp.shouldSkipAd}},{key:"onPip",value:function(){this.stopListening(),this.listenTo(this.container,In.WM_PIPTOMASTER,this.bindEvents)}},{key:"onResourceSelected",value:function(){this.hasError=!1}},{key:"onResourceReady",value:function(){var e=this.container.playback.options;e.onPip||(this.adPlayback=new wi(e,this.options.dfp)),this.containerPlay(),this.options.dfp.contentStarted()}},{key:"containerPlay",value:function(){var e=this;this.containerPlaying=!0,this.hasError&&$n((function(){return e.adBreakEnded()}))}},{key:"containerEnded",value:function(){this.options.dfp.contentEnded(),this.stopListening(),this.bindEvents(),this.containerPlaying=!1,this.hasError&&this.adPlayback&&this.adPlayback.stop()}},{key:"containerError",value:function(){this.hasError=!0}},{key:"adError",value:function(){this.hasError=!0,this.adBreakEnded()}},{key:"adLoaded",value:function(e){var t=this,n=e.isLinear();this.options.dfp.podIndex=e.getAdPodInfo().getPodIndex();var i={"-1":function(){we.info(t.name,"Post-roll loaded"),t.adPlayback&&(t.adPlayback.duration=e.getDuration()),t.postroll=!0},0:function(){return we.info(t.name,"Pre-roll loaded")},midroll:function(){t.adPlayback&&(t.adPlayback.duration=e.getDuration()),we.info(t.name,"Mid-roll loaded")}};n?(i[this.options.dfp.podIndex]||i.midroll)():we.info(this.name,"Overlay loaded")}},{key:"adBreakStarted",value:function(e){this.isServedAd=!0,this.onBreak=!0,this.hasError?this.adBreakEnded():this.container.playback.isPlaying()?this.pauseMainContent(e):this.initAdPlayback(e)}},{key:"onAdStarted",value:function(){this.container.getPlugin("click_to_pause").disable(),this.adPlayback&&this.adPlayback.play(),this.container.settingsUpdate()}},{key:"pauseMainContent",value:function(e){this.listenToOnce(this.container.playback,Le.PLAYBACK_PAUSE,this.initAdPlayback.bind(this,e)),this.container.pause()}},{key:"initAdPlayback",value:function(e){var t=this.container.playback.options;this.playback=this.container.playback,this.playback.stopListening(),this.container.stopListening(),this.adPlayback||(this.adPlayback=new wi(t,this.options.dfp),this.adPlayback.duration=e.getDuration()),this.syncVolumeWithIdPlayback(),this.container.trigger(In.WILL_SET_AD_PLAYBACK),this.container.playback=this.adPlayback,this.container.trigger(In.DID_SET_AD_PLAYBACK,this.container.playback),this.container.bindEvents(),this.adPlayback.ready()}},{key:"adBreakEnded",value:function(){var e=this;this.onBreak&&(this.container.stopListening(),this.playback.bindPlaybackEvents(),this.playback._options=i({},this.adPlayback._options),this.container.playback=this.playback,this.container.playback.volume(100*this.adPlayback.getVolume()),this.container.currentTime=this.playback.currentTime,0===this.options.dfp.podIndex&&this.playback.checkInitialSeek(),this.container.bindEvents()),this.adPlayback&&(this.adPlayback.stop(),this.adPlayback.destroy(),this.adPlayback=null),this.listenToOnce(this.container,Le.CONTAINER_PLAY,(function(){return e.container.settingsUpdate()})),this.containerPlaying||this.hasError||this.options.dfp.shouldSkipAd?(!J.supportsTouchEvents&&this.container.getPlugin("click_to_pause").enable(),$n((function(){return e.container.playback.playWhenReady()}))):this.container.getPlugin("poster").show(),this.onBreak=!1,this.hasError=!1,this.isServedAd=!1}},{key:"syncVolumeWithIdPlayback",value:function(){var e=this.playback.getVolume();null!==e&&this.adPlayback.volume(e)}},{key:"containerTimeUpdate",value:function(e){}},{key:"destroy",value:function(){var e;null===(e=this.adPlayback)||void 0===e||e.destroy(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(lt),Ii=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).core=e,i.$el.on("click",(function(e){e.stopPropagation(),i.mediaControl.trigger(In.MEDIACONTROL_ITEMCLICKED)})),i.$el.addClass("media-control-element"),i}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return"center"}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"kibo",get:function(){return this.mediaControl.kibo}},{key:"isSticky",get:function(){return this.el.classList.contains("media-control-element--sticky")}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&X(e).find("svg path").css("fill",this.buttonsColor)}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.mediaControl.show(),t()}))}},{key:"triggerWillShowModalElement",value:function(){this.core.trigger(In.WILL_SHOW_MODAL_ELEMENT,{name:this.name})}},{key:"triggerDidHideModalElement",value:function(){this.core.trigger(In.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"setSticky",value:function(){this.core.trigger(In.STICKY_MODE_ENABLED),this.el.classList.add("media-control-element--sticky")}},{key:"resetSticky",value:function(){this.core.trigger(In.STICKY_MODE_DISABLED),this.el.classList.remove("media-control-element--sticky")}},{key:"destroy",value:function(){this._mediaControl=null,v(c(n.prototype),"destroy",this).call(this)}}]),n}(qe),Di=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).core=e,i.message={"-1":"Este anúncio encerra em",0:"O seu vídeo começa em",midroll:"O seu vídeo continua em"},i}return o(n,[{key:"name",get:function(){return"dfp_countdown"}},{key:"template",get:function(){return je('<div class="dfp-countdown__text"><%= message %></div>\n<div class="dfp-countdown__time"><%= remainingTime %></div>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"attributes",get:function(){return{class:"dfp-countdown"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,In.DFP_AD_STARTED,this.adStarted),this.listenTo(this.core.options.dfp,In.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.core.options.dfp,In.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.core.options.dfp,In.DFP_AD_ERROR,this.adEnded),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.adEnded),this.mediaControl&&this.listenTo(this.mediaControl,Le.MEDIACONTROL_RENDERED,this.appendToMediaControl)}},{key:"adStarted",value:function(e){e.isLinear()&&(this.playback=this.core.activePlayback,this.renderCountdown(),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this.updateCountdown),this.$el.removeClass("dfp-countdown--hidden"))}},{key:"adEnded",value:function(){this.stopListening(this.playback,Le.PLAYBACK_TIMEUPDATE),this.$el.addClass("dfp-countdown--hidden")}},{key:"renderCountdown",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .dfp-countdown {\n  display: none;\n  position: relative;\n  z-index: 998;\n  pointer-events: none;\n  font-size: 13px;\n  line-height: 13px;\n  color: #e5e886;\n  transition: transform 0.3s ease-out;\n}\n.clappr-player#wp3-player-0 .dfp-countdown.media-control-element {\n  padding-left: 0;\n  padding-right: 0;\n}\n.clappr-player#wp3-player-0 .dfp-countdown__text {\n  display: inline-block;\n  font-family: "opensans-regular", sans-serif;\n}\n.clappr-player#wp3-player-0 .dfp-countdown__time {\n  display: inline-block;\n  font-family: "opensans-bold", sans-serif;\n}\n.clappr-player#wp3-player-0 .dfp-countdown--hidden {\n  display: none;\n}',{playerId:this.container.options.playerId}),t="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$el.html(this.template({message:this.message[this.core.options.dfp.podIndex]||this.message.midroll,remainingTime:Ee.formatTime(t)})),this.$el.append(e[0]),this.$duration=this.$el.find(".dfp-countdown__time"),this.$message=this.$el.find(".dfp-countdown__text"),this.appendToMediaControl()}},{key:"appendToMediaControl",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__left");e[0]&&!this.isRendered&&(e.append(this.el),this.isRendered=!0)}},{key:"updateCountdown",value:function(){var e="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$duration.text(Ee.formatTime(e)),this.$message.text(this.message[this.core.options.dfp.podIndex]||this.message.midroll)}},{key:"destroy",value:function(){this.stopListening(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(Ii);var Ri=Function.prototype,Li=Object.prototype,Pi=Ri.toString,Oi=Li.hasOwnProperty,xi=Pi.call(Object),Mi=Li.toString,Ni=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var Bi=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Mi.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Ni(e);if(null===t)return!0;var n=Oi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pi.call(n)==xi},Ui=function(){function e(){a(this,e)}return o(e,null,[{key:"stringify",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n],r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}},{key:"parse",value:function(e){return e.split(/&/).reduce((function(e,t){var n=m(t.split(/=/),2),i=n[0],r=n[1];return e[i]=r,e}),{})}}]),e}(),Fi=wn.LocalStorage;function Vi(e){return e?Bi(e)?e:Ui.parse(e):{}}function Hi(){var e=Fi.loadRaw("nvgpersona13574",JSON.parse),t={};return e&&(t.nvg_gender=e.gender,t.nvg_age=e.age,t.nvg_income=e.income),t}function ji(){var e=Fi.loadRaw("permutive-id"),t=Fi.loadRaw("_pdfps",JSON.parse),n={};return e&&t&&(n["permutive-id"]=e,n.permutive=t),n}function Ki(e,t){return i(i({},Vi(e.adCustomData)),t)}function Gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Hi(),r=ji(t.isSubscriberOnly),a=Vi(e.adCustomData),s=i(i(i({video_subscription:!!t.isSubscriberOnly},n),r),a);return e.adUnit||(s=Ki(t,s)),s}var Wi=1/0,Yi=NaN,zi=4294967295,qi=/^\s+|\s+$/g,$i=/^[-+]0x[0-9a-f]+$/i,Xi=/^0b[01]+$/i,Zi=/^0o[0-7]+$/i,Qi=parseInt;var Ji=Object.prototype.toString,er=Math.min;function tr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function nr(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Ji.call(e)}(e))return Yi;if(tr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=tr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(qi,"");var n=Xi.test(e);return n||Zi.test(e)?Qi(e.slice(2),n?2:8):$i.test(e)?Yi:+e}(e))===Wi||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ir(e){return e}var rr=function(e,t){if(e=function(e){var t=nr(e),n=t%1;return t==t?n?t-n:t:0}(e),e<1||e>9007199254740991)return[];var n=zi,i=er(e,zi);e-=zi;for(var r=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(i,t="function"==typeof t?t:ir);++n<e;)t(n);return r},ar=wn.embedScript,sr=wn.DOM,or=wn.registerGlobal,lr=we.getInstance(),ur=["video/mp4","video/webm","video/x-msvideo","video/x-motion-jpeg","video/mpeg2","video/x-ms-wmv","application/x-mpegURL","application/vnd.apple.mpegurl","video/MP2T"],cr=new Promise((function(e,t){var n,i;!(J.isSmartTvEnvironment||null!==(n=window.google)&&void 0!==n&&null!==(i=n.ima)&&void 0!==i&&i.settings)?ar("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(e,t):e()})),dr=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).isBootstrapReady=!1,i.isAllAdsCompleted=!1,i.isContainerEnded=!1,i.core.options.skipDFP&&lr.info(i.name,"Ad Skipping is Enabled."),or("google.ima.settings"),i.attachCorePlugins(),i}return o(n,[{key:"name",get:function(){return"dfp"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"attributes",get:function(){return{class:"dfp"}}},{key:"imaScript",get:function(){return cr}},{key:"dfpAdTagTemplate",get:function(){var e="".concat(this.options.env.protocol,"://pubads.g.doubleclick.net/gampad/ads?sz=1280x720&iu=/<%= adAccountId %>/<%= adUnit %>&cmsid=<%= adCmsId %>&vid=<%= videoId %>&cust_params=<%= customParams %>&ciu_szs=940x360&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url=<%= descriptionUrl %>&correlator=[timestamp]");return this.adCreativeProfile&&(e+="&pp=<%= adCreativeProfile %>"),je(e)}},{key:"adTagUrl",get:function(){var e=this.unescapeHtml(this.adUnit),t=encodeURIComponent(this.descriptionUrl),n=encodeURIComponent(this.unescapeHtml(this.adCustomData)),i={adUnit:e,adAccountId:this.adAccountId,adCmsId:this.adCmsId,videoId:this.videoId,descriptionUrl:t,customParams:n};return this.adCreativeProfile&&(i.adCreativeProfile=this.adCreativeProfile),this.dfpAdTagTemplate(i)}},{key:"sizes",get:function(){return{playerWidth:this.core.el&&this.core.el.offsetWidth,defaultWidth:640,linearHeight:400,nonLinearHeight:150}}},{key:"shouldSkipAd",get:function(){var e,t,n=this.core.options.skipDFP,i=!(null!==(e=window.google)&&void 0!==e&&null!==(t=e.ima)&&void 0!==t&&t.settings),r=sr.hasChildElement(this.core.el,".dfp-ad-overlay");return n||i||!this.adUnit||!r}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,Le.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,In.DFP_DISABLE,this.disable),this.listenTo(this.core,In.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"onTapToUnmuteClicked",value:function(){if(this.adsManager){var e=this.adsManager.getVolume();this.adsManager.setVolume(1),this.adsManager.setVolume(e)}}},{key:"enable",value:function(){this.enabled||(this.dfpAdOverlay&&this.dfpAdOverlay.enable(),this.dfpCountdown&&this.dfpCountdown.enable(),this.dfpVideoAd&&this.dfpVideoAd.enable(),this.adCompanion&&this.adCompanion.enable(),v(c(n.prototype),"enable",this).call(this),this.bindContainerEvents())}},{key:"disable",value:function(){this.enabled&&(this.dfpAdOverlay&&this.dfpAdOverlay.disable(),this.dfpCountdown&&this.dfpCountdown.disable(),this.dfpVideoAd&&this.dfpVideoAd.disable(),this.adCompanion&&this.adCompanion.disable(),v(c(n.prototype),"disable",this).call(this),this.listenToOnce(this.core,In.DFP_ENABLE,this.enable))}},{key:"attachCorePlugins",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0,this.core._options=Object.assign(this.core.options,{dfp:this}),this.dfpAdOverlay=new Si(this.core),this.dfpCountdown=new Di(this.core),this.core.$el.append(this.dfpAdOverlay.el),this.core.addPlugin(this.dfpAdOverlay)}},{key:"attachContainerPlugins",value:function(){this.container&&(this.container._options=Object.assign(this.container.options,{dfp:this}),this.dfpVideoAd=new Ci(this.container),this.container.addPlugin(this.dfpVideoAd))}},{key:"configure",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0;var e=this.core.getCurrentContainer().options;this.videoId=e&&e.src||e.sources&&e.sources[0],!1!==this.core.options.useStyledNonLinearAds&&(this.core.options.useStyledNonLinearAds=!0),this.container&&(this.stopListening(this.container.playback,In.WM_VIDEO_METADATA_LOADED),this.listenTo(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.init))}},{key:"init",value:function(e){var t=this,i=this.core.getCurrentContainer().options;this.adAccountId=i.adAccountId||e.adAccountId||n.DEFAULT_ACCOUNT_ID,this.adCmsId=i.adCmsId||e.adCmsId||n.DEFAULT_CMS_ID,this.descriptionUrl=e.urlForConsumption||n.DEFAULT_DESCRIPTION_URL,this.adCreativeProfile=i.adCreativeProfile,this.error=!1,this.adUnit=i.adUnit||e.adUnit,this.adUnit&&(this.adCustomData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ui.stringify(Gi(e,t))}(i,e),this.setupCompanion(),this.imaScript.then((function(){return t.bootstrapApi()}),(function(){return t.onAdError({type:"imaLoadError",message:"google.ima not available"})})))}},{key:"triggerContentResume",value:function(){this.trigger(In.DFP_CONTENT_RESUME),this.container.trigger(In.DFP_CONTENT_RESUME)}},{key:"bootstrapApi",value:function(){this.error=!1,this.destroyIMA(),this.shouldSkipAd||(this.setupIMA(),this.requestAd(this.adTagUrl),this.isAllAdsCompleted=!1,this.isBootstrapReady=!0)}},{key:"setupIMA",value:function(){if(google.ima.settings.setLocale("pt-br"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.options.adPublisherProvidedID&&google.ima.settings.setPpid(this.options.adPublisherProvidedID),this.adDisplayContainer||(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dfpAdOverlay.el,this.dfpVideoAd.videoElement)),this.adsLoader||(this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)),this.adsRenderingSettings||(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,J.isChrome&&J.isMobile&&(this.adsRenderingSettings.mimeTypes=ur)),!this.adRequest){var e=Math.min(this.sizes.defaultWidth,this.sizes.playerWidth);this.adsRequest=new google.ima.AdsRequest,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=this.sizes.linearHeight,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=this.sizes.nonLinearHeight}}},{key:"setupCompanion",value:function(){Object.assign({},this.core.options,{adUnit:this.adUnit,adCustomData:this.adCustomData}),this.adCompanion&&this.adCompanion.stopListening(),this.adCompanion=new Ti(this.core,this.adAccountId)}},{key:"destroyIMA",value:function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.isAllAdsCompleted||(this.adDisplayContainer&&this.adDisplayContainer.destroy(),this.adDisplayContainer=null),this.adsManager=null,this.adsLoader=null,this.isBootstrapReady=!1}},{key:"destroyVideoAd",value:function(){this.dfpVideoAd&&(this.dfpVideoAd.stopListening(),this.dfpVideoAd.destroy(),this.dfpVideoAd=null)}},{key:"onAdError",value:function(e){if(!this.error){var t=e&&this.getErrorData(e);lr.warn(this.name,"dfp encountered an error, skipping -",t,e),this.error=!0,this.trigger(In.DFP_AD_ERROR,t),this.container.trigger(In.DFP_AD_ERROR,t)}}},{key:"getErrorData",value:function(e){var t="function"==typeof e.getError?e.getError():e;if(!t)return{};var n="function"==typeof t.getType?t.getType():t.type||t.o||t,i="function"==typeof t.getErrorCode?t.getErrorCode():"",r="function"==typeof t.getMessage?t.getMessage():t.message||t.l||t;return{type:"".concat(n).concat(i?"-"+i:""),message:r}}},{key:"onAdsManagerLoaded",value:function(e){var t=this;this.adsRenderingSettings.useStyledNonLinearAds=this.core.options.useStyledNonLinearAds,this.adsManager=e.getAdsManager(this.dfpVideoAd.videoElement,this.adsRenderingSettings),this.discardWatchedAds(this.watchedAds),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,(function(e){return t.onAdLog(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,(function(e){return t.onAdMetadata(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){return t.onContentPauseRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){return t.onContentResumeRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){return t.onAdStarted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){return t.onAdResumed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){return t.onAdPaused(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){return t.onAdSkipped(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){return t.onAdLoaded(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,(function(e){return t.onAdClosed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){return t.onAdCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){return t.onAllAdsCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){return t.onAdClicked(e)})),this.trigger(In.DFP_MANAGER_LOADED),this.container.trigger(In.DFP_MANAGER_LOADED)}},{key:"onResourceReady",value:function(){this.isContainerEnded=!1,this.shouldSkipAd?this.triggerContentResume():this.startAd()}},{key:"startAd",value:function(){if(this.adsManager)try{this.adsManager.init(this.dfpAdOverlay.$el.width(),this.dfpAdOverlay.$el.height(),google.ima.ViewMode.NORMAL),this.adsManager.start(),this.container.trigger(In.DID_START_ADS_MANAGER)}catch(e){this.onAdError({type:"adError",message:e&&e.message})}else this.listenToOnce(this,In.DFP_MANAGER_LOADED,this.startAd)}},{key:"discardWatchedAds",value:function(e){var t=this;rr(e,(function(e){setTimeout((function(){return t.adsManager.discardAdBreak()}),500*e)}))}},{key:"onAdLog",value:function(e){var t=(e.getAdData()||{}).adError;t.getErrorCode()===google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE&&this.onAdError(t)}},{key:"onAdClicked",value:function(e){var t=e.getAd();this.container.trigger(In.DFP_AD_CLICKED,t)}},{key:"onAdMetadata",value:function(){this.container.trigger(In.DFP_AD_METADATA)}},{key:"onAdLoaded",value:function(e){this.error=!1;var t=e.getAd();this.trigger(In.DFP_AD_LOADED,t),this.container.trigger(In.DFP_AD_LOADED,t)}},{key:"onAdStarted",value:function(e){var t=e.getAd();this.watchedAds+=1,this.container.playback.trigger(Le.PLAYBACK_PLAY),this.trigger(In.DFP_AD_STARTED,t),this.container.trigger(In.DFP_AD_STARTED,t)}},{key:"onAdResumed",value:function(e){var t=e.getAd();this.container.playback.trigger(Le.PLAYBACK_PLAY),this.container.trigger(In.DFP_AD_RESUME,t.isLinear())}},{key:"onAdPaused",value:function(e){var t=e.getAd();this.container.playback.trigger(Le.PLAYBACK_PAUSE),this.container.trigger(In.DFP_AD_PAUSE,t.isLinear())}},{key:"onAdClosed",value:function(e){var t=e.getAd();this.trigger(In.DFP_AD_CLOSED,t.isLinear()),this.container.trigger(In.DFP_AD_CLOSED,t.isLinear())}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(In.DFP_AD_SKIPPED,t.isLinear()),this.container.trigger(In.DFP_AD_SKIPPED,t.isLinear())}},{key:"onAdCompleted",value:function(e){var t=e.getAd();this.trigger(In.DFP_AD_COMPLETED,t.isLinear()),this.container.trigger(In.DFP_AD_COMPLETED,t.isLinear())}},{key:"onAllAdsCompleted",value:function(e){this.isAllAdsCompleted=!0;var t=e.getAd();this.trigger(In.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.container.trigger(In.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.watchedAds=0,this.triggerDfpFinished()}},{key:"onContentPauseRequested",value:function(e){var t=e.getAd();this.container.trigger(In.DFP_CONTENT_PAUSE,t),this.trigger(In.DFP_CONTENT_PAUSE,t),this.core.getCurrentContainer()||this.adsManager.stop()}},{key:"onContentResumeRequested",value:function(){this.error||(!this.dfpVideoAd.isServedAd&&this.container.trigger(In.DFP_AD_NOTSERVED),this.triggerContentResume())}},{key:"containerChanged",value:function(){this.stopListening(this,In.DFP_MANAGER_LOADED),this.destroyVideoAd(),this.destroyIMA(),this.container=this.core.activeContainer;var e=this.container.playback;e.options.onPip?this.listenToOnce(this.core.getCurrentContainer().playback,In.WM_RESOURCE_READY,(function(){return e.play()})):(this.attachContainerPlugins(),this.configure(),this.bindContainerEvents(),this.trigger(In.DFP_CONTENT_ENDED),this.container.trigger(In.DFP_CONTENT_ENDED)),this.listenTo(this.container,Le.CONTAINER_ENDED,this.onContainerEnded),this.listenTo(this.container,Le.CONTAINER_STOP,this.onContainerEnded)}},{key:"triggerDfpFinished",value:function(){var e=this.isContainerEnded&&this.isAllAdsCompleted,t=this.isContainerEnded&&this.error;(e||t)&&(this.trigger(In.DFP_FINISHED),this.container.trigger(In.DFP_FINISHED))}},{key:"onContainerEnded",value:function(){this.isContainerEnded=!0,this.bindContainerEvents(),this.triggerDfpFinished()}},{key:"bindContainerEvents",value:function(){this.stopListening(this.container,In.WATCH_SESSION_END),this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.container,In.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onSessionEnd",value:function(){this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED,this.restartAd)}},{key:"restartAd",value:function(){this.bootstrapApi(),this.startAd()}},{key:"contentEnded",value:function(){this.trigger(In.DFP_CONTENT_ENDED),this.container.trigger(In.DFP_CONTENT_ENDED),this.adsLoader&&this.adsLoader.contentComplete()}},{key:"contentStarted",value:function(){this.trigger(In.DFP_CONTENT_STARTED),this.container.trigger(In.DFP_CONTENT_STARTED)}},{key:"onPlayRequestedReady",value:function(){!this.isBootstrapReady&&this.bootstrapApi(),this.adDisplayContainer&&this.adDisplayContainer.initialize()}},{key:"requestAd",value:function(e){var t,n;this.adsRequest.adTagUrl=e,null===(t=this.adsLoader)||void 0===t||null===(n=t.requestAds)||void 0===n||n.call(t,this.adsRequest)}},{key:"unescapeHtml",value:function(e){return X("<div/>").html(e).text()}},{key:"destroy",value:function(){this.destroyIMA(),v(c(n.prototype),"destroy",this).call(this)}}],[{key:"DEFAULT_ACCOUNT_ID",get:function(){return 95377733}},{key:"DEFAULT_CMS_ID",get:function(){return 11413}},{key:"DEFAULT_DESCRIPTION_URL",get:function(){return"https://redeglobo.globo.com/"}}]),n}(ut),hr="dai-error",pr="dai-client-not-available",fr="redirect-url-not-available",gr=function(){function e(){a(this,e)}return o(e,[{key:"ssbURL",get:function(){return this.googleDaiSSBUrlTemplate.replace("<%= ASSET_KEY %>",this.assetKey)}},{key:"isClientScriptAvailable",get:function(){var e,t;return!(null===(e=window.google)||void 0===e||null===(t=e.ima)||void 0===t||!t.dai)}},{key:"load",value:function(e){var t,n,i=e.assetKey,r=e.adTagParameters,a=e.options;return this.assetKey=i,this.adTagParameters=r,this.googleDaiSSBUrlTemplate=null==a||null===(t=a.env)||void 0===t?void 0:t.googleDaiSSBUrlTemplate,this.googleImaSdkUrl=null==a||null===(n=a.env)||void 0===n?void 0:n.googleImaSdkUrl,null!=a&&a.isDAISSBRequired?this.loadSSB():this.loadClient()}},{key:"loadClient",value:function(){var e=this;return new Promise((function(t,n){if(e.isClientScriptAvailable)return t({isSSB:!1});wn.embedScript(e.googleImaSdkUrl).then((function(){return t({isSSB:!1})}),(function(){return e.loadSSBAsFallback(t,n)}))}))}},{key:"loadSSBAsFallback",value:function(e,t){return this.loadSSB().then((function(t){return e(i(i({},t),{},{isSSB:!0}))}),(function(){return t({errorCode:pr})}))}},{key:"loadSSB",value:function(){var e=this;return new Promise((function(t,n){X.ajax({url:e.ssbURL,type:"POST",data:i({"dai-ssb":!0},e.adTagParameters)}).done((function(e){t(i(i({},e),{},{isSSB:!0}))})).fail((function(){n({errorCode:fr})}))}))}}]),e}(),vr=new gr,mr=function(){function e(t){var n=t.videoElement,i=t.adUiElement,r=t.adTagParameters,s=t.assetKey;a(this,e),this.API=google.ima.dai.api,this.assetKey=s,this.adTagParameters=r,this._streamManager=new this.API.StreamManager(n,i)}return o(e,[{key:"requestLiveStream",value:function(){this.streamRequest=new this.API.LiveStreamRequest,this.streamRequest.assetKey=this.assetKey,this.adTagParameters&&(this.streamRequest.adTagParameters=this.adTagParameters),this._streamManager.requestStream(this.streamRequest)}},{key:"addListeners",value:function(e){var t=e.onDaiLoaded,n=e.onDaiError,i=e.onAdBreakStarted,r=e.onAdBreakEnded;this._streamManager.addEventListener(this.API.StreamEvent.Type.LOADED,t,!1),this._streamManager.addEventListener(this.API.StreamEvent.Type.ERROR,n,!1),this._streamManager.addEventListener(this.API.StreamEvent.Type.AD_BREAK_STARTED,i,!1),this._streamManager.addEventListener(this.API.StreamEvent.Type.AD_BREAK_ENDED,r,!1)}},{key:"processMetadata",value:function(){var e;return(e=this._streamManager).processMetadata.apply(e,arguments)}},{key:"onTimedMetadata",value:function(){var e;return(e=this._streamManager).onTimedMetadata.apply(e,arguments)}},{key:"reset",value:function(){var e;return(e=this._streamManager).reset.apply(e,arguments)}}]),e}(),yr={"dai-dvr":120};function br(e){return Object.keys(e).reduce((function(t,n){var i=encodeURIComponent(e[n]),r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}var Er=["hls","html5","Tizen"],Ar="DAI_RESOURCE_LOADED",_r="DAI_ERROR",Tr="DAI_AD_BREAK_STARTED",kr="DAI_AD_BREAK_ENDED",Sr="dai-ad-container",wr="dai-ad-container--hidden",Cr="ssb",Ir="ima-sdk";Le.register(Ar),Le.register(_r),Le.register(Tr),Le.register(kr);var Dr=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).render(),i}return o(n,[{key:"name",get:function(){return"dai"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"isPlaybackSupported",get:function(){return Er.includes(this.playback.innerPlaybackName)}},{key:"attributes",get:function(){return{class:"".concat(Sr," ").concat(wr)}}},{key:"adTagParameters",get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.daiCustomData,n=e.adPublisherProvidedID,r=i({},J.isSmartTvEnvironment?yr:{});return t&&(r.cust_params=br(t)),n&&(r.ppid=n),r}(this.options)}},{key:"assetKey",get:function(){var e;return this.playback.useSingleAudioUrls?null===(e=this.playback.currentAudioTrack)||void 0===e?void 0:e.asset_key:this.resource.assetKey}},{key:"render",value:function(){var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 .dai-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 448;\n}\n.clappr-player#wp3-player-0 .dai-ad-container--hidden {\n  display: none;\n}",{playerId:this.options.playerId});this.el.appendChild(e[0]),this.container.el.appendChild(this.el)}},{key:"bindEvents",value:function(){this.playback=this.container.playback,this.listenToOnce(this.playback,In.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenToOnce(this.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.playback,Le.PLAYBACK_STOP,this.resetStreamManager),this.listenToOnce(this.playback,Le.PLAYBACK_ENDED,this.resetStreamManager),this.listenToOnce(this.playback,Le.PLAYBACK_ERROR,this.resetStreamManager)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedResource;this.playback.isLive&&t.dai&&this.isPlaybackSupported&&(this.options.enableDAIResourceLoader=!0,this.resource=t,this.bindPlaybackID3Event(),this.loadDAI())}},{key:"onFallbackSourceSelected",value:function(){var e;null!==(e=this.resource)&&void 0!==e&&e.shouldPlayWithDAI||this.resetStreamManager()}},{key:"bindPlaybackID3Event",value:function(){switch(this.playback.innerPlaybackName){case"hls":this.listenTo(this.innerPlayback,Le.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,this.onHLSFragParsingMetadata);break;case"html5":this.listenTo(this.innerPlayback,Le.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,this.onHTML5MetadataCueChance)}}},{key:"onHTML5MetadataCueChance",value:function(e){this.streamManager&&e&&this.streamManager.onTimedMetadata(e)}},{key:"onHLSFragParsingMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;this.streamManager&&n&&n.samples.forEach((function(t){return e.streamManager.processMetadata("ID3",t.data,t.pts)}))}},{key:"loadDAI",value:function(){var e=this;return vr.load({assetKey:this.assetKey,adTagParameters:this.adTagParameters,options:this.options}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isSSB,i=t.stream_id,r=t.stream_manifest;return n?e.onDAIResourceLoaded(r,i,Cr):e.initStreamManager()})).catch((function(t){var n=t.errorCode;e.onError({errorCode:n})}))}},{key:"initStreamManager",value:function(){this.streamManager=new mr({videoElement:this.playback.videoEl,adUiElement:J.isSmartTvEnvironment?void 0:this.el,adTagParameters:this.adTagParameters,assetKey:this.assetKey}),this.streamManager.addListeners({onDaiLoaded:this.onDaiLoaded.bind(this),onDaiError:this.onDaiError.bind(this),onAdBreakStarted:this.onAdBreakStarted.bind(this),onAdBreakEnded:this.onAdBreakEnded.bind(this)}),this.streamManager.requestLiveStream()}},{key:"toggleContainerVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.el.classList.toggle(wr,!e)}},{key:"onDaiLoaded",value:function(e){var t=e.getStreamData(),n=t.url,i=t.streamId;we.info(this.name,"DAI loaded, streamId: ".concat(i)),this.onDAIResourceLoaded(n,i,Ir)}},{key:"onAdBreakStarted",value:function(){this.toggleContainerVisibility(!0),this.container.trigger(Le.Custom.DAI_AD_BREAK_STARTED)}},{key:"onAdBreakEnded",value:function(){this.toggleContainerVisibility(!1),this.container.trigger(Le.Custom.DAI_AD_BREAK_ENDED)}},{key:"onDaiError",value:function(e){var t=e.getStreamData().errorMessage;we.warn(this.name,"DAI Error. Error Message: ",t),this.onError({errorCode:hr,errorMessage:t,event:e,notifiable:!0})}},{key:"onDAIResourceLoaded",value:function(e,t,n){this.container.trigger(Le.Custom.DAI_RESOURCE_LOADED,{url:e,streamId:t,implementationType:n})}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.enableDAIResourceLoader=!1,this.container.trigger(Le.Custom.DAI_ERROR,e),this.resetStreamManager(),this.stopListening()}},{key:"resetStreamManager",value:function(){var e;null===(e=this.streamManager)||void 0===e||e.reset()}},{key:"destroy",value:function(){this.resetStreamManager(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(ct);function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pr(e,t,n){return t&&Lr(e.prototype,t),n&&Lr(e,n),e}function Or(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}function xr(e){return xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xr(e)}function Mr(e,t){return Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mr(e,t)}function Nr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=xr(e);if(t){var r=xr(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Nr(this,n)}}var Ur=function(e){Or(n,e);var t=Br(n);function n(e){return Rr(this,n),t.call(this,e)}return Pr(n,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,Le.CONTAINER_CLICK,this.click),this.listenTo(this.container,Le.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var e=this.config.onClickPayload;(this.container.getPlaybackType()!==Xe.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==Xe.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}]),n}(lt);X('link[rel="shortcut icon"]');var Fr=function(e){this.element=e||window.document,this.initialize()};Fr.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},Fr.KEY_CODES_BY_NAME={},function(){for(var e in Fr.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(Fr.KEY_NAMES_BY_CODE,e)&&(Fr.KEY_CODES_BY_NAME[Fr.KEY_NAMES_BY_CODE[e]]=+e)}(),Fr.MODIFIERS=["shift","ctrl","alt"],Fr.registerEvent=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,Fr.unregisterEvent=document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,Fr.stringContains=function(e,t){return-1!==e.indexOf(t)},Fr.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},Fr.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},Fr.isString=function(e){return Fr.stringContains(Object.prototype.toString.call(e),"String")},Fr.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},Fr.extractModifiers=function(e){var t,n;for(t=[],n=0;n<Fr.MODIFIERS.length;n++)Fr.stringContains(e,Fr.MODIFIERS[n])&&t.push(Fr.MODIFIERS[n]);return t},Fr.extractKey=function(e){var t,n;for(t=Fr.neatString(e).split(" "),n=0;n<t.length;n++)if(!Fr.arrayIncludes(Fr.MODIFIERS,t[n]))return t[n]},Fr.modifiersAndKey=function(e){var t,n;return Fr.stringContains(e,"any")?Fr.neatString(e).split(" ").slice(0,2).join(" "):(t=Fr.extractModifiers(e),(n=Fr.extractKey(e))&&!Fr.arrayIncludes(Fr.MODIFIERS,n)&&t.push(n),t.join(" "))},Fr.keyName=function(e){return Fr.KEY_NAMES_BY_CODE[e+""]},Fr.keyCode=function(e){return+Fr.KEY_CODES_BY_NAME[e]},Fr.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<Fr.MODIFIERS.length;e++)this.lastModifiers[Fr.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),Fr.registerEvent(this.element,"keydown",this.downHandler),Fr.registerEvent(this.element,"keyup",this.upHandler),Fr.registerEvent(window,"unload",(function e(){Fr.unregisterEvent(t.element,"keydown",t.downHandler),Fr.unregisterEvent(t.element,"keyup",t.upHandler),Fr.unregisterEvent(window,"unload",e)}))},Fr.prototype.handler=function(e){var t=this;return function(n){var i,r,a;for(n=n||window.event,t.lastKeyCode=n.keyCode,i=0;i<Fr.MODIFIERS.length;i++)t.lastModifiers[Fr.MODIFIERS[i]]=n[Fr.MODIFIERS[i]+"Key"];for(Fr.arrayIncludes(Fr.MODIFIERS,Fr.keyName(t.lastKeyCode))&&(t.lastModifiers[Fr.keyName(t.lastKeyCode)]=!0),r=t["keys"+Fr.capitalize(e)],i=0;i<r.any.length;i++)!1===r.any[i](n)&&n.preventDefault&&n.preventDefault();if(r[a=t.lastModifiersAndKey()])for(i=0;i<r[a].length;i++)!1===r[a][i](n)&&n.preventDefault&&n.preventDefault()}},Fr.prototype.registerKeys=function(e,t,n){var i,r,a=this["keys"+Fr.capitalize(e)];for(Fr.isString(t)&&(t=[t]),i=0;i<t.length;i++)r=t[i],a[r=Fr.modifiersAndKey(r+"")]?a[r].push(n):a[r]=[n];return this},Fr.prototype.unregisterKeys=function(e,t,n){var i,r,a,s=this["keys"+Fr.capitalize(e)];for(Fr.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(a=t[i],a=Fr.modifiersAndKey(a+""),null===n)delete s[a];else if(s[a])for(r=0;r<s[a].length;r++)if(String(s[a][r])===String(n)){s[a].splice(r,1);break}return this},Fr.prototype.off=function(e){return this.unregisterKeys("down",e,null)},Fr.prototype.delegate=function(e,t,n){return null!==n||void 0!==n?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},Fr.prototype.down=function(e,t){return this.delegate("down",e,t)},Fr.prototype.up=function(e,t){return this.delegate("up",e,t)},Fr.prototype.lastKey=function(e){return e?this.lastModifiers[e]:Fr.keyName(this.lastKeyCode)},Fr.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<Fr.MODIFIERS.length;t++)this.lastKey(Fr.MODIFIERS[t])&&e.push(Fr.MODIFIERS[t]);return Fr.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var Vr=Fr;Ee.Config,Ee.Fullscreen,Ee.formatTime,Ee.extend,Ee.removeArrayItem;var Hr=Ee.formatTime,jr=function(e){Or(n,e);var t=Br(n);function n(e){var i;return Rr(this,n),(i=t.call(this,e)).hoveringOverSeekBar=!1,i.hoverPosition=null,i.duration=null,i.firstFragDateTime=null,i.actualLiveTime=!!i.mediaControl.options.actualLiveTime,i.actualLiveTime&&(i.mediaControl.options.actualLiveServerTime?i.actualLiveServerTimeDiff=(new Date).getTime()-new Date(i.mediaControl.options.actualLiveServerTime).getTime():i.actualLiveServerTimeDiff=0),i}return Pr(n,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"template",get:function(){return je("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===Xe.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,Le.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,Le.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,Le.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,Le.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),t=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),t=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(e=t-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=Hr(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var n=Hr(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),r=this.$el.width(),a=this.hoverPosition*i;a-=r/2,a=Math.max(0,Math.min(a,i-r)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){var e=Ke.getStyleFor('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),n}(qe),Kr=wn.getHostname,Gr=wn.applySizeClass,Wr=window.WM&&window.WM.Settings||{},Yr=Vr,zr=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).core._mediaControl=h(i),i.keepVisible=!1,i.userDisabled=!1,i.userKeepVisible=!1,i.isRendered=!1,i.focusElement=i.core.el,i.lastChromelessValue=!!i.options.chromeless,i.lastChromelessValue&&i.updateChromelessState(),i.kibo=new Yr(i.focusElement),i}return o(n,[{key:"name",get:function(){return"globo_media_control"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===Xe.NO_OP}},{key:"hasPlaceholder",get:function(){return this._hasPlaceholder},set:function(e){this._hasPlaceholder=e}},{key:"attributes",get:function(){return{class:"media-control".concat(J.isMobile?" mobile":"").concat(J.supportsTouchEvents?" touch":"")}}},{key:"styles",get:function(){return""}},{key:"events",get:function(){var e={click:"onTap"},t={"mouseenter [data-controls]":"setUserKeepVisible","mouseleave [data-controls]":"resetUserKeepVisible",focusin:"show"},n=i(i(i({},e),t),{},{touchend:this.resetUserKeepVisible});return J.isHybridDevice?n:J.isMobile?e:t}},{key:"getTapSide",value:function(e){var t=this.$el.width();return e-this.$el.offset().left<t/2?"left":"right"}},{key:"onTap",value:function(e){this.resetDoubleTapTimeout(),this.checkDoubleTap(e)?this.onDoubleTap(e):this.waitForDoubleTap()}},{key:"waitForDoubleTap",value:function(){var e=this;this.doubleTapWaitingTimeout=setTimeout((function(){e.onSingleTap()}),250)}},{key:"onSingleTap",value:function(){this.toggleMediaControl()}},{key:"onDoubleTap",value:function(e){var t=this.getTapSide(e.pageX);e.preventDefault(),this.core.trigger(In.MEDIACONTROL_DOUBLE_TAP,{event:e,tapSide:t})}},{key:"checkDoubleTap",value:function(e){var t=this.getTapSide(e.pageX),n=(new Date).getTime(),i=n-this.lastTapTime,r=i<250&&i>0&&this.lastTapPosition===t;return this.lastTapTime=n,this.lastTapPosition=t,r}},{key:"resetDoubleTapTimeout",value:function(){this.doubleTapWaitingTimeout&&clearTimeout(this.doubleTapWaitingTimeout),this.doubleTapWaitingTimeout=null}},{key:"toggleMediaControl",value:function(){this.isVisible()?this.hideDelayed(0,!0):this.show()}},{key:"template",get:function(){return je('<div class="media-control-panel">\n  <div class="media-control-panel__back-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__upper">\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n    <div class="media-control-position__center"></div>\n  </div>\n  <div class="media-control-panel__middle">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__between">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__lower" data-controls>\n    <div class="media-control-position__center"></div>\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__between"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__front-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__modal"></div>\n</div>\n')}},{key:"getPanel",value:function(e){return this.$el.find(".media-control-panel__".concat(e))}},{key:"getExternalInterface",value:function(){return{showMediaControlPanel:this.showPanel,hideMediaControlPanel:this.hidePanel}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,Le.CORE_RESIZE,this.playerResize),this.listenTo(this,In.MEDIACONTROL_MODAL_SHOW,this.showModal),this.listenTo(this,In.MEDIACONTROL_MODAL_HIDE,this.hideModal),this.listenTo(this,In.MEDIACONTROL_KEEPVISIBLE,(function(t){return t?e.setUserKeepVisible():e.resetUserKeepVisible()})),this.listenTo(this,In.MEDIACONTROL_ITEMCLICKED,this.show),this.listenTo(this.core,In.WILL_SHOW_MODAL_ELEMENT,this.onModalElementShow),this.listenTo(this.core,In.DID_HIDE_MODAL_ELEMENT,this.onModalElementHide),this.listenTo(this.core,Le.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,In.WILL_SHOW_DRAWER,this.onStartExpandDrawer),this.listenTo(this.core,In.WILL_HIDE_DRAWER,this.onStartShrinkDrawer),this.listenTo(this.core,In.DRAWER_HAS_PLACEHOLDER,this.onPlaceholderRequested),this.listenTo(this.core,In.SYNC_DRAWER_STATE_RESPONSE,this.syncWithDrawerIsShownResponse)}},{key:"onStartExpandDrawer",value:function(){this.updatePanelsVisibility({hide:!0,opaque:!0}),this.$modal.addClass("modal--hide")}},{key:"onStartShrinkDrawer",value:function(){this.$modal&&0==this.$modal.contents().length?(this.updatePanelsVisibility({hide:!1,opaque:!1}),J.isMobile&&this.show()):this.$modal.removeClass("modal--hide")}},{key:"bindContainerEvents",value:function(){this.container&&(this.container.trigger(Le.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.listenTo(this.container,Le.CONTAINER_PLAY,this.updatePlaybackTypeClass),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERING,this.updatePlaybackTypeClass),this.listenTo(this.container,Le.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,Le.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,In.DFP_AD_SKIPPED,this.resetFocus),this.listenTo(this.container,In.DFP_AD_CLICKED,this.resetFocus),this.listenTo(this.container,Le.Custom.DAI_AD_BREAK_STARTED,this.onDAIAdBreakStarted),this.listenTo(this.container,Le.Custom.DAI_AD_BREAK_ENDED,this.onDAIAdBreakEnded),J.isMobile&&this.listenTo(this.container,In.WILL_QUICK_SEEK,this.hide),this.render(),this.container.mediaControlDisabled&&this.disable())}},{key:"onDAIAdBreakStarted",value:function(){this.$el.addClass("media-control--dai")}},{key:"onDAIAdBreakEnded",value:function(){this.$el.removeClass("media-control--dai")}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.lastChromelessValue=this.options.chromeless,this.options.chromeless?(this.options.allowUserInteraction=!1,this.disable(),this.$el.hide()):(this.options.allowUserInteraction=!0,this.enable(),this.$el.show())}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,(this.container&&this.container.mediaControlDisabled||this.core.options.chromeless)&&this.disable(),this.bindContainerEvents(),this.updatePlaybackTypeClass(),this.trigger(Le.MEDIACONTROL_CONTAINERCHANGED)}},{key:"createCachedElements",value:function(){this.$modal=this.$el.find(".media-control-panel__modal"),this.$lowerPanel=this.$el.find(".media-control-panel__lower"),this.$upperPanel=this.$el.find(".media-control-panel__upper")}},{key:"initMediaControlPlugins",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof Ii})).forEach((function(t){return e.renderMediaControlPlugin(t)}))}},{key:"renderMediaControlPlugin",value:function(){throw new Error("renderMediaControlPlugin is not implemented")}},{key:"updatePlaybackTypeClass",value:function(){if(this.container){var e=this.container.getPlaybackType();this.$el.removeClass("vod live dvr ad dvr-disabled"),e&&this.$el.addClass(e),this.addDVRClass(e),"ad"===e&&this.core.$el.removeClass("nocursor")}}},{key:"addDVRClass",value:function(e){"live"===e&&(this.container.isDvrEnabled()?this.container.isDvrInUse()&&this.$el.addClass("dvr"):this.$el.addClass("dvr-disabled"))}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0,this.trigger(In.MEDIACONTROL_KEEPVISIBLE,!0))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1,this.trigger(In.MEDIACONTROL_KEEPVISIBLE,!1))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=i({hide:!0},e),this.keepVisible=!1,this.userDisabled=!0,this.userKeepVisible=!1,e.hide&&this.hide(),this.updatePlaybackTypeClass()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isRendered&&this.render();var t=this.container.getPlaybackType(),n=Wr&&Wr.MediaControl||{},r=n.ShowOnStartList,a=(r||[]).find((function(e){return e.test(Kr())})),s=a||"ad"===t;e=i({show:s},e),this.options.chromeless||(this.userDisabled=!1,e.show&&this.show())}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!J.isMobile||!e||"mousemove"!==e.type){clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),3e3),this.disabled||this.isVisible()||(this.trigger(Le.MEDIACONTROL_SHOW),this.core.trigger(Le.MEDIACONTROL_SHOW),this.container.trigger(Le.CONTAINER_MEDIACONTROL_SHOW),this.$el.removeClass("media-control-hide"),this.updateCursorStyle(!0))}}},{key:"hideDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.container&&(this.isVisible()&&(!J.supportsTouchEvents||this.container.isPlaying())||n)){var i=t||3e3;clearTimeout(this.hideId),(this.disabled||!1!==this.options.hideMediaControl)&&(!this.disabled&&(t||this.userKeepVisible||this.keepVisible)?this.hideId=setTimeout((function(){return e.hideDelayed()}),i):this.hide())}}},{key:"hide",value:function(){!this.container||this.keepVisible||this.userKeepVisible||(this.core.trigger(Le.MEDIACONTROL_HIDE),this.trigger(Le.MEDIACONTROL_HIDE),this.container.trigger(Le.CONTAINER_MEDIACONTROL_HIDE),this.$el.addClass("media-control-hide"),this.hideModal(),this.updateCursorStyle(!1))}},{key:"updateCursorStyle",value:function(e){"ad"!==this.container.getPlaybackType()&&(e||this.disabled?this.core.$el.removeClass("nocursor"):this.core.$el.addClass("nocursor"))}},{key:"showPanel",value:function(e){var t=e.panel;this.getPanel(t).removeClass("panel--hide")}},{key:"hidePanel",value:function(e){var t=e.panel;this.getPanel(t).addClass("panel--hide")}},{key:"showModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$modal.html(e),this.$modal.show().off("transitionend"),this.$modal.removeClass("modal--hide"),t.hidePanels&&this.updatePanelsVisibility({hide:!0}),this.updateClickToPausePlugin({enable:!1}),this.updateCastInfoVisibility({hidden:!0})}},{key:"hideModal",value:function(){var e=this,t=this.$modal&&this.$modal.contents();!t||t&&!t.length||(this.$modal.addClass("modal--hide").on("transitionend",(function(){e.$modal.hide().off("transitionend"),e.$modal.html("")})),this.syncWithDrawerIsShownRequest(),this.updatePanelsVisibility({hide:this.drawerOverModal}),this.updateClickToPausePlugin({enable:!0}),this.updateCastInfoVisibility({hidden:!1}))}},{key:"syncWithDrawerIsShownRequest",value:function(){this.core.trigger(In.SYNC_DRAWER_STATE_REQUEST)}},{key:"syncWithDrawerIsShownResponse",value:function(e){this.drawerOverModal=e}},{key:"onModalElementShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.addClass("".concat(t,"-modal--visible"))}},{key:"onModalElementHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.removeClass("".concat(t,"-modal--visible"))}},{key:"updateCastInfoVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hidden?"addClass":"removeClass";if(this.container&&this.container.$el[t]("chromecast-playback-overlay--hidden"),"boolean"==typeof e.opaque){var n=e.opaque?"addClass":"removeClass";this.$el[n]("media-control--panels-opaque")}}},{key:"onPlaceholderRequested",value:function(){this.hasPlaceholder=!0}},{key:"updateClickToPausePlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable?"enable":"disable",n=this.container.getPlugin("click_to_pause");!J.isMobile&&n&&n[t]()}},{key:"updatePanelsVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hide?"addClass":"removeClass";this.$el[t]("media-control--panels-hide")}},{key:"updateBackgroundType",value:function(){if(this.hasPlaceholder)this.$el.addClass("media-control--has-placeholder");else if(!(J.isMobile||J.isSmartTvEnvironment||this.disabled)){var e=this.$lowerPanel.position().top,t=this.$lowerPanel.height(),n=this.$lowerPanel.offsetParent().height(),i=Math.trunc(n-(e+t)),r=i>4;i!=this._bottomPanelPosition&&(this._bottomPanelPosition=i,r?this.$el.addClass("mobile"):this.$el.removeClass("mobile"));var a=this.$upperPanel.height();a!=this._upperPanelHeight&&(this._upperPanelHeight=a,r||0!=a?this.$el.removeClass("hide-top-background"):this.$el.addClass("hide-top-background"))}}},{key:"addResizeObserver",value:function(){var e=this;this.removeResizeObserver(),this._resizeInterval=setInterval((function(){return e.updateBackgroundType()}),500)}},{key:"removeResizeObserver",value:function(){this._resizeInterval&&clearInterval(this._resizeInterval)}},{key:"destroy",value:function(){this.removeResizeObserver(),v(c(n.prototype),"destroy",this).call(this)}},{key:"playerResize",value:function(e){Gr(this.$el,e.width,e.height)}},{key:"resetFocus",value:function(){this.focusElement.focus()}},{key:"render",value:function(){if(!this.container||this.isRendered)return this;var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Cn.getStyleFrom(this.styles.toString(),e);return this.$el.html(this.template()),this.$el.append(t[0]),this.core.$el.append(this.el),this.createCachedElements(),this.initMediaControlPlugins(),this.updatePlaybackTypeClass(),this.updateBackgroundType(),this.addResizeObserver(),this.disabled&&this.hide(),this.isRendered=!0,this.trigger(Le.MEDIACONTROL_RENDERED),this}}]),n}(qe),qr=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"styles",get:function(){return'.media-control-notransition {\n  transition: none !important;\n}\n\n.clappr-player#wp3-player-0 .media-control {\n  position: absolute;\n  border-radius: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 997;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control::before, .clappr-player#wp3-player-0 .media-control::after {\n  content: "";\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 88px;\n  background: none;\n  z-index: -1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control::before {\n  top: 0;\n  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control::after {\n  bottom: 0;\n  background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.hide-top-background::after {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.mobile::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.6;\n  background: #000;\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::before {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  height: 88px;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.mobile::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-dragging {\n  pointer-events: auto;\n  cursor: grabbing !important;\n}\n.clappr-player#wp3-player-0 .media-control-dragging * {\n  cursor: grabbing !important;\n}\n.clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-button {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control-panel__upper {\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer {\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal {\n  opacity: 1;\n  will-change: opacity;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal.modal--hide {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide.touch .media-control-button {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-element, .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-button {\n  pointer-events: none;\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide::before, .clappr-player#wp3-player-0 .media-control.media-control-hide::after {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-panel__front-layer {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--no-background::before {\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control--panels-hide:before {\n  transition: none;\n}\n.clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__lower {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--has-placeholder::after {\n  height: 112px;\n}\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__between {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__between {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .modal-element {\n  z-index: 1000;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container .media-control-position__between {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__right {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  z-index: 300;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper .media-control-position__center {\n  flex-flow: column nowrap;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between, .clappr-player#wp3-player-0 .media-control .media-control-panel__upper {\n  position: relative;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .media-control-position__center {\n  flex-flow: column-reverse nowrap;\n  position: relative;\n  z-index: 200;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  display: flex;\n  flex: 1;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n  flex-grow: 1;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__center, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n  padding: 0 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  padding-top: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n  padding-bottom: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle > *, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__modal {\n  pointer-events: auto;\n}\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-button[data-playpause] {\n  width: 48px;\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower .media-control-element {\n  padding-top: 4px;\n}\n.clappr-player#wp3-player-0 .media-control-element {\n  padding: 12px;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-element--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control-element--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-button {\n  display: inline-block;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  background-color: transparent;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-button svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control-button:active, .clappr-player#wp3-player-0 .media-control-button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .media-control-button--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-button[data-chromecast] svg.player-cast-loading {\n  width: 24px;\n  height: 24px;\n}\n\n.clappr-player#wp3-player-0 .media-control.ad {\n  background: none;\n  visibility: visible;\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch {\n  visibility: hidden !important;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-button {\n  visibility: hidden !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__lower {\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__modal {\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel > * {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.touch .dfp-countdown {\n  visibility: hidden;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad:after, .clappr-player#wp3-player-0 .media-control.ad:before {\n  content: "";\n  left: 0;\n  height: 48px;\n  background: none;\n  opacity: 1;\n  position: absolute;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  width: 100%;\n  will-change: opacity;\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.ad:before {\n  top: 0;\n  background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.ad:after {\n  bottom: 0;\n  background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__between, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__lower .opposites-container {\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  will-change: opacity;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad.media-control-hide:before, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:after {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__lower .opposites-container {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide .media-control-panel__upper {\n  pointer-events: none;\n}\n\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n  transform: scale(1);\n}\n.clappr-player#wp3-player-0 .media-control.ad .dfp-countdown {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button svg path[fill], .clappr-player#wp3-player-0 .media-control.ad .media-control-element svg path[fill] {\n  fill: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-share], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-share] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .time-indicator,\n.clappr-player#wp3-player-0 .media-control.ad .live-button,\n.clappr-player#wp3-player-0 .media-control.ad .chromecast-button {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-seekbar] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n  background-color: #ffff93 !important;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container__placeholder {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] {\n  position: fixed;\n  width: 100%;\n  left: 50%;\n  transform: translate(-50%);\n  top: calc(100% - 4px);\n  height: 4px;\n  margin-bottom: 0;\n  overflow: hidden;\n  cursor: default;\n  opacity: 1;\n  transition: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] {\n  margin: 0;\n  height: 100%;\n  border-radius: 0;\n  background-color: rgba(255, 255, 255, 0.4);\n  box-shadow: none;\n  transform: scaleY(1);\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  border-radius: 0;\n}\n\n.clappr-player#wp3-player-0 .media-control.live {\n  min-height: auto;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #fff;\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.live .time-indicator {\n  display: none;\n}\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}'}},{key:"bindEvents",value:function(){v(c(n.prototype),"bindEvents",this).call(this),this.listenTo(this.core,Le.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,Le.CORE_MOUSE_LEAVE,this.hideDelayed),this.listenTo(this.core,In.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,In.STOP_DRAGGING_SEEKBAR,this.onStopDragginSeekbar)}},{key:"renderMediaControlPlugin",value:function(e){var t=e.panel,n=e.position,i=e.el,r=".media-control-panel__".concat(t," ").concat(n?".media-control-position__".concat(n):"");this.$el.find(r).append(i),e.render()}},{key:"onStartDraggingSeekbar",value:function(){this.hidePanel({panel:"upper"}),this.hidePanel({panel:"between"})}},{key:"onStopDragginSeekbar",value:function(){this.showPanel({panel:"upper"}),this.showPanel({panel:"between"})}}]),n}(zr),$r=function(e){u(n,e);var t=f(n);function n(e){return a(this,n),t.call(this,e)}return o(n,[{key:"name",get:function(){return"play_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return J.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return J.supportsTouchEvents?"center":"left"}},{key:"attributes",get:function(){return{class:"media-control-button","data-playpause":""}}},{key:"events",get:function(){return{click:this.togglePlayPause}}},{key:"isPauseDisabled",get:function(){var e=this.container&&this.container.getPlaybackType()===Xe.LIVE,t=this.container.playback&&!this.container.playback.dvrEnabled;return e&&t}},{key:"destroy",value:function(){this.unbindKeyEvents()}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,Le.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,Le.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,Le.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,Le.CONTAINER_ENDED,this.changeTogglePlay),this.listenTo(this.container,In.WM_SPINNER_START,this.hidePlayButton),this.listenTo(this.container,In.WM_SPINNER_STOP,this.showPlayButton))}},{key:"hidePlayButton",value:function(){J.supportsTouchEvents&&this.$el.hide()}},{key:"showPlayButton",value:function(){J.supportsTouchEvents&&this.$el.show()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("space")}},{key:"onContainerChanged",value:function(){this.bindContainerEvents(),this.changeTogglePlay()}},{key:"changeTogglePlay",value:function(){this.$el.html(""),this.container&&this.container.isPlaying()?(this.isPauseDisabled?this.$el.hide():(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Pausar</span>'),this.$el.removeClass("play"),this.$el.addClass("pause"),this.$el.show()),this.trigger(Le.MEDIACONTROL_PLAYING)):(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8 5v14l11-7z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir</span>'),this.$el.removeClass("stop pause"),this.$el.addClass("play"),this.$el.show(),this.trigger(Le.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$el)}},{key:"togglePlayPause",value:function(){if(!this.isPauseDisabled)return this.container.isPlaying()?this.container.pause({userInvoked:!0}):this.container.play({userInvoked:!0}),!1;!this.container.isPlaying()&&this.container.play({userInvoked:!0})}},{key:"render",value:function(){return this.bindKeyEvents(),this.changeTogglePlay(),this}}]),n}(Ii),Xr='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path fill="#FFF" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/>\n  </g>\n</svg>',Zr=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"back_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"backButtonEnabled",get:function(){return this.options.events&&"function"==typeof this.options.events.onBackButtonClicked}},{key:"attributes",get:function(){return{class:"media-control-button","data-controls":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onClick",value:function(){this.backButtonEnabled&&this.core.trigger(In.BACK_BUTTON_CLICKED)}},{key:"onOptionsChange",value:function(){this.lastBackButtonValue!==!!this.backButtonEnabled&&this.updateBackButtonState()}},{key:"updateBackButtonState",value:function(){this.backButtonEnabled?this.show():this.hide(),this.lastBackButtonValue=this.backButtonEnabled}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){var e=X("<span/>").addClass("visually-hidden").text("Sair do vídeo");return this.$el.html(""),this.$el.append(Xr),this.$el.append(e),this.updateBackButtonState(),this}}]),n}(Ii),Qr=function(e){u(n,e);var t=f(n);function n(){var e;a(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isPiPActive=!1,e}return o(n,[{key:"name",get:function(){return"PIP"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"attributes",get:function(){return{class:"media-control-button","data-pip":""}}},{key:"isLive",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.isLive}},{key:"isBrowserSupportPiP",get:function(){var e=!J.isiOS&&(J.isChrome||J.isEdge),t=this.isLive&&(J.isSafari||J.isiOS);return document.pictureInPictureEnabled&&(e||t)}},{key:"events",get:function(){return{click:this.togglePiP}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.isBrowserSupportPiP&&this.bindKeyEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback),this.container=this.core.activeContainer,this.idPlayback=this.container.playback,this.container&&(this.listenTo(this.idPlayback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,Le.CONTAINER_PIP_ENTER,this.onEnterPiP),this.listenTo(this.container,Le.CONTAINER_PIP_EXIT,this.onExitPiP),this.listenTo(this.container,In.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,In.DFP_CONTENT_RESUME,this.onAdBreakEnded),this.isPiPActive&&this.enterPiPOnContentPlay())}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("p",(function(){return e.togglePiP()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("p")}},{key:"togglePiP",value:function(){this.isPiPActive?this.container.exitPiP():this.container.enterPiP()}},{key:"onEnterPiP",value:function(){this.isPiPActive=!0,this.updateLabel()}},{key:"onExitPiP",value:function(){this.isPiPActive=!1,this.updateLabel()}},{key:"onAdStarted",value:function(){this.isPiPActive&&this.container.enterPiP()}},{key:"onAdBreakEnded",value:function(){this.isPiPActive&&this.enterPiPOnContentPlay()}},{key:"enterPiPOnContentPlay",value:function(){var e=this;this.stopListening(this.idPlayback,Le.PLAYBACK_PLAY),this.listenToOnce(this.idPlayback,Le.PLAYBACK_PLAY,(function(){return e.container.enterPiP()}))}},{key:"onResourceReady",value:function(){this.isBrowserSupportPiP?this.enablePiPButton():this.disablePiPButton()}},{key:"disablePiPButton",value:function(){this.isPiPActive&&document.exitPictureInPicture(),this.$el.hide()}},{key:"enablePiPButton",value:function(){this.$el.show()}},{key:"render",value:function(){var e=X("<span />").addClass("visually-hidden");this.$el.html(""),this.$el.append('<svg width="23" height="18" viewBox="0 0 23 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18.2689 8H10.2689V14H18.2689V8ZM16.2689 12H12.2689V10H16.2689V12ZM20.2689 0H2.26892C1.16892 0 0.268921 0.88 0.268921 1.98V16C0.268921 17.1 1.16892 18 2.26892 18H20.2689C21.3689 18 22.2689 17.1 22.2689 16V1.98C22.2689 0.88 21.3689 0 20.2689 0ZM20.2689 16.02H2.26892V1.97H20.2689V16.02Z" fill="#EEEEEE"/>\n</svg>'),this.$el.append(e),this.updateLabel()}},{key:"updateLabel",value:function(){var e=this.isPiPActive?"Restaurar tela cheia":"Minimizar vídeo";this.$el.find(".visually-hidden").text(e)}},{key:"destroy",value:function(){this.unbindKeyEvents,this.isPiPActive&&document.exitPictureInPicture(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(Ii),Jr=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).fullScreenOnVideoTagSupported=null,i}return o(n,[{key:"name",get:function(){return"fullscreen_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"screenOrientationAvailable",get:function(){var e;return null===(e=screen)||void 0===e?void 0:e.orientation}},{key:"isIdle",get:function(){var e=this.container.getPlugin("poster");return e&&!e.$el.hasClass("poster--hidden")}},{key:"attributes",get:function(){return{class:"media-control-button","data-fullscreen":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"getExternalInterface",value:function(){return{toggleFullscreen:this.toggleFullscreen}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_RESIZE,this.changeToggleFullscreen),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e,t;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.fullScreenOnVideoTagSupported=null,this.container&&(this.bindKeyEvents(),this.listenTo(this.container,Le.CONTAINER_DBLCLICK,this.toggleFullscreen),J.isiOS&&this.listenTo(this.container,In.WILL_SET_AD_PLAYBACK,this.toggleFullscreenForiOSAdPlayback),"video"===(null===(e=this.playback)||void 0===e||null===(t=e.videoEl)||void 0===t?void 0:t.nodeName.toLowerCase())&&this.listenToOnce(this.container,Le.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag),(J.isIE&&!J.isIE11||J.supportsTouchEvents)&&this.stopListening(this.container,Le.CONTAINER_DBLCLICK))}},{key:"toggleFullscreenForiOSAdPlayback",value:function(){this.core.isFullscreen()&&this.toggleFullscreen()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("f",(function(){return e.toggleFullscreen()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("f")}},{key:"onLoadedMetadataOnVideoTag",value:function(){!Ee.Fullscreen.fullscreenEnabled()&&this.playback.videoEl.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.render())}},{key:"changeToggleFullscreen",value:function(){this.$el.html(""),Ee.Fullscreen.fullscreenElement()?this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M7 15h2v6H7v-4H3v-2h4zm10-8h4v2h-6V3h2v4zM7 9H3V7h4V3h2v6H7zm10 6h4v2h-4v4h-2v-6h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Sair do modo tela cheia</span>'):this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19 21h-4v-2h4v-4h2v6h-2zm0-18h2v6h-2V5h-4V3h4zM5 19h4v2H3v-6h2v4zM5 3h4v2H5v4H3V3h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Tela cheia</span>'),this.applyButtonStyle(this.$el)}},{key:"onClick",value:function(){this.toggleFullscreen()}},{key:"toggleFullscreen",value:function(){this.container.fullscreen(),this.core.toggleFullscreen(),this.mediaControl.resetUserKeepVisible()}},{key:"render",value:function(){if(this.fullScreenOnVideoTagSupported||Ee.Fullscreen.fullscreenEnabled())return this.changeToggleFullscreen(),this}}]),n}(Ii),ea=function(e){u(n,e);var t=f(n);function n(e){return a(this,n),t.call(this,e)}return o(n,[{key:"name",get:function(){return"time_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"hasSizeChanged",get:function(){return this.lastSize===this.actualSize}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"events",get:function(){return{click:this.toggleTimeIndicator}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.setDuration))}},{key:"setDuration",value:function(e){var t=Ee.formatTime(e.duration/1e3);this.$duration.text(t),this.$rightContainer=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__right")}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&this.$rightContainer&&(this.actualSize=e,this.shouldCollapse=this.actualSize.width-this.$rightContainer.width()<130,this.shouldCollapse?(this.$el.addClass("time-indicator--collapse"),this.$duration.hide()):(this.$el.removeClass("time-indicator--collapse"),this.$duration.show()),this.$position.show(),this.updateTimeIndicator(),this.lastSize=this.actualSize)}},{key:"onTimeUpdate",value:function(e){"ad"!==e.playbackType&&(this.currentPositionValue=e.current<0?e.total:e.current,this.currentDurationValue=e.total,null!==this.currentPositionValue&&null!==this.currentDurationValue&&this.updateTimeIndicator())}},{key:"updateTimeIndicator",value:function(){this.updatePosition(),this.shouldCollapse?this.updateRemainingTime():this.updateDuration()}},{key:"updatePosition",value:function(){if(!this.hasSizeChanged||parseInt(this.currentPositionValue)!==parseInt(this.lastPositionValue)){var e=Ee.formatTime(this.currentPositionValue);this.$position.text(e),this.lastPositionValue=this.currentPositionValue}}},{key:"updateRemainingTime",value:function(){var e=-1*(this.currentPositionValue-this.currentDurationValue);if(!this.hasSizeChanged||parseInt(e)!==parseInt(this.lastRemainingTime)){var t=e>1,n="";n=(t?"-":"")+(n=Ee.formatTime(t?e:0)),this.lastRemainingTime=e,this.$duration.text(n)}}},{key:"updateDuration",value:function(){if(!this.hasSizeChanged||parseInt(this.currentDurationValue)!==parseInt(this.lastDurationValue)){var e=Ee.formatTime(this.currentDurationValue);this.$duration.text(e),this.lastDurationValue=this.currentDurationValue}}},{key:"toggleTimeIndicator",value:function(e){e&&e.stopPropagation(),this.shouldCollapse&&(this.$position.is(":visible")?this.$position.hide():this.$position.show(),this.$duration.is(":visible")?this.$duration.hide():this.$duration.show())}},{key:"render",value:function(){this.$position=X("<span/>").attr("data-position","").html("00:00"),this.$separator=X("<span/>").addClass("separator").html("/"),this.$duration=X("<span/>").attr("data-duration","").html("00:00"),this.$el.empty();var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .time-indicator {\n  display: flex;\n  height: 24px;\n  box-sizing: content-box;\n  align-items: center;\n  cursor: default;\n  position: relative;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  line-height: 16px;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .time-indicator .separator {\n  display: inline;\n  margin: 0 5px;\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .time-indicator--collapse {\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .time-indicator--collapse .separator, .clappr-player#wp3-player-0 .time-indicator--collapse [data-duration] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control:not(.mobile) .time-indicator {\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 [data-position],\n.clappr-player#wp3-player-0 [data-duration] {\n  display: inline;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$position[0]),this.$el.append(this.$separator[0]),this.$el.append(this.$duration[0]),this}}]),n}(Ii),ta='<span class="skip-button__label"><%= label %></span>\n',na='.clappr-player#wp3-player-0 .media-control .skip-button {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: -8px;\n  right: 0;\n  width: auto;\n  height: auto;\n  border-radius: 4px;\n  background-color: #333;\n  margin: 0 12px;\n  pointer-events: auto;\n  z-index: 400;\n  will-change: opacity, transform;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button__label {\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover, .clappr-player#wp3-player-0 .media-control .skip-button:focus {\n  background-color: #eeeeee;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button:focus .skip-button__label {\n  color: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button:hover svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button:focus svg path[fill] {\n  fill: #111111 !important;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--left {\n  right: auto;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button svg {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button, .clappr-player#wp3-player-0 .media-control .skip-button--start_over {\n  padding: 6px 12px;\n  background-color: #eee;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg, .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n  margin-top: 2px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg path[fill] {\n  fill: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button--start_over .skip-button__label {\n  color: #111111;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button:hover, .clappr-player#wp3-player-0 .media-control .skip-button--live_button:focus, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:hover, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:focus {\n  background-color: #cecece;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--live_button svg {\n  transform: rotate(180deg);\n  margin-left: 5px;\n}\n.clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n  margin-right: 5px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--sticky {\n  transform: translateY(0px);\n}\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--force-transform-animation {\n  transition: transform 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control-hide .skip-button--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n}\n.clappr-player#wp3-player-0 .media-control-hide.touch .skip-button--sticky {\n  transform: translateY(52px);\n}\n.clappr-player#wp3-player-0 .media-control-hide.touch.w360 .skip-button--sticky {\n  transform: translateY(60px);\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible.touch .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible.touch .skip-button {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible .skip-button {\n  opacity: 0.5;\n  z-index: 100;\n}\n.clappr-player#wp3-player-0 .media-control.settings-modal--visible .skip-button {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .skip-button {\n  visibility: hidden;\n  opacity: 0;\n}',ia=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_button"}},{key:"type",get:function(){return""}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return je(ta)}},{key:"label",get:function(){return""}},{key:"startCuepointType",get:function(){return""}},{key:"endCuepointType",get:function(){return""}},{key:"shouldActive",get:function(){return this.endCuepoint.time-this.startCuepoint.time>=10}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.type," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"isSticky",get:function(){return this.$el.hasClass("skip-button--sticky")}},{key:"onClick",value:function(){this.disableButton(),this.container.trigger(In.SKIP_BUTTON_CLICKED,{name:this.name}),this.seekToEndCuepoint()}},{key:"seekToEndCuepoint",value:function(){this.container.seek(this.endCuepoint.time),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,In.DID_LOAD_CUEPOINTS,this.onCuepointsLoaded),this.listenTo(this.container,In.DFP_AD_STARTED,this.onAdStarted))}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onCuepointsLoaded",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.startCuepoint=t.find((function(t){return t.type===e.startCuepointType})),this.endCuepoint=t.find((function(t){return t.type===e.endCuepointType})),this.startCuepoint&&this.endCuepoint&&this.shouldActive&&this.listenTo(this.container.playback,Le.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.current,n=t>=this.startCuepoint.time&&t<this.endCuepoint.time,i=t>=this.startCuepoint.time&&t<this.startCuepoint.time+5;n!==this.isActive&&(n?this.enableButton():this.disableButton()),i!==this.isSticky&&(i?this.setSticky():this.resetSticky())}},{key:"enableButton",value:function(){this.container.trigger(In.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden"),this.bindKeyEvents(),this.isActive=!0}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden").removeClass("skip-button--sticky").off("transitionend"),this.isActive=!1}},{key:"setSticky",value:function(){var e=this;if(this.mediaControl.isVisible())return this.$el.addClass("skip-button--sticky skip-button--force-transform-animation");this.$el.addClass("skip-button--sticky").on("transitionend",(function(){e.$el.addClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetSticky",value:function(){var e=this;this.$el.removeClass("skip-button--sticky").on("transitionend",(function(){e.$el.removeClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetState",value:function(){this.isActive=!1}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("enter",(function(){e.isSticky&&e.onClick()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("enter")}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Cn.getStyleFrom(na,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.append(t[0]),this}},{key:"destroy",value:function(){this.unbindKeyEvents(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(Ii),ra=wn.seekStringToSeconds,aa=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_recap"}},{key:"type",get:function(){return"recap"}},{key:"label",get:function(){return"Pular Resumo"}},{key:"startCuepointType",get:function(){return"recap_start"}},{key:"endCuepointType",get:function(){return"recap_end"}},{key:"autoSkipEnabled",get:function(){var e=this.options.resumeAt||ra();return this.options.skipRecap&&this.endCuepoint&&!e}},{key:"onCuepointsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(v(c(n.prototype),"onCuepointsLoaded",this).call(this,e),this.autoSkipEnabled){var t=this.endCuepoint.time;t&&(this.container.trigger(In.WILL_AUTO_SKIP_RECAP),this.container.playback.setInitialTime(t))}}}]),n}(ia),sa=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_intro"}},{key:"type",get:function(){return"intro"}},{key:"label",get:function(){return"Pular Abertura"}},{key:"startCuepointType",get:function(){return"opening_start"}},{key:"endCuepointType",get:function(){return"opening_end"}}]),n}(ia),oa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function la(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ua(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function ca(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}var da="Expected a function",ha=/^\s+|\s+$/g,pa=/^[-+]0x[0-9a-f]+$/i,fa=/^0b[01]+$/i,va=/^0o[0-7]+$/i,ma=parseInt,ya="object"==typeof oa&&oa&&oa.Object===Object&&oa,ba="object"==typeof self&&self&&self.Object===Object&&self,Ea=ya||ba||Function("return this")(),Aa=Object.prototype.toString,_a=Math.max,Ta=Math.min,ka=function(){return Ea.Date.now()};function Sa(e,t,n){var i,r,a,s,o,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(da);function p(t){var n=i,a=r;return i=r=void 0,u=t,s=e.apply(a,n)}function f(e){return u=e,o=setTimeout(v,t),c?p(e):s}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=ka();if(g(e))return m(e);o=setTimeout(v,function(e){var n=t-(e-l);return d?Ta(n,a-(e-u)):n}(e))}function m(e){return o=void 0,h&&i?p(e):(i=r=void 0,s)}function y(){var e=ka(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===o)return f(l);if(d)return o=setTimeout(v,t),p(l)}return void 0===o&&(o=setTimeout(v,t)),s}return t=Ca(t)||0,wa(n)&&(c=!!n.leading,a=(d="maxWait"in n)?_a(Ca(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),u=0,i=l=r=o=void 0},y.flush=function(){return void 0===o?s:m(ka())},y}function wa(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ca(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Aa.call(e)}(e))return NaN;if(wa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=wa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ha,"");var n=fa.test(e);return n||va.test(e)?ma(e.slice(2),n?2:8):pa.test(e)?NaN:+e}var Ia=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(da);return wa(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Sa(e,t,{leading:i,maxWait:t,trailing:r})},Da='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n     <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11.5 18V6L3 12l8.5 6zm.5-6l8.5 6V6L12 12z" fill="#FFF"/>\n    </g>\n</svg>',Ra=wn.getHostname,La=wn.getCurrentTime,Pa=wn.getTimeFromPosition,Oa=window.WM&&window.WM.Settings||{},xa=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e))._throttledPositionUpdate=Ia((function(){var e;return(e=i).updateButtonState.apply(e,arguments)}),5e3,{trailing:!1}),i.currentProgram={},((Oa&&Oa.StartOver||{}).Blacklist||[]).find((function(e){return e.test(Ra())}))&&i.destroy(),i}return o(n,[{key:"name",get:function(){return"start_over"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return je(ta)}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"programStartPositionOffset",get:function(){return La(this.innerPlayback)-this.currentProgram.startTime}},{key:"programStartPosition",get:function(){return this.innerPlayback.getCurrentTime()-this.programStartPositionOffset}},{key:"label",get:function(){var e="Início",t="Assistir do ".concat(e.toLowerCase());return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--left skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"canSeekToProgramStart",get:function(){var e=this.innerPlayback.getCurrentTime()-this.programStartPositionOffset>=0;return this.programStartPositionOffset>5&&e}},{key:"onClick",value:function(){this.container.trigger(In.SKIP_BUTTON_CLICKED,{name:this.name}),this.canSeekToProgramStart&&(this.seekToProgramStart(),this.updateButtonState())}},{key:"seekToProgramStart",value:function(){this.container.seek(this.programStartPosition),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.listenToOnce(this.container,In.DID_LOAD_EPG,this.onEPGLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onEPGLoaded",value:function(){this.listenTo(this.container,In.DID_CHANGE_CURRENT_PROGRAM,this.onProgramChange),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate)}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"getCurrentPositionTime",value:function(){var e=this.innerPlayback.getCurrentTime(),t=this.innerPlayback.getProgramDateTime(),n=new Date(t);return Pa(e,n)}},{key:"onProgramChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=void 0===t?{}:t;this.currentProgram=n||{},this.updateButtonState()}},{key:"updateButtonState",value:function(){this.isActive!==this.canSeekToProgramStart&&(this.isActive=this.canSeekToProgramStart,this.isActive?this.enableButton():this.disableButton())}},{key:"enableButton",value:function(){this.container.trigger(In.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetState",value:function(){this.isActive=!1}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Cn.getStyleFrom(na,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.prepend(Da),this.$el.append(t[0]),this}}]),n}(Ii),Ma=wn.getHostname,Na=window.WM&&window.WM.Settings||{},Ba=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),i=t.call(this,e),((Na&&Na.StartOver||{}).Blacklist||[]).find((function(e){return e.test(Ma())}))&&i.destroy(),i}return o(n,[{key:"name",get:function(){return"live_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return je(ta)}},{key:"events",get:function(){return{click:this.onClick}}},{key:"label",get:function(){var e=this.options&&this.options.isLiveContent?"ao vivo":"agora",t="Assistir ".concat(e);return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,Le.CONTAINER_PLAYBACKDVRSTATECHANGED,this.toggleButton),this.listenTo(this.container,Le.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,Le.CONTAINER_PAUSE,this.updateState)}},{key:"toggleButton",value:function(e){this.dvrInUse=e,this.dvrInUse?this.enableButton():this.disableButton()}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"onClick",value:function(){this.core.mediaControl.container.isPlaying()||this.core.mediaControl.container.play(),this.dvrInUse&&this.core.mediaControl.container.seek(this.core.mediaControl.container.getDuration())}},{key:"updateState",value:function(){this.dvrInUse?this.enableButton():this.disableButton()}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"enableButton",value:function(){this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"render",value:function(){var e=Cn.getStyleFrom(na,{playerId:this.core.options.playerId});return this.$el.html(this.template({label:this.label})),this.$el.append(Da),this.$el.append(e[0]),this}}]),n}(Ii),Ua='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Silenciar som</span>',Fa='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Ativar som</span>',Va=wn.autoplayManager,Ha=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).persistConfig=i.core.options.persistConfig,i.isUserGesture=!1,i.stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},X(document).bind("mouseup",i.stopDragHandler),X(document).bind("mousemove",i.updateDragHandler),i}return o(n,[{key:"name",get:function(){return"volume"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return je('<div class="drawer-icon-container" data-volume>\n  <button class="drawer-icon media-control-button media-control-element" data-volume></button>\n</div>\n\n<div class="bar-container" data-volume>\n  <div class="bar-background" data-volume>\n    <div class="bar-fill-1" data-volume></div>\n    <div class="bar-hover" data-volume></div>\n  </div>\n  <div class="bar-scrubber" data-volume>\n    <div class="bar-scrubber-icon" data-volume></div>\n  </div>\n</div>\n')}},{key:"volume",get:function(){return this.container.volume}},{key:"muted",get:function(){return 0===this.volume}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"attributes",get:function(){return{class:"drawer-container volume-hide","data-volume":""}}},{key:"events",get:function(){return{mouseenter:this.showVolumeBar,mouseleave:this.hideVolumeBar,"click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mousedown .bar-container[data-volume]":"startVolumeDrag"}}},{key:"mutedAutoplay",get:function(){return this.idPlayback.mutedAutoplay}},{key:"destroy",value:function(){v(c(n.prototype),"destroy",this).call(this),X(document).unbind("mouseup",this.stopDragHandler),X(document).unbind("mousemove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,In.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"updateContainer",value:function(){this.unbindContainerEvents(),this.container=this.core.activeContainer,this.idPlayback=this.container&&this.container.playback,this.container&&this.bindContainerEvents()}},{key:"onContainerChanged",value:function(){this.updateContainer(),this.setInitialVolume()}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,Le.CONTAINER_VOLUME,this.onContainerVolumeUpdate),this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.onContainerPlay),this.listenToOnce(this.idPlayback,In.WM_USER_PLAY_REQUESTED,this.setInitialVolume)}},{key:"onContainerPlay",value:function(){this.stopListening(this.idPlayback,In.WM_USER_PLAY_REQUESTED)}},{key:"unbindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback)}},{key:"getInitialVolume",value:function(){var e=this.persistConfig?Ee.Config.restore("volume"):100;return this.lastVolume=e,(this.core.options.mute||this.mutedAutoplay)&&(e=0),this.currentVolume=e,e}},{key:"setInitialVolume",value:function(){this.setVolume(this.getInitialVolume(),{initial:!0})}},{key:"onTapToUnmuteClicked",value:function(){this.isUserGesture=!0,this.setVolume(this.lastVolume||100),this.isAd&&this.idPlayback.volume(this.lastVolume||100),Va.consent()}},{key:"toggleMute",value:function(e){e&&e.stopPropagation(),this.isUserGesture=!0,this.setVolume(this.muted?this.lastVolume||100:0)}},{key:"onContainerVolumeUpdate",value:function(e){e=void 0!==e&&e>=0?e:this.volume,this.updateVolumeUI(e),this.draggingVolumeBar||(this.currentVolume>0&&this.muted?this.container.trigger(In.WM_MUTED,this.lastVolume,this.isUserGesture):this.currentVolume<=0&&!this.muted&&this.container.trigger(In.WM_UNMUTED,this.lastVolume,this.isUserGesture),this.isUserGesture=!1,this.lastVolume=this.currentVolume!==e?this.currentVolume:this.lastVolume,this.currentVolume=e)}},{key:"updateVolumeUI",value:function(e){var t=this;this.container.isReady?this.$volumeBarContainer&&(this.updateVolumeBar(e),this.updateVolumeIcon(e)):this.listenToOnce(this.container,Le.CONTAINER_READY,(function(){return t.updateVolumeUI(e)}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initial;e=Math.min(100,Math.max(e,0)),this.persistConfig&&!i&&Ee.Config.persist("volume",e);var r=function(){var n=function(e){t.container.setVolume(e),t.isAd&&t.idPlayback.volume(e)};t.stopListening(t.idPlayback,In.WM_PLAYBACK_WILL_PLAY),t.container.isReady?n(e):t.listenToOnce(t.idPlayback,In.WM_PLAYBACK_WILL_PLAY,(function(){n(t.getInitialVolume())}))};this.container?r():this.listenToOnce(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,(function(){r()}))}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"getVolumeFromUIEvent",value:function(e){var t=100*(1-(e.pageY-this.$volumeBarContainer.offset().top)/this.$volumeBarContainer.height());return Math.min(100,Math.max(t,0))}},{key:"updateVolumeBar",value:function(e){var t=this.$volumeBarContainer.height(),n=this.$volumeBarBackground.height(),i=(t-n)/2,r=n*e/100-this.$volumeBarScrubber.height()/2+i;this.$volumeBarFill.css({height:e+"%"}),this.$volumeBarScrubber.css({bottom:r})}},{key:"updateVolumeIcon",value:function(e){this.$volumeIcon.html(""),e>0?this.$volumeIcon.append(Ua):this.$volumeIcon.append(Fa)}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.mediaControl.$el.addClass("media-control-dragging"),this.mediaControl.setKeepVisible(),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingVolumeBar&&(this.mediaControl.resetKeepVisible(),this.mediaControl.$el.removeClass("media-control-dragging"),this.draggingVolumeBar=!1,this.isUserGesture=!0,this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"updateDrag",value:function(e){this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"showVolumeBar",value:function(){J.supportsTouchEvents||(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.triggerWillShowModalElement(),this.$el.removeClass("volume-hide"),this.mediaControl&&this.mediaControl.trigger(In.WM_VOLUME_SHOW),this.isVolumeBarVisible=!0)}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isVolumeBarVisible&&this.$volumeBarContainer&&("number"!=typeof t.timeout&&(t.timeout=150),this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar(t)}),t.timeout):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){e.$el.addClass("volume-hide"),e.mediaControl&&e.mediaControl.trigger(In.WM_VOLUME_HIDE),e.isVolumeBarVisible=!1,e.triggerDidHideModalElement()}),t.timeout)))}},{key:"createCachedElements",value:function(){this.hasCachedElements=!0,this.$volumeBarContainer=this.$el.find(".bar-container"),this.$volumeIcon=this.$el.find(".drawer-icon"),this.$volumeBarBackground=this.$el.find(".bar-background"),this.$volumeBarFill=this.$el.find(".bar-fill-1"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber")}},{key:"render",value:function(){if(!this.hasCachedElements){this.$el.html(this.template());var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .drawer-container[data-volume] {\n  z-index: 300;\n  position: relative;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume] .media-control-button {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide {\n  z-index: auto;\n}\n.clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide .bar-container[data-volume] {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .drawer-icon-container {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .drawer-icon-container .media-control-button.media-control-element.drawer-icon[data-volume] {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] {\n  will-change: visibility, opacity;\n  position: absolute;\n  bottom: 42px;\n  width: 30px;\n  height: 115px;\n  left: 8px;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.85);\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume]:after {\n  content: "";\n  width: 100%;\n  position: absolute;\n  height: 10px;\n  bottom: -10px;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] {\n  position: relative;\n  top: 15px;\n  width: 2px;\n  margin-left: 14px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  height: calc(100% - 30px);\n  overflow: hidden;\n  box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n  position: absolute;\n  bottom: 0;\n  background: #fff;\n  width: 100%;\n  height: 0;\n  transition: height 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] {\n  position: absolute;\n  left: 9px;\n  width: 12px;\n  height: 12px;\n  bottom: 40%;\n  transition: bottom 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n  width: 100%;\n  height: 100%;\n  border-radius: 6px;\n  background-color: #fff;\n  box-shadow: 0 0 1px black;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.createCachedElements(),this.$volumeIcon.html(Ua),this}}}]),n}(Ii),ja=wn.getTimeValues,Ka=wn.getLiteralTimeValues,Ga=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},J.supportsTouchEvents&&(X(document).bind("touchend",i.stopDragHandler),X(document).bind("touchmove",i.updateDragHandler)),J.supportsTouchEvents&&!J.isHybridDevice||(X(document).bind("mouseup",i.stopDragHandler),X(document).bind("mousemove",i.updateDragHandler)),i}return o(n,[{key:"name",get:function(){return"seekbar"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"center"}},{key:"template",get:function(){return je('<div class="seekbar">\n  <div class="bar-background" data-seekbar tabindex="0">\n    <div class="bar-fill-1" data-seekbar></div>\n    <div class="bar-fill-2" data-seekbar></div>\n    <div class="bar-hover" data-seekbar></div>\n  </div>\n  <div class="bar-scrubber" data-seekbar role="slider" aria-valuemin="0" aria-valuemax="0" tabindex="-1" aria-valuenow="0" aria-valuetext="Ponto do vídeo, 0 minuto e 0 segundo.">\n    <div class="bar-scrubber-icon" data-seekbar></div>\n  </div>\n</div>\n<div id="seek-feedback" aria-live="polite" class="visually-hidden"></div>\n')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"isLivePlayback",get:function(){return this.container&&this.container.getPlaybackType()===Xe.LIVE}},{key:"attributes",get:function(){return{class:"bar-container","data-seekbar":""}}},{key:"events",get:function(){var e={click:this.seek,touchmove:this.startActionOnSeekBar,touchend:this.leaveActionOnSeekBar,touchstart:this.startSeekDrag},t={click:this.seek,mousemove:this.startActionOnSeekBar,mouseleave:this.leaveActionOnSeekBar,"mousedown .bar-scrubber[data-seekbar]":"startSeekDrag"},n=i(i({},e),t);return J.isHybridDevice?n:J.supportsTouchEvents?e:t}},{key:"destroy",value:function(){v(c(n.prototype),"destroy",this).call(this),X(document).unbind("mouseup",this.stopDragHandler),X(document).unbind("touchend",this.stopDragHandler),X(document).unbind("mousemove",this.updateDragHandler),X(document).unbind("touchmove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,Le.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,Le.CONTAINER_SEEKED,this.updateAriaLiveText),this.setSeekPercentage(0))}},{key:"createCachedElements",value:function(){this.$seekBarContainer=this.$el,this.$seekBarHover=this.$el.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=this.$el.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=this.$el.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=this.$el.find(".bar-scrubber[data-seekbar]"),this.$seekBarScrubberIcon=this.$el.find(".bar-scrubber-icon[data-seekbar]"),this.$seekBarFeedback=this.$el.find("#seek-feedback"),J.isMobile&&(this.$seekBarHover.addClass("bar-hover-disable"),this.$seekBarScrubber.addClass("bar-scrubber-mobile")),this.mediaControl.$seekBarContainer=this.$seekBarContainer}},{key:"onPlayerResize",value:function(){this.setSeekPercentage(this.currentSeekPercentage)}},{key:"setSeekPercentage",value:function(e){e=Math.min(e,100);var t=this.$seekBarContainer.width()*e/100-this.$seekBarScrubber.width()/2;t=Math.max(t,-(this.$seekBarScrubber.width()-this.$seekBarScrubberIcon.width())/2),t=Math.min(t,this.$seekBarContainer.width()-this.$seekBarScrubber.width()/2-this.$seekBarScrubberIcon.width()/2),this.currentSeekPercentage=e;var n=this.$seekBarScrubberIcon.width()/4;isNaN(n)||isNaN(e)||isNaN(t)||(this.$seekBarPosition.css({width:"calc(".concat(e,"% + ").concat(n,"px)")}),this.$seekBarScrubber.css({transform:"translateX(".concat(t,"px)")}))}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&(this.draggingSeekBar&&this.seek(e),this.mediaControl.$el.removeClass("media-control-dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarScrubberIcon.removeClass("bar-scrubber-icon--dragging"),this.core.trigger(In.STOP_DRAGGING_SEEKBAR),this.draggingSeekBar=!1,this.mediaControl.resetKeepVisible())}},{key:"lastTouchEvent",value:function(e){var t=e.originalEvent?e.originalEvent:e;return t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[t.changedTouches.length-1]:{}}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=((e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.core.trigger(In.START_DRAGGING_SEEKBAR),this.draggingSeekBar=!0,this.mediaControl.setKeepVisible(),this.mediaControl.$el.addClass("media-control-dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),this.$seekBarScrubberIcon.addClass("bar-scrubber-icon--dragging"),J.supportsTouchEvents&&e&&e.preventDefault())}},{key:"startActionOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.mediaControl.trigger(Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"leaveActionOnSeekBar",value:function(e){this.mediaControl.trigger(Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX||this.lastTouchEvent(e).pageX||0,n=Math.max(0,t-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,.01)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"updateAriaLiveText",value:function(){var e=this.container.playback.currentTime,t=this.getAriaValueText(e);this.$seekBarFeedback.text(t)}},{key:"updateAriaValues",value:function(e){var t=e.current,n=e.total,i=this.getAriaValueText(t);this.$seekBarScrubber.attr("aria-valuenow",Math.round(t)),this.$seekBarScrubber.attr("aria-valuemax",Math.round(n)),this.$seekBarScrubber.attr("aria-valuetext",i)}},{key:"getAriaValueText",value:function(e){var t=m(ja(e),3),n=t[0],i=t[1],r=t[2];return this.getVideoPositionText(n,i,r)}},{key:"getVideoPositionText",value:function(e,t,n){var i=Ka(e,t,n),r=i.hoursText,a=i.minutesText,s=i.secondsText;return this.container.isDvrInUse()?"Há".concat(r," ").concat(a," e ").concat(s," da transmissão."):this.isLivePlayback?"Reproduzindo Agora na TV / Ao Vivo.":"Ponto do vídeo,".concat(r," ").concat(a," e ").concat(s,".")}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){this.draggingSeekBar||(this.currentPositionValue=e.current<0?0:e.current,this.currentDurationValue=e.total,this.renderSeekBar(),this.updateAriaValues(e))}},{key:"renderSeekBar",value:function(){null!==this.currentPositionValue&&null!==this.currentDurationValue&&(this.currentSeekBarPercentage=this.isLivePlayback?100:0,this.isLivePlayback&&!this.container.isDvrInUse()||(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage))}},{key:"render",value:function(){this.$el.html(this.template());var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 .media-control.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .thumb-preview {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .media-control-panel__lower .bar-container[data-seekbar] {\n  padding: 12px 0;\n}\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: none;\n}\n.clappr-player#wp3-player-0 .bar-container__placeholder {\n  height: 36px;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 24px);\n  height: 24px;\n  cursor: pointer;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  touch-action: manipulation;\n  top: calc(50% + 6px);\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-self: center;\n  width: 100%;\n  height: 2px;\n  background-color: rgba(255, 255, 255, 0.2);\n  overflow: hidden;\n  top: 50%;\n  left: 50%;\n  will-change: transform;\n  transform-origin: top;\n  transform: scaleY(1) translate(-50%, -50%);\n  transition: transform 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n  background-color: rgba(255, 255, 255, 0.3);\n  transition: width 0.1s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ffffff;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: none;\n  position: absolute;\n  width: 5px;\n  height: 100%;\n  background-color: #ff0000;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: scaleY(2) translate(-50%, -50%);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover-disable[data-seekbar] {\n  display: none;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: scale(1.5);\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar].seek-disabled {\n  cursor: default;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n  position: relative;\n  display: flex;\n  align-self: center;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  text-align: center;\n  z-index: 200;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  display: inline-block;\n  position: absolute;\n  left: 0;\n  background-color: #fff;\n  border-radius: 50%;\n  height: 100%;\n  width: 100%;\n  will-change: transform;\n  transform: scale(1);\n  transition: transform 0.2s ease;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon--dragging {\n  transform: scale(2) !important;\n}\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber-mobile[data-seekbar] {\n  transition: unset;\n}",{playerId:this.core.options.playerId}),t=X("<div>").addClass("bar-container__placeholder");return this.$el.append(e[0]),this.$el.parent().append(t),this.createCachedElements(),this}}]),n}(Ii),Wa=10,Ya=["1","2","3","4","5","6","7","8","9","0"],za={left:-10,right:10,"shift left":-15,"shift right":15,"shift ctrl left":-20,"shift ctrl right":20},qa=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"quick_seek"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return je('<div class="quick-seek-container">\n  <div class="quick-seek-placeholder quick-seek-placeholder--left">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--left"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= backwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label left"><%= currentSeekTime %></span>\n    </div>\n  </div>\n  <div class="quick-seek-placeholder quick-seek-placeholder--right">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--right"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= forwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label"><%= currentSeekTime %></span>\n    </div>\n  </div>\n</div>')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"willBackwardToVideoEnd",get:function(){return this.container.currentTime-3<0}},{key:"willForwardToVideoEnd",get:function(){return this.container.currentTime+Wa>this.container.getDuration()}},{key:"currentSeekTime",get:function(){return this._currentSeekTime||Wa},set:function(e){e<=990&&(this._currentSeekTime=e)}},{key:"attributes",get:function(){return{class:"quick-seek hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,In.MEDIACONTROL_DOUBLE_TAP,this.onMediaControlDoubleTap),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.updateContainer),this.listenTo(this.mediaControl,Le.MEDIACONTROL_SHOW,this.onMediaControlShow)}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.bindKeyEvents),this.listenTo(this.container,Le.CONTAINER_ENDED,this.onContainerEnd)}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),Object.keys(za).forEach((function(t){e.bindKeyAndShow(t,(function(){return e.onKeyPress(t)}))})),Ya.forEach((function(t){e.bindKeyAndShow(t,(function(){return e.canSeek&&e.container.seekPercentage(10*t+.1)}))})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off(Object.keys(za)),this.kibo.off(Ya))}},{key:"updateContainer",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onContainerEnd",value:function(){this.unbindKeyEvents(),this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.bindKeyEvents)}},{key:"onKeyPress",value:function(e){this.canSeek&&(this.container.trigger(In.WILL_QUICK_SEEK),this.seekRelative(za[e]))}},{key:"seekRelative",value:function(e){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n+.01,100),this.container.seekPercentage(i)}},{key:"onMediaControlDoubleTap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide;!this.canSeek||"left"===t&&this.willBackwardToVideoEnd||"right"===t&&this.willForwardToVideoEnd||(this.container.trigger(In.WILL_QUICK_SEEK),"vibrate"in navigator&&window.navigator.vibrate(15),this.feedBackInProgress?this.lastTapSide===t?this.updateQuickSeekFeedback():(this.hideQuickSeekFeedback(),this.showQuickSeekFeedback(t)):this.showQuickSeekFeedback(t),this.container.seek(this.targetSeekValue(t)))}},{key:"targetSeekValue",value:function(e){var t="right"===e?Wa:-10;return Math.min(this.container.getDuration()-1,Math.max(.1,this.container.currentTime+t))}},{key:"cacheAnimatedElements",value:function(e){this.background=this.$el.find(".quick-seek-placeholder-background--".concat(e)),this.arrow=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-arrow-placeholder .quick-seek-arrow")),this.label=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-label"))}},{key:"showQuickSeekFeedback",value:function(e){var t=this;this.lastTapSide=e,this.feedBackInProgress=!0,this.showPlugin(),this.cacheAnimatedElements(e),this.resetLabelClasses(),this.background[0].addEventListener("transitionend",(function(e){return t.onBackgroundShow(e)}),{once:!0}),setTimeout((function(){return t.background.addClass("background-show")})),this.displayArrow()}},{key:"onBackgroundShow",value:function(e){e.stopPropagation(),"opacity"!==e.propertyName&&this.background.addClass("opacity-transition")}},{key:"displayArrow",value:function(){var e=this;this.arrow[0].addEventListener("transitionend",(function(t){return e.onArrowShow(t)}),{once:!0}),setTimeout((function(){return e.arrow.addClass("visible")})),this.spinArrow()}},{key:"onArrowShow",value:function(e){e.stopPropagation(),this.displayLabel()}},{key:"spinArrow",value:function(){var e=this;"left"===this.lastTapSide?(!this.leftArrowDegrees&&(this.leftArrowDegrees=0),this.leftArrowDegrees-=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.leftArrowDegrees,"deg);")}))):(!this.rightArrowDegrees&&(this.rightArrowDegrees=0),this.rightArrowDegrees+=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.rightArrowDegrees,"deg);")})))}},{key:"displayLabel",value:function(){var e=this;this.currentSeekTime>=100&&this.label.addClass("triple-digit"),this.label.text(this.currentSeekTime),this.label[0].addEventListener("transitionend",(function(t){return e.onLabelShow(t)}),{once:!0}),setTimeout((function(){return e.label.addClass("visible")}))}},{key:"onLabelShow",value:function(e){var t=this;e.stopPropagation(),this.timeoutId=setTimeout((function(){t.hideQuickSeekFeedback()}),400)}},{key:"updateQuickSeekFeedback",value:function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.spinArrow(),this.currentSeekTime+=Wa,this.hideLabel(),990!==this.currentSeekTime&&setTimeout((function(){e.displayLabel()}),350)}},{key:"hideQuickSeekFeedback",value:function(){this.feedBackInProgress&&(clearTimeout(this.timeoutId),this.hideLabel(),this.hideArrow(),this.hideBackground(),this.currentSeekTime=Wa,this.feedBackInProgress=!1,this.hidePlugin())}},{key:"onMediaControlShow",value:function(){this.hideQuickSeekFeedback()}},{key:"hideLabel",value:function(){this.label.removeClass("visible")}},{key:"resetLabelClasses",value:function(){this.label.removeClass("triple-digit")}},{key:"hideArrow",value:function(){this.arrow.removeClass("visible")}},{key:"hideBackground",value:function(){this.background.removeClass("background-show")}},{key:"showPlugin",value:function(){this.$el.removeClass("hidden")}},{key:"hidePlugin",value:function(){this.$el.addClass("hidden")}},{key:"destroy",value:function(){v(c(n.prototype),"destroy",this).call(this),this.unbindKeyEvents()}},{key:"render",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label {\n  font-size: 8px;\n  margin-bottom: 5px;\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label.triple-digit {\n  font-size: 6px;\n  left: calc(50% - 6px);\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow {\n  transform-origin: 16px 17px;\n}\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow svg {\n  width: 32px;\n  height: 32px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek.hidden {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-container {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label {\n  display: inline-block;\n  position: absolute;\n  font-weight: bold;\n  font-family: "opensans-regular";\n  font-weight: 700;\n  letter-spacing: 0px;\n  font-size: 12px;\n  color: #eee;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  margin-bottom: 8px;\n  top: 40%;\n  left: 36%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label.triple-digit {\n  font-size: 10px;\n  left: calc(50% - 9px);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-label.visible {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow-placeholder {\n  position: relative;\n  display: flex;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow {\n  display: inline-block;\n  justify-content: center;\n  opacity: 0;\n  transform-origin: 24px 26px;\n  transition: transform 0.6s ease, opacity 0.3s ease;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow.visible {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-arrow svg {\n  width: 48px;\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #eee;\n  width: 45%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: -1;\n  right: -50%;\n  bottom: 0px;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.3);\n  transform: scaleX(0.9) scaleY(1.4);\n  transform-origin: center center;\n  opacity: 0;\n  will-change: opacity, transform;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background--left {\n  left: -50%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder--left .quick-seek-arrow-placeholder {\n  flex-direction: row-reverse;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-show {\n  opacity: 1;\n  transition: transform 0.6s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek.media-control-element {\n  padding: 0;\n  opacity: 1 !important;\n}',{playerId:this.core.options.playerId});return this.$el.html(this.template({backwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2L14 12l10 10v-8c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"/>\n    </g>\n</svg>',forwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2l10 10-10 10v-8c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12h4c0 8.84-7.16 16-16 16S8 34.84 8 26s7.16-16 16-16z"/>\n    </g>\n</svg>',currentSeekTime:this.currentSeekTime})),this.$el.append(e[0]),this}}]),n}(Ii),$a=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).mouseOverSeekbar=!1,i.draggingSeekbar=!1,i.isVisible=!1,i.waitingTimeoutToShow=!1,i.waitingTimeoutToHide=!1,i}return o(n,[{key:"name",get:function(){return"quick_seek_hint"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return J.isMobile?"upper":"lower"}},{key:"position",get:function(){return J.isMobile?"":"between"}},{key:"template",get:function(){return je('<span class="quick-seek-hint__label">\n  <% if (isMobile) { %>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= backward10 %></span>\n    Toque duplo para avançar\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= forward10 %></span>\n  <% } else { %>\n    Use as teclas\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= arrow %></span>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= arrow %></span>\n  para avançar\n  <% } %>\n</span>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"shouldDisable",get:function(){return this.currentWidth<=(J.isMobile?361:600)}},{key:"attributes",get:function(){return{class:"quick-seek-hint hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.bindSeekbarEvents()}},{key:"bindSeekbarEvents",value:function(){this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.listenTo(this.core,In.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,In.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!0}},{key:"unbindSeekbarEvents",value:function(){this.stopListening(this.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.stopListening(this.mediaControl,Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.stopListening(this.core,In.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.stopListening(this.core,In.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!1}},{key:"onStartDraggingSeekbar",value:function(){this.draggingSeekbar=!0}},{key:"onStopDraggingSeekbar",value:function(){this.draggingSeekbar=!1,this.waitingTimeoutToShow&&this.resetTimeoutToShow(),!this.waitingTimeoutToHide||!J.isMobile&&this.mouseOverSeekbar||(this.resetTimeoutToHide(),this.hide())}},{key:"onMousemoveSeekbar",value:function(){var e=this;if(this.mouseOverSeekbar=!0,!(this.isVisible||this.waitingTimeoutToShow||this.draggingSeekbar&&!J.isMobile||this.waitingMouseLeaveSeekbarAfterHide)){if(J.isMobile)return this.show();this.waitingTimeoutToShow=!0,this.showTimeoutId=setTimeout((function(){e.showTimeoutId=null,e.waitingTimeoutToShow=!1,e.show()}),1e3)}}},{key:"onMouseLeaveSeekbar",value:function(){this.mouseOverSeekbar=!1,this.waitingMouseLeaveSeekbarAfterHide=!1,this.draggingSeekbar||(this.waitingTimeoutToHide&&this.resetTimeoutToHide(),this.waitingTimeoutToShow&&this.resetTimeoutToShow(),this.hide())}},{key:"resetTimeoutToHide",value:function(){clearTimeout(this.hideTimeoutId),this.waitingTimeoutToHide=!1,this.hideTimeoutId=null}},{key:"resetTimeoutToShow",value:function(){clearTimeout(this.showTimeoutId),this.waitingTimeoutToShow=!1,this.showTimeoutId=null}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?(this.unbindSeekbarEvents(),this.$el.addClass("quick-seek-hint--disabled")):(!this.seekbarEventsActive&&this.bindSeekbarEvents(),this.$el.removeClass("quick-seek-hint--disabled"))}},{key:"show",value:function(){this.isVisible||(this.isVisible=!0,this.core.trigger(In.WILL_SHOW_QUICK_SEEK_HINT),this.$el.removeClass("hidden"),J.isMobile&&this.$el.addClass("media-control-element--sticky"),this.hideDelayed())}},{key:"hideDelayed",value:function(){var e=this;this.waitingTimeoutToHide=!0,this.hideTimeoutId=setTimeout((function(){e.hideTimeoutId=null,e.waitingTimeoutToHide=!1,e.hide()}),4e3)}},{key:"hide",value:function(){this.mouseOverSeekbar&&(this.waitingMouseLeaveSeekbarAfterHide=!0),this.isVisible&&(this.core.trigger(In.WILL_HIDE_QUICK_SEEK_HINT),this.$el.addClass("hidden"),J.isMobile&&this.$el.removeClass("media-control-element--sticky"),this.isVisible=!1)}},{key:"render",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.ad .quick-seek-hint {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  width: 100%;\n  padding-right: 0;\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__label {\n  margin: 0 auto;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow {\n  width: 24px;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--left {\n  margin-left: 0;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--right {\n  margin-right: 0;\n  margin-left: 8px;\n  transform: rotate(0);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint--disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint.hidden {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__container {\n  display: flex;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--left {\n  margin-left: 8px;\n  margin-right: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--right {\n  margin-right: 8px;\n  transform: rotate(180deg);\n}\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__label {\n  display: flex;\n  align-items: center;\n  opacity: 0.8;\n  font-family: "opensans-regular";\n  font-size: 14px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee;\n}',{playerId:this.core.options.playerId});return this.$el.html(this.template({isMobile:J.isMobile,arrow:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><rect stroke="#EEE" opacity=".3" x=".5" y=".5" width="19" height="19" rx="2"/><path d="M8 9h8v2H8v3l-4-4 4-4v3z" fill="#EEE"/></g></svg>',backward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>',forward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16h-.1zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'})),this.$el.append(e[0]),this}}]),n}(Ii);function Xa(e,t){return encodeURIComponent(e+"?utm_source=".concat(t,"&utm_medium=share-player-desktop"))}function Za(e,t){var n=500,i=window.screen.width/2-260,r=window.screen.height/2-300,a="height=".concat(n,",width=").concat(n,",left=").concat(i,",top=").concat(r,",screenX=").concat(i,",screenY=").concat(r,",\n               resizable=yes,status=no,toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");window.open(e,t,a)}var Qa='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Fechar</span>',Ja=wn.copyToClipboard,es=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).core=e,i.shouldRender=!1,i.$el.on("click",(function(){i.showShareBox()})),i.keyDownHandler=function(e){"Escape"===e.key&&(e.preventDefault(),i.hideModal())},i.options.share&&!1===i.options.share.enabled&&i.disable(),i}return o(n,[{key:"name",get:function(){return"share"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return je('<div class="share__box" role="dialog" aria-modal="true">\n  <button class="share__close"></button>\n\n  <div class="share__button-box">\n    <% for (var i=0; i < shareItems.length; i++) { %>\n      <button class="share__button" data-share-item="<%= shareItems[i].name %>">\n        <%= shareItems[i].element %>\n      </button>\n      <% } %>\n  </div>\n\n  <h1 class="share__title">Link Copiado</h1>\n  <div class="share__item-copied-box">\n    <h2 class="share__subtitle">\n      <%= videoUrl %>\n    </h2>\n  </div>\n</div>\n')}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"attributes",get:function(){return{class:"media-control-button","data-share":"","data-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,In.WM_SHARE_SHOW,this.start),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"start",value:function(){var e=this,t=this.modal.find(".share__box"),n=this.modal.find(".share__close");t&&t.on("click",(function(t){t&&t.stopPropagation(),e.hideModal()})),n&&n.append(Qa),X(document).on("keydown",this.keyDownHandler)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,In.WM_RESOURCE_SELECTED,this.checkUrl),this.listenTo(this.container,Le.CONTAINER_SETTINGSUPDATE,this.shouldHideModal)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.shareUrl=this.video.urlForConsumption.replace(/(^\w+:|^)\/\//,"");var t=this.core.options.share&&this.core.options.share.socialList;this.loadSocialList(t||[])}},{key:"checkUrl",value:function(){this.shouldRender=!0,this.render()}},{key:"shouldHideModal",value:function(){var e=this.playback&&this.playback.getPlaybackType();"vod"!==e&&"live"!==e&&this.hideModal()}},{key:"loadSocialList",value:function(e){e&&e.length>0?this.socialList=this.verifySocialList(e):this.socialList=this.getDefaultSocialList()}},{key:"verifySocialList",value:function(e){var t=this,n=[];return e.forEach((function(e){t.getDefaultSocialList().forEach((function(t){t.name===e&&n.push(t)}))})),n}},{key:"getDefaultSocialList",value:function(){var e=this;return[{name:"facebook",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M15.04 20v-6.196h2.08l.31-2.415h-2.39V9.848c0-.7.194-1.176 1.196-1.176h1.28v-2.16c-.222-.03-.981-.095-1.864-.095-1.844 0-3.106 1.125-3.106 3.192v1.78h-2.085v2.415h2.085V20H4.883C4.395 20 4 19.605 4 19.117V4.883C4 4.395 4.395 4 4.883 4h14.234c.488 0 .883.395.883.883v14.234c0 .488-.395.883-.883.883H15.04z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Facebook</span>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,i=Xa(t,"facebook"),r="?app_id=".concat("289255557788943","&display=popup&href=").concat(i),-1!=t.search("globoplay")&&(r+="&hashtag=".concat(encodeURIComponent("#GloboPlay"))),Za("".concat("https://www.facebook.com/dialog/share").concat(r),n)}},{name:"twitter",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8.66 19.617c6.794 0 10.508-5.623 10.508-10.499 0-.16-.003-.319-.01-.477.72-.52 1.348-1.17 1.842-1.91-.662.293-1.374.491-2.12.58.762-.457 1.347-1.18 1.623-2.04-.713.422-1.504.729-2.345.895C17.484 5.449 16.525 5 15.462 5c-2.039 0-3.693 1.653-3.693 3.69 0 .29.033.57.096.841-3.07-.154-5.79-1.623-7.612-3.855-.318.545-.5 1.178-.5 1.854 0 1.28.652 2.41 1.643 3.072-.606-.019-1.175-.185-1.673-.462v.048c0 1.787 1.273 3.279 2.963 3.617-.31.084-.637.13-.974.13-.238 0-.47-.024-.694-.067.47 1.466 1.833 2.533 3.45 2.563-1.264.99-2.857 1.58-4.587 1.58-.298 0-.592-.017-.881-.051 1.634 1.046 3.575 1.657 5.661 1.657" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Twitter</span>',onClickAction:function(){var t,n,i,r,a,s,o,l;t=e.video.urlForConsumption,n=e.video.title,i=e.video.program,r=function(e){return e?"#".concat(e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("").replace(/[-:]/g,"")):""}(i),a=-1!=t.search("globoplay")?" pelo #GloboPlay":"",s=r&&a?"Assista ".concat(r):"".concat(n),o=Xa(t,"twitter"),l=encodeURIComponent("".concat(s).concat(a)),Za("https://twitter.com/intent/tweet"+"?text=".concat(l,"&url=").concat(o),n)}},{name:"link",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Copiar link do vídeo</span>',onClickAction:function(t){t.stopPropagation(),e.showLinkCopiedBox(),Ja(e.video.urlForConsumption,e.modal)}}]}},{key:"hideModal",value:function(){var e=this.modal&&this.modal.find(".share__box"),t=e&&e.contents();!t||t&&!t.length||(e.off("click"),this.mediaControl.trigger(In.WM_SHARE_HIDE),this.core.trigger(In.WM_SHARE_HIDE),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.triggerDidHideModalElement(),this.hasPlayingBeforeModal&&this.playback.play(),X(document).off("keydown",this.keyDownHandler))}},{key:"render",value:function(){if(this.shouldRender){this.shouldRender=!1,this.$el.html("");var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.w360 .share__box--link-copied .share__button[data-share-item=link] {\n  transform: translate(-286%, 0px);\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button {\n  width: 40px;\n  height: 40px;\n  padding: 4px;\n  margin-left: 32px;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button:first-child {\n  margin-left: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__button:nth-last-child(3) {\n  margin-right: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__close {\n  box-sizing: content-box;\n  padding: 12px;\n  top: 0;\n  right: 0;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .share__close:active, .clappr-player#wp3-player-0 .media-control.w360 .share__close:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .share__box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__button {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__button[data-share-item=link] {\n  visibility: visible;\n  transition: transform 0.3s ease;\n  transform: translate(-344%, 0px);\n  opacity: 1;\n  cursor: default;\n}\n.clappr-player#wp3-player-0 .share__box--link-copied .share__item-copied-box,\n.clappr-player#wp3-player-0 .share__box--link-copied .share__title {\n  transition: visibility 0.7s ease, opacity 0.7s ease;\n  visibility: visible;\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .share__button {\n  padding: 0px;\n  background-color: transparent;\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n  width: 48px;\n  height: 48px;\n  margin-left: 56px;\n  box-sizing: content-box;\n}\n.clappr-player#wp3-player-0 .share__button:active, .clappr-player#wp3-player-0 .share__button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .share__button:hover, .clappr-player#wp3-player-0 .share__button:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .share__button svg {\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .share__button:first-child {\n  margin-left: 0;\n}\n.clappr-player#wp3-player-0 .share__button:nth-last-child(3) {\n  margin-right: 0;\n}\n.clappr-player#wp3-player-0 .share__item-copied-box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  position: absolute;\n  top: calc(50% + 22px);\n  left: 0;\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .share__title {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  position: absolute;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 16px;\n  color: #ffffff;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  cursor: default;\n  visibility: hidden;\n  top: calc(50% - 13px);\n  left: calc(50% - 22px);\n}\n.clappr-player#wp3-player-0 .share__subtitle {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  padding: 0 35px;\n  max-width: 100%;\n  word-wrap: break-word;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 12px;\n  letter-spacing: -0.5px;\n  color: #ffffff;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .share__close {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  transition: opacity 0.3s ease;\n  opacity: 0.6;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .share__close:hover, .clappr-player#wp3-player-0 .share__close:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .share__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .share__close:active, .clappr-player#wp3-player-0 .share__close:focus {\n  outline: 1;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M17 16.08c-.76 0-1.44.3-1.96.77L7.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.04 9.81C6.5 9.31 5.79 9 5 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar vídeo</span>'),this}}},{key:"bindShareEvents",value:function(){var e=this;this.socialList.forEach((function(t){var n=e.modal.find(".share__button[data-share-item=".concat(t.name,"]"));"function"==typeof t.onClickAction&&n.on("click",t.onClickAction)}))}},{key:"showShareBox",value:function(e){var t=this;e&&e.stopPropagation(),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause();var n=this.template({shareItems:this.socialList,videoUrl:this.shareUrl});this.triggerWillShowModalElement(),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_SHOW,n,{hidePanels:!0}),this.mediaControl.trigger(In.WM_SHARE_SHOW),this.core.trigger(In.WM_SHARE_SHOW),this.mediaControl.setKeepVisible(),this.bindShareEvents();var i=this.modal.find(".share__button, .share__item-copied-box, .share__title");i&&i.on("click",(function(e){return e.stopPropagation()})),setTimeout((function(){t.modal.find(".share__close").focus()}),500)}},{key:"showLinkCopiedBox",value:function(){var e=this.modal.find(".share__box");e&&e.addClass("share__box--link-copied")}}]),n}(Ii),ts='<div class="unmute-modal">\n  <div class="unmute-modal__button-box">\n    <button class="unmute-modal__button unmute-modal__button--on unmute-modal__button--hide" tabindex="0"><%= volumeOnIcon %></button>\n    <button class="unmute-modal__button unmute-modal__button--off" tabindex="0"><%= volumeOffIcon %></button>\n    <span class="unmute-modal__label">Ativar som</span>\n  </div>\n</div>\n',ns=wn.autoplayManager,is=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"tap_to_unmute"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"template",get:function(){return je(ts)}},{key:"modal",get:function(){return this.mediaControl&&this.mediaControl.$modal}},{key:"mutedAutoplay",get:function(){return this.idPlayback&&this.idPlayback.mutedAutoplay}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.idPlayback=this.core.activePlayback,this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.showUnmuteModal),this.listenToOnce(this.container,In.WM_UNMUTED,this.hideUnmuteModal)}},{key:"bindUnmuteModalEvents",value:function(){this.modal&&this.modal.on("click",this.onUnmuteModalClick.bind(this))}},{key:"showUnmuteModal",value:function(){var e=this,t=this.options.chromeless&&!J.isMobile,n=this.options.mute||this.mutedAutoplay&&!ns.playerHasConsent;!t&&n&&(this.renderUnmuteModal(),this.isVisible=!0,setTimeout((function(){e.hideLabel()}),5e3))}},{key:"renderUnmuteModal",value:function(){var e=je(ts)({volumeOffIcon:Fa,volumeOnIcon:Ua}),t=Cn.getStyleFrom('.clappr-player#wp3-player-0 .unmute-modal {\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  position: absolute;\n  pointer-events: auto;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button-box {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 32px;\n  background-color: rgba(0, 0, 0, 0.8);\n  width: 118px;\n  transition: width 0.5s ease;\n  box-sizing: border-box;\n  margin: 12px;\n  border-radius: 8px;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button-box--no-label {\n  width: 40px;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button {\n  background-color: transparent;\n  border: 0;\n  opacity: 1;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button--hide {\n  display: none;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button:hover, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button:active, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n  outline: 1;\n}\n.clappr-player#wp3-player-0 .unmute-modal__button svg {\n  height: 24px;\n  width: 24px;\n}\n.clappr-player#wp3-player-0 .unmute-modal__label {\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  line-height: 1.14;\n  color: #ffffff;\n  width: 77px;\n  padding-left: 7px;\n  opacity: 1;\n  transition: width 0.5s ease;\n  margin-top: -2px;\n}\n.clappr-player#wp3-player-0 .unmute-modal__label--hide {\n  width: 0;\n  opacity: 0;\n  padding: 0;\n}',{playerId:this.core.options.playerId});this.mediaControl&&this.mediaControl.trigger(In.MEDIACONTROL_MODAL_SHOW,e,{hidePanels:!0}),this.core.trigger(In.TAP_TO_UNMUTE_SHOW),this.modal&&this.modal.find(".unmute-modal").append(t[0]),this.mediaControl&&this.mediaControl.setKeepVisible(),this.bindUnmuteModalEvents(),this.mediaControl&&this.mediaControl.$el.addClass("media-control--no-background")}},{key:"onUnmuteModalClick",value:function(e){var t=this;e&&e.stopPropagation(),this.core.trigger(In.TAP_TO_UNMUTE_CLICKED),this.hideLabel(),this.toggleUnmuteButton(),setTimeout((function(){t.hideUnmuteModal()}),1e3)}},{key:"hideUnmuteModal",value:function(){this.isVisible&&(this.modal.off("click"),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_HIDE),this.isVisible=!1,this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--no-background"))}},{key:"toggleUnmuteButton",value:function(){this.modal&&(this.modal.find(".unmute-modal__button--off").addClass("unmute-modal__button--hide"),this.modal.find(".unmute-modal__button--on").removeClass("unmute-modal__button--hide"))}},{key:"hideLabel",value:function(){this.modal&&(this.modal.find(".unmute-modal__label").addClass("unmute-modal__label--hide"),this.modal.find(".unmute-modal__button-box").addClass("unmute-modal__button-box--no-label"))}},{key:"render",value:function(){return this.$el.html(""),this}},{key:"destroy",value:function(){this._mediaControl=null,v(c(n.prototype),"destroy",this).call(this)}}]),n}(qe),rs=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"live_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"label",get:function(){return this.options&&this.options.isLiveContent?"AO VIVO":"AGORA"}},{key:"isLive",get:function(){return this.container&&this.container.getPlaybackType()===Xe.LIVE}},{key:"attributes",get:function(){return{class:"live-indicator live-indicator--hide","aria-hidden":"true"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,Le.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVRUpdated),this.listenTo(this.container,Le.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,Le.CONTAINER_PAUSE,this.updateState)}},{key:"onDVRUpdated",value:function(e){this.dvrInUse=e,this.updateState()}},{key:"updateState",value:function(){if(!this.isLive)return this.hide();this.dvrInUse?this.hide():this.show(),this.$el["".concat(this.container.isDvrEnabled()?"remove":"add","Class")]("live-indicator--first-element"),J.supportsTouchEvents&&this.$el.addClass("live-indicator--first-element")}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"show",value:function(){this.$el.removeClass("live-indicator--hide")}},{key:"hide",value:function(){this.$el.addClass("live-indicator--hide")}},{key:"render",value:function(){this.$el.empty(),this.$indicator=X("<span/>").attr("data-live-indicator","").html(this.label);var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator {\n  display: flex;\n  align-self: flex-start;\n  margin-top: 5px;\n  border-radius: 2px;\n  background-color: red;\n  padding: 3px 6px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--hide {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--first-element {\n  margin-left: 12px;\n}\n.clappr-player#wp3-player-0 [data-live-indicator] {\n  color: #ffffff;\n  font-family: "opensans-bold", sans-serif;\n  font-size: 11px;\n  line-height: 1.45;\n  letter-spacing: -0.5px;\n}',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$indicator[0]),this}}]),n}(Ii),as='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M8 16.59L12.58 12 8 7.41 9.41 6l6 6-6 6z"/>\n    </g>\n</svg>',ss='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8.59 15.58l-4.17-4.17L3 12.82l5.59 5.59 12-12L19.18 5z"/>\n    </g>\n</svg>',os=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<div role="menu" class="settings__options-menu">\n  <% for (var i = 0; i < options.length; i++) { %>\n    <button role="menuitem" data-option-id="<%= options[i].id %>" type="button" class="settings__options-item <% if (options[i].selected) { %>settings__options-item--active<% } %>">\n      <% if (options[i].selected) { %><span class="settings__options-active-icon"><%= activeIcon %></span><% } %>\n      <div class="settings__options-item-label">\n        <span class="settings__options-item-label-language" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n        <span class="settings__options-item-label-role" data-option-id="<%= options[i].id %>"><%= options[i].sublabel %></span>\n      </div>\n    </button>\n  <% } %>\n</div>\n')}},{key:"options",get:function(){return this.availableOptions||[]},set:function(e){this.availableOptions=this.options.map((function(t){return i(i({},t),{},{selected:t.id.toString()===e.toString()})}))}},{key:"selected",get:function(){var e=this.options.find((function(e){return e.selected})),t=e||this.options.length&&this.options[0];return t&&{language:t.label,role:t.sublabel}}},{key:"events",get:function(){return{"click .settings__options-item":"clickOption"}}},{key:"shouldRender",value:function(){return this.options&&this.options.length>1}},{key:"clickOption",value:function(e){e.stopPropagation();var t=X(e.target).closest(".settings__options-item").data("option-id"),n=parseInt(t);this.selectOption(isNaN(n)?t:n)}},{key:"selectOption",value:function(e){this.playbackUpdate(e),this.interfaceUpdate(e),this.trigger(In.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"interfaceUpdate",value:function(e){var t=".settings__options-menu .settings__options-item",n="settings__options-item--active";this.options=e,this.$(t).find(".settings__options-active-icon").remove(),this.$(t).removeClass(n);var i=X("<span>").addClass("settings__options-active-icon").append(ss);this.$('.settings__options-item[data-option-id="'.concat(e,'"]')).addClass(n).prepend(i)}},{key:"render",value:function(){return this.shouldRender()&&(this.$el.html(this.template({options:this.options||[],title:this.title,activeIcon:ss,arrowIcon:as})),this.$el.addClass("settings__options-wrapper")),this}}]),n}(qe),ls={pt_br:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},pt_pt:{label:"Português (Portugal)",language:"pt-pt",languageISO_639_2B:"",keys:["pt-pt","pt-PT"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},us={language:"off",role:"subtitle"},cs=i(i({},ls),{},{off:{label:"Desativada",language:"off",keys:["off"]}}),ds=[],hs=0;for(var ps in cs)ds.push(i({id:hs},cs[ps])),hs++;var fs=function(e,t){var n;return(null==e?void 0:e.language)===t||(null==e||null===(n=e.keys)||void 0===n?void 0:n.includes(t))},gs=function(e,t){return e.role===t},vs=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).core=e,i.setInitialValues(),i.onAddTrack=i.onAddTrack.bind(h(i)),i.onChangeTrack=i.onChangeTrack.bind(h(i)),i}return o(n,[{key:"name",get:function(){return"subtitle_selector"}},{key:"optionName",get:function(){return"subtitle"}},{key:"title",get:function(){return"Legenda"}},{key:"isReady",get:function(){return this.video&&this.playback.innerPlaybackName}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de legenda</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"initialSubtitleOption",get:function(){return this.core.options.defaultSubtitle}},{key:"defaultOption",get:function(){return this.initialSubtitleOption||us}},{key:"resourceSubtitles",get:function(){return this.video.selectedResource&&this.video.selectedResource.subtitles}},{key:"subtitleTrackAutoHandled",get:function(){return J.isiOS||J.isSafari&&"hls_fairplay_playback"===this.playback.innerPlaybackName}},{key:"tagVideo",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.videoEl}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenToOnce(this.playback,In.WM_RESOURCE_READY,this.setup),this.listenToOnce(this.container,Le.CONTAINER_DESTROYED,this.removeTextTrackEvents))}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"stopListening",value:function(){this.removeTextTrackEvents(),v(c(n.prototype),"stopListening",this).call(this)}},{key:"removeTextTrackEvents",value:function(){this.tagVideo&&this.subtitleTrackAutoHandled&&(this.tagVideo.textTracks.removeEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.removeEventListener("change",this.onChangeTrack))}},{key:"setInitialValues",value:function(){this.availableOptions=[],this.availableContents=[],this.currentSubtitleId=null}},{key:"setup",value:function(){this.setInitialValues();var e=this.getSubtitleResource();this.isReady&&0!==e.length&&(this.onSubtitleLoaded("off","subtitle",""),this.subtitleTrackAutoHandled?this.setupTextTracks():this.loadSubtitles(e))}},{key:"getSubtitleResource",value:function(){var e,t,n=null===(e=this.video.selectedResource.subtitleResource)||void 0===e?void 0:e.srt,i=null===(t=this.video.selectedResource.subtitleResource)||void 0===t?void 0:t.webVTT;return!!this.core.options.shouldDeviceUseWebVTT&&i.length>0&&i||n}},{key:"setupTextTracks",value:function(){this.tagVideo.textTracks.addEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.addEventListener("change",this.onChangeTrack)}},{key:"onAddTrack",value:function(e){var t=this.tagVideo.textTracks;this.onSubtitleLoaded(e.track.language,e.track.kind,""),this.availableOptions.length-1===t.length&&this.onAllSubtitlesLoaded()}},{key:"onChangeTrack",value:function(){var e=this.tagVideo.textTracks,t=Array.from(e).find((function(e){return"showing"==e.mode}))||{language:"off",kind:"subtitle"},n=this.findSubtitleOption({language:t.language,role:t.kind});n&&this.updateSubtitleSelector(n.id,!1)}},{key:"loadSubtitles",value:function(e){var t=this,n=e.map((function(e){return t.fetchSubtitle(e)}));Promise.all(n).then((function(){return t.onAllSubtitlesLoaded()}))}},{key:"fetchSubtitle",value:function(e){var t=this,n=e.url,i=e.language,r=e.role,a=e.type;return new Promise((function(e){X.ajax({url:n,timeout:3e3,success:function(n){t.onSubtitleLoaded(i,r,n,a),e()},error:function(n){t.onSubtitleLoadError(n),e()}})}))}},{key:"onSubtitleLoadError",value:function(e){we.error(this.name,e)}},{key:"onSubtitleLoaded",value:function(e,t,n,r){var a=Object.values(cs).find((function(t){return t.keys.includes(e)}));a&&(a=i(i({},a),{},{id:this.availableOptions.length,label:this.getSubtitleLabel(a,t),role:t}),r&&(a.type=r),this.availableOptions.push(i({},a)),this.availableContents.push(n))}},{key:"getSubtitleLabel",value:function(e,t){var n=e.label;return t.match(/caption/)?n+" - CC":n}},{key:"onAllSubtitlesLoaded",value:function(){1!==this.availableOptions.length&&this.onSubtitlesReady()}},{key:"onSubtitlesReady",value:function(){this.setInitialSubtitle(),this.container.trigger(In.WM_SUBTITLE_AVAILABLE,this.availableOptions,this.availableContents),this.trigger(In.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"findSubtitleOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return fs(e,t)&&gs(e,n)})),r=this.availableOptions.find((function(e){return fs(e,t)}));return i||r}},{key:"setInitialSubtitle",value:function(){if(this.availableOptions.length){var e=this.findSubtitleOption(this.initialSubtitleOption),t=this.findSubtitleOption(us),n=e||t;this.updateSubtitleSelector(n.id,!1)}}},{key:"playbackUpdate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentSubtitleId!==e&&(this.selectedSubtitle=this.availableOptions[e],this.selectedSubtitle.selected=!0,this.currentSubtitleId=e,this.playback.currentSubtitle=this.selectedSubtitle,t&&this.container.trigger(In.WM_SUBTITLE_CHANGED,this.selectedSubtitle))}},{key:"updateSubtitleSelector",value:function(e,t){this.playbackUpdate(e,t),this.interfaceUpdate(e)}},{key:"getCurrentOption",value:function(){return this.selectedSubtitle}}]),n}(os),ms={language:"pt",languageISO_639_2B:"por"},ys=[],bs=0;for(var Es in ls)ys.push(i({id:bs},ls[Es])),bs++;var As=function(e,t){return e.keys.includes(t)},_s=function(e,t){return e.role===t},Ts=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.availableOptions=[],i.selectedAudio=null,i.currentAudioId=null,i}return o(n,[{key:"initialAudioOption",get:function(){return this.idPlayback.currentAudio||this.options.defaultAudio}},{key:"playback",get:function(){return this.idPlayback.playback}},{key:"audioTracks",get:function(){return[]}},{key:"onReady",value:function(){this.ready=!0,this.onAudioAvailable(),this.trigger(In.WM_AUDIOSELECTOR_READY)}},{key:"onAudioAvailable",value:function(){this.trigger(In.WM_AUDIO_AVAILABLE,this.availableOptions),this.playback.trigger(Le.PLAYBACK_AUDIO_AVAILABLE,this.availableOptions)}},{key:"setup",value:function(){}},{key:"parseAudioTracks",value:function(){}},{key:"updateAudioPlayback",value:function(){}},{key:"getAudioInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e&&"audio"!==e){var r=this.findAudioData(e);if(r)return i(i({},r),{},{sublabel:this.getAudioSublabel(n),role:n,id:t})}}},{key:"findAudioData",value:function(e){return ys.find((function(t){return As(t,e)}))}},{key:"getAudioSublabel",value:function(e){return e.match(/description/)?"audiodescrição":""}},{key:"findAudioOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return As(e,t)&&_s(e,n)})),r=this.availableOptions.find((function(e){return As(e,t)}));return i||r}},{key:"setInitialAudio",value:function(){if(this.availableOptions.length){var e=this.findAudioOption(this.initialAudioOption),t=this.findAudioOption(ms),n=m(this.availableOptions,1)[0],i=e||t||n;this.audioSwitch(i.id,!0)}}},{key:"getSelectedOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e||void 0!==t)return this.availableOptions.find((function(n){return n.id.toString()===e.toString()||n.language.toString()===t.toString()||n.keys.includes(t)}))}},{key:"audioSwitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.currentAudioId!==e||t)&&(this.selectedAudio=this.getSelectedOption(e),this.selectedAudio&&(this.idPlayback.currentAudio=this.selectedAudio,this.selectedAudio.selected=!0,this.currentAudioId=e,this.updateAudioPlayback(),!t&&this.trigger(In.WM_AUDIO_CHANGED,this.selectedAudio)))}},{key:"getCurrentOption",value:function(){return this.selectedAudio}}]),n}(Oe),ks=["alternate","description"],Ss=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"shakaPlayerInstance",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e._player}},{key:"shakaPlayerLanguages",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguages()}},{key:"shakaPlayerTracks",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguagesAndRoles()}},{key:"audioTracks",get:function(){return this.shakaPlayerTracks&&this.parseShakaTracks()||[]}},{key:"setup",value:function(){this.parseAudioTracks(),this.setInitialAudio()}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[];var t=0;this.audioTracks.forEach((function(n){var i=e.getAudioRole(n),r=e.getAudioInfo(n.language,t,i);r&&e.availableOptions.push(r),t++})),this.onReady()}},{key:"parseShakaTracks",value:function(){var e=this,t=function(e,t){return e.find((function(e){return e.role===t}))},n=[];return this.shakaPlayerLanguages.forEach((function(i){var r=e.shakaPlayerTracks.filter((function(e){return e.language===i})),a=t(r,"alternate"),s=t(r,"description");a&&s&&(r=r.filter((function(e){return"description"!==e.role}))),n.push.apply(n,y(r))})),n}},{key:"getAudioRole",value:function(e){var t=e.role;return ks.includes(t)?"description":""}},{key:"updateAudioPlayback",value:function(){var e,t=this.selectedAudio,n=t.language,i=t.role,r=ks.includes(i)?"alternate":"main";null===(e=this.shakaPlayerInstance)||void 0===e||e.selectAudioLanguage(n,r)}}]),n}(Ts),ws=ua((function(e,t){var n;"undefined"!=typeof window&&(n=()=>(()=>{var e={"./src/config.ts":
/*!***********************!*\
    !*** ./src/config.ts ***!
    \***********************/(e,t,n)=>{n.r(t),n.d(t,{enableStreamingMode:()=>S,hlsDefaultConfig:()=>T,mergeConfig:()=>k});var i=n(/*! ./controller/abr-controller */"./src/controller/abr-controller.ts"),r=n(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.ts"),a=n(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.ts"),s=n(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.ts"),o=n(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.ts"),l=n(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.ts"),u=n(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.ts"),c=n(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.ts"),d=n(/*! ./controller/fps-controller */"./src/controller/fps-controller.ts"),h=n(/*! ./controller/eme-controller */"./src/controller/eme-controller.ts"),p=n(/*! ./controller/cmcd-controller */"./src/controller/cmcd-controller.ts"),f=n(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.ts"),g=n(/*! ./utils/fetch-loader */"./src/utils/fetch-loader.ts"),v=n(/*! ./utils/cues */"./src/utils/cues.ts"),m=n(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),y=n(/*! ./utils/logger */"./src/utils/logger.ts");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(this,arguments)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=A(A({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:i.default,bufferController:l.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:v.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:s.SubtitleStreamController,subtitleTrackController:o.default,timelineController:u.TimelineController,audioStreamController:r.default,audioTrackController:a.default,emeController:h.default,cmcdController:p.default});function k(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return b({},e,t)}function S(e){var t=e.loader;t!==g.default&&t!==f.default?(y.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):(0,g.fetchSupported)()&&(e.loader=g.default,e.progressive=!0,e.enableSoftwareAES=!0,y.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/abr-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.ts"),a=n(/*! ../events */"./src/events.ts"),s=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../types/loader */"./src/types/loader.ts"),l=n(/*! ../utils/logger */"./src/utils/logger.ts");function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var c=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new r.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,n,c,d=e.prototype;return d.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(e,t){var n,i=t.frag;i.type===o.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},d.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.autoLevelEnabled,s=n.media;if(e&&s){var o=t?t.stats:e.stats,u=t?t.duration:e.duration;if(o.aborted||o.loaded&&o.loaded===o.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(r&&!s.paused&&s.playbackRate&&s.readyState){var c=n.mainForwardBufferInfo;if(null!==c){var d=performance.now()-o.loading.start,h=Math.abs(s.playbackRate);if(!(d<=500*u/h)){var p=o.loaded&&o.loading.first,f=this.bwEstimator.getEstimate(),g=n.levels,v=n.minAutoLevel,m=g[e.level],y=o.total||Math.max(o.loaded,Math.round(u*m.maxBitrate/8)),b=p?1e3*o.loaded/d:0,E=b?(y-o.loaded)/b:8*y/f,A=c.len/h;if(!(E<=A)){var _,T=Number.POSITIVE_INFINITY;for(_=e.level-1;_>v;_--){var k=g[_].maxBitrate;if((T=b?u*k/(6.4*b):u*k/f)<A)break}T>=E||(l.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+_+"\n      Current BW estimate: "+((0,i.isFiniteNumber)(f)?(f/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+A.toFixed(3)+" s"),n.nextLoadLevel=_,p&&this.bwEstimator.sample(d,o.loaded),this.clearTimer(),(e.loader||e.keyLoader)&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}}}}}},d.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if(n.type===o.PlaylistLevelType.MAIN&&(0,i.isFiniteNumber)(n.sn)){var s=r?r.stats:n.stats,l=r?r.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var u=this.hls.levels[n.level],c=(u.loaded?u.loaded.bytes:0)+s.loaded,d=(u.loaded?u.loaded.duration:0)+l;u.loaded={bytes:c,duration:d},u.realBitrate=Math.round(8*c/d)}if(n.bitrateTest){var h={stats:s,frag:n,part:r,id:n.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,h)}}},d.onFragBuffered=function(e,t){var n=t.frag,i=t.part,r=i?i.stats:n.stats;if(!r.aborted&&n.type===o.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=r.parsing.end-r.loading.start;this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},d.onError=function(e,t){var n;if((null===(n=t.frag)||void 0===n?void 0:n.type)===o.PlaylistLevelType.MAIN){if(t.type===s.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.maxAutoLevel,r=n.config,a=n.minAutoLevel,s=n.media,o=t?t.duration:e?e.duration:0,u=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=n.mainForwardBufferInfo,h=(d?d.len:0)/u,p=this.findBestLevel(c,a,i,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(!h){var m=this.bitrateTestDelay;m&&(f=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-m,l.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),g=v=1)}return p=this.findBestLevel(c,a,i,h+f,g,v),Math.max(p,0)},d.findBestLevel=function(e,t,n,r,a,s){for(var o,u=this.fragCurrent,c=this.partCurrent,d=this.lastLoadedFragLevel,h=this.hls.levels,p=h[d],f=!(null==p||null===(o=p.details)||void 0===o||!o.live),g=null==p?void 0:p.codecSet,v=c?c.duration:u?u.duration:0,m=n;m>=t;m--){var y=h[m];if(y&&(!g||y.codecSet===g)){var b=y.details,E=(c?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||v,A=void 0;A=m<=d?a*e:s*e;var _=h[m].maxBitrate,T=_*E/A;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+m+"/"+Math.round(A)+"/"+_+"/"+E+"/"+r+"/"+T),A>_&&(0===T||!(0,i.isFiniteNumber)(T)||f&&!this.bitrateTestDelay||T<r))return m}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;var n=this.getNextABRAutoLevel();return-1!==e&&this.hls.levels[n].loadError?e:(-1!==e&&(n=Math.min(e,n)),n)},set:function(e){this._nextAutoLevel=e}}])&&u(t.prototype,n),c&&u(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();const d=c},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
    !*** ./src/controller/audio-stream-controller.ts ***!
    \***************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../events */"./src/events.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),o=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),l=n(/*! ../types/level */"./src/types/level.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts"),h=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),p=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),f=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),g=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),v=n(/*! ../errors */"./src/errors.ts");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var b=function(e){var t,n;function b(t,n,i){var r;return(r=e.call(this,t,n,i,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r.cachedTrackLoadedData=null,r._registerListeners(),r}n=e,(t=b).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var E=b.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,a=t.initPTS;if("main"===i){var s=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+s+" found from main: "+a),this.videoTrackCC=s,this.state===r.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=r.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=r.State.IDLE):(this.loadedmetadata=!1,this.state=r.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},E.doTick=function(){switch(this.state){case r.State.IDLE:this.doTickIdle();break;case r.State.WAITING_TRACK:var t,n=this.levels,i=this.trackId,a=null==n||null===(t=n[i])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=r.State.WAITING_INIT_PTS}break;case r.State.FRAG_LOADING_WAITING_RETRY:var o,l=performance.now(),u=this.retryDate;(!u||l>=u||null!==(o=this.media)&&void 0!==o&&o.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=r.State.IDLE);break;case r.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,h=c.part,p=c.cache,g=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=r.State.FRAG_LOADING;var v={frag:d,part:h,payload:p.flush(),networkDetails:null};this._handleFragmentLoadProgress(v),g&&e.prototype._handleFragmentLoadComplete.call(this,v)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),y=s.BufferHelper.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);(0,f.fragmentWithinToleranceTest)(y.end,this.config.maxFragLookUpTolerance,d)<0&&(this.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=r.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=r.State.IDLE)},E.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this)},E.onTickEnd=function(){var e=this.media;e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},E.doTickIdle=function(){var e=this.hls,t=this.levels,n=this.media,i=this.trackId,s=e.config;if(t&&t[i]&&(n||!this.startFragRequested&&s.startFragPrefetch)){var o=t[i].details;if(!o||o.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(o))this.state=r.State.WAITING_TRACK;else{var l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,c.ElementaryStreamTypes.AUDIO,u.PlaylistLevelType.AUDIO));var d=this.getFwdBufferInfo(l,u.PlaylistLevelType.AUDIO);if(null!==d){var h=this.audioSwitch;if(!h&&this._streamEnded(d,o))return e.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=r.State.ENDED);var p=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,u.PlaylistLevelType.MAIN);if(!(d.len>=this.getMaxBufferLength(null==p?void 0:p.len))||h){var f=o.fragments[0].start,g=d.end;if(h&&n){var v=this.getLoadPosition();g=v,o.PTSKnown&&v<f&&(d.end>f||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=f+.05)}if(!(p&&g>p.end+o.targetduration)&&(p&&p.len||!d.len)){var m=this.getNextFragment(g,o);m?this.loadFragment(m,o,g):this.bufferFlushed=!0}}}}}},E.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},E.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new l.Level(e)}))},E.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var i=this.fragCurrent;i&&i.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=r.State.IDLE):this.state=r.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(a.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},E.onAudioTrackLoaded=function(e,t){var n;if(null!=this.mainDetails){var i=this.levels,a=t.details,s=t.id;if(i){this.log("Track "+s+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var o=i[s],l=0;if(a.live||null!==(n=o.details)&&void 0!==n&&n.live){var u=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!u)return;!o.details&&a.hasProgramDateTime&&u.hasProgramDateTime?((0,g.alignMediaPlaylistByPDT)(a,u),l=a.fragments[0].start):l=this.alignPlaylists(a,o.details)}o.details=a,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(o.details,l),this.state!==r.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=r.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+s)}else this.cachedTrackLoadedData=t},E._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,a=e.payload,s=this.config,o=this.trackId,l=this.levels;if(l){var c=l[o];console.assert(c,"Audio track is defined on fragment load progress");var f=c.details;console.assert(f,"Audio track details are defined on fragment load progress");var g=s.defaultAudioCodec||c.audioCodec||"mp4a.40.2",v=this.transmuxer;v||(v=this.transmuxer=new h.default(this.hls,u.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var m=this.initPTS[n.cc],y=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==m){var b=i?i.index:-1,E=-1!==b,A=new p.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,E);v.push(a,y,g,"",n,i,f.totalduration,!1,A,m)}else this.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+f.startSN+" ,"+f.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:n,part:i,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=r.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},E.onFragBuffered=function(e,t){var n,i=t.frag,r=t.part;i.type===u.PlaylistLevelType.AUDIO?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(r?" p: "+r.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,r)):this.loadedmetadata||i.type!==u.PlaylistLevelType.MAIN||null!==(n=this.videoBuffer||this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},E.onError=function(t,n){if(n.type!==v.ErrorTypes.KEY_SYSTEM_ERROR)switch(n.details){case v.ErrorDetails.FRAG_LOAD_ERROR:case v.ErrorDetails.FRAG_LOAD_TIMEOUT:case v.ErrorDetails.FRAG_PARSING_ERROR:case v.ErrorDetails.KEY_LOAD_ERROR:case v.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n);break;case v.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case v.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==r.State.ERROR&&this.state!==r.State.STOPPED&&(this.state=n.fatal?r.State.ERROR:r.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case v.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===r.State.PARSING||this.state===r.State.PARSED)){var i=!0,a=this.getFwdBufferInfo(this.mediaBuffer,u.PlaylistLevelType.AUDIO);a&&a.len>.5&&(i=!this.reduceMaxBufferLength(a.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n)},E.onBufferFlushed=function(e,t){t.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===r.State.ENDED&&(this.state=r.State.IDLE))},E._handleTransmuxComplete=function(e){var t,n="audio",i=this.hls,s=e.remuxResult,o=e.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(o.level);var u=l.frag,d=l.part,h=l.level.details,p=s.audio,f=s.text,g=s.id3,v=s.initSegment;if(!this.fragContextChanged(u)&&h){if(this.state=r.State.PARSING,this.audioSwitch&&p&&this.completeAudioSwitch(),null!=v&&v.tracks&&(this._bufferInitSegment(v.tracks,u,o),i.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:v.tracks})),p){var y=p.startPTS,b=p.endPTS,E=p.startDTS,A=p.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:y,endPTS:b,startDTS:E,endDTS:A}),u.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,y,b,E,A),this.bufferFragmentData(p,u,d,o)}if(null!=g&&null!==(t=g.samples)&&void 0!==t&&t.length){var _=m({id:n,frag:u,details:h},g);i.trigger(a.Events.FRAG_PARSING_METADATA,_)}if(f){var T=m({id:n,frag:u,details:h},f);i.trigger(a.Events.FRAG_PARSING_USERDATA,T)}}},E._bufferInitSegment=function(e,t,n){if(this.state===r.State.PARSING){e.video&&delete e.video;var i=e.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,e);var s=i.initSegment;if(null!=s&&s.byteLength){var o={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:s};this.hls.trigger(a.Events.BUFFER_APPENDING,o)}this.tick()}}},E.loadFragment=function(t,n,a){var s=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||s===o.FragmentState.NOT_LOADED||s===o.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t,n):n.live&&!(0,i.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=r.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,a)))},E.completeAudioSwitch=function(){var t=this.hls,n=this.media,i=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:i})},b}(r.default);const E=b},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/audio-track-controller.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),s=n(/*! ../types/loader */"./src/types/loader.ts");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var u,c,d,h=a.prototype;return h.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(i.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(i.Events.ERROR,this.onError,this)},h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},h.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},h.onAudioTrackLoaded=function(e,t){var n=t.id,i=t.details,r=this.tracksInGroup[n];if(r){var a=r.details;r.details=t.details,this.log("audioTrack "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,a))}else this.warn("Invalid audio track id "+n)},h.onLevelLoading=function(e,t){this.switchLevel(t.level)},h.onLevelSwitching=function(e,t){this.switchLevel(t.level)},h.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var r=this.tracks.filter((function(e){return!n||e.groupId===n}));this.selectDefaultTrack&&!r.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=r;var a={audioTracks:r};this.log("Updating audio tracks, "+r.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(i.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},h.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},h.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var r=t[e],a=r.id,s=r.groupId,o=void 0===s?"":s,l=r.name,u=r.type,c=r.url;if(this.trackId=e,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(i.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:o,name:l,type:u,url:c}),!r.details||r.details.live){var d=this.switchParams(r.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},h.selectInitialTrack=function(){var e=this.tracksInGroup;console.assert(e.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,n=this.findTrackId(t)||this.findTrackId();-1!==n?this.setAudioTrack(n):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(i.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},h.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},h.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(n)){var r=n.id,a=n.groupId,s=n.url;if(t)try{s=t.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(i.Events.AUDIO_TRACK_LOADING,{url:s,id:r,groupId:a,deliveryDirectives:t||null})}},u=a,(c=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&o(u.prototype,c),d&&o(u,d),Object.defineProperty(u,"prototype",{writable:!1}),a}(a.default);const c=u},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
    !*** ./src/controller/base-playlist-controller.ts ***!
    \****************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(/*! ../types/level */"./src/types/level.ts"),r=n(/*! ./level-helper */"./src/controller/level-helper.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../errors */"./src/errors.ts"),o=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=a.logger.log.bind(a.logger,t+":"),this.warn=a.logger.warn.bind(a.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){!t.fatal||t.type!==s.ErrorTypes.NETWORK_ERROR&&t.type!==s.ErrorTypes.KEY_SYSTEM_ERROR||this.stopLoad()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n)for(var r=0;r<n.length;r++){var s=n[r],o=void 0;try{o=new self.URL(s.URI,t.url).href}catch(e){a.logger.warn("Could not construct new URL for Rendition Report: "+e),o=s.URI||""}if(o===e.slice(-o.length)){var l=parseInt(s["LAST-MSN"])||(null==t?void 0:t.lastPartSn),u=parseInt(s["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var c=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&c>t.partTarget&&(u+=1)}return new i.HlsUrlParameters(l,u>=0?u:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var i=this,a=t.details,s=t.stats,o=self.performance.now(),l=s.loading.first?Math.max(0,o-s.loading.first):0;if(a.advancedDateTime=Date.now()-l,a.live||null!=n&&n.live){if(a.reloaded(n),n&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),n&&a.fragments.length>0&&(0,r.mergeDetails)(n,a),!this.canLoad||!a.live)return;var u,c=void 0,d=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var h=this.hls.config.lowLatencyMode,p=a.lastPartSn,f=a.endSN,g=a.lastPartIndex,v=p===f;-1!==g?(c=v?f+1:p,d=v?h?0:g:g+1):c=f+1;var m=a.age,y=m+a.ageHeader,b=Math.min(y-a.partTarget,1.5*a.targetduration);if(b>0){if(n&&b>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+b+" with playlist age: "+a.age),b=0;else{var E=Math.floor(b/a.targetduration);c+=E,void 0!==d&&(d+=Math.round(b%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+b+" skip sn "+E+" to part "+d)}a.tuneInGoal=b}if(u=this.getDeliveryDirectives(a,t.deliveryDirectives,c,d),h||!v)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(a,t.deliveryDirectives,c,d);var A=this.hls.mainForwardBufferInfo,_=A?A.end-A.len:0,T=1e3*(a.edge-_),k=(0,r.computeReloadInterval)(a,T);a.updated?o>this.requestScheduled+k&&(this.requestScheduled=s.loading.start):this.requestScheduled=-1,void 0!==c&&a.canBlockReload?this.requestScheduled=s.loading.first+k-(1e3*a.partTarget||1e3):this.requestScheduled=(-1===this.requestScheduled?o:this.requestScheduled)+k;var S=this.requestScheduled-o;S=Math.max(0,S),this.log("reload live playlist "+e+" in "+Math.round(S)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(u)}),S)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,r){var a=(0,i.getSkipValue)(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},t.retryLoadingOrFail=function(e){var t,n=this,i=this.hls.config,r=this.retryCount<i.levelLoadingMaxRetry;if(r)if(this.requestScheduled=-1,this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return r},e}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/base-stream-controller.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{State:()=>A,default:()=>_});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../task-loop */"./src/task-loop.ts"),a=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),l=n(/*! ../events */"./src/events.ts"),u=n(/*! ../errors */"./src/errors.ts"),c=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),d=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),h=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),p=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),f=n(/*! ./level-helper */"./src/controller/level-helper.ts"),g=n(/*! ../loader/fragment-loader */"./src/loader/fragment-loader.ts"),v=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),m=n(/*! ../utils/time-ranges */"./src/utils/time-ranges.ts"),y=n(/*! ../types/loader */"./src/types/loader.ts");function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},_=function(e){var t,n;function r(t,n,i,r){var a;return(a=e.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=A.STOPPED,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=r,a.log=o.logger.log.bind(o.logger,r+":"),a.warn=o.logger.warn.bind(o.logger,r+":"),a.hls=t,a.fragmentLoader=new g.default(t.config),a.keyLoader=i,a.fragmentTracker=n,a.config=t.config,a.decrypter=new v.default(t.config),t.on(l.Events.LEVEL_SWITCHING,a.onLevelSwitching,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,E(t,n);var _,T,k,S=r.prototype;return S.doTick=function(){this.onTickEnd()},S.onTickEnd=function(){},S.startLoad=function(e){},S.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var e=this.fragCurrent;e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=A.STOPPED},S._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var n=t.partList;if(null!=n&&n.length){var i=n[n.length-1];return s.BufferHelper.isBuffered(this.media,i.start+i.duration/2)}var r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)},S.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null===(e=this.levels[this.levelLastLoaded])||void 0===e?void 0:e.details},S.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===A.STOPPED&&this.startLoad(i.startPosition)},S.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},S.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,r=this.mediaBuffer,a=this.state,o=n?n.currentTime:0,l=s.BufferHelper.bufferInfo(r||n,o,e.maxBufferHole);if(this.log("media seeking to "+((0,i.isFiniteNumber)(o)?o.toFixed(3):o)+", state: "+a),this.state===A.ENDED)this.resetLoadingState();else if(t){var u=e.maxFragLookUpTolerance,c=t.start-u,d=t.start+t.duration+u;if(!l.len||d<l.start||c>l.end){var h=o>d;(o<c||h)&&(h&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests()),this.resetLoadingState())}}n&&(this.lastCurrentTime=o),this.loadedmetadata||l.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()},S.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},S.onLevelSwitching=function(e,t){this.fragLoadError=0},S.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},S.onHandlerDestroyed=function(){this.state=A.STOPPED,this.hls.off(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},S.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},S._loadFragForPlayback=function(e,t,n){var i=this;this._doFragLoad(e,t,n,(function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t)})).then((function(t){if(t){i.fragLoadError=0;var n=i.state;i.fragContextChanged(e)?(n===A.FRAG_LOADING||!i.fragCurrent&&n===A.PARSING)&&(i.fragmentTracker.removeFragment(e),i.state=A.IDLE):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(l.Events.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t))}})).catch((function(t){i.state!==A.STOPPED&&i.state!==A.ERROR&&(i.warn(t),i.resetFragmentLoading(e))}))},S.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var i={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(l.Events.BUFFER_FLUSHING,i)}},S._loadInitSegment=function(e,t){var n=this;this._doFragLoad(e,t).then((function(t){if(!t||n.fragContextChanged(e)||!n.levels)throw new Error("init load aborted");return t})).then((function(t){var i=n.hls,r=t.payload,a=e.decryptdata;if(r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=self.performance.now();return n.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(n){var r=self.performance.now();return i.trigger(l.Events.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:s,tdecrypt:r}}),t.payload=n,t}))}return t})).then((function(t){var i=n.fragCurrent,r=n.hls,a=n.levels;if(!a)throw new Error("init load aborted, missing levels");var s=a[e.level].details;console.assert(s,"Level details are defined when init segment is loaded");var o=e.stats;n.state=A.IDLE,n.fragLoadError=0,e.data=new Uint8Array(t.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),t.frag===i&&r.trigger(l.Events.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:e.type}),n.tick()})).catch((function(t){n.state!==A.STOPPED&&n.state!==A.ERROR&&(n.warn(t),n.resetFragmentLoading(e))}))},S.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},S.fragBufferedComplete=function(e,t){var n,i,r,a,o=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" (frag:["+(null!=(n=e.startPTS)?n:NaN).toFixed(3)+"-"+(null!=(i=e.endPTS)?i:NaN).toFixed(3)+"] > buffer:"+(o?m.default.toString(s.BufferHelper.getBuffered(o)):"(detached)")+")"),this.state=A.IDLE,o&&(!this.loadedmetadata&&e.type==y.PlaylistLevelType.MAIN&&o.buffered.length&&(null===(r=this.fragCurrent)||void 0===r?void 0:r.sn)===(null===(a=this.fragPrevious)||void 0===a?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},S.seekToStartPos=function(){},S._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,i=e.part,r=e.partsLoaded,a=!r||0===r.length||r.some((function(e){return!e})),s=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(s)}},S._handleFragmentLoadProgress=function(e){},S._doFragLoad=function(e,t,n,r){var a,s=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");var o=null;if(!e.encrypted||null!==(a=e.decryptdata)&&void 0!==a&&a.key?!e.encrypted&&t.encryptedFragments.length&&this.keyLoader.loadClear(e,t.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=A.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then((function(e){if(!s.fragContextChanged(e.frag))return s.hls.trigger(l.Events.KEY_LOADED,e),s.state===A.KEY_LOADING&&(s.state=A.IDLE),e})),this.hls.trigger(l.Events.KEY_LOADING,{frag:e}),this.throwIfFragContextChanged("KEY_LOADING")),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var u=t.partList;if(u&&r){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var c=this.getNextPart(u,e,n);if(c>-1){var d=u[c];return this.log("Loading part sn: "+e.sn+" p: "+d.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+c+"-"+(u.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=A.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,part:u[c],targetBufferTime:n}),this.throwIfFragContextChanged("FRAG_LOADING parts"),o?o.then((function(t){return!t||s.fragContextChanged(t.frag)?null:s.doFragPartsLoad(e,u,c,r)})).catch((function(e){return s.handleFragLoadError(e)})):this.doFragPartsLoad(e,u,c,r).catch((function(e){return s.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(u,n))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),(0,i.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=A.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.throwIfFragContextChanged("FRAG_LOADING");var h=this.config.progressive;return h&&o?o.then((function(t){return!t||s.fragContextChanged(null==t?void 0:t.frag)?null:s.fragmentLoader.load(e,r)})).catch((function(e){return s.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,h?r:void 0),o]).then((function(e){var t=e[0];return!h&&t&&r&&r(t),t})).catch((function(e){return s.handleFragLoadError(e)}))},S.throwIfFragContextChanged=function(e){if(null===this.fragCurrent)throw new Error("frag load aborted, context changed in "+e)},S.doFragPartsLoad=function(e,t,n,i){var r=this;return new Promise((function(a,s){var o=[];!function n(u){var c=t[u];r.fragmentLoader.loadPart(e,c,i).then((function(i){o[c.index]=i;var s=i.part;r.hls.trigger(l.Events.FRAG_LOADED,i);var d=t[u+1];if(!d||d.fragment!==e)return a({frag:e,part:s,partsLoaded:o});n(u+1)})).catch(s)}(n)}))},S.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===u.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(l.Events.ERROR,t)}else this.hls.trigger(l.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,err:e,fatal:!0});return null},S._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===A.PARSING){var n=t.frag,i=t.part,r=t.level,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,r,e.partial)}else this.fragCurrent||this.state===A.STOPPED||this.state===A.ERROR||(this.state=A.IDLE)},S.getCurrentContext=function(e){var t=this.levels,n=e.level,i=e.sn,r=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],s=r>-1?(0,f.getPartWith)(a,i,r):null,o=s?s.fragment:(0,f.getFragmentWithSN)(a,i,this.fragCurrent);return o?{frag:o,part:s,level:a}:null},S.bufferFragmentData=function(e,t,n,i){if(e&&this.state===A.PARSING){var r=e.data1,a=e.data2,s=r;if(r&&a&&(s=(0,d.appendUint8Array)(r,a)),s&&s.length){var o={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:s};this.hls.trigger(l.Events.BUFFER_APPENDING,o),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},S.flushBufferGap=function(e){var t=this.media;if(t)if(s.BufferHelper.isBuffered(t,t.currentTime)){var n=t.currentTime,i=s.BufferHelper.bufferInfo(t,n,0),r=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)},S.getFwdBufferInfo=function(e,t){var n=this.config,r=this.getLoadPosition();if(!(0,i.isFiniteNumber)(r))return null;var a=s.BufferHelper.bufferInfo(e,r,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var o=this.fragmentTracker.getBufferedFrag(r,t);if(o&&a.nextStart<o.end)return s.BufferHelper.bufferInfo(e,r,Math.max(a.nextStart,n.maxBufferHole))}return a},S.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},S.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},S.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,s=n[0].start;if(t.live){var o=a.initialLiveManifestSize;if(i<o)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+o+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,n),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=s&&(r=n[0]);if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(r)},S.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},S.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,s=0,o=e.length;s<o;s++){var l=e[s];if(a=a&&!l.independent,i>-1&&n<l.start)break;var u=l.loaded;u?i=-1:(r||l.independent||a)&&l.fragment===t&&(i=s),r=u}return i},S.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},S.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,i=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),i=(0,p.findFragmentByPDT)(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){var a=t[r-e.startSN];n.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=(0,p.findFragWithCC)(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn)}}else{var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i},S.getFragmentAtPosition=function(e,t,n){var i,r=this.config,s=this.fragPrevious,o=n.fragments,l=n.endSN,u=n.fragmentHint,c=r.maxFragLookUpTolerance,d=!!(r.lowLatencyMode&&n.partList&&u);if(d&&u&&!this.bitrateTest&&(o=o.concat(u),l=u.sn),e<t){var h=e>t-c?0:c;i=(0,p.findFragmentByPTS)(s,o,e,h)}else i=o[o.length-1];if(i){var f=i.sn-n.startSN;if(this.fragmentTracker.getState(i)===a.FragmentState.OK&&(s=i),s&&i.sn===s.sn&&!d&&s&&i.level===s.level){var g=o[f+1];i.sn<l&&this.fragmentTracker.getState(g)!==a.FragmentState.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+g.sn),i=g):i=null}}return i},S.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var i=this.hls.liveSyncPosition,r=n.currentTime,a=e.fragments[0].start,s=e.edge,o=r>=a-t.maxFragLookUpTolerance&&r<=s;if(null!==i&&n.duration>i&&(r<i||!o)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||r<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),n.currentTime=i))}}},S.alignPlaylists=function(e,t){var n=this.levels,r=this.levelLastLoaded,a=this.fragPrevious,s=null!==r?n[r]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=e.fragments[0].start,u=!t,c=e.alignedSliding&&(0,i.isFiniteNumber)(l);if(u||!c&&!l){(0,h.alignStream)(a,s,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+o),d}return l},S.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},S.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var r=e.startTimeOffset;(0,i.isFiniteNumber)(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+r+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},S.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},S.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},S.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===A.FRAG_LOADING_WAITING_RETRY)||(this.state=A.IDLE)},S.onFragmentOrKeyLoadError=function(e,t){if(t.fatal)return this.stopLoad(),void(this.state=A.ERROR);var n=this.config;if(t.chunkMeta){var i=this.getCurrentContext(t.chunkMeta);i&&(t.frag=i.frag,t.levelRetry=!0,this.fragLoadError=n.fragLoadingMaxRetry)}var r=t.frag;if(r&&r.type===e){var a=this.fragCurrent;if(console.assert(a&&r.sn===a.sn&&r.level===a.level&&r.urlId===a.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=n.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var s=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+e+" "+r.level+" failed to load, retrying in "+s+"ms"),this.retryDate=self.performance.now()+s,this.fragLoadError++,this.state=A.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=A.IDLE):(o.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=A.ERROR)}},S.afterBufferFlushed=function(e,t,n){if(e){var i=s.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===A.ENDED&&this.resetLoadingState()}},S.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE},S.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},S.updateLevelTiming=function(e,t,n,i){var r=this,a=n.details;console.assert(!!a,"level.details must be defined");var s=Object.keys(e.elementaryStreams).reduce((function(t,s){var o=e.elementaryStreams[s];if(o){var u=o.endPTS-o.startPTS;if(u<=0)return r.warn("Could not parse fragment "+e.sn+" "+s+" duration reliably ("+u+")"),t||!1;var c=i?0:(0,f.updateFragPTSDTS)(a,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return r.hls.trigger(l.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:s,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1);s||(this.warn("Found no media in fragment "+e.sn+" of level "+n.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=A.PARSED,this.hls.trigger(l.Events.FRAG_PARSED,{frag:e,part:t})},S.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},_=r,(T=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&b(_.prototype,T),k&&b(_,k),Object.defineProperty(_,"prototype",{writable:!1}),r}(r.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/buffer-controller.ts ***!
    \*********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),c=n(/*! ./buffer-operation-queue */"./src/controller/buffer-operation-queue.ts"),d=(0,l.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,p=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.media,n=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),e&&(e.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(r.Events.MEDIA_ATTACHED,{media:e})),n&&n.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var e=t.media,n=t._objectUrl;e&&e.src!==n&&a.logger.error("Media element src was set while attaching MediaSource ("+n+" > "+e.src+")")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},t.registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.BUFFER_RESET,this.onBufferReset,this),e.on(r.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.Events.BUFFER_EOS,this.onBufferEos,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(r.Events.FRAG_PARSED,this.onFragParsed,this),e.on(r.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.BUFFER_RESET,this.onBufferReset,this),e.off(r.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.Events.BUFFER_EOS,this.onBufferEos,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(r.Events.FRAG_PARSED,this.onFragParsed,this),e.off(r.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&d){var i=this.mediaSource=new d;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(i),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){a.logger.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(r.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(i){var r=n.tracks[e];if(r&&"function"==typeof r.buffer.changeType){var s=t[e],o=s.id,l=s.codec,u=s.levelCodec,c=s.container,d=s.metadata,p=(r.levelCodec||r.codec).replace(h,"$1"),f=(u||l).replace(h,"$1");if(p!==f){var g=c+";codecs="+(u||l);n.appendChangeType(e,g),a.logger.log("[buffer-controller]: switching codec "+p+" to "+f),n.tracks[e]={buffer:r.buffer,codec:l,container:c,levelCodec:u,metadata:d,id:o}}}}else n.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,i=this.operationQueue,r={execute:function(){var r=n.sourceBuffer[e];r&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};i.append(r,e)},t.onBufferAppending=function(e,t){var n=this,i=this.hls,l=this.operationQueue,u=this.tracks,c=t.data,d=t.type,h=t.frag,p=t.part,f=t.chunkMeta,g=f.buffering[d],v=self.performance.now();g.start=v;var m=h.stats.buffering,y=p?p.stats.buffering:null;0===m.start&&(m.start=v),y&&0===y.start&&(y.start=v);var b=u.audio,E=!1;"audio"===d&&"audio/mpeg"===(null==b?void 0:b.container)&&(E=!this.lastMpegAudioChunk||1===f.id||this.lastMpegAudioChunk.sn!==f.sn,this.lastMpegAudioChunk=f);var A=h.start,_={execute:function(){if(g.executeStart=self.performance.now(),E){var e=n.sourceBuffer[d];if(e){var t=A-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+A+" (delta: "+t+") sn: "+h.sn+")"),e.timestampOffset=A)}}n.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var e=self.performance.now();g.executeEnd=g.end=e,0===m.first&&(m.first=e),y&&0===y.first&&(y.first=e);var t=n.sourceBuffer,i={};for(var a in t)i[a]=o.BufferHelper.getBuffered(t[a]);n.appendError=0,n.hls.trigger(r.Events.BUFFER_APPENDED,{type:d,frag:h,part:p,chunkMeta:f,parent:h.type,timeRanges:i})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",e);var t={type:s.ErrorTypes.MEDIA_ERROR,parent:h.type,details:s.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=s.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,t.details=s.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>i.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,i.stopLoad())),i.trigger(r.Events.ERROR,t)}};l.append(_,d)},t.onBufferFlushing=function(e,t){var n=this,i=this.operationQueue,s=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(r.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(s(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){i.append(s(e),e)}))},t.onFragParsed=function(e,t){var n=this,i=t.frag,s=t.part,o=[],l=s?s.elementaryStreams:i.elementaryStreams;l[u.ElementaryStreamTypes.AUDIOVIDEO]?o.push("audiovideo"):(l[u.ElementaryStreamTypes.AUDIO]&&o.push("audio"),l[u.ElementaryStreamTypes.VIDEO]&&o.push("video")),0===o.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,s&&(s.stats.buffering.end=e);var t=s?s.stats:i.stats;n.hls.trigger(r.Events.FRAG_BUFFERED,{frag:i,part:s,stats:t,id:i.type})}),o)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this,i=this.getSourceBufferTypes().reduce((function(e,i){var r=n.sourceBuffer[i];return!r||t.type&&t.type!==i||(r.ending=!0,r.ended||(r.ended=!0,a.logger.log("[buffer-controller]: "+i+" sourceBuffer now EOS"))),e&&!(r&&!r.ended)}),!0);i&&(a.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){n.getSourceBufferTypes().forEach((function(e){var t=n.sourceBuffer[e];t&&(t.ending=!1)}));var e=n.mediaSource;e&&"open"===e.readyState?(a.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&a.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,s=this.sourceBuffer;if(n&&null!==t){var l=this.getSourceBufferTypes();if(l.length){var u=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if((0,i.isFiniteNumber)(u)&&!(u<0)){var c=n.currentTime,d=t.levelTargetDuration,h=Math.max(u,d),p=Math.floor(c/d)*d-h;l.forEach((function(n){var i=s[n];if(i){var l=o.BufferHelper.getBuffered(i);if(l.length>0&&p>l.start(0)){if(e.trigger(r.Events.BACK_BUFFER_REACHED,{bufferEnd:p}),t.live)e.trigger(r.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:p});else if(i.ended&&l.end(l.length-1)-c<2*d)return void a.logger.info("[buffer-controller]: Cannot flush "+n+" back buffer while SourceBuffer is in ended state");e.trigger(r.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:p,type:n})}}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,r=this.mediaSource,s=e.fragments[0].start+e.totalduration,o=n.duration,l=(0,i.isFiniteNumber)(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),r.duration=1/0,this.updateSeekableRange(e)):(s>l&&s>o||!(0,i.isFiniteNumber)(o))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+s.toFixed(3)),r.duration=s)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){var i=Math.max(0,n[0].start),r=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,r)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;if(i&&!e||2===i){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var o in e)if(!t[o]){var l=e[o];if(!l)throw Error("source buffer exists for track "+o+", however track does not");var u=l.levelCodec||l.codec,c=l.container+";codecs="+u;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[o]=n.addSourceBuffer(c),h=o;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[o]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,metadata:l.metadata,id:l.id},i++}catch(e){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}i&&this.hls.trigger(r.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var r=this.media,s=this.mediaSource,o=this.operationQueue,l=this.sourceBuffer[e];if(!r||!s||!l)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void o.shiftAndExecuteNext(e);var u=(0,i.isFiniteNumber)(r.duration)?r.duration:1/0,c=(0,i.isFiniteNumber)(s.duration)?s.duration:1/0,d=Math.max(0,t),h=Math.min(n,u,c);h>d&&!l.ending?(l.ended=!1,a.logger.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+e+" SourceBuffer"),console.assert(!l.updating,e+" sourceBuffer must not be updating"),l.remove(d,h)):o.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,i=this.sourceBuffer[t];if(!i)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);i.ended=!1,console.assert(!i.updating,t+" sourceBuffer must not be updating"),i.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue,r=t.map((function(e){return i.appendBlocker(e)}));Promise.all(r).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];t&&t.updating||i.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];if(i){var r=n.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
    !*** ./src/controller/buffer-operation-queue.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,r=t[e],a=n[e];if(a.length){var s=a[0];try{s.execute()}catch(t){i.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),s.onError(t),r&&r.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/cap-level-controller.ts ***!
    \************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(/*! ../events */"./src/events.ts");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var a=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,n,a,s=e.prototype;return s.setStreamController=function(e){this.streamController=e},s.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},s.registerListeners=function(){var e=this.hls;e.on(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.unregisterListener=function(){var e=this.hls;e.off(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},s.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},s.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(t){var n=this,i=this.hls.levels;if(!i.length)return-1;var r=i.filter((function(i,r){return e.isLevelAllowed(r,n.restrictedLevels)&&r<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var i,r,a=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=n)&&(i=o,!(r=e[s+1])||i.width!==r.width||i.height!==r.height)){a=s;break}}return a},t=e,(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();const s=a},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
    !*** ./src/controller/cmcd-controller.ts ***!
    \*******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../types/cmcd */"./src/types/cmcd.ts"),a=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}var h=function(){function e(t){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(e){try{n.apply(e,{ot:r.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(e){s.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=n.hls.levels[t.level],a=n.getObjectType(t),o={d:1e3*t.duration,ot:a};a!==r.CMCDObjectType.VIDEO&&a!==r.CMCDObjectType.AUDIO&&a!=r.CMCDObjectType.MUXED||(o.br=i.bitrate/1e3,o.tb=n.getTopBandwidth(a)/1e3,o.bl=n.getBufferLength(a)),n.apply(e,o)}catch(e){s.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=t;var i=this.config=t.config,a=i.cmcd;null!=a&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||e.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(i.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(i.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,i;this.audioBuffer=null===(n=t.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(i=t.tracks.video)||void 0===i?void 0:i.buffer},t.createData=function(){var e;return{v:r.CMCDVersion,sf:r.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,n){void 0===n&&(n={}),d(n,this.createData());var i=n.ot===r.CMCDObjectType.INIT||n.ot===r.CMCDObjectType.VIDEO||n.ot===r.CMCDObjectType.MUXED;if(this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var a=e.toHeaders(n);if(!Object.keys(a).length)return;t.headers||(t.headers={}),d(t.headers,a)}else{var s=e.toQuery(n);if(!s)return;t.url=e.appendQueryToUri(t.url,s)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?r.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?r.CMCDObjectType.INIT:"audio"===t?r.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?r.CMCDObjectType.VIDEO:r.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,i=this.hls;if(e===r.CMCDObjectType.AUDIO)t=i.audioTracks;else{var a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;t=i.levels.slice(0,s)}for(var o,l=u(t);!(o=l()).done;){var c=o.value;c.bitrate>n&&(n=c.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===r.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*a.BufferHelper.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},l(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},l(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,n=[],i=function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e},r=function(e){return Math.round(e)},a=function(e){return 100*r(e/100)},s={br:r,d:r,bl:a,dl:a,mtp:a,nor:function(e){return encodeURIComponent(e)},rtp:a,tb:r},o=u(Object.keys(e||{}).sort());!(t=o()).done;){var l=t.value,c=e[l];if(i(c)&&!("v"===l&&1===c||"pr"==l&&1===c)){var d=s[l];d&&(c=d(c));var h=typeof c,p=void 0;p="ot"===l||"sf"===l||"st"===l?l+"="+c:"boolean"===h?l:"number"===h?l+"="+c:l+"="+JSON.stringify(c),n.push(p)}}return n.join(",")},e.toHeaders=function(t){for(var n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(t);s<o.length;s++){var l=o[s];r[null!=a[l]?a[l]:1][l]=t[l]}for(var u=0;u<r.length;u++){var c=e.serialize(r[u]);c&&(n["CMCD-"+i[u]]=c)}return n},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var n=e.includes("?")?"&":"?";return""+e+n+t},e}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/eme-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),o=n(/*! ../utils/keysystem-util */"./src/utils/keysystem-util.ts"),l=n(/*! ../utils/numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts"),u=n(/*! ../loader/level-key */"./src/loader/level-key.ts"),c=n(/*! ../utils/hex */"./src/utils/hex.ts"),d=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),h=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),p=n.n(h);function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return g(e,arguments,y(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),m(i,e)},f(e)}function g(e,t,n){return g=v()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&m(r,n.prototype),r},g.apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b="[eme]",E=function(){function e(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=e.CDMCleanupPromise?[e.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=a.logger.debug.bind(a.logger,b),this.log=a.logger.log.bind(a.logger,b),this.warn=a.logger.warn.bind(a.logger,b),this.error=a.logger.error.bind(a.logger,b),this.hls=t,this.config=t.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},t.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.getLicenseServerUrl=function(e){var t=this.config,n=t.drmSystems,i=t.widevineLicenseUrl,r=n[e];if(r)return r.licenseUrl;if(e===s.KeySystems.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},t.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},t.attemptKeySystemAccess=function(e){var t=this,n=this.hls.levels,i=function(e,t,n){return!!e&&n.indexOf(e)===t},a=n.map((function(e){return e.audioCodec})).filter(i),s=n.map((function(e){return e.videoCodec})).filter(i);return a.length+s.length===0&&s.push("avc1.42e01e"),new Promise((function(n,i){!function e(o){var l=o.shift();t.getMediaKeysPromise(l,a,s).then((function(e){return n({keySystem:l,mediaKeys:e})})).catch((function(t){o.length?e(o):i(t instanceof A?t:new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))}(e)}))},t.requestMediaKeySystemAccess=function(e,t){var n=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof n){var i="Configured requestMediaKeySystemAccess is not a function "+n;return null===s.requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return n(e,t)},t.getMediaKeysPromise=function(e,t,n){var i=this,r=(0,s.getSupportedMediaKeySystemConfigurations)(e,t,n,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],o=null==a?void 0:a.keySystemAccess;if(!o){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(r)),o=this.requestMediaKeySystemAccess(e,r);var l=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch((function(t){i.log('Failed to obtain access to key-system "'+e+'": '+t)})),o.then((function(t){i.log('Access for key-system "'+t.keySystem+'" obtained');var n=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),l.mediaKeys=t.createMediaKeys().then((function(t){return i.log('Media-keys created for "'+e+'"'),n.then((function(n){return n?i.setMediaKeysServerCertificate(t,e,n):t}))})),l.mediaKeys.catch((function(t){i.error('Failed to create media-keys for "'+e+'"}: '+t)})),l.mediaKeys}))}return o.then((function(){return a.mediaKeys}))},t.createMediaKeySessionContext=function(e){var t=e.decryptdata,n=e.keySystem,i=e.mediaKeys;console.assert(!!i,"mediaKeys is defined"),this.log('Creating key-system session "'+n+'" keyId: '+c.default.hexDump(t.keyId||[]));var r=i.createSession(),a={decryptdata:t,keySystem:n,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},t.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},t.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return c.default.hexDump(e.keyId)},t.updateKeySession=function(e,t){var n,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+c.default.hexDump((null===(n=e.decryptdata)||void 0===n?void 0:n.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),i.update(t)},t.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},t.getKeyFormatPromise=function(e){var t=this;return new Promise((function(n,i){var r=(0,s.getKeySystemsForConfig)(t.config),a=e.map(s.keySystemFormatToKeySystemDomain).filter((function(e){return!!e&&-1!==r.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=e.keySystem,r=(0,s.keySystemDomainToKeySystemFormat)(t);r?n(r):i(new Error('Unable to find format for key-system "'+t+'"'))})).catch(i)}))},t.loadKey=function(e){var t=this,n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r="(keyId: "+i+' format: "'+n.keyFormat+'" method: '+n.method+" uri: "+n.uri+")";this.log("Starting session for key "+r);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then((function(i){var a=i.keySystem,s=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+r),t.attemptSetMediaKeys(a,s).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:n});return t.generateRequestWithPreferredKeySession(e,"cenc",n.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},t.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},t.handleError=function(e){this.hls&&(this.error(e.message),e instanceof A?this.hls.trigger(i.Events.ERROR,e.data):this.hls.trigger(i.Events.ERROR,{type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},t.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){var i=(0,s.keySystemFormatToKeySystemDomain)(e.keyFormat),r=i?[i]:(0,s.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(r)}return n},t.getKeySystemSelectionPromise=function(e){if(e.length||(e=(0,s.getKeySystemsForConfig)(this.config)),0===e.length)throw new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},t._onMediaEncrypted=function(e){var t=this,n=e.initDataType,i=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+n+'"'),null!==i){var r,a;if("sinf"===n&&this.config.drmSystems[s.KeySystems.FAIRPLAY]){var o=(0,d.bin2str)(new Uint8Array(i));try{var h=(0,l.base64Decode)(JSON.parse(o).sinf),p=(0,d.parseSinf)(new Uint8Array(h));if(!p)return;r=p.subarray(8,24),a=s.KeySystems.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var f=(0,d.parsePssh)(i);if(null===f)return;0===f.version&&f.systemId===s.KeySystemIds.WIDEVINE&&f.data&&(r=f.data.subarray(8,24)),a=(0,s.keySystemIdToKeySystemDomain)(f.systemId)}if(a&&r){for(var g=c.default.hexDump(r),v=this.keyIdToKeySessionPromise,m=this.mediaKeySessions,y=v[g],b=function(e){var a=m[e],s=a.decryptdata;if(s.pssh||!s.keyId)return"continue";var o=c.default.hexDump(s.keyId);return g===o||-1!==s.uri.replace(/-/g,"").indexOf(g)?(y=v[o],delete v[o],s.pssh=new Uint8Array(i),s.keyId=r,y=v[g]=y.then((function(){return t.generateRequestWithPreferredKeySession(a,n,i,"encrypted-event-key-match")})),"break"):void 0},E=0;E<m.length;E++){var A=b(E);if("continue"!==A&&"break"===A)break}y||(y=v[g]=this.getKeySystemSelectionPromise([a]).then((function(e){var a,o=e.keySystem,l=e.mediaKeys;t.throwIfDestroyed();var c=new u.LevelKey("ISO-23001-7",g,null!=(a=(0,s.keySystemDomainToKeySystemFormat)(o))?a:"");return c.pssh=new Uint8Array(i),c.keyId=r,t.attemptSetMediaKeys(o,l).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({decryptdata:c,keySystem:o,mediaKeys:l});return t.generateRequestWithPreferredKeySession(e,n,i,"encrypted-event-no-match")}))}))),y.catch((function(e){return t.handleError(e)}))}}},t._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},t.attemptSetMediaKeys=function(e,t){var n=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var r=Promise.all(i).then((function(){if(!n.media)throw new Error("Attempted to set mediaKeys without media element attached");return n.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((function(){n.log('Media-keys set for "'+e+'"'),i.push(r),n.setMediaKeysQueue=n.setMediaKeysQueue.filter((function(e){return-1===i.indexOf(e)}))}))},t.generateRequestWithPreferredKeySession=function(e,t,n,i){var a,l,u=this,c=null===(a=this.config.drmSystems)||void 0===a||null===(l=a[e.keySystem])||void 0===l?void 0:l.generateRequest;if(c)try{var d=c.call(this.hls,t,n,e);if(!d)throw new Error("Invalid response from configured generateRequest filter");t=d.initDataType,n=e.decryptdata.pssh=d.initData?new Uint8Array(d.initData):null}catch(e){var h;if(this.warn(e.message),null!==(h=this.hls)&&void 0!==h&&h.config.debug)throw e}if(null===n)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var f=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+f+" (init data type: "+t+" length: "+(n?n.byteLength:null)+")");var g=new(p());e.mediaKeysSession.onmessage=function(t){var n=e.mediaKeysSession;if(n){var i=t.messageType,r=t.message;u.log('"'+i+'" message event for session "'+n.sessionId+'" message size: '+r.byteLength),"license-request"===i||"license-renewal"===i?u.renewLicense(e,r).catch((function(e){u.handleError(e),g.emit("error",e)})):"license-release"===i?e.keySystem===s.KeySystems.FAIRPLAY&&(u.updateKeySession(e,(0,o.strToUtf8array)("acknowledged")),u.removeSession(e)):u.warn('unhandled media key message type "'+i+'"')}else g.emit("error",new Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(t){if(e.mediaKeysSession){u.onKeyStatusChange(e);var n=e.keyStatus;g.emit("keyStatus",n),"expired"===n&&(u.warn(e.keySystem+" expired for key "+f),u.renewKeySession(e))}else g.emit("error",new Error("invalid state"))};var v=new Promise((function(e,t){g.on("error",t),g.on("keyStatus",(function(n){n.startsWith("usable")?e():"output-restricted"===n?t(new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+n+'"')):"expired"===n?t(new Error("key expired while generating request")):u.warn('unhandled key status change "'+n+'"')}))}));return e.mediaKeysSession.generateRequest(t,n).then((function(){var t;u.log('Request generated for key-session "'+(null===(t=e.mediaKeysSession)||void 0===t?void 0:t.sessionId)+'" keyId: '+f)})).catch((function(e){throw new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return v})).catch((function(t){throw g.removeAllListeners(),u.removeSession(e),t})).then((function(){return g.removeAllListeners(),e}))},t.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(n,i){t.log('key status change "'+n+'" for keyStatuses keyId: '+c.default.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+c.default.hexDump(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=n}))},t.fetchServerCertificate=function(e){var t=this;return new Promise((function(n,i){var a=t.getServerCertificateUrl(e);if(!a)return n();t.log('Fetching serverCertificate for "'+e+'"');var s=new XMLHttpRequest;s.open("GET",a,!0),s.responseType="arraybuffer",s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?n(s.response):i(new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s},'"'+e+'" certificate request XHR failed ('+a+"). Status: "+s.status+" ("+s.statusText+")")))},s.send()}))},t.setMediaKeysServerCertificate=function(e,t,n){var i=this;return new Promise((function(a,s){e.setServerCertificate(n).then((function(r){i.log("setServerCertificate "+(r?"success":"not supported by CDM")+" ("+(null==n?void 0:n.byteLength)+') on "'+t+'"'),a(e)})).catch((function(e){s(new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))},t.renewLicense=function(e,t){var n=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return n.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},t.setupLicenseXHR=function(e,t,n,i){var r=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!n.decryptdata)throw new Error("Key removed");return a.call(r.hls,e,t,n,i)})).catch((function(s){if(!n.decryptdata)throw s;return e.open("POST",t,!0),a.call(r.hls,e,t,n,i)})).then((function(n){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},t.requestLicense=function(e,t){var n=this;return new Promise((function(i,a){var s=n.getLicenseServerUrl(e.keySystem);n.log("Sending license request to URL: "+s);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!n.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){n._requestLicenseFailureCount=0;var l=o.response;n.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=n.config.licenseResponseCallback;if(u)try{l=u.call(n.hls,o,s,e)}catch(e){n.error(e)}i(l)}else if(n._requestLicenseFailureCount++,n._requestLicenseFailureCount>3||o.status>=400&&o.status<500)a(new A({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")"));else{var c=3-n._requestLicenseFailureCount+1;n.warn("Retrying license request, "+c+" attempts left"),n.requestLicense(e,t).then(i,a)}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,n.setupLicenseXHR(o,s,e,t).then((function(e){var t=e.xhr,n=e.licenseChallenge;t.send(n)}))}))},t.onMediaAttached=function(e,t){if(this.config.emeEnabled){var n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}},t.onMediaDetached=function(){var t=this,n=this.media,i=this.mediaKeySessions;n&&(n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},u.LevelKey.clearKeyUriToKeyIdMap();var r=i.length;e.CDMCleanupPromise=Promise.all(i.map((function(e){return t.removeSession(e)})).concat(null==n?void 0:n.setMediaKeys(null).catch((function(e){t.log("Could not clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))})))).then((function(){r&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(e){t.log("Could not close sessions and clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))}))},t.onManifestLoaded=function(e,t){var n=t.sessionKeys;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){var i=n.reduce((function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},t.removeSession=function(e){var t=this,n=e.mediaKeysSession,i=e.licenseXhr;if(n){this.log("Remove licenses and keys and close session "+n.sessionId),n.onmessage=null,n.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),n.remove().catch((function(e){t.log("Could not remove session: "+e)})).then((function(){return n.close()})).catch((function(e){t.log("Could not close session: "+e)}))}},e}();E.CDMCleanupPromise=void 0;var A=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,n)||this).data=void 0,i.data=t,t.err=t.error,i}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),i}(f(Error));const _=E},"./src/controller/fps-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/fps-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var a=performance.now();if(t){if(this.lastTime){var s=a-this.lastTime,o=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*o/s,c=this.hls;if(c.trigger(i.Events.FPS_DROP,{currentDropped:o,currentDecoded:l,totalDroppedFrames:n}),u>0&&o>c.config.fpsDroppedMonitoringThreshold*l){var d=c.currentLevel;r.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(i.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();const s=a},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-finders.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{findFragWithCC:()=>u,findFragmentByPDT:()=>a,findFragmentByPTS:()=>s,fragmentWithinToleranceTest:()=>o,pdtWithinToleranceTest:()=>l});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/binary-search */"./src/utils/binary-search.ts");function a(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!(0,i.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var a=e[r];if(l(t,n,a))return a}return null}function s(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===o(n,i,a))return a;var s=r.default.search(t,o.bind(null,n,i));return!s||s===e&&a?a:s}function o(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n.start<=e&&n.start+n.duration>e)return 0;var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function l(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}function u(e,t){return r.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-tracker.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{FragmentState:()=>i,FragmentTracker:()=>s});var i,r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../types/loader */"./src/types/loader.ts");!function(e){e.NOT_LOADED="NOT_LOADED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(i||(i={}));var s=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},t.getAppendedFrag=function(e,t){if(t===a.PlaylistLevelType.MAIN){var n=this.activeFragment,i=this.activeParts;if(!n)return null;if(i)for(var r=i.length;r--;){var s=i[r],o=s?s.end:n.appendedPTS;if(s.start<=e&&void 0!==o&&e<=o)return r>9&&(this.activeParts=i.slice(r-9)),s}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){var s=a.body;if(s.start<=e&&e<=s.end)return s}}return null},t.detectEvictedFragments=function(e,t,n){var i=this;this.timeRanges&&(this.timeRanges[e]=t),Object.keys(this.fragments).forEach((function(r){var a=i.fragments[r];if(a)if(a.buffered||a.loaded){var s=a.range[e];s&&s.time.some((function(e){var n=!i.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&i.removeFragment(a.body),n}))}else a.body.type===n&&i.removeFragment(a.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,i=e.frag,r=e.part;if(n&&"initSegment"!==i.sn){var a=l(i),s=this.fragments[a];s&&(Object.keys(n).forEach((function(e){var a=i.elementaryStreams[e];if(a){var o=n[e],l=null!==r||!0===a.partial;s.range[e]=t.getBufferedTimes(i,r,l,o)}})),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,s.body.endList&&(this.endListFragments[s.body.type]=s)):this.removeFragment(s.body))}},t.fragBuffered=function(e){var t=l(e),n=this.fragments[t];n&&(n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=t?t.start:e.start,s=t?t.end:e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=c&&o<=d){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(a<d&&s>c)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=c)break}return r},t.getPartialFragment=function(e){var t,n,i,r=null,a=0,s=this.bufferPadding,l=this.fragments;return Object.keys(l).forEach((function(u){var c=l[u];c&&o(c)&&(n=c.body.start-s,i=c.body.end+s,e>=n&&e<=i&&(t=Math.min(e-n,i-e),a<=t&&(r=c.body,a=t)))})),r},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||o(t))},t.getState=function(e){var t=l(e),n=this.fragments[t];return n?n.buffered?o(n)?i.PARTIAL:i.OK:i.APPENDING:i.NOT_LOADED},t.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!i){var r=l(n);this.fragments[r]={body:n,loaded:t,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,i=t.frag,r=t.part,s=t.timeRanges;if(i.type===a.PlaylistLevelType.MAIN)if(this.activeFragment!==i&&(this.activeFragment=i,i.appendedPTS=void 0),r){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(r)}else this.activeParts=null;this.timeRanges=s,Object.keys(s).forEach((function(e){var t=s[e];if(n.detectEvictedFragments(e,t),!r&&i.type===a.PlaylistLevelType.MAIN){var o=i.elementaryStreams[e];if(!o)return;for(var l=0;l<t.length;l++){var u=t.end(l);u<=o.endPTS&&u>o.startPTS?i.appendedPTS=Math.max(u,i.appendedPTS||0):i.appendedPTS=o.endPTS}}}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=l(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(r){var a=i.fragments[r];if(a&&a.buffered){var s=a.body;s.type===n&&s.start<t&&s.end>e&&i.removeFragment(s)}}))},t.removeFragment=function(e){var t=l(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),e.appendedPTS=void 0,delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function o(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function l(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/gap-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{MAX_START_GAP_JUMP:()=>l,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>u,SKIP_BUFFER_RANGE_START:()=>c,STALL_MINIMUM_DURATION_MS:()=>o,default:()=>d});var i=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=250,l=2,u=.1,c=.05,d=function(){function e(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var n=this.config,r=this.media,a=this.stalled;if(null!==r){var u=r.currentTime,c=r.seeking,d=this.seeking&&!c,h=!this.seeking&&c;if(this.seeking=c,u===e){if((h||d)&&(this.stalled=null),!(r.paused&&!c||r.ended||0===r.playbackRate)&&i.BufferHelper.getBuffered(r).length){var p=i.BufferHelper.bufferInfo(r,u,0),f=p.len>0,g=p.nextStart||0;if(f||g){if(c){var v=p.len>l,m=!g||t&&t.start<=u||g-u>l&&!this.fragmentTracker.getPartialFragment(u);if(v||m)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var y,b=Math.max(g,p.start||0)-u,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,A=(null==E||null===(y=E.details)||void 0===y?void 0:y.live)?2*E.details.targetduration:l;if(b>0&&b<=A)return void this._trySkipBufferHole(null)}var _=self.performance.now();if(null!==a){var T=_-a;if(c||!(T>=o)||(this._reportStall(p),this.media)){var k=i.BufferHelper.bufferInfo(r,u,n.maxBufferHole);this._tryFixBufferStall(k,T)}}else this.stalled=_}}}else if(this.moved=!0,null!==a){if(this.stallReported){var S=self.performance.now()-a;s.logger.warn("playback not stuck anymore @"+u+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;if(null!==r){var a=r.currentTime,o=i.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(s.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,s.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},t._trySkipBufferHole=function(e){var t=this.config,n=this.hls,o=this.media;if(null===o)return 0;for(var l=o.currentTime,d=0,h=i.BufferHelper.getBuffered(o),p=0;p<h.length;p++){var f=h.start(p);if(l+t.maxBufferHole>=d&&l<f){var g=Math.max(f+c,o.currentTime+u);return s.logger.warn("skipping hole, adjusting currentTime from "+l+" to "+g),this.moved=!0,this.stalled=null,o.currentTime=g,e&&n.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+l+" to "+g,frag:e}),g}d=h.end(p)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=this.nudgeRetry;if(null!==n){var o=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var l=o+(i+1)*e.nudgeOffset;s.logger.warn("Nudging 'currentTime' from "+o+" to "+l),n.currentTime=l,t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.logger.error("Playhead still not moving while enough data buffered @"+o+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},e}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/id3-track-controller.ts ***!
    \************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),s=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=n(/*! ../loader/date-range */"./src/loader/date-range.ts"),l=n(/*! ../types/demuxer */"./src/types/demuxer.ts");function u(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var c=function(){var e=u();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function d(e,t){return e.getTime()/1e3-t}var h=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&((0,a.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return(0,a.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,i=n.enableEmsgMetadataCues,r=n.enableID3MetadataCues;if(i||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=u(),d=0;d<a.length;d++){var h=a[d].type;if((h!==l.MetadataSchema.emsg||i)&&r){var p=s.getID3Frames(a[d].data);if(p){var f=a[d].pts,g=f+a[d].duration;g>c&&(g=c),g-f<=0&&(g=f+.25);for(var v=0;v<p.length;v++){var m=p[v];if(!s.isTimeStampFrame(m)){this.updateId3CueEnds(f);var y=new o(f,g,"");y.value=m,h&&(y.type=h),this.id3Track.addCue(y)}}}}}}}},t.updateId3CueEnds=function(e){var t,n=null===(t=this.id3Track)||void 0===t?void 0:t.cues;if(n)for(var i=n.length;i--;){var r=n[i];r.startTime<e&&r.endTime===c&&(r.endTime=e)}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.type,s=this.id3Track,o=this.hls;if(o){var u,c=o.config,d=c.enableEmsgMetadataCues,h=c.enableID3MetadataCues;s&&(d||h)&&(u="audio"===r?function(e){return e.type===l.MetadataSchema.audioId3&&h}:"video"===r?function(e){return e.type===l.MetadataSchema.emsg&&d}:function(e){return e.type===l.MetadataSchema.audioId3&&h||e.type===l.MetadataSchema.emsg&&d},(0,a.removeCuesInRange)(s,n,i,u))}},t.onLevelUpdated=function(e,t){var n=this,r=t.details;if(this.media&&r.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var a=this.dateRangeCuesAppended,s=this.id3Track,h=r.dateRanges,p=Object.keys(h);if(s)for(var f=Object.keys(a).filter((function(e){return!p.includes(e)})),g=function(e){var t=f[e];Object.keys(a[t].cues).forEach((function(e){s.removeCue(a[t].cues[e])})),delete a[t]},v=f.length;v--;)g(v);var m=r.fragments[r.fragments.length-1];if(0!==p.length&&(0,i.isFiniteNumber)(null==m?void 0:m.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=m.programDateTime/1e3-m.start,b=u(),E=function(e){var t=p[e],i=h[t],r=a[t],s=(null==r?void 0:r.cues)||{},u=(null==r?void 0:r.durationKnown)||!1,f=d(i.startDate,y),g=c,v=i.endDate;if(v)g=d(v,y),u=!0;else if(i.endOnNext&&!u){var m=p.reduce((function(e,t){var n=h[t];return n.class===i.class&&n.id!==t&&n.startDate>i.startDate&&e.push(n),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0];m&&(g=d(m.startDate,y),u=!0)}for(var E,A=Object.keys(i.attr),_=0;_<A.length;_++){var T=A[_];if(T!==o.DateRangeAttribute.ID&&T!==o.DateRangeAttribute.CLASS&&T!==o.DateRangeAttribute.START_DATE&&T!==o.DateRangeAttribute.DURATION&&T!==o.DateRangeAttribute.END_DATE&&T!==o.DateRangeAttribute.END_ON_NEXT){var k=s[T];if(k)u&&!r.durationKnown&&(k.endTime=g);else{var S=i.attr[T];k=new b(f,g,""),T!==o.DateRangeAttribute.SCTE35_OUT&&T!==o.DateRangeAttribute.SCTE35_IN||(E=S,S=Uint8Array.from(E.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),k.value={key:T,data:S},k.type=l.MetadataSchema.dateRange,n.id3Track.addCue(k),s[T]=k}}}a[t]={cues:s,dateRange:i,durationKnown:u}},A=0;A<p.length;A++)E(A)}}},e}();const p=h},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
    !*** ./src/controller/latency-controller.ts ***!
    \**********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(/*! ../errors */"./src/errors.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var o=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,n,o,l=e.prototype;return l.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},l.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(r.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(r.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(r.Events.ERROR,this.onError)},l.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},l.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},l.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},l.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},l.onError=function(e,t){t.details===i.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},l.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var i=this.config,r=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(r&&1!==a){var s=this.targetLatency;if(null!==s){var o=n-s,l=o<Math.min(this.maxLatency,s+t.targetduration);if(t.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},l.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},l.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,i=e.targetduration,r=this.config,a=r.liveSyncDuration,s=r.liveSyncDurationCount,o=r.lowLatencyMode,l=this.hls.userConfig,u=o&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*i);var c=i;return u+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var i=n.edge,r=e-t-this.edgeStalled,a=i-n.totalduration,s=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,r),s)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
    !*** ./src/controller/level-controller.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(/*! ../types/level */"./src/types/level.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../utils/codecs */"./src/utils/codecs.ts"),o=n(/*! ./level-helper */"./src/controller/level-helper.ts"),l=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var p=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=function(e){var t,n;function l(t){var n;return(n=e.call(this,t,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var f,g,v,m=l.prototype;return m._registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(r.Events.ERROR,this.onError,this)},m._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(r.Events.ERROR,this.onError,this)},m.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},m.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},m.onManifestLoaded=function(e,t){var n,l,u=[],c=[],d=[],h={},f=!1,g=!1,v=!1;if(t.levels.forEach((function(e){var t=e.attrs;f=f||!(!e.width||!e.height),g=g||!!e.videoCodec,v=v||!!e.audioCodec,p&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(l=h[n])?l.url.push(e.url):(l=new i.Level(e),h[n]=l,u.push(l)),t&&(t.AUDIO&&(0,o.addGroupId)(l,"audio",t.AUDIO),t.SUBTITLES&&(0,o.addGroupId)(l,"text",t.SUBTITLES))})),(f||g)&&v&&(u=u.filter((function(e){var t=e.videoCodec,n=e.width,i=e.height;return!!t||!(!n||!i)}))),u=u.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||(0,s.isCodecSupportedInMp4)(t,"audio"))&&(!n||(0,s.isCodecSupportedInMp4)(n,"video"))})),t.audioTracks&&(c=t.audioTracks.filter((function(e){return!e.audioCodec||(0,s.isCodecSupportedInMp4)(e.audioCodec,"audio")})),(0,o.assignTrackIdsByGroup)(c)),t.subtitles&&(d=t.subtitles,(0,o.assignTrackIdsByGroup)(d)),u.length>0){n=u[0].bitrate,u.sort((function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):f&&e.height!==t.height?e.height-t.height:0})),this._levels=u;for(var m=0;m<u.length;m++)if(u[m].bitrate===n){this._firstLevel=m,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+n);break}var y=v&&!g,b={levels:u,audioTracks:c,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:v,video:g,altAudio:!y&&c.some((function(e){return!!e.url}))};this.hls.trigger(r.Events.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},m.onError=function(t,n){var r,s;if(e.prototype.onError.call(this,t,n),!n.fatal){var o=n.context,l=this._levels[this.currentLevelIndex];if(o&&(o.type===u.PlaylistContextType.AUDIO_TRACK&&l.audioGroupIds&&o.groupId===l.audioGroupIds[l.urlId]||o.type===u.PlaylistContextType.SUBTITLE_TRACK&&l.textGroupIds&&o.groupId===l.textGroupIds[l.urlId]))this.redundantFailover(this.currentLevelIndex);else{var c,d=!1,h=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var p=n.frag.type===u.PlaylistLevelType.MAIN?n.frag.level:this.currentLevelIndex,f=this._levels[p];f?(f.fragmentError++,f.fragmentError>this.hls.config.fragLoadingMaxRetry&&(c=p)):c=p}break;case a.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var g=l.attrs["HDCP-LEVEL"];g&&(this.hls.maxHdcpLevel=i.HdcpLevels[i.HdcpLevels.indexOf(g)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case a.ErrorDetails.FRAG_PARSING_ERROR:case a.ErrorDetails.KEY_SYSTEM_NO_SESSION:c=(null===(r=n.frag)||void 0===r?void 0:r.type)===u.PlaylistLevelType.MAIN?n.frag.level:this.currentLevelIndex,n.levelRetry=!1;break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:o&&(o.deliveryDirectives&&(h=!1),c=o.level),d=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:c=null!=(s=n.level)?s:this.currentLevelIndex,d=!0}void 0!==c&&this.recoverLevel(n,c,d,h)}}},m.recoverLevel=function(e,t,n,i){var r=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(i){var s=a.url.length;if(s>1&&a.loadError<s)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var o=-1,l=this._levels,u=l.length;u--;){var c=(u+this.currentLevelIndex)%l.length;if(c!==this.currentLevelIndex&&0===l[c].loadError){o=c;break}}o>-1&&this.currentLevelIndex!==o?(this.warn(r+": switch to "+o),e.levelRetry=!0,this.hls.nextAutoLevel=o):!1===e.levelRetry&&(e.fatal=!0)}}},m.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var i=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+i),this._levels.forEach((function(e){e.urlId=i})),this.level=e}},m.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===u.PlaylistLevelType.MAIN){var i=this._levels[n.level];void 0!==i&&(i.fragmentError=0,i.loadError=0)}},m.onLevelLoaded=function(e,t){var n,i,r=t.level,a=t.details,s=this._levels[r];if(!s)return this.warn("Invalid level index "+r),void(null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(r,t,s.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},m.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===r){i=a;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},m.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.currentLevelIndex,i=this._levels[n];if(this.canLoad&&i&&i.url.length>0){var a=i.urlId,s=i.url[a];if(t)try{s=t.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+n+(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+s),this.clearTimer(),this.hls.trigger(r.Events.LEVEL_LOADING,{url:s,level:n,id:a,deliveryDirectives:t||null})}},m.removeLevel=function(e,t){var n=function(e,n){return n!==t},i=this._levels.filter((function(i,r){return r!==e||i.url.length>1&&void 0!==t&&(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0)})).map((function(e,t){var n=e.details;return null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=i,this.hls.trigger(r.Events.LEVELS_UPDATED,{levels:i})},f=l,(g=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var i=e<0;if(this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,n.length-1)}this.clearTimer();var s=this.currentLevelIndex,o=n[s],l=n[e];this.log("switching to level "+e+" from "+s),this.currentLevelIndex=e;var u=c({},l,{level:e,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(r.Events.LEVEL_SWITCHING,u);var d=l.details;if(!d||d.live){var h=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&d(f.prototype,g),v&&d(f,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(l.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
    !*** ./src/controller/level-helper.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{addGroupId:()=>o,addSliding:()=>v,adjustSliding:()=>g,assignTrackIdsByGroup:()=>l,computeReloadInterval:()=>m,getFragmentWithSN:()=>y,getPartWith:()=>b,mapFragmentIntersection:()=>f,mapPartIntersection:()=>p,mergeDetails:()=>h,updateFragPTSDTS:()=>d,updatePTS:()=>u});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=n(/*! ../loader/date-range */"./src/loader/date-range.ts");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function o(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function l(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function u(e,t,n){c(e[t],e[n])}function c(e,t){var n=t.startPTS;if((0,i.isFiniteNumber)(n)){var r,a=0;t.sn>e.sn?(a=n-e.start,r=e):(a=e.start-n,r=t),r.duration!==a&&(r.duration=a)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function d(e,t,n,a,s,o){a-n<=0&&(r.logger.warn("Fragment should have a positive duration",t),a=n+t.duration,o=s+t.duration);var l=n,u=a,d=t.startPTS,h=t.endPTS;if((0,i.isFiniteNumber)(d)){var p=Math.abs(d-n);(0,i.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(p,t.deltaPTS):t.deltaPTS=p,l=Math.max(n,d),n=Math.min(n,d),s=Math.min(s,t.startDTS),u=Math.min(a,h),a=Math.max(a,h),o=Math.max(o,t.endDTS)}t.duration=a-n;var f=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=l,t.startDTS=s,t.endPTS=a,t.minEndPTS=u,t.endDTS=o;var g,v=t.sn;if(!e||v<e.startSN||v>e.endSN)return 0;var m=v-e.startSN,y=e.fragments;for(y[m]=t,g=m;g>0;g--)c(y[g],y[g-1]);for(g=m;g<y.length-1;g++)c(y[g],y[g+1]);return e.fragmentHint&&c(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,f}function h(e,t){for(var n=null,o=e.fragments,l=o.length-1;l>=0;l--){var u=o[l].initSegment;if(u){n=u;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var c,h,v,m,y,b=0;if(f(e,t,(function(e,r){e.relurl&&(b=e.cc-r.cc),(0,i.isFiniteNumber)(e.startPTS)&&(0,i.isFiniteNumber)(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.appendedPTS=e.appendedPTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(c=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,r.urlId=e.urlId,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)})),n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=n)||void 0===t?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){r.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var E=t.skippedSegments;E--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(h=e.dateRanges,v=t.dateRanges,m=t.recentlyRemovedDateranges,y=s({},h),m&&m.forEach((function(e){delete y[e]})),Object.keys(v).forEach((function(e){var t=new a.DateRange(v[e].attr,y[e]);t.isValid?y[e]=t:r.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(v[e].attr)+'"')})),y));var A=t.fragments;if(b){r.logger.warn("discontinuity sliding from playlist, take drift into account");for(var _=0;_<A.length;_++)A[_].cc+=b}t.skippedSegments&&(t.startCC=t.fragments[0].cc),p(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),c?d(t,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS):g(e,t),A.length&&(t.totalduration=t.edge-A[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var T=t.advancedDateTime;if(t.advanced&&T){var k=t.edge;t.driftStart||(t.driftStartTime=T,t.driftStart=k),t.driftEndTime=T,t.driftEnd=k}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function p(e,t,n){if(e&&t)for(var i=0,r=0,a=e.length;r<=a;r++){var s=e[r],o=t[r+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):i--}}function f(e,t,n){for(var i=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r;u<=a;u++){var c=l[s+u],d=o[u];i&&!d&&u<i&&(d=t.fragments[u]=c),c&&d&&n(c,d)}}function g(e,t){var n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||v(t,i[n].start)}function v(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function m(e,t){void 0===t&&(t=1/0);var n=1e3*e.targetduration;if(e.updated){var i=e.fragments;if(i.length&&4*n>t){var r=1e3*i[i.length-1].duration;r<n&&(n=r)}}else n/=2;return Math.round(n)}function y(e,t,n){if(!e||!e.details)return null;var i=e.details,r=i.fragments[t-i.startSN];return r||((r=i.fragmentHint)&&r.sn===t?r:t<i.startSN&&n&&n.sn===t?n:null)}function b(e,t,n){if(!e||!e.details)return null;var i=e.details.partList;if(i)for(var r=i.length;r--;){var a=i[r];if(a.index===n&&a.fragment.sn===t)return a}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/stream-controller.ts ***!
    \*********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../is-supported */"./src/is-supported.ts"),s=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),h=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),p=n(/*! ./gap-controller */"./src/controller/gap-controller.ts"),f=n(/*! ../errors */"./src/errors.ts");function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var m=function(e){var t,n;function m(t,n,i){var r;return(r=e.call(this,t,n,i,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.couldBacktrack=!1,r.backtrackFragment=null,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=e,(t=m).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n);var y,b,E,A=m.prototype;return A._registerListeners=function(){var e=this.hls;e.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(s.Events.ERROR,this.onError,this),e.on(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(s.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},A._unregisterListeners=function(){var e=this.hls;e.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(s.Events.ERROR,this.onError,this),e.off(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(s.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},A.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},A.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=r.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=r.State.STOPPED},A.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},A.doTick=function(){switch(this.state){case r.State.IDLE:this.doTickIdle();break;case r.State.WAITING_LEVEL:var e,t=this.levels,n=this.level,i=null==t||null===(e=t[n])||void 0===e?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=r.State.IDLE;break}break;case r.State.FRAG_LOADING_WAITING_RETRY:var a,s=self.performance.now(),o=this.retryDate;(!o||s>=o||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=r.State.IDLE)}this.onTickEnd()},A.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},A.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,n=this.levels,i=this.media,a=e.config,o=e.nextLoadLevel;if(null!==t&&(i||!this.startFragRequested&&a.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&n&&n[o]){var d=n[o],h=this.getMainFwdBufferInfo();if(null!==h){var p=this.getLevelDetails();if(p&&this._streamEnded(h,p)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(s.Events.BUFFER_EOS,f),void(this.state=r.State.ENDED)}this.level=e.nextLoadLevel=o;var g=d.details;if(!g||this.state===r.State.WAITING_LEVEL||g.live&&this.levelLastLoaded!==o)return this.level=o,void(this.state=r.State.WAITING_LEVEL);if(!(h.len>=this.getMaxBufferLength(d.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>h.end&&(this.backtrackFragment=null);var v=this.backtrackFragment?this.backtrackFragment.start:h.end,m=this.getNextFragment(v,g);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn&&this.fragmentTracker.getState(m)!==l.FragmentState.OK){var y,b=(null!=(y=this.backtrackFragment)?y:m).sn-g.startSN,E=g.fragments[b-1];E&&m.cc===E.cc&&(m=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&h.len&&(this.backtrackFragment=null);if(m&&this.fragmentTracker.getState(m)===l.FragmentState.OK&&this.nextLoadPosition>v){var A=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO,_=(A===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;_&&this.afterBufferFlushed(_,A,u.PlaylistLevelType.MAIN),m=this.getNextFragment(this.nextLoadPosition,g)}m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),this.loadFragment(m,g,v))}}}},A.loadFragment=function(t,n,i){var r,a=this.fragmentTracker.getState(t);this.fragCurrent=t,a===l.FragmentState.NOT_LOADED?"initSegment"===t.sn?this._loadInitSegment(t,n):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,n)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i)):a===l.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(r=this.media)||void 0===r?void 0:r.buffered.length)&&this.fragmentTracker.removeAllFragments()},A.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,u.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},A.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.PlaylistLevelType.MAIN)},A.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},A.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},A.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n,i=this.getAppendedFrag(t.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!t.paused&&e){var r=e[this.hls.nextLoadLevel],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*r.maxBitrate/(1e3*a)+1:0}else n=0;var s=this.getBufferedFrag(t.currentTime+n);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(s.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},A.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&e.abortRequests(),this.state){case r.State.KEY_LOADING:case r.State.FRAG_LOADING:case r.State.FRAG_LOADING_WAITING_RETRY:case r.State.PARSING:case r.State.PARSED:this.state=r.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},A.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},A.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new p.default(this.config,i,this.fragmentTracker,this.hls)},A.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},A.onMediaPlaying=function(){this.tick()},A.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;(0,i.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},A.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(s.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},A.onManifestParsed=function(e,t){var n,i=!1,r=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(i=!0),-1!==n.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=i&&r&&!(0,a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},A.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===r.State.IDLE){var i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=r.State.WAITING_LEVEL)}},A.onLevelLoaded=function(e,t){var n,i=this.levels,a=t.level,o=t.details,l=o.totalduration;if(i){this.log("Level "+a+" loaded ["+o.startSN+","+o.endSN+"], cc ["+o.startCC+", "+o.endCC+"] duration:"+l);var u=this.fragCurrent;!u||this.state!==r.State.FRAG_LOADING&&this.state!==r.State.FRAG_LOADING_WAITING_RETRY||u.level!==t.level&&u.loader&&(this.state=r.State.IDLE,this.backtrackFragment=null,u.abortRequests());var c=i[a],d=0;if(o.live||null!==(n=c.details)&&void 0!==n&&n.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details)}if(c.details=o,this.levelLastLoaded=a,this.hls.trigger(s.Events.LEVEL_UPDATED,{details:o,level:a}),this.state===r.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=r.State.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},A._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,r=e.payload,a=this.levels;if(a){var s=a[n.level],o=s.details;if(o){var l=s.videoCodec,c=o.PTSKnown||!o.live,p=null===(t=n.initSegment)||void 0===t?void 0:t.data,f=this._getAudioCodec(s),g=this.transmuxer=this.transmuxer||new d.default(this.hls,u.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,m=-1!==v,y=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,r.byteLength,v,m),b=this.initPTS[n.cc];g.push(r,p,f,l,n,i,o.totalduration,c,y,b)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},A.onAudioTrackSwitching=function(e,t){var n=this.altAudio,i=!!t.url,r=t.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;n&&o.trigger(s.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.Events.AUDIO_TRACK_SWITCHED,{id:r})}},A.onAudioTrackSwitched=function(e,t){var n=t.id,i=!!this.hls.audioTracks[n].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()},A.onBufferCreated=function(e,t){var n,i,r=t.tracks,a=!1;for(var s in r){var o=r[s];if("main"===o.id){if(i=s,n=o,"video"===s){var l=r[s];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},A.onFragBuffered=function(e,t){var n=t.frag,i=t.part;if(!n||n.type===u.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===r.State.PARSED&&(this.state=r.State.IDLE));var a=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}},A.onError=function(e,t){if(t.type!==f.ErrorTypes.KEY_SYSTEM_ERROR)switch(t.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.FRAG_PARSING_ERROR:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t);break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==r.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=r.State.ERROR):t.levelRetry||this.state!==r.State.WAITING_LEVEL||(this.state=r.State.IDLE));break;case f.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===r.State.PARSING||this.state===r.State.PARSED)){var n=!0,i=this.getFwdBufferInfo(this.media,u.PlaylistLevelType.MAIN);i&&i.len>.5&&(n=!this.reduceMaxBufferLength(i.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t)},A.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!o.BufferHelper.getBuffered(e).length){var n=this.state!==r.State.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}},A.onFragLoadEmergencyAborted=function(){this.state=r.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},A.onBufferFlushed=function(e,t){var n=t.type;if(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var i=(n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,u.PlaylistLevelType.MAIN)}},A.onLevelsUpdated=function(e,t){this.levels=t.levels},A.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},A.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to "+n+", already seeking at "+t);var i=o.BufferHelper.getBuffered(e),r=(i.length?i.start(0):0)-n;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+r+" to match buffer start"),n+=r,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}}},A._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},A._loadBitrateTestFrag=function(e,t){var n=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(t){var i=n.hls;if(t&&!n.fragContextChanged(e)){n.fragLoadError=0,n.state=r.State.IDLE,n.startFragRequested=!1,n.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(s.Events.FRAG_LOADED,t),e.bitrateTest=!1}}))},A._handleTransmuxComplete=function(e){var t,n="main",a=this.hls,o=e.remuxResult,l=e.chunkMeta,u=this.getCurrentContext(l);if(!u)return this.warn("The loading context changed while buffering fragment "+l.sn+" of level "+l.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(l.level);var d=u.frag,h=u.part,p=u.level,f=o.video,g=o.text,v=o.id3,m=o.initSegment,y=p.details,b=this.altAudio?void 0:o.audio;if(!this.fragContextChanged(d)){if(this.state=r.State.PARSING,m){m.tracks&&(this._bufferInitSegment(p,m.tracks,d,l),a.trigger(s.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:m.tracks}));var E=m.initPTS,A=m.timescale;(0,i.isFiniteNumber)(E)&&(this.initPTS[d.cc]=E,a.trigger(s.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:E,timescale:A}))}if(f&&!1!==o.independent){if(y){var _=f.startPTS,T=f.endPTS,k=f.startDTS,S=f.endDTS;if(h)h.elementaryStreams[f.type]={startPTS:_,endPTS:T,startDTS:k,endDTS:S};else if(f.firstKeyFrame&&f.independent&&1===l.id&&(this.couldBacktrack=!0),f.dropped&&f.independent){var w=this.getMainFwdBufferInfo();if((w?w.end:this.getLoadPosition())+this.config.maxBufferHole<(f.firstKeyFramePTS?f.firstKeyFramePTS:_)-this.config.maxBufferHole)return void this.backtrack(d);d.setElementaryStreamInfo(f.type,d.start,T,d.start,S,!0)}d.setElementaryStreamInfo(f.type,_,T,k,S),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(f,d,h,l)}}else if(!1===o.independent)return void this.backtrack(d);if(b){var C=b.startPTS,I=b.endPTS,D=b.startDTS,R=b.endDTS;h&&(h.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:C,endPTS:I,startDTS:D,endDTS:R}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,C,I,D,R),this.bufferFragmentData(b,d,h,l)}if(y&&null!=v&&null!==(t=v.samples)&&void 0!==t&&t.length){var L={id:n,frag:d,details:y,samples:v.samples};a.trigger(s.Events.FRAG_PARSING_METADATA,L)}if(y&&g){var P={id:n,frag:d,details:y,samples:g.samples};a.trigger(s.Events.FRAG_PARSING_USERDATA,P)}}},A._bufferInitSegment=function(e,t,n,i){var a=this;if(this.state===r.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var o=t.audio,l=t.video,u=t.audiovideo;if(o){var c=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==o.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==o.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),e.audioCodec&&e.audioCodec!==c&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+c+'"'),o.levelCodec=c,o.id="main",this.log("Init audio buffer, container:"+o.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(e.audioCodec||"")+"/"+o.codec+"]")}l&&(l.levelCodec=e.videoCodec,l.id="main",this.log("Init video buffer, container:"+l.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+l.codec+"]")),u&&this.log("Init audiovideo buffer, container:"+u.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+u.codec+"]"),this.hls.trigger(s.Events.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var r=t[e].initSegment;null!=r&&r.byteLength&&a.hls.trigger(s.Events.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tick()}},A.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,u.PlaylistLevelType.MAIN)},A.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=r.State.IDLE},A.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(o.BufferHelper.isBuffered(e,n)?t=this.getAppendedFrag(n):o.BufferHelper.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;var i=this.fragPlaying,r=t.level;i&&t.sn===i.sn&&i.level===r&&t.urlId===i.urlId||(this.fragPlaying=t,this.hls.trigger(s.Events.FRAG_CHANGED,{frag:t}),i&&i.level===r||this.hls.trigger(s.Events.LEVEL_SWITCHED,{level:r}))}}},y=m,(b=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,n=this.currentFrag;if(n&&(0,i.isFiniteNumber)(t)&&(0,i.isFiniteNumber)(n.programDateTime)){var r=n.programDateTime+1e3*(t-n.start);return new Date(r)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&g(y.prototype,b),E&&g(y,E),Object.defineProperty(y,"prototype",{writable:!1}),m}(r.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
    !*** ./src/controller/subtitle-stream-controller.ts ***!
    \******************************************************/(e,t,n)=>{n.r(t),n.d(t,{SubtitleStreamController:()=>f});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),a=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),s=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),o=n(/*! ./level-helper */"./src/controller/level-helper.ts"),l=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),c=n(/*! ../types/loader */"./src/types/loader.ts"),d=n(/*! ../types/level */"./src/types/level.ts");function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){var t,n;function f(t,n,i){var r;return(r=e.call(this,t,n,i,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=e,(t=f).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var v,m,y,b=f.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.ERROR,this.onError,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(i.Events.ERROR,this.onError,this),e.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(i.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(i.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.startLoad=function(e){this.stopLoad(),this.state=u.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},b.onLevelLoaded=function(e,t){this.mainDetails=t.details},b.onSubtitleFragProcessed=function(e,t){var n=t.frag,i=t.success;if(this.fragPrevious=n,this.state=u.State.IDLE,i){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var a,s=n.start,o=0;o<r.length;o++)if(s>=r[o].start&&s<=r[o].end){a=r[o];break}var l=n.start+n.duration;a?a.end=l:(a={start:s,end:l},r.push(a)),this.fragmentTracker.fragBuffered(n)}}},b.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset;if(0===n&&i!==Number.POSITIVE_INFINITY){var r=this.currentTrackId,a=this.levels;if(!a.length||!a[r]||!a[r].details)return;var s=i-a[r].details.targetduration;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=s)e.shift();else{if(!(e[t].start<s))break;e[t].start=s,t++}})),this.fragmentTracker.removeFragmentsInRange(n,s,c.PlaylistLevelType.SUBTITLE)}},b.onFragBuffered=function(e,t){var n;this.loadedmetadata||t.frag.type!==c.PlaylistLevelType.MAIN||null!==(n=this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},b.onError=function(e,t){var n=t.frag;n&&n.type===c.PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=u.State.IDLE)},b.onSubtitleTracksUpdated=function(e,t){var n=this,i=t.subtitleTracks;this.tracksBuffered=[],this.levels=i.map((function(e){return new d.Level(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},b.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}else this.clearInterval()},b.onSubtitleTrackLoaded=function(e,t){var n,i=t.details,r=t.id,l=this.currentTrackId,c=this.levels;if(c.length){var d=c[l];if(!(r>=c.length||r!==l)&&d){this.mediaBuffer=this.mediaBufferTimeRanges;var h=0;if(i.live||null!==(n=d.details)&&void 0!==n&&n.live){var p=this.mainDetails;if(i.deltaUpdateFailed||!p)return;var f=p.fragments[0];d.details?0===(h=this.alignPlaylists(i,d.details))&&f&&(h=f.start,(0,o.addSliding)(i,h)):i.hasProgramDateTime&&p.hasProgramDateTime?((0,s.alignMediaPlaylistByPDT)(i,p),h=i.fragments[0].start):f&&(h=f.start,(0,o.addSliding)(i,h))}d.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(d.details,h),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===u.State.IDLE&&((0,a.findFragmentByPTS)(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},b._handleFragmentLoadComplete=function(e){var t=this,n=e.frag,r=e.payload,a=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=performance.now();this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(e){var t=performance.now();s.trigger(i.Events.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:o,tdecrypt:t}})})).catch((function(e){t.warn(e.name+": "+e.message),t.state=u.State.IDLE}))}},b.doTick=function(){if(this.media){if(this.state===u.State.IDLE){var e=this.currentTrackId,t=this.levels;if(!t.length||!t[e]||!t[e].details)return;var n=t[e].details,i=n.targetduration,s=this.config,o=this.getLoadPosition(),d=r.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o-i,s.maxBufferHole),h=d.end,p=d.len,f=this.getFwdBufferInfo(this.media,c.PlaylistLevelType.MAIN);if(p>this.getMaxBufferLength(null==f?void 0:f.len)+i)return;console.assert(n,"Subtitle track details are defined on idle subtitle stream controller tick");var g=n.fragments,v=g.length,m=n.edge,y=null,b=this.fragPrevious;if(h<m){var E=s.maxFragLookUpTolerance;!(y=(0,a.findFragmentByPTS)(b,g,Math.max(g[0].start,h),E))&&b&&b.start<g[0].start&&(y=g[0])}else y=g[v-1];if(!y)return;y=this.mapToInitFragWhenRequired(y),this.fragmentTracker.getState(y)===l.FragmentState.NOT_LOADED&&this.loadFragment(y,n,h)}}else this.state=u.State.IDLE},b.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},b.loadFragment=function(t,n,i){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,n):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i))},v=f,(m=[{key:"mediaBufferTimeRanges",get:function(){return new g(this.tracksBuffered[this.currentTrackId]||[])}}])&&h(v.prototype,m),y&&h(v,y),Object.defineProperty(v,"prototype",{writable:!1}),f}(u.default),g=function(e){this.buffered=void 0;var t=function(t,n,i){if((n>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+i+")");return e[n][t]};this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}}},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
    !*** ./src/controller/subtitle-track-controller.ts ***!
    \*****************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),s=n(/*! ../types/loader */"./src/types/loader.ts");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n._subtitleDisplay=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var u,d,h,p=a.prototype;return p.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},p.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(i.Events.ERROR,this.onError,this)},p.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},p.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},p.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach((function(e){(0,r.clearCurrentCues)(e)})),this.subtitleTrack=-1,this.media=null)},p.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},p.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},p.onSubtitleTrackLoaded=function(e,t){var n=t.id,i=t.details,r=this.trackId,a=this.tracksInGroup[r];if(a){var s=a.details;a.details=t.details,this.log("subtitle track "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,s))}else this.warn("Invalid subtitle track id "+n)},p.onLevelLoading=function(e,t){this.switchLevel(t.level)},p.onLevelSwitching=function(e,t){this.switchLevel(t.level)},p.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!n||e.groupId===n}));this.tracksInGroup=a;var s=this.findTrackId(null==r?void 0:r.name)||this.findTrackId();this.groupId=n;var o={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(i.Events.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,r)}}},p.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},p.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},p.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(n)){var r=n.id,a=n.groupId,s=n.url;if(t)try{s=t.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADING,{url:s,id:r,groupId:a,deliveryDirectives:t||null})}},p.toggleTrackModes=function(e){var t=this,n=this.media,i=this.trackId;if(n){var r=c(n.textTracks),a=r.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(r).forEach((function(e){e.mode="disabled"}));else{var s=a[i];s&&(s.mode="disabled")}var o=a[e];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}},p.setSubtitleTrack=function(e,t){var n,r=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=r[e])&&void 0!==n&&n.details)||e<-1||e>=r.length)){this.clearTimer();var a=r[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var s=a.id,o=a.groupId,l=void 0===o?"":o,u=a.name,c=a.type,d=a.url;this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:s,groupId:l,name:u,type:c,url:d});var h=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(h)}else this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},p.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=c(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},u=a,(d=[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&o(u.prototype,d),h&&o(u,h),Object.defineProperty(u,"prototype",{writable:!1}),a}(a.default);function c(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}const d=u},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
    !*** ./src/controller/timeline-controller.ts ***!
    \***********************************************/(e,t,n)=>{n.r(t),n.d(t,{TimelineController:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.ts"),s=n(/*! ../utils/output-filter */"./src/utils/output-filter.ts"),o=n(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.ts"),l=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),u=n(/*! ../utils/imsc1-ttml-parser */"./src/utils/imsc1-ttml-parser.ts"),c=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),d=n(/*! ../types/loader */"./src/types/loader.ts"),h=n(/*! ../utils/logger */"./src/utils/logger.ts"),p=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new s.default(this,"textTrack1"),n=new s.default(this,"textTrack2"),i=new s.default(this,"textTrack3"),o=new s.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,n),this.cea608Parser2=new a.default(3,i,o)}e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.Events.FRAG_LOADING,this.onFragLoading,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(r.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(r.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(r.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.Events.FRAG_LOADING,this.onFragLoading,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(r.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(r.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(r.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,i,a){for(var s,o,l,u,c=!1,d=a.length;d--;){var h=a[d],p=(s=h[0],o=h[1],l=t,u=n,Math.min(o,u)-Math.max(s,l));if(p>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],n),c=!0,p/(n-t)>.5))return}if(c||a.push([t,n]),this.config.renderTextTracksNatively){var f=this.captionsTracks[e];this.Cues.newCue(f,t,n,i)}else{var g=this.Cues.newCue(null,t,n,i);this.hls.trigger(r.Events.CUES_PARSED,{type:"captions",cues:g,track:e})}},t.onInitPtsFound=function(e,t){var n=this,i=t.frag,a=t.id,s=t.initPTS,o=t.timescale,l=this.unparsedVttFrags;"main"===a&&(this.initPTS[i.cc]=s,this.timescale[i.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach((function(e){n.onFragLoaded(r.Events.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,r=t[e],a=r.label,s=r.languageCode,o=this.getExistingTrack(e);if(o)n[e]=o,(0,l.clearCurrentCues)(n[e]),(0,l.sendAddTrackEvent)(n[e],i);else{var u=this.createTextTrack("captions",a,s);u&&(u[e]=!0,n[e]=u)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(r.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){(0,l.clearCurrentCues)(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)(0,l.clearCurrentCues)(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var i=t.subtitleTracks||[],a=i.some((function(e){return e.textCodec===u.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var i;if(t<o.length){for(var r=null,a=0;a<o.length;a++)if(f(o[a],e)){r=o[a];break}r&&(i=r)}if(i)(0,l.clearCurrentCues)(i);else{var s=n._captionsOrSubtitlesFromCharacteristics(e);(i=n.createTextTrack(s,e.name,e.lang))&&(i.mode="disabled")}i&&(i.groupId=e.groupId,n.textTracks.push(i))}))}else if(!s&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(r.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},t._captionsOrSubtitlesFromCharacteristics=function(e){var t;if(null!==(t=e.attrs)&&void 0!==t&&t.CHARACTERISTICS){var n=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),i=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(n&&i)return"captions"}return"subtitles"},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],r=n.captionsProperties[i];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}}))},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2,r=this.lastSn,a=this.lastPartIndex;if(this.enabled&&n&&i&&t.frag.type===d.PlaylistLevelType.MAIN){var s,o,l=t.frag.sn,u=null!=(s=null==t||null===(o=t.part)||void 0===o?void 0:o.index)?s:-1;l===r+1||l===r&&u===a+1||(n.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var n=t.frag,a=t.payload,s=this.initPTS,o=this.unparsedVttFrags;if(n.type===d.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!(0,i.isFiniteNumber)(s[n.cc]))return o.push(t),void(s.length&&this.hls.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var l=n.decryptdata,c="stats"in t;if(null==l||!l.encrypted||c){var h=this.tracks[n.level],p=this.vttCCs;p[n.cc]||(p[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),h&&h.textCodec===u.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,p)}}else this.hls.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,i=this.hls;(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){h.logger.log("Failed to parse IMSC1: "+t),i.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,n){var i,a=this,s=this.hls,l=null!==(i=e.initSegment)&&void 0!==i&&i.data?(0,c.appendUint8Array)(e.initSegment.data,new Uint8Array(t)):t;(0,o.parseWebVTT)(l,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){a._appendCues(t,e.level),s.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){a._fallbackToIMSC1(e,t),h.logger.log("Failed to parse VTT cue: "+n),s.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},t._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){i.textCodec=u.IMSC1_CODEC,n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((function(e){return(0,l.addCueToTrack)(i,e)}))}else{var a=this.tracks[t];if(!a)return;var s=a.default?"default":"subtitles"+t;n.trigger(r.Events.CUES_PARSED,{type:"subtitles",cues:e,track:s})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===d.PlaylistLevelType.SUBTITLE){if(!(0,i.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(r.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&n&&i){var r=t.frag,a=t.samples;if(r.type!==d.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(var s=0;s<a.length;s++){var o=a[s].bytes;if(o){var l=this.extractCea608Data(o);n.addData(a[s].pts,l[0]),i.addData(a[s].pts,l[1])}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.endOffsetSubtitles,a=t.type,s=this.media;if(s&&!(s.currentTime<i)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(e){return(0,l.removeCuesInRange)(o[e],n,i)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==r){var u=this.textTracks;Object.keys(u).forEach((function(e){return(0,l.removeCuesInRange)(u[e],n,r)}))}}},t.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],s=127&e[i++],o=127&e[i++];if((0!==s||0!==o)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(t[l].push(s),t[l].push(o))}}return t},e}();function f(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
    !*** ./src/crypt/aes-crypto.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
    !*** ./src/crypt/aes-decryptor.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a,removePadding:()=>r});var i=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts");function r(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?(0,i.sliceUint8)(e,0,t-n):e}var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],s=n[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),p=0,f=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=f^f<<1^f<<2^f<<3^f<<4;v=v>>>8^255&v^99,e[p]=v,t[v]=p;var m=h[p],y=h[m],b=h[y],E=257*h[v]^16843008*v;i[p]=E<<24|E>>>8,r[p]=E<<16|E>>>16,a[p]=E<<8|E>>>24,s[p]=E,E=16843009*b^65537*y^257*m^16843008*p,l[v]=E<<24|E>>>8,u[v]=E<<16|E>>>16,c[v]=E<<8|E>>>24,d[v]=E,p?(p=m^h[h[h[b^m]]],f^=h[h[f]]):p=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,s,o,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,p=this.rcon,f=this.invSubMix,g=f[0],v=f[1],m=f[2],y=f[3];for(a=0;a<u;a++)a<r?o=c[a]=t[a]:(l=o,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[a/r|0]<<24):r>6&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=o=(c[a-r]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?c[a]:c[a-4],d[s]=s<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var i,r,a,s,o,l,u,c,d,h,p,f,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,A=E[0],_=E[1],T=E[2],k=E[3],S=this.uint8ArrayToUint32Array_(n),w=S[0],C=S[1],I=S[2],D=S[3],R=new Int32Array(e),L=new Int32Array(R.length),P=this.networkToHostOrderSwap;t<R.length;){for(d=P(R[t]),h=P(R[t+1]),p=P(R[t+2]),f=P(R[t+3]),o=d^y[0],l=f^y[1],u=p^y[2],c=h^y[3],g=4,v=1;v<m;v++)i=A[o>>>24]^_[l>>16&255]^T[u>>8&255]^k[255&c]^y[g],r=A[l>>>24]^_[u>>16&255]^T[c>>8&255]^k[255&o]^y[g+1],a=A[u>>>24]^_[c>>16&255]^T[o>>8&255]^k[255&l]^y[g+2],s=A[c>>>24]^_[o>>16&255]^T[l>>8&255]^k[255&u]^y[g+3],o=i,l=r,u=a,c=s,g+=4;i=b[o>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^y[g],r=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&o]^y[g+1],a=b[u>>>24]<<24^b[c>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^y[g+2],s=b[c>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[g+3],L[t]=P(i^w),L[t+1]=P(s^C),L[t+2]=P(a^I),L[t+3]=P(r^D),w=d,C=h,I=p,D=f,t+=4}return L.buffer},e}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
    !*** ./src/crypt/decrypter.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(/*! ./aes-crypto */"./src/crypt/aes-crypto.ts"),r=n(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.ts"),a=n(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),u=function(){function e(e,t){var n=(void 0===t?{}:t).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(0,a.removePadding)(n):n},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n){var i=this;return this.useSoftware?new Promise((function(r,a){i.softwareDecrypt(new Uint8Array(e),t,n);var s=i.flush();s?r(s.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)},t.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(e=(0,o.appendUint8Array)(s,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;i&&(n=i);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(t);var d=r;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=(0,l.sliceUint8)(u,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,n){var a=this,o=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new r.default(o,t)),this.fastAesKey.expandKey().then((function(t){return o?(a.logOnce("WebCrypto AES decrypt"),new i.default(o,new Uint8Array(n)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return s.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+i.name+": "+i.message),a.onWebCryptoError(e,t,n)}))},t.onWebCryptoError=function(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=(0,l.sliceUint8)(e,0,n),this.remainderData=(0,l.sliceUint8)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(s.logger.log("[decrypter]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
    !*** ./src/crypt/fast-aes-key.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/aacdemuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),r=n(/*! ./adts */"./src/demux/adts.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../demux/id3 */"./src/demux/id3.ts");function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}const l=function(e){var t,n;function i(t,n){var i;return(i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=n,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var l=i.prototype;return l.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(s.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},l.canParse=function(e,t){return r.canParse(e,t)},l.appendFrame=function(e,t,n){r.initTrackConfig(e,this.observer,t,n,e.manifestCodec);var i=r.appendFrame(e,t,n,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},i}(i.default)},"./src/demux/adts.ts":
/*!***************************!*\
    !*** ./src/demux/adts.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{appendFrame:()=>m,canGetFrameLength:()=>c,canParse:()=>h,getAudioConfig:()=>s,getFrameDuration:()=>g,getFullFrameLength:()=>u,getHeaderLength:()=>l,initTrackConfig:()=>f,isHeader:()=>d,isHeaderPattern:()=>o,parseFrameHeader:()=>v,probe:()=>p});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts");function s(e,t,n,s){var o,l,u,c,d=navigator.userAgent.toLowerCase(),h=s,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&t[n+2])>>>6);var f=(60&t[n+2])>>>2;if(!(f>p.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,i.logger.log("manifest codec:"+s+", ADTS type:"+o+", samplingIndex:"+f),/firefox/i.test(d)?f>=6?(o=5,c=new Array(4),l=f-3):(o=2,c=new Array(2),l=f):-1!==d.indexOf("android")?(o=2,c=new Array(2),l=f):(o=5,c=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&f>=6?l=f-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(f>=6&&1===u||/vivaldi/i.test(d))||!s&&1===u)&&(o=2,c=new Array(2)),l=f)),c[0]=o<<3,c[0]|=(14&f)>>1,c[1]|=(1&f)<<7,c[1]|=u<<3,5===o&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:p[f],channelCount:u,codec:"mp4a.40."+o,manifestCodec:h};e.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f})}function o(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return t+5<e.length}function d(e,t){return t+1<e.length&&o(e,t)}function h(e,t){return c(e,t)&&o(e,t)&&u(e,t)<=e.length-t}function p(e,t){if(d(e,t)){var n=l(e,t);if(t+n>=e.length)return!1;var i=u(e,t);if(i<=n)return!1;var r=t+i;return r===e.length||d(e,r)}return!1}function f(e,t,n,r,a){if(!e.samplerate){var o=s(t,n,r,a);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,i.logger.log("parsed codec:"+e.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function g(e){return 9216e4/e}function v(e,t){var n=l(e,t);if(t+n<=e.length){var i=u(e,t)-n;if(i>0)return{headerLength:n,frameLength:i}}}function m(e,t,n,i,r){var a,s=i+r*g(e.samplerate),o=v(t,n);if(o){var l=o.frameLength,u=o.headerLength,c=u+l,d=Math.max(0,n+c-t.length);d?(a=new Uint8Array(c-u)).set(t.subarray(n+u,t.length),0):a=t.subarray(n+u,n+c);var h={unit:a,pts:s};return d||e.samples.push(h),{sample:h,length:c,missing:d}}var p=t.length-n;return(a=new Uint8Array(p)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:s},length:p,missing:-1}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
    !*** ./src/demux/base-audio-demuxer.ts ***!
    \*****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d,initPTSFn:()=>c});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ../types/demuxer */"./src/types/demuxer.ts"),s=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),o=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),u=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=(0,o.appendUint8Array)(this.cachedData,e),this.cachedData=null);var n,u=r.getID3Data(e,0),d=u?u.length:0,h=this._audioTrack,p=this._id3Track,f=u?r.getTimeStamp(u):void 0,g=e.length;for((null===this.basePTS||0===this.frameIndex&&(0,i.isFiniteNumber)(f))&&(this.basePTS=c(f,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),u&&u.length>0&&p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});d<g;){if(this.canParse(e,d)){var v=this.appendFrame(h,e,d);v?(this.frameIndex++,this.lastPTS=v.sample.pts,n=d+=v.length):d=g}else r.canParse(e,d)?(u=r.getID3Data(e,d),p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),n=d+=u.length):d++;if(d===g&&n!==g){var m=(0,l.sliceUint8)(e,n);this.cachedData?this.cachedData=(0,o.appendUint8Array)(this.cachedData,m):this.cachedData=m}}return{audioTrack:h,videoTrack:(0,s.dummyTrack)(),id3Track:p,textTrack:(0,s.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:(0,s.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,s.dummyTrack)()}},t.destroy=function(){},e}(),c=function(e,t,n){return(0,i.isFiniteNumber)(e)?90*e:9e4*t+(n||0)};const d=u},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
    !*** ./src/demux/chunk-cache.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){var a=e[r];n.set(a,i),i+=a.length}return n}(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
    !*** ./src/demux/dummy-demuxed-track.ts ***!
    \******************************************/(e,t,n)=>{function i(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}n.r(t),n.d(t,{dummyTrack:()=>i})},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
    !*** ./src/demux/exp-golomb.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;if(e>32&&i.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,i=0,r=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);o();var g=o();if(l(5),d(3),o(),p(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=u();if(3===v&&d(1),p(),p(),d(1),c())for(t=3!==v?8:12,n=0;n<t;n++)c()&&f(n<6?16:64)}p();var m=u();if(0===m)u();else if(1===m)for(d(1),h(),h(),e=u(),n=0;n<e;n++)h();p(),d(1);var y=u(),b=u(),E=l(1);0===E&&d(1),d(1),c()&&(i=u(),r=u(),a=u(),s=u());var A=[1,1];if(c()&&c())switch(o()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*i-2*r),height:(2-E)*(b+1)*16-(E?2:4)*(a+s),pixelRatio:A}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();const a=r},"./src/demux/id3.ts":
/*!**************************!*\
    !*** ./src/demux/id3.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{canParse:()=>l,decodeFrame:()=>p,getID3Data:()=>s,getID3Frames:()=>h,getTimeStamp:()=>u,isFooter:()=>a,isHeader:()=>r,isTimeStampFrame:()=>c,testables:()=>b,utf8ArrayToStr:()=>y});var i,r=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s=function(e,t){for(var n=t,i=0;r(e,t);)i+=10,i+=o(e,t+6),a(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(n,n+i)},o=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},l=function(e,t){return r(e,t)&&o(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),n=0;n<t.length;n++){var i=t[n];if(c(i))return m(i)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=o(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},h=function(e){for(var t=0,n=[];r(e,t);){for(var i=o(e,t+6),s=(t+=10)+i;t+8<s;){var l=d(e.subarray(t)),u=p(l);u&&n.push(u),t+=l.size+10}a(e,t)&&(t+=10)}return n},p=function(e){return"PRIV"===e.type?f(e):"W"===e.type[0]?v(e):g(e)},f=function(e){if(!(e.size<2)){var t=y(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},g=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=y(e.data.subarray(1));return{key:e.type,data:r}}},v=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=y(e.data);return{key:e.type,data:r}},m=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},y=function(e,t){void 0===t&&(t=!1);var n=E();if(n){var i=n.decode(e);if(t){var r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var a,s,o,l=e.length,u="",c=0;c<l;){if(0===(a=e[c++])&&t)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:s=e[c++],u+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[c++],o=e[c++],u+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return u},b={decodeTextFrame:g};function E(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp3demuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),r=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts");function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}var l=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var l=i.prototype;return l.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(r.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(s.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},l.canParse=function(e,t){return s.canParse(e,t)},l.appendFrame=function(e,t,n){if(null!==this.basePTS)return s.appendFrame(e,t,n,this.basePTS,this.frameIndex)},i}(i.default);const u=l},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../types/demuxer */"./src/types/demuxer.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),s=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),o=/\/emsg[-/]ID3/i;const l=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,n,i){var r=this.videoTrack=(0,s.dummyTrack)("video",1),o=this.audioTrack=(0,s.dummyTrack)("audio",1),l=this.txtTrack=(0,s.dummyTrack)("text",1);if(this.id3Track=(0,s.dummyTrack)("id3",1),this.timeOffset=0,e&&e.byteLength){var u=(0,a.parseInitSegment)(e);if(u.video){var c=u.video,d=c.id,h=c.timescale,p=c.codec;r.id=d,r.timescale=l.timescale=h,r.codec=p}if(u.audio){var f=u.audio,g=f.id,v=f.timescale,m=f.codec;o.id=g,o.timescale=v,o.codec=m}l.id=a.RemuxerTrackIdConfig.text,r.sampleDuration=0,r.duration=o.duration=i}},t.resetContiguity=function(){},e.probe=function(e){return e=e.length>16384?e.subarray(0,16384):e,(0,a.findBox)(e,["moof"]).length>0},t.demux=function(e,t){this.timeOffset=t;var n=e,i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=(0,a.appendUint8Array)(this.remainderData,e));var s=(0,a.segmentValidRange)(n);this.remainderData=s.remainder,i.samples=s.valid||new Uint8Array}else i.samples=n;var o=this.extractID3Track(i,t);return r.samples=(0,a.parseSamples)(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return n.samples=(0,a.parseSamples)(e,t),{videoTrack:t,audioTrack:(0,s.dummyTrack)(),id3Track:i,textTrack:(0,s.dummyTrack)()}},t.extractID3Track=function(e,t){var n=this.id3Track;if(e.samples.length){var s=(0,a.findBox)(e.samples,["emsg"]);s&&s.forEach((function(e){var s=(0,a.parseEmsg)(e);if(o.test(s.schemeIdUri)){var l=(0,i.isFiniteNumber)(s.presentationTime)?s.presentationTime/s.timeScale:t+s.presentationTimeDelta/s.timeScale,u=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);var c=s.payload;n.samples.push({data:c,len:c.byteLength,dts:l,pts:l,type:r.MetadataSchema.emsg,duration:u})}}))}return n},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}()},"./src/demux/mpegaudio.ts":
/*!********************************!*\
    !*** ./src/demux/mpegaudio.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{appendFrame:()=>l,canParse:()=>h,isHeader:()=>d,isHeaderPattern:()=>c,parseHeader:()=>u,probe:()=>p});var i=null,r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],o=[0,1,1,4];function l(e,t,n,i,r){if(!(n+24>t.length)){var a=u(t,n);if(a&&n+a.frameLength<=t.length){var s=i+r*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function u(e,t){var n=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!==n&&0!==u&&15!==u&&3!==c){var d=e[t+2]>>1&1,h=e[t+3]>>6,p=1e3*r[14*(3===n?3-l:3===l?3:4)+u-1],f=a[3*(3===n?0:2===n?1:2)+c],g=3===h?1:2,v=s[n][l],m=o[l],y=8*v*m,b=Math.floor(v*p/f+d)*m;if(null===i){var E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);i=E?parseInt(E[1]):0}return!!i&&i<=87&&2===l&&p>=224e3&&0===h&&(e[t+3]=128|e[t+3]),{sampleRate:f,channelCount:g,frameLength:b,samplesPerFrame:y}}}function c(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function d(e,t){return t+1<e.length&&c(e,t)}function h(e,t){return c(e,t)&&4<=e.length-t}function p(e,t){if(t+1<e.length&&c(e,t)){var n=u(e,t),i=4;null!=n&&n.frameLength&&(i=n.frameLength);var r=t+i;return r===e.length||d(e,r)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
    !*** ./src/demux/sample-aes.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),r=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts");const a=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new i.default(t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},t.decryptAacSample=function(e,t,n){var i=this,r=e[t].unit;if(!(r.length<=16)){var a=r.subarray(16,r.length-r.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then((function(a){var s=new Uint8Array(a);r.set(s,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,n)}))}},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},t.decryptAvcSample=function(e,t,n,i,a){var s=this,o=(0,r.discardEPB)(a.data),l=this.getAvcEncryptedData(o);this.decryptBuffer(l.buffer).then((function(r){a.data=s.getAvcDecryptedUnit(o,r),s.decrypter.isSync()||s.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,i,a),this.decrypter.isSync())))return}}},e}()},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
    !*** ./src/demux/transmuxer-interface.ts ***!
    \*******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ./webworkify-webpack */"./src/demux/webworkify-webpack.js"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),c=(0,l.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function e(e,t,n,l){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var h=e.config;this.hls=e,this.id=t,this.useWorker=!!h.enableWorker,this.onTransmuxComplete=n,this.onFlush=l;var p=function(e,t){(t=t||{}).frag=d.frag,t.id=d.id,d.hls.trigger(e,t)};this.observer=new u.EventEmitter,this.observer.on(r.Events.FRAG_DECRYPTED,p),this.observer.on(r.Events.ERROR,p);var f={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){var v;s.logger.log("demuxing in webworker");try{v=this.worker=(0,i.default)(/*! ../demux/transmuxer-worker.ts */"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){d.useWorker=!1,s.logger.warn("Exception in webworker, fallback to inline"),d.hls.trigger(r.Events.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},v.postMessage({cmd:"init",typeSupported:f,vendor:g,id:t,config:JSON.stringify(h)})}catch(e){s.logger.warn("Error in worker:",e),s.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new a.default(this.observer,f,h,g,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,f,h,g,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,n,i,r,o,l,u,c,d){var h,p,f=this;c.transmuxing.start=self.performance.now();var g=this.transmuxer,v=this.worker,m=o?o.start:r.start,y=r.decryptdata,b=this.frag,E=!(b&&r.cc===b.cc),A=!(b&&c.level===b.level),_=b?c.sn-b.sn:-1,T=this.part?c.part-this.part.index:-1,k=0===_&&c.id>1&&c.id===(null==b?void 0:b.stats.chunkCount),S=!A&&(1===_||0===_&&(1===T||k&&T<=0)),w=self.performance.now();(A||_||0===r.stats.parsing.start)&&(r.stats.parsing.start=w),!o||!T&&S||(o.stats.parsing.start=w);var C=!(b&&(null===(h=r.initSegment)||void 0===h?void 0:h.url)===(null===(p=b.initSegment)||void 0===p?void 0:p.url)),I=new a.TransmuxState(E,S,u,A,m,C);if(!S||E||C){s.logger.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+E+"\n        trackSwitch: "+A+"\n        contiguous: "+S+"\n        accurateTimeOffset: "+u+"\n        timeOffset: "+m+"\n        initSegmentChange: "+C);var D=new a.TransmuxConfig(n,i,t,l,d);this.configureTransmuxer(D)}if(this.frag=r,this.part=o,v)v.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:I},e instanceof ArrayBuffer?[e]:[]);else if(g){var R=g.push(e,y,c,I);(0,a.isPromise)(R)?(g.async=!0,R.then((function(e){f.handleTransmuxComplete(e)})).catch((function(e){f.transmuxerError(e,c,"transmuxer-interface push error")}))):(g.async=!1,this.handleTransmuxComplete(R))}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:e});else if(n){var r=n.flush(e);(0,a.isPromise)(r)||n.async?((0,a.isPromise)(r)||(r=Promise.resolve(r)),r.then((function(n){t.handleFlushResult(n,e)})).catch((function(n){t.transmuxerError(n,e,"transmuxer-interface flush error")}))):this.handleFlushResult(r,e)}},t.transmuxerError=function(e,t,n){this.hls&&this.hls.trigger(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n})},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":s.logger[t.data.logType]&&s.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
    !*** ./src/demux/transmuxer-worker.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),o=n(/*! ../errors */"./src/errors.ts");function l(e){var t=new s.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(r.Events.FRAG_DECRYPTED,n),t.on(r.Events.ERROR,n),e.addEventListener("message",(function(s){var l=s.data;switch(l.cmd){case"init":var c=JSON.parse(l.config);e.transmuxer=new i.default(t,l.typeSupported,c,l.vendor,l.id),(0,a.enableLogs)(c.debug,l.id),function(){var e=function(e){a.logger[e]=function(t){n("workerLog",{logType:e,message:t})}};for(var t in a.logger)e(t)}(),n("init",null);break;case"configure":e.transmuxer.configure(l.config);break;case"demux":var h=e.transmuxer.push(l.data,l.decryptdata,l.chunkMeta,l.state);(0,i.isPromise)(h)?(e.transmuxer.async=!0,h.then((function(t){u(e,t)})).catch((function(e){n(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})}))):(e.transmuxer.async=!1,u(e,h));break;case"flush":var p=l.chunkMeta,f=e.transmuxer.flush(p);(0,i.isPromise)(f)||e.transmuxer.async?((0,i.isPromise)(f)||(f=Promise.resolve(f)),f.then((function(t){d(e,t,p)})).catch((function(e){n(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})}))):d(e,f,p)}}))}function u(e,t){if(!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment))return!1;var n,i=[],r=t.remuxResult,a=r.audio,s=r.video;return a&&c(i,a),s&&c(i,s),e.postMessage({event:"transmuxComplete",data:t},i),!0}function c(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function d(e,t,n){t.reduce((function(t,n){return u(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/transmuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{TransmuxConfig:()=>y,TransmuxState:()=>b,default:()=>g,isPromise:()=>m});var i,r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),o=n(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.ts"),l=n(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.ts"),u=n(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.ts"),c=n(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.ts"),d=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),h=n(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.ts"),p=n(/*! ../utils/logger */"./src/utils/logger.ts");try{i=self.performance.now.bind(self.performance)}catch(e){p.logger.debug("Unable to use Performance API on this environment"),i=self.Date.now}var f=[{demux:l.default,remux:h.default},{demux:u.default,remux:d.default},{demux:o.default,remux:d.default},{demux:c.default,remux:d.default}],g=function(){function e(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,r){var a=this,s=n.transmuxing;s.executeStart=i();var o=new Uint8Array(e),l=this.currentTransmuxState,u=this.transmuxConfig;r&&(this.currentTransmuxState=r);var c=r||l,d=c.contiguous,h=c.discontinuity,p=c.trackSwitch,f=c.accurateTimeOffset,g=c.timeOffset,m=c.initSegmentChange,y=u.audioCodec,b=u.videoCodec,E=u.defaultInitPts,A=u.duration,_=u.initSegmentData,T=function(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}(o,t);if(T&&"AES-128"===T.method){var k=this.getDecrypter();if(!k.isSync())return this.decryptionPromise=k.webCryptoDecrypt(o,T.key.buffer,T.iv.buffer).then((function(e){var t=a.push(e,null,n);return a.decryptionPromise=null,t})),this.decryptionPromise;var S=k.softwareDecrypt(o,T.key.buffer,T.iv.buffer);if(n.part>-1&&(S=k.flush()),!S)return s.executeEnd=i(),v(n);o=new Uint8Array(S)}var w=this.needsProbing(h,p);w&&this.configureTransmuxer(o),(h||p||m||w)&&this.resetInitSegment(_,y,b,A,t),(h||m||w)&&this.resetInitialTimestamp(E),d||this.resetContiguity();var C=this.transmux(o,T,g,f,n),I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,s.executeEnd=i(),C},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=i();var s=this.decrypter,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return t.flush(e)}));var u=[],c=o.timeOffset;if(s){var d=s.flush();d&&u.push(this.push(d,null,e))}var h=this.demuxer,p=this.remuxer;if(!h||!p)return this.observer.emit(r.Events.ERROR,r.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=i(),[v(e)];var f=h.flush(c);return m(f)?f.then((function(n){return t.flushRemux(u,n,e),u})):(this.flushRemux(u,f,e),u)},t.flushRemux=function(e,t,n){var r=t.audioTrack,a=t.videoTrack,s=t.id3Track,o=t.textTrack,l=this.currentTransmuxState,u=l.accurateTimeOffset,c=l.timeOffset;p.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(r,a,s,o,c,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=i()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,i,r){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(e,t,n,i),s.resetInitSegment(e,t,n,r))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},t.transmuxUnencrypted=function(e,t,n,i){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,s=r.videoTrack,o=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,s,o,l,t,n,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}}))},t.configureTransmuxer=function(e){for(var t,n=this.config,i=this.observer,r=this.typeSupported,a=this.vendor,s=0,o=f.length;s<o;s++)if(f[s].demux.probe(e)){t=f[s];break}t||(p.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),t={demux:l.default,remux:h.default});var u=this.demuxer,c=this.remuxer,d=t.remux,g=t.demux;c&&c instanceof d||(this.remuxer=new d(i,n,r,a)),u&&u instanceof g||(this.demuxer=new g(i,n,r),this.probe=g.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new s.default(this.config)),e},e}(),v=function(e){return{remuxResult:{},chunkMeta:e}};function m(e){return"then"in e&&e.then instanceof Function}var y=function(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r},b=function(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
    !*** ./src/demux/tsdemuxer.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(/*! ./adts */"./src/demux/adts.ts"),r=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts"),a=n(/*! ./exp-golomb */"./src/demux/exp-golomb.ts"),s=n(/*! ./sample-aes */"./src/demux/sample-aes.ts"),o=n(/*! ../events */"./src/events.ts"),l=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),u=n(/*! ../utils/logger */"./src/utils/logger.ts"),c=n(/*! ../errors */"./src/errors.ts"),d=n(/*! ../types/demuxer */"./src/types/demuxer.ts");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}var p=188,f=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return n>0&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n),-1!==n},e.syncOffset=function(e){for(var t=e.length,n=Math.min(940,e.length-p)+1,i=0;i<n;){for(var r=!1,a=i;a<t&&71===e[a];a+=p)if(r||0!==v(e,a)||(r=!0),r&&a+p>n)return i;i++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:l.RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},t.demux=function(t,n,i,r){var a;void 0===i&&(i=!1),void 0===r&&(r=!1),i||(this.sampleAes=null);var s=this._avcTrack,d=this._audioTrack,h=this._id3Track,f=this._txtTrack,g=s.pid,E=s.pesData,A=d.pid,_=h.pid,T=d.pesData,k=h.pesData,S=null,w=this.pmtParsed,C=this._pmtId,I=t.length;if(this.remainderData&&(I=(t=(0,l.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),I<p&&!r)return this.remainderData=t,{audioTrack:d,videoTrack:s,id3Track:h,textTrack:f};var D=Math.max(0,e.syncOffset(t));(I-=(I-D)%p)<t.byteLength&&!r&&(this.remainderData=new Uint8Array(t.buffer,I,t.buffer.byteLength-I));for(var R=0,L=D;L<I;L+=p)if(71===t[L]){var P=!!(64&t[L+1]),O=v(t,L),x=void 0;if((48&t[L+3])>>4>1){if((x=L+5+t[L+4])===L+p)continue}else x=L+4;switch(O){case g:P&&(E&&(a=b(E))&&this.parseAVCPES(s,f,a,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(x,L+p)),E.size+=L+p-x);break;case A:if(P){if(T&&(a=b(T)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,a);break;case"mp3":this.parseMPEGPES(d,a)}T={data:[],size:0}}T&&(T.data.push(t.subarray(x,L+p)),T.size+=L+p-x);break;case _:P&&(k&&(a=b(k))&&this.parseID3PES(h,a),k={data:[],size:0}),k&&(k.data.push(t.subarray(x,L+p)),k.size+=L+p-x);break;case 0:P&&(x+=t[x]+1),C=this._pmtId=m(t,x);break;case C:P&&(x+=t[x]+1);var M=y(t,x,this.typeSupported,i);(g=M.avc)>0&&(s.pid=g),(A=M.audio)>0&&(d.pid=A,d.segmentCodec=M.segmentCodec),(_=M.id3)>0&&(h.pid=_),null===S||w||(u.logger.warn("MPEG-TS PMT found at "+L+" after unknown PID '"+S+"'. Backtracking to sync byte @"+D+" to parse all TS packets."),S=null,L=D-188),w=this.pmtParsed=!0;break;case 17:case 8191:break;default:S=O}}else R++;R>0&&this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+R+" TS packet/s that do not start with 0x47"}),s.pesData=E,d.pesData=T,h.pesData=k;var N={audioTrack:d,videoTrack:s,id3Track:h,textTrack:f};return r&&this.extractRemainingSamples(N),N},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,a=e.textTrack,s=i.pesData,o=n.pesData,l=r.pesData;if(s&&(t=b(s))?(this.parseAVCPES(i,a,t,!0),i.pesData=null):i.pesData=s,o&&(t=b(o))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t)}n.pesData=null}else null!=o&&o.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;l&&(t=b(l))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=l},t.demuxSampleAes=function(e,t,n){var i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new s.default(this.observer,this.config,t);return this.decrypt(i,r)},t.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,r=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._duration=0},t.parseAVCPES=function(e,t,n,i){var r,s=this,o=this.parseAVCNALu(e,n.data),u=this.avcSample,c=!1;n.data=null,u&&o.length&&!e.audFound&&(E(u,e),u=this.avcSample=g(!1,n.pts,n.dts,"")),o.forEach((function(i){switch(i.type){case 1:r=!0,u||(u=s.avcSample=g(!0,n.pts,n.dts,"")),u.frame=!0;var o=i.data;if(c&&o.length>4){var d=new a.default(o).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:r=!0,u||(u=s.avcSample=g(!0,n.pts,n.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(0,l.parseSEIMessageFromNALu)(i.data,1,n.pts,t.samples);break;case 7:if(r=!0,c=!0,!e.sps){var h=new a.default(i.data).readSPS();e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.sps=[i.data],e.duration=s._duration;for(var p=i.data.subarray(1,4),f="avc1.",v=0;v<3;v++){var m=p[v].toString(16);m.length<2&&(m="0"+m),f+=m}e.codec=f}break;case 8:r=!0,e.pps||(e.pps=[i.data]);break;case 9:r=!1,e.audFound=!0,u&&E(u,e),u=s.avcSample=g(!1,n.pts,n.dts,"");break;case 12:r=!0;break;default:r=!1,u&&(u.debug+="unknown NAL "+i.type+" ")}u&&r&&u.units.push(i)})),i&&u&&(E(u,e),this.avcSample=null)},t.getLastNalUnit=function(e){var t,n,i=this.avcSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!==(t=i)&&void 0!==t&&t.units){var r=i.units;n=r[r.length-1]}return n},t.parseAVCNALu=function(e,t){var n,i,r=t.byteLength,a=e.naluState||0,s=a,o=[],l=0,u=-1,c=0;for(-1===a&&(u=0,c=31&t[0],a=0,l=1);l<r;)if(n=t[l++],a)if(1!==a)if(n)if(1===n){if(u>=0){var d={data:t.subarray(u,l-a-1),type:c};o.push(d)}else{var h=this.getLastNalUnit(e.samples);if(h&&(s&&l<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(i=l-a-1)>0)){var p=new Uint8Array(h.data.byteLength+i);p.set(h.data,0),p.set(t.subarray(0,i),h.data.byteLength),h.data=p,h.state=0}}l<r?(u=l,c=31&t[l],a=0):a=-1}else a=0;else a=3;else a=n?0:2;else a=n?0:1;if(u>=0&&a>=0){var f={data:t.subarray(u,r),type:c,state:a};o.push(f)}if(0===o.length){var g=this.getLastNalUnit(e.samples);if(g){var v=new Uint8Array(g.data.byteLength+t.byteLength);v.set(g.data,0),v.set(t,g.data.byteLength),g.data=v}}return e.naluState=a,o},t.parseAACPES=function(e,t){var n,r,a,s,l,d=0,h=this.aacOverFlow,p=t.data;if(h){this.aacOverFlow=null;var f=h.missing,g=h.sample.unit.byteLength;if(-1===f){var v=new Uint8Array(g+p.byteLength);v.set(h.sample.unit,0),v.set(p,g),p=v}else{var m=g-f;h.sample.unit.set(p.subarray(0,f),m),e.samples.push(h.sample),d=h.missing}}for(n=d,r=p.length;n<r-1&&!i.isHeader(p,n);n++);if(n===d||(n<r-1?(a="AAC PES did not start with ADTS header,offset:"+n,s=!1):(a="no ADTS header found in AAC PES",s=!0),u.logger.warn("parsing error:"+a),this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:s,reason:a}),!s)){if(i.initTrackConfig(e,this.observer,p,n,this.audioCodec),void 0!==t.pts)l=t.pts;else{if(!h)return void u.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var y=i.getFrameDuration(e.samplerate);l=h.sample.pts+y}for(var b,E=0;n<r;){if(n+=(b=i.appendFrame(e,p,n,l,E)).length,b.missing){this.aacOverFlow=b;break}for(E++;n<r-1&&!i.isHeader(p,n);n++);}}},t.parseMPEGPES=function(e,t){var n=t.data,i=n.length,a=0,s=0,o=t.pts;if(void 0!==o)for(;s<i;)if(r.isHeader(n,s)){var l=r.appendFrame(e,n,s,o,a);if(!l)break;s+=l.length,a++}else s++;else u.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var n=h({},t,{type:this._avcTrack?d.MetadataSchema.emsg:d.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}else u.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function g(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}function v(e,t){return((31&e[t+1])<<8)+e[t+2]}function m(e,t){return(31&e[t+10])<<8|e[t+11]}function y(e,t,n,i){var r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=v(e,t);switch(e[t]){case 207:if(!i){u.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=s);break;case 21:-1===r.id3&&(r.id3=s);break;case 219:if(!i){u.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=s);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?u.logger.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=s,r.segmentCodec="mp3");break;case 36:u.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function b(e){var t,n,i,r,a,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((t=o[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var c=t[7];192&c&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&c?r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(u.logger.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var d=(i=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var h=new Uint8Array(e.size),p=0,f=o.length;p<f;p++){var g=(t=o[p]).byteLength;if(d){if(d>g){d-=g;continue}t=t.subarray(d),g-=d,d=0}h.set(t,s),s+=g}return n&&(n-=i+3),{data:h,pts:r,dts:a,len:n}}return null}function E(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;var r=n[i-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)}const A=f},"./src/demux/webworkify-webpack.js":
/*!*****************************************!*\
    !*** ./src/demux/webworkify-webpack.js ***!
    \*****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=function(){var e=ENTRY_MODULE,t={},n=function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports};n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n(ENTRY_MODULE);return i.default||i}.toString().split("ENTRY_MODULE"),r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+r+").*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function l(e,t,i){var l={};l[i]=[];var u=t.toString().replace(/^"[^"]+"/,"function"),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||u.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!c)return l;for(var d,h=c[1],p=new RegExp("(\\\\n|\\W)"+s(h)+a,"g");d=p.exec(u);)"dll-reference"!==d[3]&&l[i].push(d[3]);for(p=new RegExp("\\("+s(h)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");d=p.exec(u);)e[d[2]]||(l[i].push(d[1]),e[d[2]]=n(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var f=Object.keys(l),g=0;g<f.length;g++)for(var v=0;v<l[f[g]].length;v++)o(l[f[g]][v])&&(l[f[g]][v]=1*l[f[g]][v]);return l}function u(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function c(e,t,n,r){var a=e[r].map((function(e){return'"'+e+'": '+t[r][e].toString().replace(/^"[^"]+"/,"function")})).join(",");return i[0]+"{"+a+"}"+i[1]+'"'+n+'"'+i[2]}function d(e,t){t=t||{};var i={main:n.m},r=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};u(n);)for(var a=Object.keys(n),s=0;s<a.length;s++){var o=a[s],c=n[o].pop();if(r[o]=r[o]||{},!r[o][c]&&e[o][c]){r[o][c]=!0,i[o]=i[o]||[],i[o].push(c);for(var d=l(e,e[o][c],o),h=Object.keys(d),p=0;p<h.length;p++)n[h[p]]=n[h[p]]||[],n[h[p]]=n[h[p]].concat(d[h[p]])}}return i}(i,e),a="";Object.keys(r).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;r[e][t];)t++;r[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+c(r,i,t,modules)+")();\n"})),a=a+"new (("+c(r,i,e,"main")+")())(self);";var s=new window.Blob([a],{type:"text/javascript"}),o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(o);return d.objectURL=o,d}},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/(e,t,n)=>{var i,r;n.r(t),n.d(t,{ErrorDetails:()=>r,ErrorTypes:()=>i}),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(r||(r={}))},"./src/events.ts":
/*!***********************!*\
    !*** ./src/events.ts ***!
    \***********************/(e,t,n)=>{var i;n.r(t),n.d(t,{Events:()=>i}),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(i||(i={}))},"./src/hls.ts":
/*!********************!*\
    !*** ./src/hls.ts ***!
    \********************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),r=n(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.ts"),a=n(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.ts"),s=n(/*! ./controller/latency-controller */"./src/controller/latency-controller.ts"),o=n(/*! ./controller/level-controller */"./src/controller/level-controller.ts"),l=n(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ./loader/key-loader */"./src/loader/key-loader.ts"),c=n(/*! ./controller/stream-controller */"./src/controller/stream-controller.ts"),d=n(/*! ./is-supported */"./src/is-supported.ts"),h=n(/*! ./utils/logger */"./src/utils/logger.ts"),p=n(/*! ./config */"./src/config.ts"),f=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),g=n(/*! ./events */"./src/events.ts"),v=n(/*! ./errors */"./src/errors.ts"),m=n(/*! ./types/level */"./src/types/level.ts");function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var b=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new f.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=(0,p.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,(0,h.enableLogs)(n.debug,"Hls instance"),this._autoLevelCapping=-1,n.progressive&&(0,p.enableStreamingMode)(n);var i=n.abrController,d=n.bufferController,g=n.capLevelController,v=n.fpsController,m=this.abrController=new i(this),y=this.bufferController=new d(this),b=this.capLevelController=new g(this),E=new v(this),A=new r.default(this),_=new a.default(this),T=this.levelController=new o.default(this),k=new l.FragmentTracker(this),S=new u.default(this.config),w=this.streamController=new c.default(this,k,S);b.setStreamController(w),E.setStreamController(w);var C=[A,T,w];this.networkControllers=C;var I=[m,y,b,E,_,k];this.audioTrackController=this.createController(n.audioTrackController,C);var D=n.audioStreamController;D&&C.push(new D(this,k,S)),this.subtitleTrackController=this.createController(n.subtitleTrackController,C);var R=n.subtitleStreamController;R&&C.push(new R(this,k,S)),this.createController(n.timelineController,I),S.emeController=this.emeController=this.createController(n.emeController,I),this.cmcdController=this.createController(n.cmcdController,I),this.latencyController=this.createController(s.default,I),this.coreComponents=I}e.isSupported=function(){return(0,d.isSupported)()};var t,n,b,E=e.prototype;return E.createController=function(e,t){if(e){var n=new e(this);return t&&t.push(n),n}return null},E.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},E.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},E.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},E.off=function(e,t,n,i){void 0===n&&(n=this),this._emitter.off(e,t,n,i)},E.listeners=function(e){return this._emitter.listeners(e)},E.emit=function(e,t,n){return this._emitter.emit(e,t,n)},E.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){h.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(g.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},E.listenerCount=function(e){return this._emitter.listenerCount(e)},E.destroy=function(){h.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},E.attachMedia=function(e){h.logger.log("attachMedia"),this._media=e,this.trigger(g.Events.MEDIA_ATTACHING,{media:e})},E.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},E.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,r=this.url=i.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});h.logger.log("loadSource:"+r),t&&n&&n!==r&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(g.Events.MANIFEST_LOADING,{url:e})},E.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},E.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},E.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},E.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},E.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,n=[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){m.HdcpLevels.indexOf(e)>-1&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,n=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=-1===n&&t&&t.length?t.length-1:n,i)for(var r=e;r--;){var a=t[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],b=[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:p.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}],n&&y(t.prototype,n),b&&y(t,b),Object.defineProperty(t,"prototype",{writable:!1}),e}();b.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
    !*** ./src/is-supported.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{changeTypeSupported:()=>s,isSupported:()=>a});var i=n(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.ts");function r(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var e=(0,i.getMediaSource)();if(!e)return!1;var t=r(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!a}function s(){var e,t=r();return"function"==typeof(null==t||null===(e=t.prototype)||void 0===e?void 0:e.changeType)}},"./src/loader/date-range.ts":
/*!**********************************!*\
    !*** ./src/loader/date-range.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{DateRange:()=>u,DateRangeAttribute:()=>i});var i,r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),a=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}!function(e){e.ID="ID",e.CLASS="CLASS",e.START_DATE="START-DATE",e.DURATION="DURATION",e.END_DATE="END-DATE",e.END_ON_NEXT="END-ON-NEXT",e.PLANNED_DURATION="PLANNED-DURATION",e.SCTE35_OUT="SCTE35-OUT",e.SCTE35_IN="SCTE35-IN"}(i||(i={}));var u=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n=t.attr;for(var l in n)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==n[l]){s.logger.warn('DATERANGE tag attribute: "'+l+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=l;break}e=o(new a.AttrList({}),n,e)}if(this.attr=e,this._startDate=new Date(e[i.START_DATE]),i.END_DATE in this.attr){var u=new Date(this.attr[i.END_DATE]);(0,r.isFiniteNumber)(u.getTime())&&(this._endDate=u)}}var t,n,u;return t=e,(n=[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if(i.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(i.DURATION);if((0,r.isFiniteNumber)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return i.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(i.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(i.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,r.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}])&&l(t.prototype,n),u&&l(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/fragment-loader.ts ***!
    \***************************************/(e,t,n)=>{n.r(t),n.d(t,{LoadError:()=>p,default:()=>d});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../errors */"./src/errors.ts");function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return s(e,arguments,u(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),l(i,e)},a(e)}function s(e,t,n){return s=o()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&l(r,n.prototype),r},s.apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=Math.pow(2,17),d=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,i=e.url;if(!i)return Promise.reject(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(i,l){n.loader&&n.loader.destroy();var u=n.loader=e.loader=s?new s(a):new o(a),d=h(e),f={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===e.sn?1/0:c};e.stats=u.stats,u.load(d,f,{onSuccess:function(t,r,a,s){n.resetLoader(e,u);var o=t.data;a.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(o.slice(0,16)),o=o.slice(16)),i({frag:e,part:null,payload:o,networkDetails:s})},onError:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(n,i,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},t.loadPart=function(e,t,n){var i=this;this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,u){i.loader&&i.loader.destroy();var d=i.loader=e.loader=s?new s(a):new o(a),f=h(e,t),g={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=d.stats,d.load(f,g,{onSuccess:function(r,a,s,o){i.resetLoader(e,d),i.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:r.data,networkDetails:o};n(u),l(u)},onError:function(n,a,s){i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:s}))},onAbort:function(n,a,s){e.stats.aborted=t.stats.aborted,i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:s}))},onTimeout:function(n,a,s){i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:s}))}})}))},t.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){var a=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/r),a),o=(a-s)*Math.round(n.loaded/s);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);var l=n.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function h(e,t){void 0===t&&(t=null);var n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if((0,i.isFiniteNumber)(a)&&(0,i.isFiniteNumber)(s)){var o,l=a,u=s;if("initSegment"===e.sn&&"AES-128"===(null===(o=e.decryptdata)||void 0===o?void 0:o.method)){var c=s-a;c%16&&(u=s+(16-c%16)),0!==a&&(r.resetIV=!0,l=a-16)}r.rangeStart=l,r.rangeEnd=u}return r}var p=function(e){var t,n;function i(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).data=void 0,n.data=t,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),i}(a(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
    !*** ./src/loader/fragment.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{BaseSegment:()=>d,ElementaryStreamTypes:()=>i,Fragment:()=>h,Part:()=>p});var i,r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),a=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),s=n(/*! ./load-stats */"./src/loader/load-stats.ts");function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(i||(i={}));var d=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},c(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),h=function(e){function t(t,n){var i;return(i=e.call(this,n)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new s.LoadStats,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.type=t,i}o(t,e);var n=t.prototype;return n.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},n.abortRequests=function(){var e,t;null===(e=this.loader)||void 0===e||e.abort(),null===(t=this.keyLoader)||void 0===t||t.abort()},n.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,r)):s[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null},c(t,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!(0,r.isFiniteNumber)(this.programDateTime))return null;var e=(0,r.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!==(e=this._decryptdata)&&void 0!==e&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),n=t.length;if(n>1||1===n&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),t}(d),p=function(e){function t(t,n,i,r,a){var o;(o=e.call(this,i)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new s.LoadStats,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=n,o.index=r;var l=t.enumeratedString("BYTERANGE");return l&&o.setByteRange(l,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return o(t,e),c(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(d)},"./src/loader/key-loader.ts":
/*!**********************************!*\
    !*** ./src/loader/key-loader.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../errors */"./src/errors.ts"),r=n(/*! ./fragment-loader */"./src/loader/fragment-loader.ts"),a=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.abort()}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,n,a){return void 0===t&&(t=i.ErrorDetails.KEY_LOAD_ERROR),new r.LoadError({type:i.ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,frag:e,networkDetails:n})},t.loadClear=function(e,t){var n=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,r=e.cc,a=function(e){var a=t[e];if(r<=a.cc&&("initSegment"===i||i<a.sn))return n.emeController.selectKeySystemFormat(a).then((function(e){a.setKeyFormat(e)})),"break"},s=0;s<t.length&&"break"!==a(s);s++);},t.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(n){return t.loadInternal(e,n)})):this.loadInternal(e)},t.loadInternal=function(e,t){var n,r;t&&e.setKeyFormat(t);var a=e.decryptdata;if(!a){var s=t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,s))}var o=a.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+o+'"'));var l,u=this.keyUriToKeyInfo[o];if(null!==(n=u)&&void 0!==n&&n.decryptdata.key)return a.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(null!==(r=u)&&void 0!==r&&r.keyLoadPromise)switch(null===(l=u.mediaKeySessionContext)||void 0===l?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then((function(t){return a.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:u}}))}switch(u=this.keyUriToKeyInfo[o]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===a.keyFormat?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+a.method+'"'))}},t.loadKeyEME=function(e,t){var n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then((function(t){return e.mediaKeySessionContext=t,n}))).catch((function(t){throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)},t.loadKeyHTTP=function(e,t){var n=this,r=this.config,a=new(0,r.loader)(r);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((function(s,o){var l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout,highWaterMark:0},c={onSuccess:function(e,t,r,a){var l=r.frag,u=r.keyInfo,c=r.url;if(!l.decryptdata||u!==n.keyUriToKeyInfo[c])return o(n.createKeyLoadError(l,i.ErrorDetails.KEY_LOAD_ERROR,a,"after key load, decryptdata unset or changed"));u.decryptdata.key=l.decryptdata.key=new Uint8Array(e.data),l.keyLoader=null,u.loader=null,s({frag:l,keyInfo:u})},onError:function(e,r,a){n.resetLoader(r),o(n.createKeyLoadError(t,i.ErrorDetails.KEY_LOAD_ERROR,a))},onTimeout:function(e,r,a){n.resetLoader(r),o(n.createKeyLoadError(t,i.ErrorDetails.KEY_LOAD_TIMEOUT,a))},onAbort:function(e,r,a){n.resetLoader(r),o(n.createKeyLoadError(t,i.ErrorDetails.INTERNAL_ABORTED,a))}};a.load(l,u,c)}))},t.resetLoader=function(e){var t=e.frag,n=e.keyInfo,i=e.url,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()},e}()},"./src/loader/level-details.ts":
/*!*************************************!*\
    !*** ./src/loader/level-details.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{LevelDetails:()=>a});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var a=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}var t,n,a;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,i.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/level-key.ts":
/*!*********************************!*\
    !*** ./src/loader/level-key.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{LevelKey:()=>u});var i=n(/*! ../utils/keysystem-util */"./src/utils/keysystem-util.ts"),r=n(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../utils/numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts"),l={},u=function(){function e(e,t,n,i,r){void 0===i&&(i=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}e.clearKeyUriToKeyIdMap=function(){l={}};var t=e.prototype;return t.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case r.KeySystemFormats.FAIRPLAY:case r.KeySystemFormats.WIDEVINE:case r.KeySystemFormats.PLAYREADY:case r.KeySystemFormats.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||s.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var n=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,n)}var u=(0,i.convertDataUriToArrayBytes)(this.uri);if(u)switch(this.keyFormat){case r.KeySystemFormats.WIDEVINE:this.pssh=u,u.length>=22&&(this.keyId=u.subarray(u.length-22,u.length-6));break;case r.KeySystemFormats.PLAYREADY:var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,a.mp4pssh)(c,null,u);var d=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2),h=String.fromCharCode.apply(null,Array.from(d)),p=h.substring(h.indexOf("<"),h.length),f=(new DOMParser).parseFromString(p,"text/xml").getElementsByTagName("KID")[0];if(f){var g=f.childNodes[0]?f.childNodes[0].nodeValue:f.getAttribute("VALUE");if(g){var v=(0,o.base64Decode)(g).subarray(0,16);(0,i.changeEndianness)(v),this.keyId=v}}break;default:var m=u.subarray(0,16);if(16!==m.length){var y=new Uint8Array(16);y.set(m,16-m.length),m=y}this.keyId=m}if(!this.keyId||16!==this.keyId.byteLength){var b=l[this.uri];if(!b){var E=Object.keys(l).length%Number.MAX_SAFE_INTEGER;b=new Uint8Array(16),new DataView(b.buffer,12,4).setUint32(0,E),l[this.uri]=b}this.keyId=b}return this},e}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
    !*** ./src/loader/load-stats.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{LoadStats:()=>i});var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
    !*** ./src/loader/m3u8-parser.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),a=n(/*! ./date-range */"./src/loader/date-range.ts"),s=n(/*! ./fragment */"./src/loader/fragment.ts"),o=n(/*! ./level-details */"./src/loader/level-details.ts"),l=n(/*! ./level-key */"./src/loader/level-key.ts"),u=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),c=n(/*! ../utils/logger */"./src/utils/logger.ts"),d=n(/*! ../utils/codecs */"./src/utils/codecs.ts");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}var p=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,g=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),v=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),m=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).slice(-4)}return e},e.resolve=function(e,t){return(0,r.buildAbsoluteURL)(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i,r=[],a=[],s={},o=[],l=!1;for(p.lastIndex=0;null!=(i=p.exec(t));)if(i[1]){var d,h=new u.AttrList(i[1]),f={attrs:h,bitrate:h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),name:h.NAME,url:e.resolve(i[2],n)},g=h.decimalResolution("RESOLUTION");g&&(f.width=g.width,f.height=g.height),b((h.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),f),f.videoCodec&&-1!==f.videoCodec.indexOf("avc1")&&(f.videoCodec=e.convertAVC1ToAVCOTI(f.videoCodec)),null!==(d=f.unknownCodecs)&&void 0!==d&&d.length||a.push(f),r.push(f)}else if(i[3]){var v=new u.AttrList(i[3]);v["DATA-ID"]&&(l=!0,s[v["DATA-ID"]]=v)}else if(i[4]){var m=i[4],E=y(m,n);E.encrypted&&E.isSupported()?o.push(E):c.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+m+'"')}return{levels:a.length>0&&a.length<r.length?a:r,sessionData:l?s:null,sessionKeys:o.length?o:null}},e.parseMasterPlaylistMedia=function(t,n,i,r){var a;void 0===r&&(r=[]);var s=[],o=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var l=new u.AttrList(a[1]);if(l.TYPE===i){var c={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,n):""};if(r.length){var d=e.findGroup(r,c.groupId)||r[0];E(c,d,"audioCodec"),E(c,d,"textCodec")}s.push(c)}}return s},e.parseLevelPlaylist=function(e,t,n,r,l){var d,p,f,m=new o.LevelDetails(t),b=m.fragments,E=null,k=0,S=0,w=0,C=0,I=null,D=new s.Fragment(r,t),R=-1,L=!1;for(g.lastIndex=0,m.m3u8=e;null!==(d=g.exec(e));){L&&(L=!1,(D=new s.Fragment(r,t)).start=w,D.sn=k,D.cc=C,D.level=n,E&&(D.initSegment=E,D.rawProgramDateTime=E.rawProgramDateTime,E.rawProgramDateTime=null));var P=d[1];if(P){D.duration=parseFloat(P);var O=(" "+d[2]).slice(1);D.title=O||null,D.tagList.push(O?["INF",P,O]:["INF",P])}else if(d[3])(0,i.isFiniteNumber)(D.duration)&&(D.start=w,f&&T(D,f,m),D.sn=k,D.level=n,D.cc=C,D.urlId=l,b.push(D),D.relurl=(" "+d[3]).slice(1),A(D,I),I=D,w+=D.duration,k++,S=0,L=!0);else if(d[4]){var x=(" "+d[4]).slice(1);I?D.setByteRange(x,I):D.setByteRange(x)}else if(d[5])D.rawProgramDateTime=(" "+d[5]).slice(1),D.tagList.push(["PROGRAM-DATE-TIME",D.rawProgramDateTime]),-1===R&&(R=b.length);else{if(!(d=d[0].match(v))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(p=1;p<d.length&&void 0===d[p];p++);var M=(" "+d[p]).slice(1),N=(" "+d[p+1]).slice(1),B=d[p+2]?(" "+d[p+2]).slice(1):"";switch(M){case"PLAYLIST-TYPE":m.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":k=m.startSN=parseInt(N);break;case"SKIP":var U=new u.AttrList(N),F=U.decimalInteger("SKIPPED-SEGMENTS");if((0,i.isFiniteNumber)(F)){m.skippedSegments=F;for(var V=F;V--;)b.unshift(null);k+=F}var H=U.enumeratedString("RECENTLY-REMOVED-DATERANGES");H&&(m.recentlyRemovedDateranges=H.split("\t"));break;case"TARGETDURATION":m.targetduration=parseFloat(N);break;case"VERSION":m.version=parseInt(N);break;case"EXTM3U":break;case"ENDLIST":m.live=!1;break;case"#":(N||B)&&D.tagList.push(B?[N,B]:[N]);break;case"DISCONTINUITY":C++,D.tagList.push(["DIS"]);break;case"GAP":D.tagList.push([M]);break;case"BITRATE":D.tagList.push([M,N]);break;case"DATERANGE":var j=new u.AttrList(N),K=new a.DateRange(j,m.dateRanges[j.ID]);K.isValid||m.skippedSegments?m.dateRanges[K.id]=K:c.logger.warn('Ignoring invalid DATERANGE tag: "'+N+'"'),D.tagList.push(["EXT-X-DATERANGE",N]);break;case"DISCONTINUITY-SEQUENCE":C=parseInt(N);break;case"KEY":var G=y(N,t);if(G.isSupported()){if("NONE"===G.method){f=void 0;break}f||(f={}),f[G.keyFormat]&&(f=h({},f)),f[G.keyFormat]=G}else c.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+N+'"');break;case"START":var W=new u.AttrList(N).decimalFloatingPoint("TIME-OFFSET");(0,i.isFiniteNumber)(W)&&(m.startTimeOffset=W);break;case"MAP":var Y=new u.AttrList(N);if(D.duration){var z=new s.Fragment(r,t);_(z,Y,n,f),E=z,D.initSegment=E,E.rawProgramDateTime&&!D.rawProgramDateTime&&(D.rawProgramDateTime=E.rawProgramDateTime)}else _(D,Y,n,f),E=D,L=!0;break;case"SERVER-CONTROL":var q=new u.AttrList(N);m.canBlockReload=q.bool("CAN-BLOCK-RELOAD"),m.canSkipUntil=q.optionalFloat("CAN-SKIP-UNTIL",0),m.canSkipDateRanges=m.canSkipUntil>0&&q.bool("CAN-SKIP-DATERANGES"),m.partHoldBack=q.optionalFloat("PART-HOLD-BACK",0),m.holdBack=q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new u.AttrList(N);m.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var X=m.partList;X||(X=m.partList=[]);var Z=S>0?X[X.length-1]:void 0,Q=S++,J=new s.Part(new u.AttrList(N),D,t,Q,Z);X.push(J),D.duration+=J.duration;break;case"PRELOAD-HINT":var ee=new u.AttrList(N);m.preloadHint=ee;break;case"RENDITION-REPORT":var te=new u.AttrList(N);m.renditionReports=m.renditionReports||[],m.renditionReports.push(te);break;default:c.logger.warn("line parsed but not handled: "+d)}}}I&&!I.relurl?(b.pop(),w-=I.duration,m.partList&&(m.fragmentHint=I)):m.partList&&(A(D,I),D.cc=C,m.fragmentHint=D,f&&T(D,f,m));var ne=b.length,ie=b[0],re=b[ne-1];if((w+=m.skippedSegments*m.targetduration)>0&&ne&&re){m.averagetargetduration=w/ne;var ae=re.sn;m.endSN="initSegment"!==ae?ae:0,m.live||(re.endList=!0),ie&&(m.startCC=ie.cc)}else m.endSN=0,m.startCC=0;return m.fragmentHint&&(w+=m.fragmentHint.duration),m.totalduration=w,m.endCC=C,R>0&&function(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(b,R),m},e}();function y(e,t){var n,i,r=new u.AttrList(e),a=null!=(n=r.enumeratedString("METHOD"))?n:"",s=r.URI,o=r.hexadecimalInteger("IV"),d=r.enumeratedString("KEYFORMATVERSIONS"),h=null!=(i=r.enumeratedString("KEYFORMAT"))?i:"identity";s&&r.IV&&!o&&c.logger.error("Invalid IV: "+r.IV);var p=s?m.resolve(s,t):"",f=(d||"1").split("/").map(Number).filter(Number.isFinite);return new l.LevelKey(a,p,h,f,o)}function b(e,t){["video","audio","text"].forEach((function(n){var i=e.filter((function(e){return(0,d.isCodecType)(e,n)}));if(i.length){var r=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}function E(e,t,n){var i=t[n];i&&(e[n]=i)}function A(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),(0,i.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function _(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function T(e,t,n){e.levelkeys=t;var i=n.encryptedFragments;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||i.push(e)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/playlist-loader.ts ***!
    \***************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ./m3u8-parser */"./src/loader/m3u8-parser.ts"),l=n(/*! ../types/loader */"./src/types/loader.ts"),u=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts");function c(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var d=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(r.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(r.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return e.loader=r,this.loaders[e.type]=r,r},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:null,level:i,responseType:"text",type:l.PlaylistContextType.LEVEL,url:r,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:r,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:r,deliveryDirectives:a})},t.load=function(e){var t,n,i,r,a,o,u=this.hls.config,c=this.getInternalLoader(e);if(c){var d=c.context;if(d&&d.url===e.url)return void s.logger.trace("[playlist-loader]: playlist request ongoing");s.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),c.abort()}switch(e.type){case l.PlaylistContextType.MANIFEST:n=u.manifestLoadingMaxRetry,i=u.manifestLoadingTimeOut,r=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:n=0,i=u.levelLoadingTimeOut;break;default:n=u.levelLoadingMaxRetry,i=u.levelLoadingTimeOut,r=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===l.PlaylistContextType.LEVEL&&null!==e.level?o=this.hls.levels[e.level].details:e.type===l.PlaylistContextType.AUDIO_TRACK&&null!==e.id?o=this.hls.audioTracks[e.id].details:e.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(o=this.hls.subtitleTracks[e.id].details),o)){var h=o.partTarget,p=o.targetduration;h&&p&&(i=Math.min(1e3*Math.max(3*h,.8*p),i))}var f={timeout:i,maxRetry:n,retryDelay:r,maxRetryDelay:a,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(e,f,g)},t.loadsuccess=function(e,t,n,i){void 0===i&&(i=null),this.resetInternalLoader(n.type);var r=e.data;0===r.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,i):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,i){var a=this.hls,l=e.data,d=c(e,n),h=o.default.parseMasterPlaylist(l,d),p=h.levels,f=h.sessionData,g=h.sessionKeys;if(p.length){var v=p.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),m=p.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),y=o.default.parseMasterPlaylistMedia(l,d,"AUDIO",v),b=o.default.parseMasterPlaylistMedia(l,d,"SUBTITLES",m),E=o.default.parseMasterPlaylistMedia(l,d,"CLOSED-CAPTIONS");y.length&&(y.some((function(e){return!e.url}))||!p[0].audioCodec||p[0].attrs.AUDIO||(s.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new u.AttrList({}),bitrate:0,url:""}))),a.trigger(r.Events.MANIFEST_LOADED,{levels:p,audioTracks:y,subtitles:b,captions:E,url:d,stats:t,networkDetails:i,sessionData:f,sessionKeys:g})}else this.handleManifestParsingError(e,n,"no level found in manifest",i)},t.handleTrackOrLevelPlaylist=function(e,t,n,s){var d=this.hls,h=n.id,p=n.level,f=n.type,g=c(e,n),v=(0,i.isFiniteNumber)(h)?h:0,m=(0,i.isFiniteNumber)(p)?p:v,y=function(e){switch(e.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(n),b=o.default.parseLevelPlaylist(e.data,g,m,y,v);if(b.fragments.length){if(f===l.PlaylistContextType.MANIFEST){var E={attrs:new u.AttrList({}),bitrate:0,details:b,name:"",url:g};d.trigger(r.Events.MANIFEST_LOADED,{levels:[E],audioTracks:[],url:g,stats:t,networkDetails:s,sessionData:null,sessionKeys:null})}t.parsing.end=performance.now(),n.levelDetails=b,this.handlePlaylistLoaded(e,t,n,s)}else d.trigger(r.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},t.handleManifestParsingError=function(e,t,n,i){this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===l.PlaylistContextType.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:i})},t.handleNetworkError=function(e,t,n,i){void 0===n&&(n=!1),s.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var o=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case l.PlaylistContextType.MANIFEST:o=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:o=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:o=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:o=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(e.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:u,url:e.url,loader:c,context:e,networkDetails:t};i&&(d.response=i),this.hls.trigger(r.Events.ERROR,d)},t.handlePlaylistLoaded=function(e,t,n,i){var a=n.type,s=n.level,o=n.id,u=n.groupId,c=n.loader,d=n.levelDetails,h=n.deliveryDirectives;if(null!=d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(r.Events.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:t,networkDetails:i,deliveryDirectives:h});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(r.Events.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:h});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:h})}}else this.handleManifestParsingError(e,n,"invalid target duration",i)},e}();const h=d},"./src/polyfills/number.ts":
/*!*********************************!*\
    !*** ./src/polyfills/number.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{MAX_SAFE_INTEGER:()=>r,isFiniteNumber:()=>i});var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
    !*** ./src/remux/aac-helper.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}()},"./src/remux/mp4-generator.ts":
/*!************************************!*\
    !*** ./src/remux/mp4-generator.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=Math.pow(2,32)-1,r=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t=8,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,s=a;a--;)t+=i[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(i[a],t),t+=i[a].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],s=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,a=t.width,s=t.height,o=Math.floor(r/(i+1)),l=Math.floor(r%(i+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),a=t.id,s=Math.floor(n/(i+1)),o=Math.floor(n%(i+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set(["video"===t.type?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=u[i]).duration,s=r.size,o=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),i=new Uint8Array(e.FTYP.byteLength+n.byteLength);return i.set(e.FTYP),i.set(n,e.FTYP.byteLength),i},e}();r.types=void 0,r.HDLR_TYPES=void 0,r.STTS=void 0,r.STSC=void 0,r.STCO=void 0,r.STSZ=void 0,r.VMHD=void 0,r.SMHD=void 0,r.STSD=void 0,r.FTYP=void 0,r.DINF=void 0;const a=r},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
    !*** ./src/remux/mp4-remuxer.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>f,flushTextTrackMetadataCueSamples:()=>v,flushTextTrackUserdataCueSamples:()=>m,normalizePts:()=>g});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./aac-helper */"./src/remux/aac-helper.ts"),a=n(/*! ./mp4-generator */"./src/remux/mp4-generator.ts"),s=n(/*! ../events */"./src/events.ts"),o=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/logger */"./src/utils/logger.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../utils/timescale-conversion */"./src/utils/timescale-conversion.ts");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}var h=null,p=null,f=function(){function e(e,t,n,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===h){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h=r?parseInt(r[1]):0}if(null===p){var a=navigator.userAgent.match(/Safari\/(\d+)/i);p=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){l.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){l.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){l.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,g(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&l.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,i,r,a,s,o){var c,d,h,p,f,y,b=r,E=r,A=e.pid>-1,_=t.pid>-1,T=t.samples.length,k=e.samples.length>0,S=s&&T>0||T>1;if((!A||k)&&(!_||S)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(e,t,r));var w,C=this.isVideoContiguous,I=-1;if(S&&(I=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!C&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,I>0){l.logger.warn("[mp4-remuxer]: Dropped "+I+" out of "+T+" video samples due to a missing keyframe");var D=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(I),t.dropped+=I,w=E+=(t.samples[0].pts-D)/t.inputTimeScale}else-1===I&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+T+" video samples"),y=!1);if(this.ISGenerated){if(k&&S){var R=this.getVideoStartPts(t.samples),L=(g(e.samples[0].pts,R)-R)/t.inputTimeScale;b+=Math.max(0,L),E+=Math.max(0,-L)}if(k){if(e.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,r)),d=this.remuxAudio(e,b,this.isAudioContiguous,a,_||S||o===u.PlaylistLevelType.AUDIO?E:void 0),S){var P=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,r)),c=this.remuxVideo(t,E,C,P)}}else S&&(c=this.remuxVideo(t,E,C,0));c&&(c.firstKeyFrame=I,c.independent=-1!==I,c.firstKeyFramePTS=w)}}return this.ISGenerated&&(n.samples.length&&(f=v(n,r,this._initPTS,this._initDTS)),i.samples.length&&(p=m(i,r,this._initPTS))),{audio:d,video:c,initSegment:h,independent:y,text:p,id3:f}},t.generateIS=function(e,t,n){var r,s,o,l=e.samples,u=t.samples,c=this.typeSupported,d={},h=!(0,i.isFiniteNumber)(this._initPTS),p="audio/mp4";if(h&&(r=s=1/0),e.config&&l.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&c.mpeg?new Uint8Array(0):a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(o=e.inputTimeScale,r=s=l[0].pts-Math.round(o*n))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){o=t.inputTimeScale;var f=this.getVideoStartPts(u),v=Math.round(o*n);s=Math.min(s,g(u[0].dts,f)-v),r=Math.min(r,f-v)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=r,this._initDTS=s),{tracks:d,initPTS:r,timescale:o}},t.remuxVideo=function(e,t,n,i){var r,u,f=e.inputTimeScale,v=e.samples,m=[],b=v.length,E=this._initPTS,A=this.nextAvcDts,_=8,T=this.videoSampleDuration,k=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,w=!1;n&&null!==A||(A=t*f-(v[0].pts-g(v[0].dts,v[0].pts)));for(var C=0;C<b;C++){var I=v[C];I.pts=g(I.pts-E,A),I.dts=g(I.dts-E,A),I.dts<v[C>0?C-1:C].dts&&(w=!0)}w&&v.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),r=v[0].dts;var D=(u=v[v.length-1].dts)-r,R=D?Math.round(D/(b-1)):T||e.inputTimeScale/30;if(n){var L=r-A,P=L>R,O=L<-1;if((P||O)&&(P?l.logger.warn("AVC: "+(0,c.toMsFromMpegTsClock)(L,!0)+" ms ("+L+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+(0,c.toMsFromMpegTsClock)(-L,!0)+" ms ("+L+"dts) overlapping between fragments detected"),!O||A>v[0].pts)){r=A;var x=v[0].pts-L;v[0].dts=r,v[0].pts=x,l.logger.log("Video: First PTS/DTS adjusted: "+(0,c.toMsFromMpegTsClock)(x,!0)+"/"+(0,c.toMsFromMpegTsClock)(r,!0)+", delta: "+(0,c.toMsFromMpegTsClock)(L,!0)+" ms")}}r=Math.max(0,r);for(var M=0,N=0,B=0;B<b;B++){for(var U=v[B],F=U.units,V=F.length,H=0,j=0;j<V;j++)H+=F[j].data.length;N+=H,M+=V,U.length=H,U.dts=Math.max(U.dts,r),k=Math.min(U.pts,k),S=Math.max(U.pts,S)}u=v[b-1].dts;var K,G=N+4*M+8;try{K=new Uint8Array(G)}catch(e){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var W=new DataView(K.buffer);W.setUint32(0,G),K.set(a.default.types.mdat,4);for(var Y=!1,z=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Z=0;Z<b;Z++){for(var Q=v[Z],J=Q.units,ee=0,te=0,ne=J.length;te<ne;te++){var ie=J[te],re=ie.data,ae=ie.data.byteLength;W.setUint32(_,ae),_+=4,K.set(re,_),_+=ae,ee+=4+ae}var se=void 0;if(Z<b-1)T=v[Z+1].dts-Q.dts,se=v[Z+1].pts-Q.pts;else{var oe=this.config,le=Z>0?Q.dts-v[Z-1].dts:R;if(se=Z>0?Q.pts-v[Z-1].pts:R,oe.stretchShortVideoTrack&&null!==this.nextAudioPts){var ue=Math.floor(oe.maxBufferHole*f),ce=(i?k+i*f:this.nextAudioPts)-Q.pts;ce>ue?((T=ce-le)<0?T=le:Y=!0,l.logger.log("[mp4-remuxer]: It is approximately "+ce/90+" ms to the next segment; using duration "+T/90+" ms for the last video frame.")):T=le}else T=le}var de=Math.round(Q.pts-Q.dts);z=Math.min(z,T),$=Math.max($,T),q=Math.min(q,se),X=Math.max(X,se),m.push(new y(Q.key,T,ee,de))}if(m.length)if(h){if(h<70){var he=m[0].flags;he.dependsOn=2,he.isNonSync=0}}else if(p&&X-q<$-z&&R/$<.025&&0===m[0].cts){l.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var pe=r,fe=0,ge=m.length;fe<ge;fe++){var ve=pe+m[fe].duration,me=pe+m[fe].cts;if(fe<ge-1){var ye=ve+m[fe+1].cts;m[fe].duration=ye-me}else m[fe].duration=fe?m[fe-1].duration:R;m[fe].cts=0,pe=ve}}console.assert(null!==T,"mp4SampleDuration must be computed"),T=Y||!T?R:T,this.nextAvcDts=A=u+T,this.videoSampleDuration=T,this.isVideoContiguous=!0;var be={data1:a.default.moof(e.sequenceNumber++,r,d({},e,{samples:m})),data2:K,startPTS:k/f,endPTS:(S+T)/f,startDTS:r/f,endDTS:A/f,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(K.length,"MDAT length must not be zero"),be},t.remuxAudio=function(e,t,n,i,u){var c=e.inputTimeScale,h=c/(e.samplerate?e.samplerate:c),p="aac"===e.segmentCodec?1024:1152,f=p*h,v=this._initPTS,m="mp3"===e.segmentCodec&&this.typeSupported.mpeg,b=[],E=void 0!==u,A=e.samples,_=m?0:8,T=this.nextAudioPts||-1,k=t*c;if(this.isAudioContiguous=n=n||A.length&&T>0&&(i&&Math.abs(k-T)<9e3||Math.abs(g(A[0].pts-v,k)-T)<20*f),A.forEach((function(e){e.pts=g(e.pts-v,k)})),!n||T<0){if(A=A.filter((function(e){return e.pts>=0})),!A.length)return;T=0===u?0:i&&!E?Math.max(0,k):A[0].pts}if("aac"===e.segmentCodec)for(var S=this.config.maxAudioFramesDrift,w=0,C=T;w<A.length;w++){var I=A[w],D=I.pts,R=D-C,L=Math.abs(1e3*R/c);if(R<=-S*f&&E)0===w&&(l.logger.warn("Audio frame @ "+(D/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/c)+" ms."),this.nextAudioPts=T=C=D);else if(R>=S*f&&L<1e4&&E){var P=Math.round(R/f);(C=D-P*f)<0&&(P--,C+=f),0===w&&(this.nextAudioPts=T=C),l.logger.warn("[mp4-remuxer]: Injecting "+P+" audio frame @ "+(C/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var O=0;O<P;O++){var x=Math.max(C,0),M=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);M||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=I.unit.subarray()),A.splice(w,0,{unit:M,pts:x}),C+=f,w++}}I.pts=C,C+=f}for(var N,B=null,U=null,F=0,V=A.length;V--;)F+=A[V].unit.byteLength;for(var H=0,j=A.length;H<j;H++){var K=A[H],G=K.unit,W=K.pts;if(null!==U)b[H-1].duration=Math.round((W-U)/h);else{if(n&&"aac"===e.segmentCodec&&(W=T),B=W,!(F>0))return;F+=_;try{N=new Uint8Array(F)}catch(e){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}m||(new DataView(N.buffer).setUint32(0,F),N.set(a.default.types.mdat,4))}N.set(G,_);var Y=G.byteLength;_+=Y,b.push(new y(!0,p,Y,0)),U=W}var z=b.length;if(z){var q=b[b.length-1];this.nextAudioPts=T=U+h*q.duration;var $=m?new Uint8Array(0):a.default.moof(e.sequenceNumber++,B/h,d({},e,{samples:b}));e.samples=[];var X=B/c,Z=T/c,Q={data1:$,data2:N,startPTS:X,endPTS:Z,startDTS:X,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:z};return this.isAudioContiguous=!0,console.assert(N.length,"MDAT length must not be zero"),Q}},t.remuxEmptyAudio=function(e,t,n,i){var a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),o=this.nextAudioPts,u=(null!==o?o:i.startDTS*a)+this._initDTS,c=i.endDTS*a+this._initDTS,d=1024*s,h=Math.ceil((c-u)/d),p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(l.logger.warn("[mp4-remuxer]: remux empty Audio"),p){for(var f=[],g=0;g<h;g++){var v=u+g*d;f.push({unit:p,pts:v,dts:v})}return e.samples=f,this.remuxAudio(e,t,n,!1)}l.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function g(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function v(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,s=0;s<r;s++){var o=e.samples[s];o.pts=g(o.pts-n,t*a)/a,o.dts=g(o.dts-i,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function m(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var s=e.samples[a];s.pts=g(s.pts-n,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}}var y=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new b(e)},b=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
    !*** ./src/remux/passthrough-remuxer.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./mp4-remuxer */"./src/remux/mp4-remuxer.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),s=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),l=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment((0,a.patchEncyptionData)(e,i)),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=(0,a.parseInitSegment)(e);t||(t=u(i.audio,s.ElementaryStreamTypes.AUDIO)),n||(n=u(i.video,s.ElementaryStreamTypes.VIDEO));var r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,n,s,l){var u,c=this.initPTS,d=this.lastEndTime,h={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};(0,i.isFiniteNumber)(d)||(d=this.lastEndTime=l||0);var p=t.samples;if(!p||!p.length)return h;var f={initPTS:void 0,timescale:1},g=this.initData;if(g&&g.length||(this.generateInitSegment(p),g=this.initData),!g||!g.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);var v=(0,a.getStartDTS)(g,p);(0,i.isFiniteNumber)(c)||(this.initPTS=f.initPTS=c=v-l);var m=(0,a.getDuration)(p,g),y=e?v-c:d,b=y+m;(0,a.offsetStartDTS)(g,p,c),m>0?this.lastEndTime=b:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!g.audio,A=!!g.video,_="";E&&(_+="audio"),A&&(_+="video");var T={data1:p,startPTS:y,startDTS:y,endPTS:b,endDTS:b,type:_,hasAudio:E,hasVideo:A,nb:1,dropped:0};h.audio="audio"===T.type?T:void 0,h.video="audio"!==T.type?T:void 0,h.initSegment=f;var k=null!=(u=this.initPTS)?u:0;return h.id3=(0,r.flushTextTrackMetadataCueSamples)(n,l,k,k),s.samples.length&&(h.text=(0,r.flushTextTrackUserdataCueSamples)(s,l,k)),h},e}();function u(e,t){var n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n||"hev1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===s.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const c=l},"./src/task-loop.ts":
/*!**************************!*\
    !*** ./src/task-loop.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/cmcd.ts":
/*!***************************!*\
    !*** ./src/types/cmcd.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{CMCDObjectType:()=>i,CMCDStreamType:()=>a,CMCDStreamingFormat:()=>r,CMCDVersion:()=>s});var i,r,a,s=1;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(i||(i={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(r||(r={})),function(e){e.VOD="v",e.LIVE="l"}(a||(a={}))},"./src/types/demuxer.ts":
/*!******************************!*\
    !*** ./src/types/demuxer.ts ***!
    \******************************/(e,t,n)=>{var i;n.r(t),n.d(t,{MetadataSchema:()=>i}),function(e){e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3"}(i||(i={}))},"./src/types/level.ts":
/*!****************************!*\
    !*** ./src/types/level.ts ***!
    \****************************/(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}n.r(t),n.d(t,{HdcpLevels:()=>a,HlsSkip:()=>r,HlsUrlParameters:()=>o,Level:()=>l,getSkipValue:()=>s});var r,a=["NONE","TYPE-0","TYPE-1","TYPE-2",null];function s(e,t){var n=e.canSkipUntil,i=e.canSkipDateRanges,a=e.endSN;return n&&(void 0!==t?t-a:0)<n?i?r.v2:r.Yes:r.No}!function(e){e.No="",e.Yes="YES",e.v2="v2"}(r||(r={}));var o=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),l=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,n,r;return t=e,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/types/loader.ts":
/*!*****************************!*\
    !*** ./src/types/loader.ts ***!
    \*****************************/(e,t,n)=>{var i,r;n.r(t),n.d(t,{PlaylistContextType:()=>i,PlaylistLevelType:()=>r}),function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(r||(r={}))},"./src/types/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/types/transmuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{ChunkMetadata:()=>i});var i=function(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a}},"./src/utils/attr-list.ts":
/*!********************************!*\
    !*** ./src/utils/attr-list.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{AttrList:()=>a});var i=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=i.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}()},"./src/utils/binary-search.ts":
/*!************************************!*\
    !*** ./src/utils/binary-search.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var s=t(a=e[r=(n+i)/2|0]);if(s>0)n=r+1;else{if(!(s<0))return a;i=r-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
    !*** ./src/utils/buffer-helper.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{BufferHelper:()=>a});var i=n(/*! ./logger */"./src/utils/logger.ts"),r={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var i=e.getBuffered(t),r=0;r<i.length;r++)if(n>=i.start(r)&&n<=i.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,i){try{if(t){var r,a=e.getBuffered(t),s=[];for(r=0;r<a.length;r++)s.push({start:a.start(r),end:a.end(r)});return this.bufferedInfo(s,n,i)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a=i.length;if(a){var s=i[a-1].end;e[r].start-s<n?e[r].end>s&&(i[a-1].end=e[r].end):i.push(e[r])}else i.push(e[r])}else i=e;for(var o,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,p=i[d].end;if(t+n>=h&&t<p)u=h,l=(c=p)-t;else if(t+n<h){o=h;break}}return{len:l,start:u||0,end:c||0,nextStart:o}},e.getBuffered=function(e){try{return e.buffered}catch(e){return i.logger.log("failed to get media.buffered",e),r}},e}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
    !*** ./src/utils/cea-608-parser.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{CaptionScreen:()=>b,Row:()=>y,default:()=>k});var i,r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},o=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(i||(i={}));var f=function(){function e(){this.time=null,this.verboseLevel=i.ERROR}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var n="function"==typeof t?t():t;r.logger.log(this.time+" ["+e+"] "+n)}},e}(),g=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},v=function(){function e(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),m=function(){function e(e,t,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new v(t,n,i,r,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<l;t++)this.chars.push(new m);this.logger=e,this.pos=0,this.currPenState=new v}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<l;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(i.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(i.DEBUG,"Too large cursor position "+this.pos),this.pos=l)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var n=s(e);this.pos>=l?this.logger.log(i.ERROR,(function(){return"Cannot insert "+e.toString(16)+" ("+n+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<l;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<l;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),b=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<o;t++)this.rows.push(new y(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<o;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(i.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(i.INFO,(function(){return"pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<o;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[r].cueStartTime,l=this.logger.time;if(s&&null!==l&&s<l)for(var u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(a.rows[r+u])}}this.currRow=t;var c=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,h=Math.max(d-1,0);c.setCursor(e.indent),e.color=c.chars[h].penState.foreground}var p={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(p)},t.setBkgData=function(e){this.logger.log(i.INFO,(function(){return"bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(i.TEXT,(function(){return e.getDisplayText()}));var t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(i.INFO,"Rolling up")}else this.logger.log(i.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<o;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),E=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new b(n),this.nonDisplayedMemory=new b(n),this.lastOutputScreen=new b(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(i.INFO,(function(){return"MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(i.INFO,(function(){return r+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(i.TEXT,(function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(i.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(i.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(i.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(i.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(i.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(i.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(i.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(i.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(i.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(i.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(i.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(i.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(i.TEXT,(function(){return"DISP: "+e.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(i.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(i.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),A=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new f;this.channels=[null,new E(e,t,i),new E(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,a,s=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(r=127&t[o],a=127&t[o+1],0!==r||0!==a){if(this.logger.log(i.DATA,"["+g([t[o],t[o+1]])+"] -> ("+g([r,a])+")"),(n=this.parseCmd(r,a))||(n=this.parseMidrow(r,a)),n||(n=this.parsePAC(r,a)),n||(n=this.parseBackgroundAttributes(r,a)),!n&&(s=this.parseChars(r,a))){var l=this.currentChannel;l&&l>0?this.channels[l].insertChars(s):this.logger.log(i.WARNING,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(i.WARNING,"Couldn't parse cleaned data "+g([r,a])+" orig: "+g([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(T(e,t,n))return _(null,null,n),this.logger.log(i.DEBUG,"Repeated command ("+g([e,t])+") is dropped"),!0;var r=20===e||21===e||23===e?1:2,a=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),_(e,t,n),this.currentChannel=r,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(i.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(i.DEBUG,"MIDROW ("+g([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(T(e,t,i))return _(null,null,i),!0;var r=e<=23?1:2;n=t>=64&&t<=95?1===r?u[e]:d[e]:1===r?c[e]:h[e];var a=this.channels[r];return!!a&&(a.setPAC(this.interpretPAC(n,t)),_(e,t,i),this.currentChannel=r,!0)},t.interpretPAC=function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n,r,a=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19?(r=17===o?t+80:18===o?t+112:t+144,this.logger.log(i.INFO,"Special char '"+s(r)+"' in channel "+n),a=[r]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var l=g(a);this.logger.log(i.DEBUG,"Char codes =  "+l.join(",")),_(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=p[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var r=e<=23?1:2;return this.channels[r].setBkgData(i),_(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}();function _(e,t,n){n.a=e,n.b=t}function T(e,t,n){return n.a===e&&n.b===t}const k=A},"./src/utils/codecs.ts":
/*!*****************************!*\
    !*** ./src/utils/codecs.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{isCodecSupportedInMp4:()=>a,isCodecType:()=>r});var i={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function r(e,t){var n=i[t];return!!n&&!0===n[e.slice(0,4)]}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
    !*** ./src/utils/cues.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./vttparser */"./src/utils/vttparser.ts"),r=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts"),a=n(/*! ./texttrack-utils */"./src/utils/texttrack-utils.ts"),s=/\s/,o={newCue:function(e,t,n,o){for(var l,u,c,d,h,p=[],f=self.VTTCue||self.TextTrackCue,g=0;g<o.rows.length;g++)if(c=!0,d=0,h="",!(l=o.rows[g]).isEmpty()){for(var v=0;v<l.chars.length;v++)s.test(l.chars[v].uchar)&&c?d++:(h+=l.chars[v].uchar,c=!1);l.cueStartTime=t,t===n&&(n+=1e-4),d>=16?d--:d++;var m=(0,i.fixLineBreaks)(h.trim()),y=(0,r.generateCueId)(t,n,m);e&&e.cues&&e.cues.getCueById(y)||((u=new f(t,n,m)).id=y,u.line=g+1,u.align="left",u.position=10+Math.min(80,10*Math.floor(8*d/32)),p.push(u))}return e&&p.length&&(p.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),p.forEach((function(t){return(0,a.addCueToTrack)(e,t)}))),p}};const l=o},"./src/utils/discontinuities.ts":
/*!**************************************!*\
    !*** ./src/utils/discontinuities.ts ***!
    \**************************************/(e,t,n)=>{n.r(t),n.d(t,{adjustSlidingStart:()=>c,alignMediaPlaylistByPDT:()=>p,alignPDT:()=>h,alignStream:()=>d,findDiscontinuousReferenceFrag:()=>l,findFirstFragWithCC:()=>s,shouldAlignOnDiscontinuities:()=>o});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./logger */"./src/utils/logger.ts"),a=n(/*! ../controller/level-helper */"./src/controller/level-helper.ts");function s(e,t){for(var n=null,i=0,r=e.length;i<r;i++){var a=e[i];if(a&&a.cc===t){n=a;break}}return n}function o(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function l(e,t,n){var i=e.fragments,a=t.fragments;if(a.length&&i.length){var o=s(i,a[0].cc);if(o&&(!o||o.startPTS))return o;r.logger.log("No frag in previous level to align on")}else r.logger.log("No fragments to align")}function u(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function c(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)u(n[i],e);t.fragmentHint&&u(t.fragmentHint,e),t.alignedSliding=!0}function d(e,t,n){t&&(function(e,t,n){if(o(e,n,t)){var a=l(n.details,t);a&&(0,i.isFiniteNumber)(a.start)&&(r.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),c(a.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&h(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||(0,a.adjustSliding)(t.details,n))}function h(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,s=(a-n)/1e3+t.fragments[0].start;s&&(0,i.isFiniteNumber)(s)&&(r.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+s.toFixed(3)+" "+e.url+" "),c(s,e))}}function p(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var n=e.fragments,i=t.fragments;if(n.length&&i.length){var r=i[Math.round(i.length/2)-1],a=s(n,r.cc)||n[Math.round(n.length/2)-1],o=r.programDateTime,l=a.programDateTime;null!==o&&null!==l&&c((l-o)/1e3-(a.start-r.start),e)}}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
    !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
    \***********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i=n(/*! ../utils/ewma */"./src/utils/ewma.ts");const r=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new i.default(e),this.fast_=new i.default(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,r=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new i.default(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new i.default(t,r.getEstimate(),r.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}()},"./src/utils/ewma.ts":
/*!***************************!*\
    !*** ./src/utils/ewma.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}()},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
    !*** ./src/utils/fetch-loader.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>v,fetchSupported:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts");function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,e)},s(e)}function o(e,t,n){return o=l()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&u(r,n.prototype),r},o.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}function h(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var p=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||f,this.controller=new self.AbortController,this.stats=new r.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var r=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var s=function(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(d({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}(e,this.controller.signal),o=n.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){r.abortInternal(),n.onTimeout(a,e,r.response)}),t.timeout),self.fetch(this.request).then((function(n){if(r.response=r.loader=n,!n.ok){var s=n.status,u=n.statusText;throw new g(u||"fetch, bad network response",s,n)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),o&&(0,i.isFiniteNumber)(t.highWaterMark)?r.loadProgressively(n,a,e,t.highWaterMark,o):l?n.arrayBuffer():n.text()})).then((function(s){var l=r.response;self.clearTimeout(r.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first);var c=s[u];c&&(a.loaded=a.total=c);var d={url:l.url,data:s};o&&!(0,i.isFiniteNumber)(t.highWaterMark)&&o(a,e,s,l),n.onSuccess(d,a,e,l)})).catch((function(t){if(self.clearTimeout(r.requestTimeout),!a.aborted){var i=t&&t.code||0,s=t?t.message:null;n.onError({code:i,text:s},e,t?t.details:null)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,i,r){void 0===i&&(i=0);var s=new a.default,o=e.body.getReader();return function a(){return o.read().then((function(o){if(o.done)return s.dataLength&&r(t,n,s.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=o.value,u=l.length;return t.loaded+=u,u<i||s.dataLength?(s.push(l),s.dataLength>=i&&r(t,n,s.flush(),e)):r(t,n,l,e),a()})).catch((function(){return Promise.reject()}))}()},e}();function f(e,t){return new self.Request(e.url,t)}var g=function(e){var t,n;function i(t,n,i){var r;return(r=e.call(this,t)||this).code=void 0,r.details=void 0,r.code=n,r.details=i,r}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),i}(s(Error));const v=p},"./src/utils/hex.ts":
/*!**************************!*\
    !*** ./src/utils/hex.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={hexDump:function(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);i.length<2&&(i="0"+i),t+=i}return t}}},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
    !*** ./src/utils/imsc1-ttml-parser.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{IMSC1_CODEC:()=>c,parseIMSC1:()=>f});var i=n(/*! ./mp4-tools */"./src/utils/mp4-tools.ts"),r=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ./vttcue */"./src/utils/vttcue.ts"),s=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),l=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,p={left:"start",center:"center",right:"end",start:"start",end:"end"};function f(e,t,n,r,c){var d=(0,i.findBox)(new Uint8Array(e),["mdat"]);if(0!==d.length){var h=d.map((function(e){return(0,s.utf8ArrayToStr)(e)})),f=(0,o.toTimescaleFromScale)(t,1,n);try{h.forEach((function(e){return r(function(e,t){var n=new DOMParser,i=n.parseFromString(e,"text/xml"),r=i.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((function(e,t){return e[t]=r.getAttribute("ttp:"+t)||s[t],e}),{}),c="preserve"!==r.getAttribute("xml:space"),d=v(g(r,"styling","style")),h=v(g(r,"layout","region")),f=g(r,"body","[begin]");return[].map.call(f,(function(e){var n=m(e,c);if(!n||!e.hasAttribute("begin"))return null;var i=E(e.getAttribute("begin"),o),r=E(e.getAttribute("dur"),o),s=E(e.getAttribute("end"),o);if(null===i)throw b(e);if(null===s){if(null===r)throw b(e);s=i+r}var f=new a.default(i-t,s-t,n);f.id=(0,l.generateCueId)(f.startTime,f.endTime,f.text);var g=function(e,t,n){var i="http://www.w3.org/ns/ttml#styling",r=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(r=n[s]),a.reduce((function(n,a){var s=y(t,i,a)||y(e,i,a)||y(r,i,a);return s&&(n[a]=s),n}),{})}(h[e.getAttribute("region")],d[e.getAttribute("style")],d),v=g.textAlign;if(v){var A=p[v];A&&(f.lineAlign=A),f.align=v}return u(f,g),f})).filter((function(e){return null!==e}))}(e,f))}))}catch(e){c(e)}}else c(new Error("Could not parse IMSC1 mdat"))}function g(e,t,n){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function v(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function m(e,t){return[].slice.call(e.childNodes).reduce((function(e,n,i){var r;return"br"===n.nodeName&&i?e+"\n":null!==(r=n.childNodes)&&void 0!==r&&r.length?m(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function y(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function b(e){return new Error("Could not parse ttml timestamp "+e)}function E(e,t){if(!e)return null;var n=(0,r.parseTimeStamp)(e);return null===n&&(d.test(e)?n=function(e,t){var n=d.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}(e,t):h.test(e)&&(n=function(e,t){var n=h.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}},"./src/utils/keysystem-util.ts":
/*!*************************************!*\
    !*** ./src/utils/keysystem-util.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{changeEndianness:()=>r,convertDataUriToArrayBytes:()=>a,strToUtf8array:()=>s});var i=n(/*! ./numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts");function r(e){var t=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function a(e){var t,n,r=e.split(":"),a=null;if("data"===r[0]&&2===r.length){var o=r[1].split(";"),l=o[o.length-1].split(",");if(2===l.length){var u="base64"===l[0],c=l[1];u?(o.splice(-1,1),a=(0,i.base64Decode)(c)):(t=s(c).subarray(0,16),(n=new Uint8Array(16)).set(t,16-t.length),a=n)}}return a}function s(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}},"./src/utils/logger.ts":
/*!*****************************!*\
    !*** ./src/utils/logger.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{enableLogs:()=>o,logger:()=>l});var i=function(){},r={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=r;function s(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):i}function o(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):s(t)}))}(e,"debug","log","info","warn","error");try{a.log('Debug logs enabled for "'+t+'"')}catch(e){a=r}}else a=r}var l=r},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
    !*** ./src/utils/mediakeys-helper.ts ***!
    \***************************************/(e,t,n)=>{var i,r,a;function s(e){switch(e){case r.FAIRPLAY:return i.FAIRPLAY;case r.PLAYREADY:return i.PLAYREADY;case r.WIDEVINE:return i.WIDEVINE;case r.CLEARKEY:return i.CLEARKEY}}function o(e){if(e===a.WIDEVINE)return i.WIDEVINE}function l(e){switch(e){case i.FAIRPLAY:return r.FAIRPLAY;case i.PLAYREADY:return r.PLAYREADY;case i.WIDEVINE:return r.WIDEVINE;case i.CLEARKEY:return r.CLEARKEY}}function u(e){var t=e.drmSystems,n=e.widevineLicenseUrl,r=t?[i.FAIRPLAY,i.WIDEVINE,i.PLAYREADY,i.CLEARKEY].filter((function(e){return!!t[e]})):[];return!r[i.WIDEVINE]&&n&&r.push(i.WIDEVINE),r}n.r(t),n.d(t,{KeySystemFormats:()=>r,KeySystemIds:()=>a,KeySystems:()=>i,getKeySystemsForConfig:()=>u,getSupportedMediaKeySystemConfigurations:()=>d,keySystemDomainToKeySystemFormat:()=>l,keySystemFormatToKeySystemDomain:()=>s,keySystemIdToKeySystemDomain:()=>o,requestMediaKeySystemAccess:()=>c}),function(e){e.CLEARKEY="org.w3.clearkey",e.FAIRPLAY="com.apple.fps",e.PLAYREADY="com.microsoft.playready",e.WIDEVINE="com.widevine.alpha"}(i||(i={})),function(e){e.CLEARKEY="org.w3.clearkey",e.FAIRPLAY="com.apple.streamingkeydelivery",e.PLAYREADY="com.microsoft.playready",e.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}(r||(r={})),function(e){e.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"}(a||(a={}));var c="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function d(e,t,n,r){var a;switch(e){case i.FAIRPLAY:a=["cenc","sinf"];break;case i.WIDEVINE:case i.PLAYREADY:a=["cenc"];break;case i.CLEARKEY:a=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return function(e,t,n,i){var r={initDataTypes:e,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:n.map((function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))};return[r]}(a,t,n,r)}},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
    !*** ./src/utils/mediasource-helper.ts ***!
    \*****************************************/(e,t,n)=>{function i(){return self.MediaSource||self.WebKitMediaSource}n.r(t),n.d(t,{getMediaSource:()=>i})},"./src/utils/mp4-tools.ts":
/*!********************************!*\
    !*** ./src/utils/mp4-tools.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{RemuxerTrackIdConfig:()=>c,appendUint8Array:()=>w,bin2str:()=>d,computeRawDurationFromSamples:()=>T,discardEPB:()=>R,findBox:()=>v,getDuration:()=>_,getStartDTS:()=>A,mp4Box:()=>P,mp4pssh:()=>O,offsetStartDTS:()=>k,parseEmsg:()=>L,parseInitSegment:()=>y,parsePssh:()=>x,parseSEIMessageFromNALu:()=>D,parseSamples:()=>C,parseSegmentIndex:()=>m,parseSinf:()=>E,patchEncyptionData:()=>b,readSint32:()=>f,readUint16:()=>h,readUint32:()=>p,segmentValidRange:()=>S,writeUint32:()=>g});var i=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),r=n(/*! ./typed-array */"./src/utils/typed-array.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ./hex */"./src/utils/hex.ts"),l=Math.pow(2,32)-1,u=[].push,c={video:1,audio:2,id3:3,text:4};function d(e){return String.fromCharCode.apply(null,e)}function h(e,t){var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function p(e,t){var n=f(e,t);return n<0?4294967296+n:n}function f(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function g(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function v(e,t){var n=[];if(!t.length)return n;for(var i=e.byteLength,r=0;r<i;){var a=p(e,r),s=a>1?r+a:i;if(d(e.subarray(r+4,r+8))===t[0])if(1===t.length)n.push(e.subarray(r+8,s));else{var o=v(e.subarray(r+8,s),t.slice(1));o.length&&u.apply(n,o)}r=s}return n}function m(e){var t=[],n=e[0],i=8,r=p(e,i);i+=4,i+=0===n?8:16,i+=2;var a=e.length+0,s=h(e,i);i+=2;for(var o=0;o<s;o++){var l=i,u=p(e,l);l+=4;var c=2147483647&u;if(1==(2147483648&u)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var d=p(e,l);l+=4,t.push({referenceSize:c,subsegmentDuration:d,info:{duration:d/r,start:a,end:a+c-1}}),a+=c,i=l+=4}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:s,references:t}}function y(e){for(var t=[],n=v(e,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],s=v(a,["tkhd"])[0];if(s){var o=s[0],l=0===o?12:20,u=p(s,l),c=v(a,["mdia","mdhd"])[0];if(c){var h=p(c,l=0===(o=c[0])?12:20),f=v(a,["mdia","hdlr"])[0];if(f){var g=d(f.subarray(8,12)),m={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[g];if(m){var y=v(a,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=d(y.subarray(12,16))),t[u]={timescale:h,type:m},t[m]={timescale:h,id:u,codec:b}}}}}}return v(e,["moov","mvex","trex"]).forEach((function(e){var n=p(e,4),i=t[n];i&&(i.default={duration:p(e,12),flags:p(e,20)})})),t}function b(e,t){if(!e||!t)return e;var n=t.keyId;return n&&t.isCommonEncryption&&v(e,["moov","trak"]).forEach((function(e){var t=v(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=v(t,["enca"]),r=i.length>0;r||(i=v(t,["encv"])),i.forEach((function(e){v(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t=E(e);if(t){var i=t.subarray(8,24);i.some((function(e){return 0!==e}))||(s.logger.log("[eme] Patching keyId in 'enc"+(r?"a":"v")+">sinf>>tenc' box: "+o.default.hexDump(i)+" -> "+o.default.hexDump(n)),t.set(n,8))}}))}))})),e}function E(e){var t=v(e,["schm"])[0];if(t){var n=d(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return v(e,["schi","tenc"])[0]}return s.logger.error("[eme] missing 'schm' box"),null}function A(e,t){return v(t,["moof","traf"]).reduce((function(t,n){var i=v(n,["tfdt"])[0],r=i[0],a=v(n,["tfhd"]).reduce((function(t,n){var a=p(n,4),s=e[a];if(s){var o=p(i,4);1===r&&(o*=Math.pow(2,32),o+=p(i,8));var l=o/(s.timescale||9e4);if(isFinite(l)&&(null===t||l<t))return l}return t}),null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t}),null)||0}function _(e,t){for(var n=0,r=0,a=0,s=v(e,["moof","traf"]),o=0;o<s.length;o++){var l=s[o],u=v(l,["tfhd"])[0],c=t[p(u,4)];if(c){var d=c.default,h=p(u,0)|(null==d?void 0:d.flags),f=null==d?void 0:d.duration;8&h&&(f=p(u,2&h?12:8));for(var g=c.timescale||9e4,y=v(l,["trun"]),b=0;b<y.length;b++)!(n=T(y[b]))&&f&&(n=f*p(y[b],4)),c.type===i.ElementaryStreamTypes.VIDEO?r+=n/g:c.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/g)}}if(0===r&&0===a){for(var E=0,A=v(e,["sidx"]),_=0;_<A.length;_++){var k=m(A[_]);null!=k&&k.references&&(E+=k.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return E}return r||a}function T(e){var t=p(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=p(e,4),a=0;a<r;a++)256&t&&(i+=p(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}function k(e,t,n){v(t,["moof","traf"]).forEach((function(t){v(t,["tfhd"]).forEach((function(i){var r=p(i,4),a=e[r];if(a){var s=a.timescale||9e4;v(t,["tfdt"]).forEach((function(e){var t=e[0],i=p(e,4);if(0===t)i-=n*s,g(e,4,i=Math.max(i,0));else{i*=Math.pow(2,32),i+=p(e,8),i-=n*s,i=Math.max(i,0);var r=Math.floor(i/(l+1)),a=Math.floor(i%(l+1));g(e,4,r),g(e,8,a)}}))}}))}))}function S(e){var t={valid:null,remainder:null},n=v(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var i=n[n.length-1];return t.valid=(0,r.sliceUint8)(e,0,i.byteOffset-8),t.remainder=(0,r.sliceUint8)(e,i.byteOffset-8),t}function w(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function C(e,t){var n=[],r=t.samples,a=t.timescale,s=t.id,o=!1;return v(r,["moof"]).map((function(l){var u=l.byteOffset-8;v(l,["traf"]).map((function(l){var c=v(l,["tfdt"]).map((function(e){var t=e[0],n=p(e,4);return 1===t&&(n*=Math.pow(2,32),n+=p(e,8)),n/a}))[0];return void 0!==c&&(e=c),v(l,["tfhd"]).map((function(c){var d=p(c,4),h=16777215&p(c,0),g=0,m=0!=(16&h),y=0,b=0!=(32&h),E=8;d===s&&(0!=(1&h)&&(E+=8),0!=(2&h)&&(E+=4),0!=(8&h)&&(g=p(c,E),E+=4),m&&(y=p(c,E),E+=4),b&&(E+=4),"video"===t.type&&(o=function(e){if(!e)return!1;var t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),v(l,["trun"]).map((function(s){var l=s[0],c=16777215&p(s,0),d=0!=(1&c),h=0,v=0!=(4&c),m=0!=(256&c),b=0,E=0!=(512&c),A=0,_=0!=(1024&c),T=0!=(2048&c),k=0,S=p(s,4),w=8;d&&(h=p(s,w),w+=4),v&&(w+=4);for(var C=h+u,R=0;R<S;R++){if(m?(b=p(s,w),w+=4):b=g,E?(A=p(s,w),w+=4):A=y,_&&(w+=4),T&&(k=0===l?p(s,w):f(s,w),w+=4),t.type===i.ElementaryStreamTypes.VIDEO)for(var L=0;L<A;){var P=p(r,C);I(o,r[C+=4])&&D(r.subarray(C,C+P),o?2:1,e+k/a,n),C+=P,L+=P+4}e+=b/a}})))}))}))})),n}function I(e,t){if(e){var n=t>>1&63;return 39===n||40===n}return 6==(31&t)}function D(e,t,n,i){var r=R(e),s=0;s+=t;for(var o=0,l=0,u=!1,c=0;s<r.length;){o=0;do{if(s>=r.length)break;o+=c=r[s++]}while(255===c);l=0;do{if(s>=r.length)break;l+=c=r[s++]}while(255===c);var d=r.length-s;if(!u&&4===o&&s<r.length){if(u=!0,181===r[s++]){var f=h(r,s);if(s+=2,49===f){var g=p(r,s);if(s+=4,1195456820===g){var v=r[s++];if(3===v){var m=r[s++],y=64&m,b=y?2+3*(31&m):0,E=new Uint8Array(b);if(y){E[0]=m;for(var A=1;A<b;A++)E[A]=r[s++]}i.push({type:v,payloadType:o,pts:n,bytes:E})}}}}}else if(5===o&&l<d){if(u=!0,l>16){for(var _=[],T=0;T<16;T++){var k=r[s++].toString(16);_.push(1==k.length?"0"+k:k),3!==T&&5!==T&&7!==T&&9!==T||_.push("-")}for(var S=l-16,w=new Uint8Array(S),C=0;C<S;C++)w[C]=r[s++];i.push({payloadType:o,pts:n,uuid:_.join(""),userData:(0,a.utf8ArrayToStr)(w),userDataBytes:w})}}else if(l<d)s+=l;else if(l>d)break}}function R(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a}function L(e){var t=e[0],n="",i="",r=0,a=0,s=0,o=0,l=0,u=0;if(0===t){for(;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;for(n+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1,r=p(e,12),a=p(e,16),o=p(e,20),l=p(e,24),u=28}else if(1===t){r=p(e,u+=4);var c=p(e,u+=4),h=p(e,u+=4);for(u+=4,s=Math.pow(2,32)*c+h,Number.isSafeInteger(s)||(s=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=p(e,u),l=p(e,u+=4),u+=4;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;for(n+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(u,e.byteLength)}}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length,a=8,s=r;s--;)a+=n[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(e,4),s=0,a=8;s<r;s++)o.set(n[s],a),a+=n[s].byteLength;return o}function O(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i,r,a;if(t){i=1,r=new Uint8Array(16*t.length);for(var s=0;s<t.length;s++){var o=t[s];if(16!==o.byteLength)throw new RangeError("Invalid key");r.set(o,16*s)}}else i=0,r=new Uint8Array;i>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(l.buffer).setUint32(0,n.byteLength,!1),P([112,115,115,104],new Uint8Array([i,0,0,0]),e,a,r,l,n||new Uint8Array)}function x(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=o.default.hexDump(new Uint8Array(e,12,16));var r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}},"./src/utils/numeric-encoding-utils.ts":
/*!*********************************************!*\
    !*** ./src/utils/numeric-encoding-utils.ts ***!
    \*********************************************/(e,t,n)=>{function i(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function r(e){return btoa(e)}function a(e){return atob(e)}function s(e){return btoa(String.fromCharCode.apply(String,e))}function o(e){return i(s(e))}function l(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}n.r(t),n.d(t,{base64Decode:()=>l,base64DecodeToStr:()=>a,base64Encode:()=>s,base64ToBase64Url:()=>i,base64UrlEncode:()=>o,strToBase64Encode:()=>r})},"./src/utils/output-filter.ts":
/*!************************************!*\
    !*** ./src/utils/output-filter.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
    !*** ./src/utils/texttrack-utils.ts ***!
    \**************************************/(e,t,n)=>{n.r(t),n.d(t,{addCueToTrack:()=>a,clearCurrentCues:()=>s,getCuesInRange:()=>l,removeCuesInRange:()=>o,sendAddTrackEvent:()=>r});var i=n(/*! ./logger */"./src/utils/logger.ts");function r(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function a(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){i.logger.debug("[texttrack-utils]: "+n);var r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}"disabled"===n&&(e.mode=n)}function s(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function o(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=l(e.cues,t,n),s=0;s<a.length;s++)i&&!i(a[s])||e.removeCue(a[s]);"disabled"===r&&(e.mode=r)}function l(e,t,n){var i=[],r=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(r>-1)for(var a=r,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=n)i.push(o);else if(o.startTime>n)return i}return i}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
    !*** ./src/utils/time-ranges.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
    !*** ./src/utils/timescale-conversion.ts ***!
    \*******************************************/(e,t,n)=>{function i(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=e*t*n;return i?Math.round(r):r}function r(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=!1),i(e,t,1/n,r)}function a(e,t){return void 0===t&&(t=!1),i(e,1e3,1/9e4,t)}function s(e,t){return void 0===t&&(t=1),i(e,9e4,1/t)}n.r(t),n.d(t,{toMpegTsClockFromTimescale:()=>s,toMsFromMpegTsClock:()=>a,toTimescaleFromBase:()=>i,toTimescaleFromScale:()=>r})},"./src/utils/typed-array.ts":
/*!**********************************!*\
    !*** ./src/utils/typed-array.ts ***!
    \**********************************/(e,t,n)=>{function i(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.r(t),n.d(t,{sliceUint8:()=>i})},"./src/utils/vttcue.ts":
/*!*****************************!*\
    !*** ./src/utils/vttcue.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(e){return n(t,e)}function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)e[s]=a[s]}return e}function a(t,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",c=!1,d=t,h=a,p=s,f=null,g="",v=!0,m="auto",y="start",b=50,E="middle",A=50,_="middle";Object.defineProperty(o,"id",r({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",r({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},l,{get:function(){return g},set:function(t){var i=function(t){return n(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},l,{get:function(){return A},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},l,{get:function(){return _},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":
/*!********************************!*\
    !*** ./src/utils/vttparser.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{VTTParser:()=>h,fixLineBreaks:()=>d,parseTimeStamp:()=>a});var i=n(/*! ./vttcue */"./src/utils/vttcue.ts"),r=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function a(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var s=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function o(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);2===s.length&&t(s[0],s[1])}}var l=new i.default(0,0,""),u="middle"===l.align?"middle":"center";function c(e,t,n){var i=e;function r(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=r(),c(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),c(),t.endTime=r(),c(),function(e,t){var i=new s;o(e,(function(e,t){var r;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){i.set(e,n[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),i.integer(e,r[0]),i.percent(e,r[0])&&i.set("snapToLines",!1),i.alt(e,r[0],["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",u,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",u,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===l.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",u);var a=i.get("position","auto");"auto"===a&&50===l.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var h=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new r,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:r=n(),t.state){case"HEADER":/:/.test(r)?o(r,(function(e,t){}),/:/):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new i.default(0,0,""),t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c(r,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==r.indexOf("--\x3e");if(!r||l&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r;continue;case"BADCUE":r||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
    !*** ./src/utils/webvtt-parser.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{generateCueId:()=>d,parseWebVTT:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),s=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),o=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),l=/\r\n|\n\r|\n|\r/g,u=function(e,t,n){return void 0===n&&(n=0),e.slice(n,n+t.length)===t},c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function d(e,t,n){return c(e.toString())+c(t.toString())+c(n)}function h(e,t,n,c,h,p,f,g){var v,m=new r.VTTParser,y=(0,a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(l,"\n").split("\n"),b=[],E=(0,s.toMpegTsClockFromTimescale)(t,n),A="00:00.000",_=0,T=0,k=!0;m.oncue=function(e){var t=c[h],n=c.ccOffset,i=(_-E)/9e4;null!=t&&t.new&&(void 0!==T?n=c.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!==(a=r)&&void 0!==a&&a.new;){var a;e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC]}e.presentationOffset=n}(c,h,i)),i&&(n=i-c.presentationOffset);var r=e.endTime-e.startTime,a=(0,o.normalizePts)(9e4*(e.startTime+n-T),9e4*p)/9e4;e.startTime=Math.max(a,0),e.endTime=Math.max(a+r,0);var s=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(s)),e.id||(e.id=d(e.startTime,e.endTime,s)),e.endTime>0&&b.push(e)},m.onparsingerror=function(e){v=e},m.onflush=function(){v?g(v):f(b)},y.forEach((function(e){if(k){if(u(e,"X-TIMESTAMP-MAP=")){k=!1,e.slice(16).split(",").forEach((function(e){u(e,"LOCAL:")?A=e.slice(6):u(e,"MPEGTS:")&&(_=parseInt(e.slice(7)))}));try{T=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!((0,i.isFiniteNumber)(t)&&(0,i.isFiniteNumber)(n)&&(0,i.isFiniteNumber)(r)&&(0,i.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*r)+36e5*a}(A)/1e3}catch(e){v=e}return}""===e&&(k=!1)}m.parse(e+"\n")})),m.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
    !*** ./src/utils/xhr-loader.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,s=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new r.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var r=this.xhrSetup;try{if(r)try{r(n,t.url)}catch(e){n.open("GET",t.url,!0),r(n,t.url)}n.readyState||n.open("GET",t.url,!0);var a=this.context.headers;if(a)for(var s in a)n.setRequestHeader(s,a[s])}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var r=t.readyState,a=this.config;if(!n.aborted&&r>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===r){t.onreadystatechange=null,t.onprogress=null;var s=t.status,o="arraybuffer"===t.responseType;if(s>=200&&s<300&&(o&&t.response||null!==t.responseText)){var l,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u=o?(l=t.response).byteLength:(l=t.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var c=this.callbacks.onProgress;if(c&&c(n,e,l,t),!this.callbacks)return;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,n,e,t)}else n.retry>=a.maxRetry||s>=400&&s<499?(i.logger.error(s+" while loading "+e.url),this.callbacks.onError({code:s,text:t.statusText},e,t)):(i.logger.warn(s+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){i.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();const o=s},"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/e=>{var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,i,a,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,a||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,s=new Array(a);r<a;r++)s[r]=i[r].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,a),!0;case 6:return c.fn.call(c.context,t,i,r,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;case 4:c[u].fn.call(c[u].context,t,i,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/function(e){var t,n,i,r,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return i.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=a.normalizePath(d)}else u.path=o.path,s.params||(u.params=o.params,s.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(u)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n("./src/hls.ts");return i=i.default})(),e.exports=n())})),Cs=la(ws),Is=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"audioTracks",get:function(){return this.playback._hls.audioTracks||[]}},{key:"setup",value:function(){if(this.playback._hls){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback._hls.once(Cs.Events.AUDIO_TRACKS_UPDATED,(function(){return e.setup()}))}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.lang||t.name||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){return this.checkIfAudioTrackDescriptive(e)?"description":""}},{key:"checkIfAudioTrackDescriptive",value:function(e){var t,n;return null===(t=e.attrs)||void 0===t||null===(n=t.CHARACTERISTICS)||void 0===n?void 0:n.includes("public.accessibility.describes-video")}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._hls&&(this.playback._hls.audioTrack=this.selectedAudio.id)}}]),n}(Ts),Ds=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"html5PlayerElement",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.el}},{key:"audioTracks",get:function(){var e,t=null===(e=this.html5PlayerElement)||void 0===e?void 0:e.audioTracks;return"object"===r(t)&&(t=Object.keys(t).map((function(e){return t[e]}))),t||[]}},{key:"setup",value:function(){if(this.html5PlayerElement){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.html5PlayerElement.audioTracks.addEventListener("addtrack",(function(){return e.setup()}),{once:!0})}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.language||t.label||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){var t=e.kind;return"description"===t?t:""}},{key:"updateAudioPlayback",value:function(){var e=this;this.audioTracks.forEach((function(t){t.enabled=t.id.toString()===e.selectedAudio.id.toString()}))}}]),n}(Ts),Rs=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"audio_selector"}},{key:"optionName",get:function(){return"audio"}},{key:"title",get:function(){return"&Aacute;udio"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de áudio</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return this.core.options.defaultAudio||ms}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&this.listenToOnce(this.playback,Le.PLAYBACK_READY,this.onPlaybackReady)}},{key:"onPlaybackReady",value:function(){this.listenToOnce(this.playback.playback,Le.PLAYBACK_LOADEDMETADATA,this.setup)}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this;this.availableOptions=[];var t=this.playback.innerPlaybackName;if(t){if(this.selector&&this.stopListening(this.selector),"dash_shaka_playback"===t)this.selector=new Ss(this.playback);else if("hls"===t)this.selector=new Is(this.playback);else{if(!["html5","html5_video","hls_fairplay_playback"].includes(t))return void we.info(this.name,"could not setup audio selector");this.selector=new Ds(this.playback)}this.listenTo(this.selector,In.WM_AUDIOSELECTOR_READY,this.onSelectorReady),this.listenTo(this.selector,In.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.selector,In.WM_AUDIO_AVAILABLE,(function(t){e.container.trigger(In.WM_AUDIO_AVAILABLE,t)})),this.selector.setup()}else we.info(this.name,"should not setup audio selector")}},{key:"onSelectorReady",value:function(){this.availableOptions=this.selector.availableOptions,this.orderAudioTracks(),this.trigger(In.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"orderAudioTracks",value:function(){var e=this.availableOptions.filter((function(e){return e.keys.includes("por")})),t=this.availableOptions.filter((function(e){return!e.keys.includes("por")}));e=e.sort((function(e,t){return e.role.localeCompare(t.role)})),t=t.sort((function(e,t){return e.label.localeCompare(t.label)})),this.availableOptions=[].concat(y(e),y(t))}},{key:"playbackUpdate",value:function(e){this.selector.audioSwitch(e)}},{key:"onAudioChanged",value:function(e){this.container.trigger(In.WM_AUDIO_CHANGED,e)}},{key:"getCurrentOption",value:function(){return this.selector.getCurrentOption()}}]),n}(os),Ls=".settings__menu",Ps=".settings__options",Os=".settings__back-button",xs=".settings__header",Ms=".settings__back-button__title",Ns="settings__title-option",Bs="settings__box--options-rendered",Us=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).hideSettingsBoxHandler=function(e){e instanceof KeyboardEvent&&"Escape"!==e.key||i.hideSettingsBox()},i}return o(n,[{key:"name",get:function(){return"settings"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return je('<div role="menu" class="settings__box settings__box--hidden" data-controls>\n  <button type="button" class="settings__back-button settings__back-button--hidden">\n    <span class="settings__back-icon">\n      <%= backIcon %>\n      <span class="visually-hidden">Voltar para Seleção de Áudio e Legenda</span>\n    </span>\n    <span class="settings__back-button__title settings__title"></span>\n  </button>\n  <div class="settings__header">\n    <span class="settings__title">Configurações</span>\n    <button type="button" class="settings__close settings__close--hidden"><%= closeIcon %></button>\n  </div>\n  <div class="settings__body">\n    <div class="settings__menu">\n      <% for (var i = 0; i < selectors.length; i++) { %>\n        <button type="button" class="settings__menu-item" data-selector-name="<%= selectors[i].name %>" role="menuitem" aria-expanded="false">\n          <span class="settings__menu-item-option">\n            <span class="settings__menu-item-icon" aria-hidden="true"><%= selectors[i].icon %></span>\n            <span class="settings__menu-item-title"><%= selectors[i].title %></span>\n          </span>\n          <span class="settings__menu-item-selected">\n            <div class="settings__menu-item-label">\n              <span class="settings__menu-item-label-language"><%= selectors[i].selected.language %></span>\n              <span class="settings__menu-item-label-role"><%= selectors[i].selected.role %></span>\n            </div>\n            <span class="settings__menu-item-arrow-icon"><%= arrowIcon %></span>\n          </span>\n        </button>\n      <% } %>\n    </div>\n    <div class="settings__options settings__options--hidden"></div>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"settings","data-settings":""}}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"events",get:function(){return{click:"toggleSettingsBox"}}},{key:"selectors",get:function(){return this._selectors=this._selectors||[new Rs(this.core),new vs(this.core)],this._selectors}},{key:"availableSelectors",get:function(){return this.selectors.filter((function(e){return e.shouldRender()}))}},{key:"getExternalInterface",value:function(){return{getSelectedSettings:this.getSelectedSettings,getDefaultSettings:this.getDefaultSettings}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.mediaControl,Le.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,Le.MEDIACONTROL_HIDE,this.onMediaControlhide),this.selectors.forEach((function(t){e.listenTo(t,In.WM_SETTINGS_OPTIONS_CHANGED,e.render)}))}},{key:"onMediaControlhide",value:function(){if(!this.mediaControl.keepVisible&&this.isSettingsBoxVisible){this.$settingsBox.remove();var e=this.mediaControl.$modal;e&&e.removeClass("settings__modal"),this.resetSettings(),this.triggerDidHideModalElement()}}},{key:"bindMenuClickEvents",value:function(){this.unbindMenuClickEvents(),this.$settingsMenuitem=this.$settingsBox.find(".settings__menu-item"),this.$settingsMenuitem.on("click",this.clickMenu.bind(this))}},{key:"unbindMenuClickEvents",value:function(){this.$settingsMenuitem&&this.$settingsMenuitem.off("click")}},{key:"bindSettingsEvents",value:function(){var e=this;this.unbindSettingsEvents(),this.$settingsOptionsTitle=this.$settingsBox.find(".settings__options-title"),this.$settingsBox.on("click",(function(e){return e.stopPropagation()})),this.bindMenuClickEvents(),$n((function(){X(document).one("click",e.hideSettingsBoxHandler),X(document).on("keyup",e.hideSettingsBoxHandler),e.listenTo(e.mediaControl,In.MEDIACONTROL_ITEMCLICKED,e.hideSettingsBoxHandler)}))}},{key:"unbindSettingsEvents",value:function(){this.$settingsOptionsTitle&&this.$settingsOptionsTitle.off("click"),this.$settingsClose&&this.$settingsClose.off("click"),X(document).off("click",this.hideSettingsBoxHandler),X(document).off("keyup",this.hideSettingsBoxHandler),this.stopListening(this.mediaControl,In.MEDIACONTROL_ITEMCLICKED,this.hideSettingsBoxHandler)}},{key:"onContainerChanged",value:function(){this.resetSettings(),this.render()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(this.settingsFullScreenEnabled))}},{key:"updateSettingsFullScreenState",value:function(e){this.settingsFullScreenEnabled=this.currentWidth<540,this.isSettingsBoxVisible&&e!==this.settingsFullScreenEnabled&&(this.settingsFullScreenEnabled?this.showSettingsFullScreen():this.hideSettingsFullScreen())}},{key:"getPanelBetweenHeight",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__between");return e&&e.height()}},{key:"getSettingBoxHeaderHeight",value:function(){var e=this.mediaControl.$modal.find(".settings__back-button");return e&&e.height()}},{key:"updateSettingsBoxMaxHeight",value:function(){if(this.isSettingsBoxVisible){var e=this.getPanelBetweenHeight(),t=this.getSettingBoxHeaderHeight();if(e>=0&&t>=0){var n=e-t;this.mediaControl.$modal.find(".settings__body").css({maxHeight:n})}}}},{key:"clickMenu",value:function(e){e.stopPropagation();var t=X(e.target).data("selector-name"),n=this.selectors.find((function(e){return e.name===t}));this.fromMenuToOptions(),this.renderOptions(n),this.isKeyboardAction(e)&&n.$el.find(".settings__options-item--active").focus()}},{key:"renderOptions",value:function(e){this.$settingsBox.find(Ps).html(e.render().el),this.$settingsBox.find(Ms).html(e.title).attr("aria-hidden",!0).addClass(Ns),this.$settingsBox.find(".settings__back-button").on("click",this.fromOptionsToMenu.bind(this))}},{key:"fromMenuToOptions",value:function(){this.$settingsBox.addClass(Bs),this.$settingsBox.find(Ls).addClass("settings__menu--hidden"),this.$settingsBox.find(xs).addClass("settings__header--hidden"),this.$settingsBox.find(Ps).removeClass("settings__options--hidden"),this.$settingsBox.find(Os).removeClass("settings__back-button--hidden"),this.updateSettingsBoxMaxHeight()}},{key:"fromOptionsToMenu",value:function(e){e&&e.stopPropagation(),this.$settingsBox.removeClass(Bs),this.$settingsBox.find(Ls).removeClass("settings__menu--hidden"),this.$settingsBox.find(xs).removeClass("settings__header--hidden"),this.$settingsBox.find(Ps).addClass("settings__options--hidden"),this.$settingsBox.find(Os).addClass("settings__back-button--hidden"),this.$settingsBox.find(Ms).html("Configurações").attr("aria-hidden",!1).removeClass(Ns),this.updateSettingsBoxMaxHeight(),this.updateAllSelectors()}},{key:"updateButtonAttrs",value:function(e){this.$el.find(".settings__button").attr("aria-expanded",e)}},{key:"isKeyboardAction",value:function(e){return 0===(null==e?void 0:e.detail)}},{key:"toggleSettingsBox",value:function(e){e.stopPropagation(),this.isSettingsBoxVisible?this.hideSettingsBox():this.showSettingsBox(e)}},{key:"showSettingsBox",value:function(e){var t=this,n=this.template({selectors:this.availableSelectors,arrowIcon:as,backIcon:Xr,closeIcon:Qa});this.triggerWillShowModalElement(),this.settingsFullScreenEnabled||(this.$settingsBox=X(n),this.$el.append(this.$settingsBox),this.updateButtonAttrs(!0),$n((function(){return t.$settingsBox.removeClass("settings__box--hidden")}))),this.mediaControl.$modal.addClass("settings__modal"),this.mediaControl.trigger(In.WM_SETTINGS_SHOW),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_SHOW,"<div/>"),this.isSettingsBoxVisible=!0,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(!1),this.bindSettingsEvents(),this.mediaControl.setKeepVisible(),this.isKeyboardAction(e)&&this.el.querySelector(".settings__menu-item").focus()}},{key:"updateAllSelectors",value:function(){var e=this;this.availableSelectors.forEach((function(t){e.updateSelectorValue(t)}))}},{key:"updateSelectorValue",value:function(e){var t,n,i="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-language"),r="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-role"),a=null===(t=this.$settingsBox)||void 0===t?void 0:t.find(i),s=null===(n=this.$settingsBox)||void 0===n?void 0:n.find(r);null==a||a.html(e.selected.language),null==s||s.html(e.selected.role),this.bindMenuClickEvents()}},{key:"showSettingsFullScreen",value:function(){var e=this;if(this.isSettingsBoxVisible){this.$settingsBox&&this.$settingsBox.remove();var t=this.template({selectors:this.availableSelectors,arrowIcon:as,backIcon:Xr,closeIcon:Qa});this.mediaControl.updatePanelsVisibility({hide:!0}),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_SHOW,t),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause(),this.$settingsBox=this.mediaControl.$modal.find(".settings__box"),this.$settingsBox.addClass("settings__fullscreen"),this.bindSettingsEvents(),$n((function(){e.$settingsBox.removeClass("settings__box--hidden"),e.$settingsClose=e.$settingsBox.find(".settings__close"),e.$settingsClose&&e.$settingsClose.removeClass("settings__close--hidden"),e.$settingsClose&&e.$settingsClose.on("click",e.hideSettingsBox.bind(e))}))}}},{key:"hideSettingsBox",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSettingsBoxVisible&&(this.$settingsBox.addClass("settings__box--hidden"),this.updateButtonAttrs(!1),this.$settingsBox.one("transitionend",(function(){return e.$settingsBox.remove()})),this.unbindSettingsEvents(),this.resetSettings(),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_HIDE,t),this.mediaControl.trigger(In.WM_SETTINGS_HIDE),this.mediaControl.resetKeepVisible(),this.triggerDidHideModalElement(),this.resetSettings(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"hideSettingsFullScreen",value:function(){this.mediaControl.updatePanelsVisibility({hide:!1}),this.showSettingsBox()}},{key:"resetSettings",value:function(){this.isSettingsBoxVisible=!1}},{key:"getSelectedSettings",value:function(){var e={};return this.availableSelectors.forEach((function(t){e[t.optionName]=t.getCurrentOption()})),e}},{key:"getDefaultSettings",value:function(){var e={};return this.selectors.forEach((function(t){e[t.optionName]=t.defaultOption})),e}},{key:"shouldRender",value:function(){return this.availableSelectors.length>0&&"ad"!==this.core.getPlaybackType()}},{key:"render",value:function(){if(!this.isSettingsBoxVisible){this.$el.html("");var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.volume-modal--visible .settings__box {\n  opacity: 0.3;\n}\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .media-control-panel__modal {\n  z-index: -1;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-option, .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-selected {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item {\n  padding: 8px 32px 8px 60px;\n}\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item--active {\n  padding-left: 4px;\n}\n.clappr-player#wp3-player-0 .media-control .media-control-panel .settings .settings__box--hidden {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel__modal.settings__modal {\n  z-index: 998;\n}\n.clappr-player#wp3-player-0 .media-control.w360 .settings__box, .clappr-player#wp3-player-0 .media-control.w480 .settings__box, .clappr-player#wp3-player-0 .media-control.w540 .settings__box {\n  background-color: transparent;\n}\n.clappr-player#wp3-player-0 .settings {\n  position: relative;\n  cursor: pointer;\n  line-height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__button {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .settings__box {\n  position: absolute;\n  right: 12px;\n  bottom: 64px;\n  cursor: default;\n  border-radius: 8px;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 998;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  will-change: opacity;\n}\n.clappr-player#wp3-player-0 .settings__box--options-rendered .settings__title {\n  padding-right: 32px;\n}\n.clappr-player#wp3-player-0 .settings__header {\n  display: none;\n}\n.clappr-player#wp3-player-0 .settings__back-button {\n  display: flex;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  background: none;\n  align-items: center;\n  flex-shrink: 0;\n  cursor: pointer;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__back-button--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .settings__body {\n  flex-grow: 2;\n  box-sizing: content-box;\n  padding: 12px 0;\n  align-items: center;\n  max-height: 91px;\n  overflow: auto;\n}\n.clappr-player#wp3-player-0 .settings__menu, .clappr-player#wp3-player-0 .settings__options, .clappr-player#wp3-player-0 .settings__options-wrapper, .clappr-player#wp3-player-0 .settings__options-menu {\n  max-height: inherit;\n}\n.clappr-player#wp3-player-0 .settings__title {\n  display: flex;\n  padding: 12px;\n  align-items: center;\n  opacity: 0.5;\n  font-family: "opensans-regular";\n  letter-spacing: -0.5;\n  font-size: 15px;\n  line-height: 1;\n  color: #FFFFFF;\n  text-transform: capitalize;\n}\n.clappr-player#wp3-player-0 .settings__title-option {\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .settings__close {\n  display: none;\n  box-sizing: content-box;\n  width: 24px;\n  height: 24px;\n  padding: 12px;\n  cursor: pointer;\n  border: 0;\n  background: none;\n}\n.clappr-player#wp3-player-0 .settings__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__separator {\n  display: block;\n  width: 100%;\n  height: 1px;\n  border: 0;\n  background-color: #666;\n  opacity: 0.4;\n  margin: 12px 0;\n}\n.clappr-player#wp3-player-0 .settings__menu {\n  list-style-type: none;\n  background: none;\n  padding: 0;\n  margin: 0;\n  height: auto;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu > li {\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: space-between;\n  align-self: stretch;\n  position: static;\n  line-height: 1.14;\n  padding: 0;\n  margin: 0;\n  background: none;\n  border: 0;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-language, .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n  display: inline-block;\n  font-family: "opensans-regular", sans-serif;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #888A89;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-language {\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-label-role {\n  font-size: 13px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-option {\n  padding: 4px 0 4px 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-selected {\n  padding: 4px 16px 4px 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item:hover {\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-option {\n  display: flex;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-title {\n  display: inline;\n  pointer-events: none;\n  font-family: "opensans-regular", sans-serif;\n  text-transform: capitalize;\n  font-size: 14px;\n  line-height: 1.14;\n  color: #FFFFFF;\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-selected {\n  display: flex;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-arrow-icon {\n  width: 24px;\n  height: 24px;\n  margin-left: 8px;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-arrow-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-value {\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  color: #FFFFFF;\n  opacity: 0.5;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .settings__menu-item-title, .clappr-player#wp3-player-0 .settings__menu-item-value {\n  height: 16px;\n}\n.clappr-player#wp3-player-0 .settings__menu--hidden {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .settings__back-icon {\n  display: flex;\n  cursor: pointer;\n  width: 24px;\n  height: 24px;\n  padding: 12px;\n  margin-right: 4px;\n  box-sizing: content-box;\n  border: 0;\n  background: none;\n}\n.clappr-player#wp3-player-0 .settings__back-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options {\n  display: flex;\n  cursor: pointer;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options-wrapper {\n  margin: 0 auto;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options-header {\n  display: flex;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .settings__options-title {\n  display: flex;\n  cursor: pointer;\n  opacity: 0.7;\n  font-family: "opensans-regular", sans-serif;\n  color: #FFFFFF;\n  text-transform: capitalize;\n  text-align: left;\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .settings__options-menu {\n  list-style-type: none;\n  background: none;\n  padding: 0;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-item {\n  display: flex;\n  align-items: center;\n  box-sizing: content-box;\n  height: 24px;\n  padding: 6px 32px 6px 56px;\n  background: none;\n  font-family: "opensans-regular", sans-serif;\n  font-weight: 400;\n  line-height: 1.14;\n  color: #FFFFFF;\n  opacity: 1;\n  border: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-item::before {\n  content: "";\n}\n.clappr-player#wp3-player-0 .settings__options-item-label {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-language, .clappr-player#wp3-player-0 .settings__options-item-label-role {\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-language {\n  font-size: 15px;\n}\n.clappr-player#wp3-player-0 .settings__options-item-label-role {\n  font-size: 13px;\n}\n.clappr-player#wp3-player-0 .settings__options-item--active {\n  margin-left: 0;\n  font-weight: 700;\n  font-family: "opensans-regular", sans-serif;\n  opacity: 1;\n  padding-left: 0;\n}\n.clappr-player#wp3-player-0 .settings__options-active-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  padding: 0 16px;\n  box-sizing: content-box;\n}\n.clappr-player#wp3-player-0 .settings__options-active-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .settings__options--hidden {\n  display: none !important;\n}',{playerId:this.core.options.playerId}),t=Cn.getStyleFrom(".clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-radius: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header--hidden {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__body {\n  max-height: calc(100% - 57px) !important;\n  max-width: 336px;\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  flex-direction: column;\n  max-height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-title {\n  align-self: center;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-value {\n  line-height: 1.14;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options {\n  max-height: 100%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-wrapper {\n  margin-left: 20%;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-title {\n  height: 24px;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-item {\n  padding-right: 88px;\n}\n.clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__close {\n  display: flex;\n}",{playerId:this.core.options.playerId});if(this.$el.append(e[0]).append(t[0]),this.shouldRender()){this.$el.removeClass("media-control-element--hidden"),this.$el.attr("style","");var n=X('<button type="button" aria-haspopup="true" aria-expanded="false" class="settings__button media-control-button"></button>');n.append('<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="#EEEEEE"/>\n<mask id="mask0_6_301" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="3" width="21" height="20">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="white"/>\n</mask>\n<g mask="url(#mask0_6_301)">\n</g>\n</svg>\n<span class="visually-hidden">Opções de áudio e legenda</span>'),this.$el.append(n)}else this.$el.addClass("media-control-element--hidden");return this}}}]),n}(Ii),Fs=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).supportedTypes={vod:{thumb:function(e){return i.updateThumbForVod(e)},text:function(e){return i.thumbTextForVod(e)}},live:{thumb:function(e){return i.updateThumbForLive(e)},text:function(e){return i.thumbTextForLive(e)}}},i}return o(n,[{key:"name",get:function(){return"thumb-preview"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"seekbar",get:function(){return this._seekbar||(this._seekbar=this.core.getPlugin("seekbar"))}},{key:"template",get:function(){return je('<div class="thumb-preview__thumb"></div>\n<div class="thumb-preview__position"></div>\n')}},{key:"attributes",get:function(){return{class:"thumb-preview"}}},{key:"thumbHost",get:function(){return this.options.env.name,"".concat(this.options.env.protocol,"://live.video.globo.com/thumbs/")}},{key:"bindEvents",value:function(){this.mediaControl&&(this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.show),this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.calculatePosition),this.listenTo(this.mediaControl,Le.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hide),this.listenTo(this.mediaControl,Le.MEDIACONTROL_HIDE,this.hide),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,Le.CORE_RESIZE,this.checkOutline),this.trigger("plugin:thumbpreview:ready"),this.bindContainerEvents())}},{key:"bindContainerEvents",value:function(){this.mediaControl.container&&(this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.container.playback&&this.stopListening(this.container.playback),this.listenTo(this.container,Le.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container.playback,In.WM_RESOURCE_SELECTED,this.onResourceSelected))}},{key:"checkOutline",value:function(){Ee.Fullscreen.fullscreenElement()&&J.isIE11?this.$el.find(".thumb-preview__thumb").addClass("thumb-preview__thumb--no-outline"):this.$el.find(".thumb-preview__thumb").removeClass("thumb-preview__thumb--no-outline")}},{key:"onResourceSelected",value:function(e){this.thumbUrl=e.selectedResource&&e.selectedResource.thumbUrl}},{key:"updateThumbForVod",value:function(e){if(this.lastTimestamp!==e)if(this.lastTimestamp=e,this.thumbUrl){var t=Math.floor(e/60),n=Math.floor(e%60/5),i=this.getThumbUrlForVod(t);this.$el.css({height:this.thumbSize.height,width:this.thumbSize.width}),this.$el.find(".thumb-preview__thumb").css({"background-image":"url(".concat(i,")"),"background-position":"center ".concat(n*-this.thumbSize.height,"px")}),this.mediaControl.$el.removeClass("thumb-preview-basic")}else this.mediaControl.$el.addClass("thumb-preview-basic")}},{key:"getThumbUrlForVod",value:function(e){return"".concat(this.thumbUrl,"/x96/tile/").concat(e,".jpg")}},{key:"thumbTextForVod",value:function(e){return e.formattedTime}},{key:"updateThumbForLive",value:function(e){var t=this;this.throttledUpdateThumb||(this.throttledUpdateThumb=Ia((function(e){var n=Math.floor(Date.now()/1e3),i=t.mediaControl.container.playback.getDuration(),r=10*Math.floor((n-(i-e))/10),a=t.getThumbUrlForLive(r);t.$el.css({height:t.thumbSize.height,width:t.thumbSize.width}),t.$el.find(".thumb-preview__thumb").css({"background-image":"url("+a+")","background-size":"cover"})}),500,!0)),this.mediaControl.container.playback.dvrEnabled&&this.throttledUpdateThumb(e)}},{key:"getThumbUrlForLive",value:function(e){var t=this.core.getCurrentPlayback().video.transmission.signal;return"".concat(this.thumbHost+t,".jpg?width=172&height=97&utc=").concat(e)}},{key:"thumbTextForLive",value:function(e){if(100===this.mediaControl.currentSeekPercentage){var t=this.mediaControl.container.playback.getDuration()-e.timestamp;return"Voltar "+this.formatTimeInterval(t)}return e.formattedTime}},{key:"show",value:function(e){this.$el.removeClass("thumb-preview--hidden"),this.canShow(e)?(this.core.trigger(In.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.css({"z-index":997}),this.$el.removeClass("thumb-preview--hidden")):this.hide()}},{key:"canShow",value:function(){return this.mediaControl.container.playback.settings.seekEnabled&&Object.keys(this.supportedTypes).includes(this.playbackType)}},{key:"hide",value:function(){this.$el.addClass("thumb-preview--hidden"),this.core.trigger(In.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"settingsUpdate",value:function(){this.playbackType=this.mediaControl.container.getPlaybackType(),this.thumbSize={width:170,height:96}}},{key:"containerChanged",value:function(){var e=this,t=this.core.getPlugin("seek_time");t.render=function(){return e.render()},t.stopListening(this.mediaControl.container,Le.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),t.update=function(t){return e.update(t)},t.listenTo(this.mediaControl.container,Le.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),this.bindContainerEvents(),this.settingsUpdate(),this.trigger("plugin:thumbpreview:ready")}},{key:"render",value:function(){var e=this.core.getPlugin("seek_time");if(this.mediaControl&&e){this.$el.html(this.template());var t=Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control.settings-modal--visible .thumb-preview {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control.touch .thumb-preview {\n  bottom: 52px;\n}\n.clappr-player#wp3-player-0 .thumb-preview {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  bottom: 44px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .thumb-preview--hidden {\n  opacity: 0;\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .thumb-preview__thumb {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.75);\n  border-radius: 2px;\n  outline: 1px solid transparent;\n  background-repeat: no-repeat;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .thumb-preview__thumb--no-outline {\n  outline: 0 !important;\n}\n.clappr-player#wp3-player-0 .thumb-preview__position {\n  padding: 2px 8px 3px;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  color: #fff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  border-radius: 2px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  z-index: 100;\n  align-self: flex-end;\n}\n.clappr-player#wp3-player-0 .w425 .thumb-preview, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: auto;\n  height: 16px;\n}\n.clappr-player#wp3-player-0 .w425 .thumb-preview__position, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview__position {\n  display: inline-block;\n  overflow: hidden;\n  position: initial;\n  padding: 0 6px;\n  width: auto;\n  height: auto;\n  font-size: 10px;\n  line-height: 16px;\n}',{playerId:this.core.options.playerId});this.$el.append(t[0]),e.setElement(this.el),this.seekbar.$seekBarContainer.append(this.el),this.$el.addClass("thumb-preview--hidden")}else this.listenToOnce(this,"plugin:thumbpreview:ready",this.render);this.checkOutline()}},{key:"calculatePosition",value:function(e){var t=e.touches&&e.touches.length>0&&e.touches[e.touches.length-1]||{},n=(e.pageX||t.pageX)-this.seekbar.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))}},{key:"update",value:function(){var e=this.core.getPlugin("seek_time");if(this.hoverPosition&&e.hoveringOverSeekBar){var t=this.hoverPosition*this.core.getCurrentContainer().getDuration(),n=Ee.formatTime(t),i=this.seekbar.$seekBarContainer;if(!i.length)return;if(isNaN(t))return;if(Object.keys(this.supportedTypes).includes(this.playbackType)){var r=this.supportedTypes[this.playbackType].thumb,a=this.supportedTypes[this.playbackType].text,s=i.width(),o=this.$el.width()/2,l=this.hoverPosition*s-o,u=s-this.$el.width();l=Math.max(0,Math.min(l,u)),this.$el.css("left",l),this.$el.find(".thumb-preview__position").text(a({timestamp:t,formattedTime:n})),this.core.mediaControl.$el.hasClass("w425")||r(t)}}}},{key:"formatTimeInterval",value:function(e){var t=!1;e*=1e3;var n=(e=parseInt(e/1e3,10))%60,i=(e=parseInt(e/60,10))%60,r=(e=parseInt(e/60,10))%24,a="";return r&&r>0&&(a+=r.toString().slice(-2)+"h",t=!0),i&&i>0&&(a+=i.toString().slice(-2)+"m"),t||(a+=("0"+n).slice(-2)+"s"),a.trim()}},{key:"destroy",value:function(){this._mediaControl=null,v(c(n.prototype),"destroy",this).call(this)}}]),n}(qe),Vs={default:{10:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#0095DA"/>\n  <g opacity="0.3">\n    <path d="M20.5925 38.7763H15.2603V24.1773C15.2603 23.7746 15.266 23.2799 15.2775 22.6932C15.289 22.095 15.3063 21.4853 15.3293 20.864C15.3523 20.2313 15.3753 19.6618 15.3983 19.1556C15.2718 19.3052 15.0129 19.5641 14.6218 19.9322C14.2421 20.2888 13.8855 20.6109 13.5519 20.8986L10.6528 23.2282L8.08157 20.0185L16.2094 13.5473H20.5925V38.7763Z" fill="#111111"/>\n    <path d="M41.9184 26.1618C41.9184 28.198 41.7573 30.0157 41.4352 31.6148C41.1246 33.2139 40.6184 34.5714 39.9167 35.6874C39.2264 36.8033 38.3176 37.6546 37.1901 38.2413C36.0627 38.828 34.6937 39.1214 33.0831 39.1214C31.0583 39.1214 29.396 38.6095 28.096 37.5856C26.796 36.5502 25.8354 35.0661 25.2141 33.1334C24.5929 31.1892 24.2823 28.8653 24.2823 26.1618C24.2823 23.4353 24.5641 21.1056 25.1278 19.1729C25.7031 17.2287 26.6349 15.7389 27.9234 14.7035C29.2119 13.6681 30.9318 13.1504 33.0831 13.1504C35.0963 13.1504 36.753 13.6681 38.053 14.7035C39.3645 15.7274 40.3366 17.2114 40.9693 19.1556C41.602 21.0884 41.9184 23.4238 41.9184 26.1618ZM29.58 26.1618C29.58 28.083 29.6836 29.6879 29.8906 30.9763C30.1092 32.2533 30.4716 33.2139 30.9778 33.8582C31.484 34.5024 32.1858 34.8245 33.0831 34.8245C33.9689 34.8245 34.6649 34.5082 35.1711 33.8754C35.6888 33.2312 36.057 32.2706 36.2755 30.9936C36.4941 29.7051 36.6034 28.0945 36.6034 26.1618C36.6034 24.2406 36.4941 22.6357 36.2755 21.3472C36.057 20.0587 35.6888 19.0924 35.1711 18.4481C34.6649 17.7924 33.9689 17.4645 33.0831 17.4645C32.1858 17.4645 31.484 17.7924 30.9778 18.4481C30.4716 19.0924 30.1092 20.0587 29.8906 21.3472C29.6836 22.6357 29.58 24.2406 29.58 26.1618Z" fill="#111111"/>\n  </g>\n  <path d="M18.5925 36.7763H13.2603V22.1773C13.2603 21.7746 13.266 21.2799 13.2775 20.6932C13.289 20.095 13.3063 19.4853 13.3293 18.864C13.3523 18.2313 13.3753 17.6618 13.3983 17.1556C13.2718 17.3052 13.0129 17.5641 12.6218 17.9322C12.2421 18.2888 11.8855 18.6109 11.5519 18.8986L8.65279 21.2282L6.08157 18.0185L14.2094 11.5473H18.5925V36.7763Z" fill="#EEEEEE"/>\n  <path d="M39.9184 24.1618C39.9184 26.198 39.7573 28.0157 39.4352 29.6148C39.1246 31.2139 38.6184 32.5714 37.9167 33.6874C37.2264 34.8033 36.3176 35.6546 35.1901 36.2413C34.0627 36.828 32.6937 37.1214 31.0831 37.1214C29.0583 37.1214 27.396 36.6095 26.096 35.5856C24.796 34.5502 23.8354 33.0661 23.2141 31.1334C22.5929 29.1892 22.2823 26.8653 22.2823 24.1618C22.2823 21.4353 22.5641 19.1056 23.1278 17.1729C23.7031 15.2287 24.6349 13.7389 25.9234 12.7035C27.2119 11.6681 28.9318 11.1504 31.0831 11.1504C33.0963 11.1504 34.753 11.6681 36.053 12.7035C37.3644 13.7274 38.3366 15.2114 38.9693 17.1556C39.602 19.0884 39.9184 21.4238 39.9184 24.1618ZM27.58 24.1618C27.58 26.083 27.6836 27.6879 27.8906 28.9763C28.1092 30.2533 28.4716 31.2139 28.9778 31.8582C29.484 32.5024 30.1857 32.8245 31.0831 32.8245C31.9689 32.8245 32.6649 32.5082 33.1711 31.8754C33.6888 31.2312 34.057 30.2706 34.2755 28.9936C34.4941 27.7051 34.6034 26.0945 34.6034 24.1618C34.6034 22.2406 34.4941 20.6357 34.2755 19.3472C34.057 18.0587 33.6888 17.0924 33.1711 16.4481C32.6649 15.7924 31.9689 15.4645 31.0831 15.4645C30.1857 15.4645 29.484 15.7924 28.9778 16.4481C28.4716 17.0924 28.1092 18.0587 27.8906 19.3472C27.6836 20.6357 27.58 22.2406 27.58 24.1618Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',12:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#FBC115"/>\n  <g opacity="0.3">\n    <path d="M20.452 39.1504H15.0346V24.3183C15.0346 23.9092 15.0405 23.4066 15.0522 22.8105C15.0638 22.2028 15.0814 21.5833 15.1048 20.9521C15.1281 20.3093 15.1515 19.7307 15.1749 19.2165C15.0463 19.3684 14.7833 19.6314 14.3859 20.0054C14.0002 20.3677 13.6379 20.695 13.299 20.9872L10.3536 23.354L7.7413 20.0931L15.9989 13.5186H20.452V39.1504Z" fill="#111111"/>\n    <path d="M42.2587 39.1504H24.3409V35.381L30.7752 28.8766C32.0726 27.5442 33.1128 26.4338 33.8959 25.5455C34.6907 24.6456 35.2634 23.8274 35.614 23.0911C35.9764 22.3547 36.1575 21.5658 36.1575 20.7242C36.1575 19.7074 35.8712 18.9476 35.2985 18.4451C34.7374 17.9308 33.9836 17.6737 33.0368 17.6737C32.0434 17.6737 31.0791 17.9016 30.144 18.3574C29.209 18.8132 28.2331 19.4619 27.2162 20.3035L24.2708 16.8146C25.0072 16.1834 25.7844 15.5873 26.6026 15.0263C27.4324 14.4653 28.3908 14.0153 29.4778 13.6764C30.5765 13.3257 31.8914 13.1504 33.4225 13.1504C35.1056 13.1504 36.5491 13.4543 37.753 14.0621C38.9685 14.6698 39.9035 15.4997 40.5581 16.5516C41.2126 17.5918 41.5399 18.7723 41.5399 20.0931C41.5399 21.5073 41.2594 22.7989 40.6983 23.9677C40.1373 25.1365 39.3191 26.2936 38.2438 27.439C37.1802 28.5844 35.8946 29.8526 34.3868 31.2434L31.0908 34.3466V34.5921H42.2587V39.1504Z" fill="#111111"/>\n  </g>\n  <path d="M18.452 37.1504H13.0346V22.3183C13.0346 21.9092 13.0405 21.4066 13.0522 20.8105C13.0638 20.2028 13.0814 19.5833 13.1048 18.9521C13.1281 18.3093 13.1515 17.7307 13.1749 17.2165C13.0463 17.3684 12.7833 17.6314 12.3859 18.0054C12.0002 18.3677 11.6379 18.695 11.299 18.9872L8.35358 21.354L5.7413 18.0931L13.9989 11.5186H18.452V37.1504Z" fill="#EEEEEE"/>\n  <path d="M40.2587 37.1504H22.3409V33.381L28.7752 26.8766C30.0726 25.5442 31.1128 24.4338 31.8959 23.5455C32.6907 22.6456 33.2634 21.8274 33.614 21.0911C33.9764 20.3547 34.1575 19.5658 34.1575 18.7242C34.1575 17.7074 33.8712 16.9476 33.2985 16.4451C32.7374 15.9308 31.9836 15.6737 31.0368 15.6737C30.0434 15.6737 29.0791 15.9016 28.144 16.3574C27.209 16.8132 26.2331 17.4619 25.2162 18.3035L22.2708 14.8146C23.0072 14.1834 23.7844 13.5873 24.6026 13.0263C25.4324 12.4653 26.3908 12.0153 27.4778 11.6764C28.5765 11.3257 29.8914 11.1504 31.4225 11.1504C33.1056 11.1504 34.5491 11.4543 35.753 12.0621C36.9685 12.6698 37.9035 13.4997 38.5581 14.5516C39.2126 15.5918 39.5399 16.7723 39.5399 18.0931C39.5399 19.5073 39.2594 20.7989 38.6983 21.9677C38.1373 23.1365 37.3191 24.2936 36.2438 25.439C35.1802 26.5844 33.8946 27.8526 32.3868 29.2434L29.0908 32.3466V32.5921H40.2587V37.1504Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',14:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#F58220"/>\n  <g opacity="0.3">\n    <path d="M20.15 38.8496H14.7184V23.9785C14.7184 23.5684 14.7243 23.0645 14.736 22.4668C14.7477 21.8574 14.7653 21.2363 14.7887 20.6035C14.8121 19.959 14.8356 19.3789 14.859 18.8633C14.7301 19.0156 14.4664 19.2793 14.068 19.6543C13.6813 20.0176 13.318 20.3457 12.9782 20.6387L10.025 23.0117L7.4059 19.7422L15.6852 13.1504H20.15V38.8496Z" fill="#111111"/>\n    <path d="M42.5941 33.5234H39.5004V38.8496H34.1918V33.5234H23.223V29.7441L34.4906 13.1504H39.5004V29.3047H42.5941V33.5234ZM34.1918 29.3047V24.9453C34.1918 24.5352 34.1976 24.0488 34.2093 23.4863C34.2328 22.9238 34.2562 22.3613 34.2797 21.7988C34.3031 21.2363 34.3265 20.7383 34.35 20.3047C34.3851 19.8594 34.4086 19.5488 34.4203 19.373H34.2797C34.057 19.8535 33.8226 20.3223 33.5765 20.7793C33.3304 21.2246 33.0433 21.6934 32.7152 22.1855L28.0043 29.3047H34.1918Z" fill="#111111"/>\n  </g>\n  <path d="M18.15 36.8496H12.7184V21.9785C12.7184 21.5684 12.7243 21.0645 12.736 20.4668C12.7477 19.8574 12.7653 19.2363 12.7887 18.6035C12.8121 17.959 12.8356 17.3789 12.859 16.8633C12.7301 17.0156 12.4664 17.2793 12.068 17.6543C11.6813 18.0176 11.318 18.3457 10.9782 18.6387L8.02504 21.0117L5.4059 17.7422L13.6852 11.1504H18.15V36.8496Z" fill="#EEEEEE"/>\n  <path d="M40.5941 31.5234H37.5004V36.8496H32.1918V31.5234H21.223V27.7441L32.4906 11.1504H37.5004V27.3047H40.5941V31.5234ZM32.1918 27.3047V22.9453C32.1918 22.5352 32.1976 22.0488 32.2093 21.4863C32.2328 20.9238 32.2562 20.3613 32.2797 19.7988C32.3031 19.2363 32.3265 18.7383 32.35 18.3047C32.3851 17.8594 32.4086 17.5488 32.4203 17.373H32.2797C32.057 17.8535 31.8226 18.3223 31.5765 18.7793C31.3304 19.2246 31.0433 19.6934 30.7152 20.1855L26.0043 27.3047H32.1918Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',16:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#EC1D25"/>\n  <g opacity="0.3">\n    <path d="M20.4401 39.1484H15.0084V24.2773C15.0084 23.8672 15.0143 23.3633 15.026 22.7656C15.0377 22.1562 15.0553 21.5352 15.0788 20.9023C15.1022 20.2578 15.1256 19.6777 15.1491 19.1621C15.0202 19.3145 14.7565 19.5781 14.358 19.9531C13.9713 20.3164 13.608 20.6445 13.2682 20.9375L10.3151 23.3105L7.69594 20.041L15.9752 13.4492H20.4401V39.1484Z" fill="#111111"/>\n    <path d="M24.1634 28.2324C24.1634 26.7559 24.2689 25.2969 24.4799 23.8555C24.7025 22.4023 25.0834 21.0371 25.6224 19.7598C26.1615 18.4707 26.9174 17.334 27.89 16.3496C28.8627 15.3535 30.099 14.5742 31.599 14.0117C33.099 13.4375 34.9154 13.1504 37.0482 13.1504C37.5521 13.1504 38.1381 13.1738 38.806 13.2207C39.4857 13.2559 40.0482 13.3203 40.4935 13.4141V17.7559C40.0248 17.6504 39.5209 17.5684 38.9818 17.5098C38.4545 17.4395 37.9271 17.4043 37.3998 17.4043C35.267 17.4043 33.6146 17.7441 32.4427 18.4238C31.2826 19.1035 30.4623 20.0469 29.9818 21.2539C29.5131 22.4492 29.2377 23.8438 29.1556 25.4375H29.3841C29.7123 24.8633 30.1224 24.3535 30.6146 23.9082C31.1185 23.4629 31.7279 23.1113 32.4427 22.8535C33.1576 22.584 33.9955 22.4492 34.9564 22.4492C36.4564 22.4492 37.7572 22.7715 38.8588 23.416C39.9603 24.0488 40.8099 24.9688 41.4076 26.1758C42.0052 27.3828 42.3041 28.8535 42.3041 30.5879C42.3041 32.4395 41.9466 34.0332 41.2318 35.3691C40.517 36.7051 39.5033 37.7305 38.1908 38.4453C36.89 39.1484 35.3431 39.5 33.5502 39.5C32.2377 39.5 31.0131 39.2773 29.8763 38.832C28.7396 38.375 27.7435 37.6836 26.8881 36.7578C26.0326 35.832 25.3646 34.666 24.8841 33.2598C24.4037 31.8418 24.1634 30.166 24.1634 28.2324ZM33.4447 35.1582C34.5111 35.1582 35.3783 34.7949 36.0463 34.0684C36.7142 33.3418 37.0482 32.2051 37.0482 30.6582C37.0482 29.4043 36.7552 28.4199 36.1693 27.7051C35.5951 26.9785 34.722 26.6152 33.5502 26.6152C32.7533 26.6152 32.0502 26.7969 31.4408 27.1602C30.8431 27.5117 30.3802 27.9629 30.0521 28.5137C29.724 29.0527 29.5599 29.6094 29.5599 30.1836C29.5599 30.7812 29.642 31.373 29.806 31.959C29.9701 32.5449 30.2162 33.0781 30.5443 33.5586C30.8724 34.0391 31.2767 34.4258 31.7572 34.7188C32.2494 35.0117 32.8119 35.1582 33.4447 35.1582Z" fill="#111111"/>\n  </g>\n  <path d="M18.4401 37.1484H13.0084V22.2773C13.0084 21.8672 13.0143 21.3633 13.026 20.7656C13.0377 20.1562 13.0553 19.5352 13.0788 18.9023C13.1022 18.2578 13.1256 17.6777 13.1491 17.1621C13.0202 17.3145 12.7565 17.5781 12.358 17.9531C11.9713 18.3164 11.608 18.6445 11.2682 18.9375L8.31508 21.3105L5.69594 18.041L13.9752 11.4492H18.4401V37.1484Z" fill="#EEEEEE"/>\n  <path d="M22.1634 26.2324C22.1634 24.7559 22.2689 23.2969 22.4799 21.8555C22.7025 20.4023 23.0834 19.0371 23.6224 17.7598C24.1615 16.4707 24.9174 15.334 25.89 14.3496C26.8627 13.3535 28.099 12.5742 29.599 12.0117C31.099 11.4375 32.9154 11.1504 35.0482 11.1504C35.5521 11.1504 36.1381 11.1738 36.806 11.2207C37.4857 11.2559 38.0482 11.3203 38.4935 11.4141V15.7559C38.0248 15.6504 37.5209 15.5684 36.9818 15.5098C36.4545 15.4395 35.9271 15.4043 35.3998 15.4043C33.267 15.4043 31.6146 15.7441 30.4427 16.4238C29.2826 17.1035 28.4623 18.0469 27.9818 19.2539C27.5131 20.4492 27.2377 21.8438 27.1556 23.4375H27.3841C27.7123 22.8633 28.1224 22.3535 28.6146 21.9082C29.1185 21.4629 29.7279 21.1113 30.4427 20.8535C31.1576 20.584 31.9955 20.4492 32.9564 20.4492C34.4564 20.4492 35.7572 20.7715 36.8588 21.416C37.9603 22.0488 38.8099 22.9688 39.4076 24.1758C40.0052 25.3828 40.3041 26.8535 40.3041 28.5879C40.3041 30.4395 39.9466 32.0332 39.2318 33.3691C38.517 34.7051 37.5033 35.7305 36.1908 36.4453C34.89 37.1484 33.3431 37.5 31.5502 37.5C30.2377 37.5 29.0131 37.2773 27.8763 36.832C26.7396 36.375 25.7435 35.6836 24.8881 34.7578C24.0326 33.832 23.3646 32.666 22.8841 31.2598C22.4037 29.8418 22.1634 28.166 22.1634 26.2324ZM31.4447 33.1582C32.5111 33.1582 33.3783 32.7949 34.0463 32.0684C34.7142 31.3418 35.0482 30.2051 35.0482 28.6582C35.0482 27.4043 34.7552 26.4199 34.1693 25.7051C33.5951 24.9785 32.722 24.6152 31.5502 24.6152C30.7533 24.6152 30.0502 24.7969 29.4408 25.1602C28.8431 25.5117 28.3802 25.9629 28.0521 26.5137C27.724 27.0527 27.5599 27.6094 27.5599 28.1836C27.5599 28.7812 27.642 29.373 27.806 29.959C27.9701 30.5449 28.2162 31.0781 28.5443 31.5586C28.8724 32.0391 29.2767 32.4258 29.7572 32.7188C30.2494 33.0117 30.8119 33.1582 31.4447 33.1582Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',18:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="black"/>\n  <path d="M19.4928 37.1836H14.0612V22.3125C14.0612 21.9023 14.067 21.3984 14.0787 20.8008C14.0905 20.1914 14.108 19.5703 14.1315 18.9375C14.1549 18.293 14.1784 17.7129 14.2018 17.1973C14.0729 17.3496 13.8092 17.6133 13.4108 17.9883C13.0241 18.3516 12.6608 18.6797 12.3209 18.9727L9.36781 21.3457L6.74867 18.0762L15.028 11.4844H19.4928V37.1836Z" fill="#EEEEEE"/>\n  <path d="M32.2513 11.1504C33.7279 11.1504 35.0873 11.3789 36.3295 11.8359C37.5834 12.293 38.5853 12.9844 39.3353 13.9102C40.0853 14.8242 40.4603 15.9727 40.4603 17.3555C40.4603 18.3867 40.2552 19.2891 39.8451 20.0625C39.4466 20.8359 38.9017 21.5156 38.2103 22.1016C37.5189 22.6758 36.7338 23.1797 35.8548 23.6133C36.7689 24.0938 37.6361 24.6562 38.4564 25.3008C39.2767 25.9336 39.9447 26.6777 40.4603 27.5332C40.9877 28.3887 41.2513 29.3848 41.2513 30.5215C41.2513 31.9512 40.8705 33.1934 40.1088 34.248C39.347 35.291 38.2923 36.0996 36.9447 36.6738C35.597 37.248 34.0326 37.5352 32.2513 37.5352C30.3295 37.5352 28.6947 37.2598 27.347 36.709C25.9994 36.1582 24.974 35.373 24.2709 34.3535C23.5677 33.3223 23.2162 32.0918 23.2162 30.6621C23.2162 29.4902 23.433 28.4707 23.8666 27.6035C24.3119 26.7363 24.9095 25.9922 25.6595 25.3711C26.4095 24.7383 27.2357 24.1992 28.1381 23.7539C27.3763 23.2734 26.6791 22.7285 26.0463 22.1191C25.4252 21.5098 24.9271 20.8125 24.5521 20.0273C24.1888 19.2422 24.0072 18.3398 24.0072 17.3203C24.0072 15.9609 24.3881 14.8242 25.1498 13.9102C25.9232 12.9961 26.9369 12.3105 28.1908 11.8535C29.4447 11.3848 30.7982 11.1504 32.2513 11.1504ZM28.2435 30.3457C28.2435 31.2715 28.5716 32.0391 29.2279 32.6484C29.8959 33.2461 30.8802 33.5449 32.181 33.5449C33.5287 33.5449 34.5365 33.2578 35.2045 32.6836C35.8724 32.0977 36.2064 31.3301 36.2064 30.3809C36.2064 29.7246 36.0131 29.1504 35.6263 28.6582C35.2513 28.166 34.7767 27.7266 34.2025 27.3398C33.6283 26.9414 33.0482 26.5723 32.4623 26.2324L31.9877 25.9863C31.2377 26.3262 30.5814 26.707 30.0189 27.1289C29.4681 27.5508 29.0345 28.0254 28.7181 28.5527C28.4017 29.0801 28.2435 29.6777 28.2435 30.3457ZM32.2162 15.123C31.3256 15.123 30.5873 15.3516 30.0013 15.8086C29.4154 16.2656 29.1224 16.9102 29.1224 17.7422C29.1224 18.3281 29.2631 18.8438 29.5443 19.2891C29.8373 19.7227 30.2181 20.1035 30.6869 20.4316C31.1673 20.7598 31.6888 21.0645 32.2513 21.3457C32.7904 21.0879 33.2943 20.8008 33.7631 20.4844C34.2318 20.168 34.6127 19.7871 34.9056 19.3418C35.1986 18.8965 35.3451 18.3633 35.3451 17.7422C35.3451 16.9102 35.0463 16.2656 34.4486 15.8086C33.8627 15.3516 33.1185 15.123 32.2162 15.123Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',L:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#00A651"/>\n  <path opacity="0.3" d="M17 39.1504V13.1504H22.4928V34.5977H33V39.1504H17Z" fill="#111111"/>\n  <path d="M15 37.1504V11.1504H20.4928V32.5977H31V37.1504H15Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>'},self_rated:{10:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#0095DA"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.2529L15.077 32.2574H9.96604L9.16981 36.2529H4.5L9.63248 14.8462H15.303L20.5 36.2529H15.8517ZM14.1947 27.5327L13.5168 24.033C13.359 23.2553 13.1653 22.2491 12.9358 21.0145C12.7134 19.7798 12.5664 18.8952 12.4946 18.3605C12.4301 18.8563 12.3009 19.6729 12.1073 20.8103C11.9208 21.9477 11.5011 24.1885 10.8484 27.5327H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 36.2529H24.4707V23.8604L24.5146 21.8242L24.5879 19.5977C23.8359 20.3496 23.3135 20.8428 23.0205 21.0771L20.5596 23.0547L18.377 20.3301L25.2764 14.8369H28.9971V36.2529Z" fill="#111111"/>\n    <path d="M45.7979 25.5449C45.7979 29.2852 45.1826 32.0537 43.9521 33.8506C42.7314 35.6475 40.8467 36.5459 38.2979 36.5459C35.8271 36.5459 33.9619 35.6182 32.7021 33.7627C31.4521 31.9072 30.8271 29.168 30.8271 25.5449C30.8271 21.7656 31.4375 18.9824 32.6582 17.1953C33.8789 15.3984 35.7588 14.5 38.2979 14.5C40.7686 14.5 42.6338 15.4375 43.8936 17.3125C45.1631 19.1875 45.7979 21.9316 45.7979 25.5449ZM35.3242 25.5449C35.3242 28.1719 35.5488 30.0566 35.998 31.1992C36.457 32.332 37.2236 32.8984 38.2979 32.8984C39.3525 32.8984 40.1143 32.3223 40.583 31.1699C41.0518 30.0176 41.2861 28.1426 41.2861 25.5449C41.2861 22.918 41.0469 21.0332 40.5684 19.8906C40.0996 18.7383 39.3428 18.1621 38.2979 18.1621C37.2334 18.1621 36.4717 18.7383 36.0127 19.8906C35.5537 21.0332 35.3242 22.918 35.3242 25.5449Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.7529L13.577 30.7574H8.46604L7.66981 34.7529H3L8.13248 13.3462H13.803L19 34.7529H14.3517ZM12.6947 26.0327L12.0168 22.533C11.859 21.7553 11.6653 20.7491 11.4358 19.5145C11.2134 18.2798 11.0664 17.3952 10.9946 16.8605C10.9301 17.3563 10.8009 18.1729 10.6073 19.3103C10.4208 20.4477 10.0011 22.6885 9.34835 26.0327H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.7529H22.9717V22.3604L23.0156 20.3242L23.0889 18.0977C22.3369 18.8496 21.8145 19.3428 21.5215 19.5771L19.0605 21.5547L16.8779 18.8301L23.7773 13.3369H27.498V34.7529Z" fill="#EEEEEE"/>\n  <path d="M44.2988 24.0449C44.2988 27.7852 43.6836 30.5537 42.4531 32.3506C41.2324 34.1475 39.3477 35.0459 36.7988 35.0459C34.3281 35.0459 32.4629 34.1182 31.2031 32.2627C29.9531 30.4072 29.3281 27.668 29.3281 24.0449C29.3281 20.2656 29.9385 17.4824 31.1592 15.6953C32.3799 13.8984 34.2598 13 36.7988 13C39.2695 13 41.1348 13.9375 42.3945 15.8125C43.6641 17.6875 44.2988 20.4316 44.2988 24.0449ZM33.8252 24.0449C33.8252 26.6719 34.0498 28.5566 34.499 29.6992C34.958 30.832 35.7246 31.3984 36.7988 31.3984C37.8535 31.3984 38.6152 30.8223 39.084 29.6699C39.5527 28.5176 39.7871 26.6426 39.7871 24.0449C39.7871 21.418 39.5479 19.5332 39.0693 18.3906C38.6006 17.2383 37.8438 16.6621 36.7988 16.6621C35.7344 16.6621 34.9727 17.2383 34.5137 18.3906C34.0547 19.5332 33.8252 21.418 33.8252 24.0449Z" fill="#EEEEEE"/>\n</svg>',12:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#FBC115"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.2236L15.077 32.2281H9.96604L9.16981 36.2236H4.5L9.63248 14.8169H15.303L20.5 36.2236H15.8517ZM14.1947 27.5034L13.5168 24.0037C13.359 23.226 13.1653 22.2198 12.9358 20.9852C12.7134 19.7505 12.5664 18.8659 12.4946 18.3312C12.4301 18.827 12.3009 19.6436 12.1073 20.781C11.9208 21.9184 11.5011 24.1592 10.8484 27.5034H14.1947Z" fill="#111111"/>\n    <path d="M28.9697 36.2236H24.4434V23.8311C24.4434 23.4893 24.4482 23.0693 24.458 22.5713C24.4678 22.0635 24.4824 21.5459 24.502 21.0186C24.5215 20.4814 24.541 19.998 24.5605 19.5684C24.4531 19.6953 24.2334 19.915 23.9014 20.2275C23.5791 20.5303 23.2764 20.8037 22.9932 21.0479L20.5322 23.0254L18.3496 20.3008L25.249 14.8076H28.9697V36.2236Z" fill="#111111"/>\n    <path d="M45.917 36.2236H30.9463V33.0742L36.3223 27.6396C37.4062 26.5264 38.2754 25.5986 38.9297 24.8564C39.5938 24.1045 40.0723 23.4209 40.3652 22.8057C40.668 22.1904 40.8193 21.5312 40.8193 20.8281C40.8193 19.9785 40.5801 19.3438 40.1016 18.9238C39.6328 18.4941 39.0029 18.2793 38.2119 18.2793C37.3818 18.2793 36.5762 18.4697 35.7949 18.8506C35.0137 19.2314 34.1982 19.7734 33.3486 20.4766L30.8877 17.5615C31.5029 17.0342 32.1523 16.5361 32.8359 16.0674C33.5293 15.5986 34.3301 15.2227 35.2383 14.9395C36.1562 14.6465 37.2549 14.5 38.5342 14.5C39.9404 14.5 41.1465 14.7539 42.1523 15.2617C43.168 15.7695 43.9492 16.4629 44.4961 17.3418C45.043 18.2109 45.3164 19.1973 45.3164 20.3008C45.3164 21.4824 45.082 22.5615 44.6133 23.5381C44.1445 24.5146 43.4609 25.4814 42.5625 26.4385C41.6738 27.3955 40.5996 28.4551 39.3398 29.6172L36.5859 32.21V32.415H45.917V36.2236Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.7236L13.577 30.7281H8.46604L7.66981 34.7236H3L8.13248 13.3169H13.803L19 34.7236H14.3517ZM12.6947 26.0034L12.0168 22.5037C11.859 21.726 11.6653 20.7198 11.4358 19.4852C11.2134 18.2505 11.0664 17.3659 10.9946 16.8312C10.9301 17.327 10.8009 18.1436 10.6073 19.281C10.4208 20.4184 10.0011 22.6592 9.34835 26.0034H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.4697 34.7236H22.9434V22.3311C22.9434 21.9893 22.9482 21.5693 22.958 21.0713C22.9678 20.5635 22.9824 20.0459 23.002 19.5186C23.0215 18.9814 23.041 18.498 23.0605 18.0684C22.9531 18.1953 22.7334 18.415 22.4014 18.7275C22.0791 19.0303 21.7764 19.3037 21.4932 19.5479L19.0322 21.5254L16.8496 18.8008L23.749 13.3076H27.4697V34.7236Z" fill="#EEEEEE"/>\n  <path d="M44.417 34.7236H29.4463V31.5742L34.8223 26.1396C35.9062 25.0264 36.7754 24.0986 37.4297 23.3564C38.0938 22.6045 38.5723 21.9209 38.8652 21.3057C39.168 20.6904 39.3193 20.0312 39.3193 19.3281C39.3193 18.4785 39.0801 17.8438 38.6016 17.4238C38.1328 16.9941 37.5029 16.7793 36.7119 16.7793C35.8818 16.7793 35.0762 16.9697 34.2949 17.3506C33.5137 17.7314 32.6982 18.2734 31.8486 18.9766L29.3877 16.0615C30.0029 15.5342 30.6523 15.0361 31.3359 14.5674C32.0293 14.0986 32.8301 13.7227 33.7383 13.4395C34.6562 13.1465 35.7549 13 37.0342 13C38.4404 13 39.6465 13.2539 40.6523 13.7617C41.668 14.2695 42.4492 14.9629 42.9961 15.8418C43.543 16.7109 43.8164 17.6973 43.8164 18.8008C43.8164 19.9824 43.582 21.0615 43.1133 22.0381C42.6445 23.0146 41.9609 23.9814 41.0625 24.9385C40.1738 25.8955 39.0996 26.9551 37.8398 28.1172L35.0859 30.71V30.915H44.417V34.7236Z" fill="#EEEEEE"/>\n</svg>',14:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#F58220"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 35.916L15.077 31.9204H9.96604L9.16981 35.916H4.5L9.63248 14.5093H15.303L20.5 35.916H15.8517ZM14.1947 27.1958L13.5168 23.6961C13.359 22.9184 13.1653 21.9122 12.9358 20.6776C12.7134 19.4429 12.5664 18.5583 12.4946 18.0236C12.4301 18.5194 12.3009 19.336 12.1073 20.4734C11.9208 21.6108 11.5011 23.8516 10.8484 27.1958H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 35.916H24.4707V23.5234L24.5146 21.4873L24.5879 19.2607C23.8359 20.0127 23.3135 20.5059 23.0205 20.7402L20.5596 22.7178L18.377 19.9932L25.2764 14.5H28.9971V35.916Z" fill="#111111"/>\n    <path d="M46.3984 31.4775H43.8203V35.916H39.3965V31.4775H30.2559V28.3281L39.6455 14.5H43.8203V27.9619H46.3984V31.4775ZM39.3965 27.9619V24.3291C39.3965 23.7236 39.4209 22.8447 39.4697 21.6924C39.5186 20.54 39.5576 19.8711 39.5869 19.6855H39.4697C39.1084 20.4863 38.6738 21.2676 38.166 22.0293L34.2402 27.9619H39.3965Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.416L13.577 30.4204H8.46604L7.66981 34.416H3L8.13248 13.0093H13.803L19 34.416H14.3517ZM12.6947 25.6958L12.0168 22.1961C11.859 21.4184 11.6653 20.4122 11.4358 19.1776C11.2134 17.9429 11.0664 17.0583 10.9946 16.5236C10.9301 17.0194 10.8009 17.836 10.6073 18.9734C10.4208 20.1108 10.0011 22.3516 9.34835 25.6958H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.416H22.9717V22.0234L23.0156 19.9873L23.0889 17.7607C22.3369 18.5127 21.8145 19.0059 21.5215 19.2402L19.0605 21.2178L16.8779 18.4932L23.7773 13H27.498V34.416Z" fill="#EEEEEE"/>\n  <path d="M44.8994 29.9775H42.3213V34.416H37.8975V29.9775H28.7568V26.8281L38.1465 13H42.3213V26.4619H44.8994V29.9775ZM37.8975 26.4619V22.8291C37.8975 22.2236 37.9219 21.3447 37.9707 20.1924C38.0195 19.04 38.0586 18.3711 38.0879 18.1855H37.9707C37.6094 18.9863 37.1748 19.7676 36.667 20.5293L32.7412 26.4619H37.8975Z" fill="#EEEEEE"/>\n</svg>',16:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#EC1D25"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.165L15.077 32.1695H9.96604L9.16981 36.165H4.5L9.63248 14.7583H15.303L20.5 36.165H15.8517ZM14.1947 27.4448L13.5168 23.9451C13.359 23.1674 13.1653 22.1612 12.9358 20.9266C12.7134 19.6919 12.5664 18.8073 12.4946 18.2726C12.4301 18.7684 12.3009 19.585 12.1073 20.7224C11.9208 21.8598 11.5011 24.1006 10.8484 27.4448H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 36.165H24.4707V23.7725L24.5146 21.7363L24.5879 19.5098C23.8359 20.2617 23.3135 20.7549 23.0205 20.9893L20.5596 22.9668L18.377 20.2422L25.2764 14.749H28.9971V36.165Z" fill="#111111"/>\n    <path d="M30.7979 27.0684C30.7979 22.8301 31.6914 19.6758 33.4785 17.6055C35.2754 15.5352 37.9609 14.5 41.5352 14.5C42.7559 14.5 43.7129 14.5732 44.4062 14.7197V18.3379C43.5371 18.1426 42.6777 18.0449 41.8281 18.0449C40.2754 18.0449 39.0059 18.2793 38.0195 18.748C37.043 19.2168 36.3105 19.9102 35.8223 20.8281C35.334 21.7461 35.0459 23.0498 34.958 24.7393H35.1484C36.1152 23.0791 37.6631 22.249 39.792 22.249C41.7061 22.249 43.2051 22.8496 44.2891 24.0508C45.373 25.252 45.915 26.9121 45.915 29.0312C45.915 31.3164 45.2705 33.1279 43.9814 34.4658C42.6924 35.7939 40.9053 36.458 38.6201 36.458C37.0381 36.458 35.6562 36.0918 34.4746 35.3594C33.3027 34.627 32.3945 33.5576 31.75 32.1514C31.1152 30.7451 30.7979 29.0508 30.7979 27.0684ZM38.5322 32.8398C39.499 32.8398 40.2412 32.5176 40.7588 31.873C41.2764 31.2188 41.5352 30.291 41.5352 29.0898C41.5352 28.0449 41.291 27.2246 40.8027 26.6289C40.3242 26.0234 39.5967 25.7207 38.6201 25.7207C37.7021 25.7207 36.916 26.0186 36.2617 26.6143C35.6172 27.21 35.2949 27.9033 35.2949 28.6943C35.2949 29.8564 35.5977 30.8379 36.2031 31.6387C36.8184 32.4395 37.5947 32.8398 38.5322 32.8398Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.665L13.577 30.6695H8.46604L7.66981 34.665H3L8.13248 13.2583H13.803L19 34.665H14.3517ZM12.6947 25.9448L12.0168 22.4451C11.859 21.6674 11.6653 20.6612 11.4358 19.4266C11.2134 18.1919 11.0664 17.3073 10.9946 16.7726C10.9301 17.2684 10.8009 18.085 10.6073 19.2224C10.4208 20.3598 10.0011 22.6006 9.34835 25.9448H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.665H22.9717V22.2725L23.0156 20.2363L23.0889 18.0098C22.3369 18.7617 21.8145 19.2549 21.5215 19.4893L19.0605 21.4668L16.8779 18.7422L23.7773 13.249H27.498V34.665Z" fill="#EEEEEE"/>\n  <path d="M29.2988 25.5684C29.2988 21.3301 30.1924 18.1758 31.9795 16.1055C33.7764 14.0352 36.4619 13 40.0361 13C41.2568 13 42.2139 13.0732 42.9072 13.2197V16.8379C42.0381 16.6426 41.1787 16.5449 40.3291 16.5449C38.7764 16.5449 37.5068 16.7793 36.5205 17.248C35.5439 17.7168 34.8115 18.4102 34.3232 19.3281C33.835 20.2461 33.5469 21.5498 33.459 23.2393H33.6494C34.6162 21.5791 36.1641 20.749 38.293 20.749C40.207 20.749 41.7061 21.3496 42.79 22.5508C43.874 23.752 44.416 25.4121 44.416 27.5312C44.416 29.8164 43.7715 31.6279 42.4824 32.9658C41.1934 34.2939 39.4062 34.958 37.1211 34.958C35.5391 34.958 34.1572 34.5918 32.9756 33.8594C31.8037 33.127 30.8955 32.0576 30.251 30.6514C29.6162 29.2451 29.2988 27.5508 29.2988 25.5684ZM37.0332 31.3398C38 31.3398 38.7422 31.0176 39.2598 30.373C39.7773 29.7188 40.0361 28.791 40.0361 27.5898C40.0361 26.5449 39.792 25.7246 39.3037 25.1289C38.8252 24.5234 38.0977 24.2207 37.1211 24.2207C36.2031 24.2207 35.417 24.5186 34.7627 25.1143C34.1182 25.71 33.7959 26.4033 33.7959 27.1943C33.7959 28.3564 34.0986 29.3379 34.7041 30.1387C35.3193 30.9395 36.0957 31.3398 37.0332 31.3398Z" fill="#EEEEEE"/>\n</svg>',18:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="black"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <path d="M14.3517 34.6943L13.577 30.6988H8.46604L7.66981 34.6943H3L8.13248 13.2876H13.803L19 34.6943H14.3517ZM12.6947 25.9741L12.0168 22.4744C11.859 21.6967 11.6653 20.6905 11.4358 19.4559C11.2134 18.2212 11.0664 17.3366 10.9946 16.8019C10.9301 17.2977 10.8009 18.1143 10.6073 19.2517C10.4208 20.3891 10.0011 22.6299 9.34835 25.9741H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.6943H22.9717V22.3018L23.0156 20.2656L23.0889 18.0391C22.3369 18.791 21.8145 19.2842 21.5215 19.5186L19.0605 21.4961L16.8779 18.7715L23.7773 13.2783H27.498V34.6943Z" fill="#EEEEEE"/>\n  <path d="M36.8281 13C38.8789 13 40.5293 13.4688 41.7793 14.4062C43.0391 15.334 43.6689 16.5889 43.6689 18.1709C43.6689 19.2646 43.3662 20.2412 42.7607 21.1006C42.1553 21.9502 41.1787 22.7119 39.8311 23.3857C41.4326 24.2451 42.5801 25.1436 43.2734 26.0811C43.9766 27.0088 44.3281 28.0293 44.3281 29.1426C44.3281 30.9004 43.6396 32.3164 42.2627 33.3906C40.8857 34.4551 39.0742 34.9873 36.8281 34.9873C34.4844 34.9873 32.6436 34.4893 31.3057 33.4932C29.9678 32.4971 29.2988 31.0859 29.2988 29.2598C29.2988 28.0391 29.6211 26.9551 30.2656 26.0078C30.9199 25.0605 31.9648 24.2256 33.4004 23.5029C32.1797 22.7314 31.3008 21.9062 30.7637 21.0273C30.2266 20.1484 29.958 19.1865 29.958 18.1416C29.958 16.6084 30.5928 15.3682 31.8623 14.4209C33.1318 13.4736 34.7871 13 36.8281 13ZM33.4883 28.9961C33.4883 29.8359 33.7812 30.4902 34.3672 30.959C34.9531 31.4277 35.7539 31.6621 36.7695 31.6621C37.8926 31.6621 38.7324 31.4229 39.2891 30.9443C39.8457 30.4561 40.124 29.8164 40.124 29.0254C40.124 28.3711 39.8457 27.7607 39.2891 27.1943C38.7422 26.6182 37.8486 26.0078 36.6084 25.3633C34.5283 26.3203 33.4883 27.5312 33.4883 28.9961ZM36.7988 16.3105C36.0273 16.3105 35.4023 16.5107 34.9238 16.9111C34.4551 17.3018 34.2207 17.8291 34.2207 18.4932C34.2207 19.0791 34.4062 19.6064 34.7773 20.0752C35.1582 20.5342 35.8418 21.0078 36.8281 21.4961C37.7852 21.0469 38.4541 20.5879 38.835 20.1191C39.2158 19.6504 39.4062 19.1084 39.4062 18.4932C39.4062 17.8193 39.1621 17.2871 38.6738 16.8965C38.1855 16.5059 37.5605 16.3105 36.7988 16.3105Z" fill="#EEEEEE"/>\n</svg>',L:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#00A651"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M21.8517 36.916L21.077 32.9204H15.966L15.1698 36.916H10.5L15.6325 15.5093H21.303L26.5 36.916H21.8517ZM20.1947 28.1958L19.5168 24.6961C19.359 23.9184 19.1653 22.9122 18.9358 21.6776C18.7134 20.4429 18.5664 19.5583 18.4946 19.0236C18.4301 19.5194 18.3009 20.336 18.1073 21.4734C17.9208 22.6108 17.5011 24.8516 16.8484 28.1958H20.1947Z" fill="#111111"/>\n    <path d="M28.7383 36.916V15.5H33.2793V33.166H41.9658V36.916H28.7383Z" fill="#111111"/>\n  </g>\n  <path d="M20.3517 35.416L19.577 31.4204H14.466L13.6698 35.416H9L14.1325 14.0093H19.803L25 35.416H20.3517ZM18.6947 26.6958L18.0168 23.1961C17.859 22.4184 17.6653 21.4122 17.4358 20.1776C17.2134 18.9429 17.0664 18.0583 16.9946 17.5236C16.9301 18.0194 16.8009 18.836 16.6073 19.9734C16.4208 21.1108 16.0011 23.3516 15.3484 26.6958H18.6947Z" fill="#EEEEEE"/>\n  <path d="M27.2374 35.416V14H31.7784V31.666H40.4649V35.416H27.2374Z" fill="#EEEEEE"/>\n</svg>'}},Hs="VERIFIQUE A CLASSIFICAÇÃO INDICATIVA";var js=function(){function e(t){var n=t.videoInfo,i=t.metadata;a(this,e),this.videoInfo=n,this.metadata=i}return o(e,[{key:"title",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.title)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.title}},{key:"secondaryText",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.secondaryText)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.program}},{key:"secondaryTextWithVerifyContentRating",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.verifyContentRating?Hs:this.secondaryText}},{key:"raw",get:function(){return{title:this.title,secondaryText:this.secondaryText,secondaryTextWithVerifyContentRating:this.secondaryTextWithVerifyContentRating,rating:this.rating,ratingLabel:this.ratingLabel}}},{key:"videoRating",get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.contentRating}},{key:"videoRatingDescription",get:function(){return e=this.metadata.contentRatingCriteria,this.metadata.verifyContentRating?Hs:e?e.join(", ").split(/\s+/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):"";var e}},{key:"videoRatingType",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.isSelfRated?"self_rated":"default"}},{key:"rating",get:function(){var e;return function(e,t,n){if(e&&!n)return Vs[t][e]}(this.videoRating,this.videoRatingType,null===(e=this.metadata)||void 0===e?void 0:e.verifyContentRating)}},{key:"ratingLabel",get:function(){var e;return function(e,t,n){if(n)return Hs;if(e){var i="self_rated"===t?"Autoclassificação":"Classificação",r="L"!==e?"".concat(e," anos"):"Livre";return"".concat(i," etária: ").concat(r)}}(this.videoRating,this.videoRatingType,null===(e=this.metadata)||void 0===e?void 0:e.verifyContentRating)}}]),e}(),Ks=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"video_info"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"videoInfoHTMLData",get:function(){return this.videoData=new js({videoInfo:this.options.videoInfo,metadata:this.metadata}),this.videoData.raw}},{key:"template",get:function(){return je('<% if (modalMode === true) { %>\n  <div class="video-info__mobile-container">\n    <div class="video-info__mobile-header">\n      <button class="video-info__close"></button>\n    </div>\n<% } %>\n  <div class="video-info__data">\n    <div class="video-info__data-title">\n      <span class="visually-hidden">Título: </span>\n      <%= title %>\n    </div>\n    <div class="video-info__data-subtitle">\n      <div class="video-info__data-subtitle-rating"><%= rating %></div>\n      <div class="video-info__data-subtitle-program">\n        <span class="visually-hidden">Subtítulo: </span>\n        <%= secondaryTextWithVerifyContentRating %>\n      </div>\n      <span class="visually-hidden"><%= ratingLabel %></span></div>\n    </div>\n  </div>\n  <div class="video-info__status"></div>\n<% if (modalMode === true) { %>\n\n<% } %>\n')}},{key:"buttonTemplate",get:function(){return je('<button class="drawer-info-icon media-control-button" data-video-info></button>\n')}},{key:"shouldUseInfoButton",get:function(){return this.playerSize&&this.playerSize.width<=480}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"allStates",get:function(){return"video-info--chromecast video-info--full video-info--inline video-info--ad video-info--live video-info--dvr"}},{key:"displayInlineMode",get:function(){return this.options.videoInfo.inlineEnabled&&this.$el.hasClass("video-info--inline")}},{key:"displayFullScreenMode",get:function(){return this.options.videoInfo.fullscreenEnabled&&this.$el.hasClass("video-info--full")}},{key:"currentState",get:function(){if(!this.container)return null;var e=J.isChromecast?"chromecast":wn.Fullscreen.isFullscreen()?"full":"inline";this.status=[];var t=this.container.getPlaybackType();return"live"===t&&this.status.push("video-info--live"),this.container.isDvrInUse()&&this.status.push("video-info--dvr"),"ad"===t&&this.status.push("video-info--ad"),"".concat(e," ").concat(this.status.join(" "))}},{key:"events",get:function(){return{"click .drawer-info-icon[data-video-info]":"showModalvideoInfo"}}},{key:"attributes",get:function(){return{class:"video-info","data-video-info":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container&&this.container.playback&&this.stopListening(this.container.playback),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.initialize),this.listenTo(this.container,In.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,In.DFP_AD_STARTED,this.updateState),this.listenTo(this.container,In.WM_MASTERTOPIP,(function(){return e.$el.addClass("video-info--hidden")})),this.listenTo(this.container.playback,Le.PLAYBACK_PLAY_INTENT,this.updateState),this.container.options.chromeless&&this.disable())}},{key:"initialize",value:function(e){this.metadata=e,this.render()}},{key:"onPlayerResize",value:function(e){this.playerSize=e,this.render()}},{key:"updateState",value:function(){(this.currentState!==this.renderedState||J.isMobile)&&(this.$el.removeClass(this.allStates),this.$el.addClass("video-info--".concat(this.currentState)),this.displayInlineMode||this.displayFullScreenMode||"ad"===this.container.getPlaybackType()?this.$el.removeClass("video-info--hidden"):this.$el.addClass("video-info--hidden"),this.renderedState=this.currentState)}},{key:"render",value:function(){if(this.container){J.isChromecast&&(this.$el.remove(),this.container.$el.append(this.el)),this.updateState();var e=i(i({},this.videoInfoHTMLData),{},{modalMode:!1});return!this.currentState.includes("video-info--ad")&&this.$el.html(this.shouldUseInfoButton?this.buttonTemplate():this.template(e)),this.$el.append(Cn.getStyleFrom('.clappr-player#wp3-player-0 .media-control--keep-video-info .media-control-panel__upper {\n  opacity: 1 !important;\n  transform: translateY(0) !important;\n}\n.clappr-player#wp3-player-0 .media-control--keep-video-info .video-info {\n  display: block;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info, .clappr-player#wp3-player-0 .media-control.w360 .video-info, .clappr-player#wp3-player-0 .media-control.w480 .video-info {\n  height: 48px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full .drawer-info-icon {\n  cursor: pointer;\n  padding: 0px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-container {\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-header {\n  height: 36px;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__data, .clappr-player#wp3-player-0 .media-control.w360 .video-info__data, .clappr-player#wp3-player-0 .media-control.w480 .video-info__data {\n  display: flex;\n  flex-flow: column;\n  flex-grow: 1;\n  justify-content: center;\n  margin: 0;\n  padding: 0 12px 12px;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__close, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close {\n  background-color: transparent;\n  border: 0;\n  box-sizing: content-box;\n  padding: 12px;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  right: 0;\n  width: 24px;\n  height: 24px;\n  outline: none;\n  cursor: pointer;\n}\n.clappr-player#wp3-player-0 .media-control.w320 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close svg {\n  width: 100%;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .video-info {\n  box-sizing: border-box;\n  color: white;\n  pointer-events: none;\n  text-shadow: none;\n  z-index: 996;\n}\n.clappr-player#wp3-player-0 .video-info__data {\n  height: 24px;\n  text-align: left;\n}\n.clappr-player#wp3-player-0 .video-info__data-title {\n  margin-bottom: 5px;\n  font-size: 18px;\n  line-height: 24px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating {\n  display: flex;\n  margin-right: 8px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating svg {\n  height: 16px;\n  width: 16px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-rating:empty {\n  margin-right: 0px;\n}\n.clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n  font-size: 14px;\n  line-height: 18px;\n}\n.clappr-player#wp3-player-0 .video-info__data-title, .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  font-family: "opensans-regular";\n  letter-spacing: 0;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .video-info__status {\n  text-align: left;\n  font-family: "opensans-regular";\n  font-size: 16px;\n  line-height: 16px;\n}\n.clappr-player#wp3-player-0 .video-info__data, .clappr-player#wp3-player-0 .video-info__status {\n  transition: all ease 0.2s;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast {\n  position: absolute;\n  top: 0;\n  background-color: transparent;\n  transition: opacity ease-in 0.2s;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data {\n  margin: 5vw 0 0 5vw;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-title {\n  font-size: 3.4vh;\n  line-height: 4.4vh;\n  margin-bottom: 8px;\n}\n.clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-subtitle-program {\n  font-size: 2.4vh;\n  line-height: 2.6vh;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__data {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__status {\n  font-size: 14px;\n  line-height: normal;\n  color: #ffff93;\n}\n.clappr-player#wp3-player-0 .video-info--ad .video-info__status:after {\n  content: "Publicidade";\n}\n.clappr-player#wp3-player-0 .video-info--hidden {\n  display: none;\n}',{playerId:this.options.playerId})[0]),this.shouldUseInfoButton&&this.$el.find(".drawer-info-icon").html('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Informações da mídia</span>'),this}}},{key:"showModalvideoInfo",value:function(e){var t=this,n=i(i({},this.videoInfoHTMLData),{},{modalMode:!0});e&&e.stopPropagation(),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_SHOW,this.template(n),{hidePanels:!0}),this.mediaControl.$el.addClass("media-control--keep-video-info");var r=this.modal.find(".video-info__mobile-container"),a=this.modal.find(".video-info__close");r&&r.on("click",(function(e){e&&e.stopPropagation(),t.hideModal()})),a&&a.append(Qa),this.mediaControl.setKeepVisible()}},{key:"hideModal",value:function(){this.modal&&this.modal.find(".video-info__mobile-container").off("click"),this.mediaControl.trigger(In.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--keep-video-info")}}]),n}(Ii),Gs=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).src=e.src,i.currentMedia=e.currentMedia,i.mediaControl=e.mediaControl,i.currentMedia.addUpdateListener((function(){return i.onMediaStatusUpdate()})),i.settings=e.settings,i}return o(n,[{key:"name",get:function(){return"chromecast_playback"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<div class="chromecast-playback-background"></div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-playback"}}},{key:"isReady",get:function(){return!0}},{key:"render",value:function(){var e=this.template();this.$el.html(e),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}},{key:"configure",value:function(e){var t=this;we.debug(this.name,"configure",e),v(c(n.prototype),"configure",this).call(this,e),e.currentMedia&&(this.currentMedia=e.currentMedia,this.previousMediaState=void 0,this.currentMedia.addUpdateListener((function(){return t.onMediaStatusUpdate()})),clearTimeout(this.idleTimeout),this.onMediaStatusUpdate())}},{key:"play",value:function(){this.currentMedia.play()}},{key:"pause",value:function(){this.stopTimer(),this.currentMedia.pause()}},{key:"stop",value:function(){this.stopTimer(),this.currentMedia.stop()}},{key:"volume",value:function(e){var t=this,n=e/100,i=new chrome.cast.Volume(n,!1),r=new chrome.cast.media.VolumeRequest(i);this.currentMedia.setVolume(r,(function(){return we.info(t.name,"volume set")}),(function(e){return we.warn(t.name,e)}))}},{key:"seek",value:function(e){var t=this;this.stopTimer();var n=new chrome.cast.media.SeekRequest;n.currentTime=e,this.currentMedia.seek(n,(function(){return t.startTimer()}),(function(){return we.warn(t.name,"seek failed")}))}},{key:"getVolume",value:function(){}},{key:"seekPercentage",value:function(e){if(e>=0&&e<=100){var t=this.getDuration();this.seek(e*t/100)}}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.updateMediaControl()}),100)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getDuration",value:function(){return this.currentMedia.media.duration}},{key:"isPlaying",value:function(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}},{key:"getPlaybackType",value:function(){return"LIVE"==this.currentMedia.streamType?Xe.LIVE:Xe.VOD}},{key:"onMediaStatusUpdate",value:function(){var e=this,t=this.currentMedia.loadingItemId||this.currentMedia.preloadedItemId;we.debug(this.name,"onMediaStatusUpdate",this.currentMedia.playerState,t),this.isPlaying()&&!this.timer&&this.startTimer(),this.updateBufferState(),this.idleTimeout&&"IDLE"!==this.currentMedia.playerState&&clearTimeout(this.idleTimeout),"PLAYING"===this.currentMedia.playerState?(this.trigger(Le.PLAYBACK_PLAY,this.name),this.trigger(Le.PLAYBACK_MEDIACONTROL_ENABLE,this.name)):t||"IDLE"!==this.currentMedia.playerState||"PLAYING"!==this.previousMediaState||"FINISHED"!==this.currentMedia.idleReason?"IDLE"===this.currentMedia.playerState&&"FINISHED"===this.currentMedia.idleReason&&this.trigger(Le.PLAYBACK_MEDIACONTROL_DISABLE,this.name):this.idleTimeout=setTimeout((function(){return e.trigger(Le.PLAYBACK_ENDED,e.name)}),1e3),this.previousMediaState=this.currentMedia.playerState}},{key:"updateBufferState",value:function(){"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(Le.PLAYBACK_BUFFERING,this.name)):this.isBuffering&&(this.isBuffering=!1,this.trigger(Le.PLAYBACK_BUFFERFULL,this.name))}},{key:"updateMediaControl",value:function(){if(this.currentMedia.media){var e=this.currentMedia.getEstimatedTime(),t=this.currentMedia.media.duration;this.trigger(Le.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),n}(Xe),Ws="urn:x-cast:wm.player",Ys=0,zs=1,qs={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ogv:"video/ogg","3gp":"video/3gpp"},$s=wn.getCookie,Xs=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).contentType="application/video-id",!J.isiOS&&J.isChrome&&i.options.appId?(i.appId=i.options.appId,i.deviceState=Ys,i.embedScript()):i.disable(),i.subtitlesAvailable=[],i.audiosAvailable=[],i}return o(n,[{key:"version",get:function(){return VERSION}},{key:"name",get:function(){return"chromecast"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"attributes",get:function(){return{class:"chromecast-button media-control-button","data-chromecast":""}}},{key:"events",get:function(){return{click:"click"}}},{key:"options",get:function(){return this.core.options.chromecast||(this.core.options.chromecast={})}},{key:"hasCastLib",get:function(){return window.chrome&&window.chrome.cast}},{key:"isCastAvailable",get:function(){return this.hasCastLib&&window.chrome.cast.isAvailable}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,Le.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,Le.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,Le.CONTAINER_ENDED,this.sessionStopped),this.listenTo(this.container,Le.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,In.WM_AUDIO_CHANGED,this.onAudioChanged))}},{key:"onMetadataLoaded",value:function(e){this.providerId=e.providerId}},{key:"onVolumeChanged",value:function(e){var t=this;if(this.session){var n=e/100;this.session.setReceiverVolumeLevel(n,(function(){return we.info(t.name,"volume set")}),(function(e){return we.error(t.name,e)}))}}},{key:"onSubtitleChanged",value:function(e){if(this.session){var t={action:"SUBTITLE_CHANGED",payload:this.subtitlesAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(t)}}},{key:"onAudioChanged",value:function(e){if(this.session){var t={action:"AUDIO_CHANGED",payload:this.audiosAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(t)}}},{key:"enable",value:function(){v(c(n.prototype),"enable",this).call(this),this.render(),this.embedScript()}},{key:"embedScript",value:function(){var e=this;if(this.isCastAvailable)$n((function(){return e.bootstrapCastApi()}));else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=function(){e.core.trigger(In.CHROMECAST_SCRIPT_LOADED),e.bootstrapCastApi()},t.onerror=function(){e.core.trigger(In.CHROMECAST_SCRIPT_ERROR,{code:"chromecast-script-error",description:"Chromecast script error.",level:"INFO"})},document.body.appendChild(t)}}},{key:"bootstrapCastApi",value:function(){var e=this;this.isCastAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(t,n){t?(e.core.trigger(In.CHROMECAST_API_READY),e.initializeCastApi()):(we.warn(e.name,"GCastApi error",n),e.core.trigger(In.CHROMECAST_API_ERROR,{code:"chromecast-api-error",description:n,level:"INFO"}),e.disable())}}},{key:"initializeCastApi",value:function(){var e=this,t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(n,(function(t){return e.sessionListener(t)}),(function(t){return e.receiverListener(t)}),t);chrome.cast.initialize(i,(function(){e.core.trigger(In.CHROMECAST_INITIALIZE_SUCCESS),we.debug(e.name,"init success")}),(function(){e.core.trigger(In.CHROMECAST_INITIALIZE_ERROR,{code:"chromecast-init-error",description:"Chromecast initialize error.",level:"INFO"}),we.warn(e.name,"init error")}))}},{key:"sessionListener",value:function(e){we.debug(this.name,"new session id:"+e.sessionId),this.newSession(e)}},{key:"sessionUpdateListener",value:function(){this.session&&(we.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}},{key:"mediaListener",value:function(){if(we.debug(this.name,"mediaListener",this.session.media),this.session.media){var e=this.session.media[this.session.media.length-1];this.mediaSession=e,this.playbackProxy&&this.playbackProxy.configure({currentMedia:e})}}},{key:"receiverListener",value:function(e){e===chrome.cast.ReceiverAvailability.AVAILABLE?(this.core.trigger(In.CHROMECAST_AVAILABLE),we.debug(this.name,"receiver found"),this.show()):(this.core.trigger(In.CHROMECAST_UNAVAILABLE),we.debug(this.name,"receiver list empty"),this.hide())}},{key:"launchSuccess",value:function(e){clearInterval(this.connectAnimInterval),this.core.trigger(In.CHROMECAST_LAUNCH_SUCCESS),we.debug(this.name,"launch success - session: "+e.sessionId),this.newSession(e)}},{key:"launchError",value:function(e){var t=this.mediaSession&&this.mediaSession.playerState!==chrome.cast.media.PlayerState.IDLE,n=this.mediaSession&&this.mediaSession.playerState===chrome.cast.media.PlayerState.PLAYING,i=e.code===chrome.cast.ErrorCode.CANCEL;this.core.trigger(In.CHROMECAST_LAUNCH_ERROR,e),t&&i||(we.debug(this.name,"error on launch",e),this.renderDisconnected(),clearInterval(this.connectAnimInterval),(this.isPlayingBeforeConnect||n)&&(this.container.play(),this.container.seek(this.currentTime)))}},{key:"loadMediaSuccess",value:function(e,t){this.core.trigger(In.CHROMECAST_MEDIA_LOAD_SUCCESS),we.debug(this.name,"new media session",t,"(".concat(e,")")),this.originalPlayback=this.core.getCurrentPlayback();var n=Object.assign({},this.originalPlayback.options,{currentMedia:t,mediaControl:this.core.mediaControl,poster:this.container.options.poster,settings:this.originalPlayback.settings});this.src=this.originalPlayback.src,this.playbackProxy=new Gs(n),this.playbackProxy.render(),this.mediaSession=t,this.originalPlayback.$el.hide();var i=this.core.getCurrentContainer();i.$el.append(this.playbackProxy.el),i.stopListening(),i.playback=this.playbackProxy,i.bindEvents(),i.settingsUpdate()}},{key:"loadMediaError",value:function(e){this.core.trigger(In.CHROMECAST_MEDIA_LOAD_ERROR,e),we.warn(this.name,"media error",e)}},{key:"newSession",value:function(e){var t=this;this.session=e,this.deviceState=zs,this.renderConnected(),this.core.trigger(In.DFP_DISABLE),e.addUpdateListener((function(){return t.sessionUpdateListener()})),e.addMediaListener((function(){return t.mediaListener()})),e.addMessageListener(Ws,(function(e,n){return t.wmpMessageListener(e,n)})),this.containerPlay()}},{key:"sessionStopped",value:function(){this.renderDisconnected();var e=this.core.getCurrentContainer(),t=void 0;this.mediaSession&&(t=this.mediaSession.playerState,this.mediaSession=null,this.playbackProxy.$el&&this.playbackProxy.$el.remove(),this.originalPlayback.$el&&this.originalPlayback.$el.show(),e.stopListening(),e.playback=this.originalPlayback,e.bindEvents(),e.settingsUpdate(),this.core.trigger(In.DFP_ENABLE)),this.playbackProxy&&((this.playbackProxy.isPlaying()||"PLAYING"===t)&&(e.play(),e.seek(this.currentTime)),this.playbackProxy.stop(),this.playbackProxy=null)}},{key:"sendMessage",value:function(e){var t=this;this.session.sendMessage(Ws,e,(function(e){return t.onMessageSuccess(e)}),(function(e){return t.onMessageFailure(e)}))}},{key:"onMessageSuccess",value:function(e){we.info(this.name,"message bus: send message success",e)}},{key:"onMessageFailure",value:function(e){we.error(this.name,"message bus: send message error",e)}},{key:"loadMedia",value:function(){var e=this;if(!this.playback||this.playback.isReady){this.container.pause();var t=this.container.options.src;we.debug(this.name,"loading... "+t);var n=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime="ad"==this.core.getPlaybackType()?0:this.currentTime||0,this.session.loadMedia(i,(function(t){return e.loadMediaSuccess("loadMedia",t)}),(function(t){return e.loadMediaError(t)}))}else this.listenToOnce(this.playback,Le.PLAYBACK_READY,this.loadMedia)}},{key:"createMediaInfo",value:function(e){var t=n.mimeTypeFor(e),r=this.core.options,a=r.dfp,s=this.getSelectedSettings(),o=a.watchedAds;"ad"===this.core.getPlaybackType()&&(o+=1);var l={token:r.token||this.getTokenFromCookie(),adUnit:a.adUnit,adCustomData:a.adCustomData,adAccountId:a.adAccountId,adCmsId:a.adCmsId,daiCustomData:r.daiCustomData,adPublisherProvidedID:r.adPublisherProvidedID,watchedAds:o,ga:r.ga,defaultSubtitle:s.subtitle,defaultAudio:s.audio,videoInfo:r.videoInfo,enableBingeWatch:r.enableBingeWatch||!1,upa:r.upa,globoId:r.globoId||void 0,horizon:r.horizon||{},jarvis:i({platformId:"web",clientVersion:"1.1.0"},r.jarvis),ga4:r.ga4||{}},u=new chrome.cast.media.MediaInfo(e);return u.contentType=this.contentType||t,u.customData=l,u.metadata=this.createMediaMetadata(),u}},{key:"getSelectedSettings",value:function(){var e=this.core.getPlugin("settings"),t=e.getSelectedSettings()||{},n=t.audio,r=t.subtitle;return i(i({},e.getDefaultSettings()||{}),{},{audio:n,subtitle:r})}},{key:"getTokenFromCookie",value:function(){var e=this.providerId?"WMPTOKEN_".concat(this.providerId):"GLBID";return $s(e)}},{key:"createMediaMetadata",value:function(){this.options.media||(this.options.media={});var e=this.options.media.type,t=this.createCastMediaMetadata(e);return t.title=this.options.media.title,t.subtitle=this.options.media.subtitle,t.releaseDate=this.options.media.releaseDate,e===n.TvShow?(t.episode=this.options.media.episode,t.originalAirdate=this.options.media.originalAirdate,t.season=this.options.media.season,t.seriesTitle=this.options.media.seriesTitle):e===n.Movie&&(t.studio=this.options.media.studio),this.options.media.images&&(t.images=this.options.media.images.map((function(e){return new chrome.cast.Image(e)}))),!t.images&&this.core.options.poster&&(t.images=[new chrome.cast.Image(this.core.options.poster)]),t}},{key:"createCastMediaMetadata",value:function(e){switch(e){case n.Movie:return new chrome.cast.media.MovieMediaMetadata;case n.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"click",value:function(){var e=this;if(this.core.trigger(In.CHROMECAST_LAUNCH_REQUEST),chrome.cast.requestSession((function(t){return e.launchSuccess(t)}),(function(t){return e.launchError(t)})),!this.session){this.isPlayingBeforeConnect=this.container.isPlaying(),this.container.pause();var t=0;clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval((function(){e.renderConnecting(t),t=(t+1)%3}),600)}}},{key:"containerChanged",value:function(){this.stopListening(),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindEvents(),this.currentTime=0,this.session&&(this.originalPlayback=this.playback)&&this.sessionStopped()}},{key:"containerTimeUpdate",value:function(e){this.currentTime=e.current}},{key:"containerPlay",value:function(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerStatus||(we.debug(this.name,"load media"),this.currentTime=this.currentTime||0,this.loadMedia())}},{key:"wmpMessageListener",value:function(e,t){if(this.session){var n=JSON.parse(t);this.handleAdBreak(n),this.handleMediaTracks(n)}}},{key:"handleAdBreak",value:function(e){"adBreakStarted"===e.name?(we.debug(this.name,"ad break started"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!1,this.playbackProxy.trigger(Le.PLAYBACK_SETTINGSUPDATE))):"adBreakEnded"===e.name&&(we.debug(this.name,"ad break ended"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!0,this.playbackProxy.trigger(Le.PLAYBACK_SETTINGSUPDATE)))}},{key:"handleMediaTracks",value:function(e){switch(e.action){case"SUBTITLE_AVAILABLE":this.subtitlesAvailable=e.payload;break;case"AUDIO_AVAILABLE":this.audiosAvailable=e.payload}}},{key:"createCachedElements",value:function(){this.$mediaControl=this.mediaControl&&this.mediaControl.$el,this.$settingsButton=this.$mediaControl.find(".media-control-button[data-settings]")}},{key:"renderOverlay",value:function(){if(this.removeOverlay(),this.createCachedElements(),this.session){var e=this.session&&this.session.receiver&&this.session.receiver.friendlyName;this.core.trigger(In.CHROMECAST_MEDIA_WATCHING,e)}}},{key:"renderConnecting",value:function(e){var t=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast0_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-240.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast1_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-272.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast2_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-304.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>'];this.$el.html(t[e]),this.container&&this.container.$el.addClass("cast-connecting"),this.$mediaControl.addClass("media-control-disabled media-control--no-background"),this.mediaControl.setKeepVisible(),this.renderStyle()}},{key:"removeOverlay",value:function(){this.core.trigger(In.CHROMECAST_MEDIA_STOP_WATCHING)}},{key:"renderConnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on-a"/>\n        <path id="cast-on-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-on-b" fill="#fff">\n            <use xlink:href="#cast-on-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-on-a"/>\n        <g mask="url(#cast-on-b)">\n            <use fill="#FFF" xlink:href="#cast-on-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Parar de espelhar</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.setKeepVisible(),this.container.$el.removeClass("cast-connecting"),this.container.$el.addClass("cast-enabled"),this.renderStyle(),this.renderOverlay()}},{key:"renderDisconnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="cast-off-a"/>\n        <path id="cast-off-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-off-b" fill="#fff">\n            <use xlink:href="#cast-off-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-off-a"/>\n        <g mask="url(#cast-off-b)">\n            <use fill="#FFF" xlink:href="#cast-off-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhar em outro dispositivo</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.resetKeepVisible(),this.container&&this.container.$el.removeClass("cast-enabled cast-connecting"),this.$mediaControl.removeClass("media-control--no-background"),this.renderStyle(),this.removeOverlay()}},{key:"renderStyle",value:function(){var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 svg #cast, .clappr-player#wp3-player-0 svg #cast-on, .clappr-player#wp3-player-0 svg #Path {\n  fill: #fff;\n}\n.clappr-player#wp3-player-0 .chromecast-playback {\n  height: 100%;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .chromecast-playback .chromecast-playback-background {\n  background-size: cover;\n}\n.clappr-player#wp3-player-0 .chromecast-playback-background,\n.clappr-player#wp3-player-0 .chromecast-playback-overlay {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator.media-control-element {\n  padding-bottom: 0;\n  padding-top: 0;\n}",{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"render",value:function(){return this.createCachedElements(),this.session?this.renderConnected():this.renderDisconnected(),this.appendToMediaControl(),this}},{key:"appendToMediaControl",value:function(){var e=this.$mediaControl&&this.$mediaControl.find(".media-control-button[data-fullscreen]");e.length>0?X(this.el).insertBefore(e):this.$mediaControl.find(".media-control-center-panel").append(this.el)}}],[{key:"Movie",get:function(){return"movie"}},{key:"TvShow",get:function(){return"tv_show"}},{key:"Generic",get:function(){return"none"}},{key:"version",get:function(){return VERSION}},{key:"mimeTypeFor",value:function(e){var t=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return qs[t]?qs[t]:e.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}]),n}(Ii),Zs=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).$el.hide(),i}return o(n,[{key:"name",get:function(){return"chromecast_sender_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return J.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return"center"}},{key:"overlayTemplate",get:function(){return je('<div class="chromecast-playback-overlay">\n  <div class="chromecast-status">\n    <span class="label-watching">Assistindo em</span>\n    <span class="label-device"></span>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-sender-indicator"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,In.CHROMECAST_MEDIA_WATCHING,this.renderTemplate),this.listenTo(this.core,In.CHROMECAST_MEDIA_STOP_WATCHING,this.hideRender)}},{key:"hideRender",value:function(){this.$el.empty(),this.$el.hide()}},{key:"renderStyle",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .thumb-preview-modal--visible .chromecast-sender-indicator {\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay {\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n  pointer-events: none;\n  flex-direction: row;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status {\n  position: relative;\n  top: -16px;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-watching,\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  color: #fff;\n}\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n  font-weight: bold;\n}\n.clappr-player#wp3-player-0 .media-control-panel__between .chromecast-playback-overlay .chromecast-status {\n  top: -36px;\n}',{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"renderTemplate",value:function(e){this.hideRender(),this.renderStyle(),this.$el.append(this.overlayTemplate()),this.$el.show(),e&&this.$el.find(".label-device").html(e)}}]),n}(Ii),Qs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector">\r\n\t<path d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921c-0.722,0-1.351,0.367-1.707,0.916l0,0\r\n\t\tc-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999c0,1.07,0.898,1.939,2.015,1.939\r\n\t\tc0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004c1.113,0,2.016-0.869,2.016-1.939\r\n\t\tC45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Js='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_">\r\n\t<path d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136c-1.004-0.994-1.004-2.599,0-3.589\r\n\t\tc1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g>\r\n\t\t<path d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',eo='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903c0,1.795,1.141,3.498,2.969,3.498h26.474\r\n\t\tc1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z M23.446,35.267\r\n\t\tc-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',to='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.7px" height="45.8px" viewBox="0 0 45.7 45.8" enable-background="new 0 0 45.7 45.8" xml:space="preserve">\r\n<g id="Layer_1_1_" display="none">\r\n\t<g id="vector" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M45.3,38.3L45.3,38.3L24.7,5.2l0,0c-0.4-0.6-1-0.9-1.7-0.9c-0.7,0-1.4,0.4-1.7,0.9l0,0\r\n\t\t\tC16,13.6,0.6,38.3,0.6,38.3v0c-0.2,0.3-0.3,0.6-0.3,1c0,1.1,0.9,1.9,2,1.9c0,0,0.1,0,0.1,0l0,0h41.1v0c0,0,0,0,0,0\r\n\t\t\tc1.1,0,2-0.9,2-1.9C45.6,38.9,45.5,38.6,45.3,38.3z M24.2,13.7c1.5,0.5,2.4,1.9,2.2,3.6c-0.2,1.7-0.6,3.4-0.8,5.1\r\n\t\t\tc-0.3,2-0.6,4.1-1,6.2c-1.1,0-2.1,0-3.2,0c-0.3-2.2-0.7-4.3-1-6.4c-0.2-1.4-0.5-2.8-0.8-4.3C19.1,15,21.4,12.8,24.2,13.7z\r\n\t\t\t M23,37.2c-1.9,0-3.5-1.5-3.4-3.3c0-0.7,0.3-1.4,0.7-1.9c0.6-0.8,1.7-1.3,2.8-1.3c1.9,0,3.5,1.5,3.4,3.3\r\n\t\t\tC26.4,35.7,24.9,37.2,23,37.2z"/>\r\n\t</g>\r\n\t<g id="vector_2_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.9,44.7c-1,1-2.7,1-3.7,0L1,4.5c-1-1-1-2.7,0-3.7c1-1,2.7-1,3.7,0L44.9,41C45.9,42,45.9,43.7,44.9,44.7\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M24.3,6.4c0.8,0,1.6,0.4,1.6,1.2c0,1.5,0,3,0,6c1.2,0,1.6,0,4.6,0c0-3,0-5.6,0-7.5c0-2.5-1.5-3.3-3.9-3.3\r\n\t\t\t\tc-4.1,0-8.5,0-12.6,0l3.6,3.6C19.8,6.4,22,6.4,24.3,6.4z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M30.4,15.5C30.4,15.5,30.4,15.5,30.4,15.5c0,0,0.6,0,1.4,0c0.8,0,0.8,0.3,0.8,1.1c0,1.7-0.1,3.3-0.1,5\r\n\t\t\t\tl3.6,3.6c0-3.3,0-6.7,0-10c0-2.5-0.7-3.3-3.1-3.3c-1.3,0-2.6,0-3.5,0l0,0c-1.4,0-2.7,0-4.1,0c-0.7,0-1.6,0-2.6,0.1l3.7,3.5\r\n\t\t\t\tC27.8,15.4,28.4,15.5,30.4,15.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M29.1,37.3c-0.9,0-1.8,0-2.7,0c-1.6,0-2.9,0-4.6,0c-1.7,0-1.7-0.8-1.7-0.8c0-5,0.2-4.5,0.2-6.6l-3.9-4.7\r\n\t\t\t\tc0,1.2,0.1,2.1,0.1,3.3c-0.8,0-1.8,0.1-2.3,0.1c-0.8,0-1-0.6-1-1.4c0-1.9,0-3.9,0-5.8L9.7,18c0,0.5,0,0.8,0,0.8\r\n\t\t\t\tc0,3.8,0,7.8,0,11.9c0,2.5,0.5,3.1,3,3.1c0.9,0,2.8-0.1,3.9-0.1c0.1,2.6,0.1,4.7,0.1,5.9c0,2.2,0.6,3,2.4,3.2c0.3,0,0.5,0,0.9,0\r\n\t\t\t\tc4.3,0,8.7,0,13,0c0.5,0,1-0.1,1.4-0.2L29.1,37.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="vector_4_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M40.3,3.6H8.4c-2.3,0-5-0.3-5,2.1v30.2c0,2.4,2.7,6.7,5,6.7h31.9c2.3,0,1.1-4.4,1.1-6.7V5.7\r\n\t\t\tC41.4,3.3,42.6,3.6,40.3,3.6z M32.4,12.6c0,0,0.7,0.1,0.4,0.1c-1.4,0.2-1.9,0.7-2.9,1.8c-0.9,1-1.5,5.1-1.5,5.1c1.3,0,3,0,3,0\r\n\t\t\ts0,1.9,0,3.4c0,0.3,0.5,0.3,0.2,0.3c-1.9,0-3.5,0-5.3,0c-0.2,0-2,4.2-3.3,6c-1.6,2.3-3.8,3.7-6.5,4.3c-1,0.2-1.9,0.3-2.9,0.3\r\n\t\t\tc-0.2,0-0.2,0-0.2-0.2c0-1.6,0-3.1,0-4.7c0-0.2-0.6-0.3-0.3-0.3c-0.1,0-0.8,0-0.8,0c0,0,0,0,0,0.1c0,0,0.8,0,1,0\r\n\t\t\tc1.6-0.1,3.3-0.7,4.4-1.8c0.4-0.4,1.8-2.3,2.1-2.8c0.2-0.3,1.6-3.4,1.9-4.1c0.3-0.8,0.6-1.6,0.9-2.4c0.1-0.3,0.8-1.8,0.9-2\r\n\t\t\tc0.4-0.8,0.8-1.5,1.2-2.3c0.2-0.4,0.5-0.8,0.8-1.2c1.6-2.2,3.4-3.7,5.9-4.4c0.9-0.2,0.8-0.6,0.8-0.6C32.4,10.5,32.4,11,32.4,12.6z\r\n\t\t\t"/>\r\n\t</g>\r\n\t<g id="vector_5_" display="inline">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path fill="#CCCBCB" d="M23,5.2c-6.9,0-12.5,4.2-12.5,13.3v11.2c0,5.5,4.3,8.7,9.3,9.7c-2.8-1.6-5-5.1-5-10.2v-7.4\r\n\t\t\t\t\tc0-6.8,3.7-12.2,8.2-12.2c4.5,0,8.2,5.5,8.2,12.2v7.4c0,5.1-1.7,8.4-3.9,10c4.5-1.2,8.2-4.3,8.2-9.4V18.5\r\n\t\t\t\t\tC35.4,9.3,29.8,5.2,23,5.2z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path fill="#CCCBCB" d="M36.6,14.6H10.1c-1.8,0-3-0.7-3,1.1v11.9c0,1.8,1.1,3.5,3,3.5h26.5c1.8,0,2.2-1.7,2.2-3.5V15.7\r\n\t\t\tC38.8,13.9,38.4,14.6,36.6,14.6z M23.4,26.3c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C27.5,24.5,25.7,26.3,23.4,26.3z"/>\r\n\t</g>\r\n\t<g id="vector_3_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M34.1,35.6c-0.3,0-0.6,0-0.9,0c-0.3-2.5,0.4-5-0.6-7.4c-1-2.3-2.6-4.1-4.3-5.8c1.7-1.7,3.3-3.4,4.3-5.7\r\n\t\t\tc1-2.3,0.4-4.8,0.7-7.3c0.3,0,0.6,0,0.9,0c0.8-0.1,1.3-0.6,1.4-1.4c0-0.8-0.5-1.3-1.4-1.3c-0.1,0-22.1,0-22.3,0\r\n\t\t\tc-0.8,0.1-1.2,0.6-1.2,1.4c0,0.8,0.5,1.3,1.3,1.4c0.4,0,0.8,0,1.3,0c0,1.4,0,2.7,0,4.1c0,1.9,0.5,3.6,1.5,5.1c1,1.4,2.1,2.6,3.2,4\r\n\t\t\tc-1.6,1.6-3.2,3.4-4.1,5.6c-1,2.3-0.3,4.8-0.6,7.3c-0.5,0-0.9-0.1-1.4,0c-0.7,0.1-1.1,0.6-1.1,1.3c0,0.8,0.4,1.6,1.1,1.8\r\n\t\t\tc0.2,0,22.4,0,22.5,0c0.8-0.1,1.3-0.8,1.3-1.6C35.4,36.4,34.9,35.7,34.1,35.6z M17,10.4c4,0,7.9,0,11.9,0c0.2,0,0.1,3.7-0.5,4.5\r\n\t\t\tc-1.5,2.2-3.5,4.4-5.5,6.2c-2-1.7-3.9-4.2-5.3-6.4C16.9,13.8,16.8,10.4,17,10.4z M28.9,34.5c-4,0-7.9,0-11.9,0\r\n\t\t\tc-0.2,0-0.1-3.4,0.5-4.2c1.5-2.2,3.5-3.8,5.5-5.6c2,1.7,3.9,3.5,5.3,5.7C29,31.3,29.1,34.5,28.9,34.5z"/>\r\n\t</g>\r\n\t<g id="vector_1_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.5,44c-1,1-2.6,1-3.6,0L1.4,5.1c-1-1-1-2.6,0-3.6c1-1,2.6-1,3.6,0l39.4,38.8C45.5,41.4,45.5,43,44.5,44\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M16.5,34.5c-1,0-1.3-0.3-1.3-1.3c0-3.2,0-5.8,0-8.3L11.4,21c0,1.5,0,3,0,4.2c0,0-0.2,9.9-0.2,14.8\r\n\t\t\t\tc0,3,0.8,4.1,3.8,4.1c5.3,0,10.4,0.1,15.7,0.1c1.5,0,2.5-0.3,3-1l-8.8-8.7C22.1,34.5,19.3,34.5,16.5,34.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M28.7,11.7c1,0,1.3,0.3,1.3,1.3c0,2.4,0,4.8,0,7.2l4.4,4.4c0-4.4,0-8.8,0-13.2c0-3-1-3.9-4-3.9\r\n\t\t\t\tc-4.5,0-9,0-13.5,0l4.4,4.3C23.8,11.7,26.2,11.7,28.7,11.7z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="Layer_7" display="inline">\r\n\t</g>\r\n</g>\r\n<g id="Layer_2">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M28.5,25.6l0.1-2c0-5.9,4.2-7.6,8.7-7.6c1.1,0,2.2,0.2,3.2,0.5c-0.9-2.9-2.5-5.5-4.9-7.8c-3.9-3.9-8.5-5.8-14-5.8\r\n\t\t\t\tc-5.3,0-9.9,1.9-13.7,5.6c1.3,0.4,3,1,5.1,1.9c0.2,0.1-0.1,0.4-0.1,0.6c0,0.6,0.5,0.9,1.1,0.7c0.6-0.2,1.1-0.6,1.6-0.9\r\n\t\t\t\tc0.8-0.4,1.6-0.7,2.5-0.6c0.5,0.1,0.9,0.4,0.8,0.9c0,0.4-0.2,0.8-0.3,1.3c-0.2,0.5-0.4,0.9-0.5,1.3c-0.1,0.5,0.1,0.7,0.6,0.5\r\n\t\t\t\tc0.4-0.2,0.7-0.4,1.1-0.6c0.7-0.4,1.3-0.1,1.6,0.6c0.1,0.4,0.1,0.8-0.2,1.1c-0.3,0.4-0.6,0.8-0.9,1.2c-0.6,0.7-1.1,1.4-1.3,2.3\r\n\t\t\t\tc-0.1,0.5-0.3,1.3-0.5,1.7c-0.1,0.2-0.2,0.8-0.3,0.8c0,0-0.1,0-0.1,0c-0.1,0-0.2-0.9-0.3-1.2c-0.3-0.9-0.7-1.4-1.6-1.5\r\n\t\t\t\tc-0.3,0-0.6-0.1-0.8-0.1c-1,0.1-1.7,0.6-1.8,1.5c-0.2,1.3,0.8,2.8,2,3.1c0.7,0.1,1.3,0.1,2,0.1c0.6,0,1.3-0.1,1.9,0\r\n\t\t\t\tc1.3,0,2.3,0.6,2.9,1.8c0.6,1.1,0.8,2.3,0.7,3.5c-0.1,1.3-0.6,2.3-1.7,3c-0.4,0.2-0.7,0.5-1,0.8c-0.5,0.4-0.8,1-0.9,1.7\r\n\t\t\t\tc-0.2,1.3-0.9,2.4-1.8,3.4c0,0.1-0.1,0.1-0.2,0.1c-0.2,0.1-0.4,0.1-0.6-0.1c-0.1-0.1-0.3-0.3-0.4-0.4c-0.7-0.5-1.1-1.1-1.3-1.9\r\n\t\t\t\tc-0.2-1-0.4-2.1-0.5-3.2c-0.2-1.4-0.7-2.7-1.9-3.6c-0.2-0.1-0.3-0.3-0.5-0.4c-1-0.9-1-2.2-0.1-3.2c0.2-0.3,0.5-0.5,0.7-0.8\r\n\t\t\t\tc0.4-0.5,0.4-1.1,0-1.6c-0.3-0.4-0.7-0.8-1.1-1c-1.2-0.7-2.5-1.4-4-0.7c-0.3,0.1-0.5,0-0.6-0.3c-0.2-0.4-0.3-0.8-0.4-1.2\r\n\t\t\t\tc-0.1-0.7,0-1.4,0-2c0-0.9-0.1-1.8-0.5-2.7c-0.1-0.2-0.8-1-1.5-2c-1.9,3.1-2.9,6.5-2.9,10.4c0,5.5,1.9,10.1,5.8,14\r\n\t\t\t\tc3.9,3.9,8.5,6.4,14,6.4c4.8,0,9-0.9,12.6-3.9h-5.7c-1.2,0-1.7-2.2-1.7-3.4v-7.8C26.9,26.8,27.3,27.3,28.5,25.6z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path d="M37.2,19.6c-3.2,0-5.7,1.9-5.7,6.1v5.1c0,6.1,11.4,6.1,11.4,0v-5.1C42.9,21.5,40.4,19.6,37.2,19.6z M40.5,29.7\r\n\t\t\t\t\tc0,6.3-6.5,5.5-6.5,0v-2.9c0-2.7,1.4-4.8,3.3-4.8c1.8,0,3.2,2.2,3.2,4.8V29.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path d="M43.2,28.1H31.1c-0.8,0-1.3-0.2-1.3,0.7v5.4c0,0.8,0.5,1.9,1.3,1.9h12.1c0.8,0,0.6-1.1,0.6-1.9v-5.4\r\n\t\t\tC43.9,27.9,44.1,28.1,43.2,28.1z M37.3,33.6c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n\t\t\tS38.2,33.6,37.3,33.6z"/>\r\n\t</g>\r\n</g>\r\n</svg>',no={DEFAULT_ERROR:i(i({},ln.DEFAULT_ERROR),{},{UI:{title:"N&#227;o foi poss&#237;vel exibir o v&#237;deo.",message:'Ocorreu um problema ao tentar carregar o v&#237;deo. <a class="player-error__link"  href="" onclick="window.location.reload(); return false;">Atualize</a> a sua p&#225;gina para tentar novamente.',className:"default-error",icon:Qs}})},io=no=i(i({},no),{},{AUTH_REQUIRED:i(i(i({},no.DEFAULT_ERROR),ln.AUTH_REQUIRED),{},{UI:{title:"Faça seu login para assistir aos conteúdos exclusivos.",message:"Alguns vídeos podem ser restritos a assinantes.",className:"auth-required",icon:eo}}),DEVICE_NOT_AUTHORIZED:i(i(i({},no.DEFAULT_ERROR),ln.DEVICE_NOT_AUTHORIZED),{},{UI:{title:"Dispositivo n&#227;o autorizado.",message:"Voc&#234; precisa cadastrar seu dispositivo para ter acesso ao conte&#250;do exclusivo.",className:"unsupported-device",icon:Js}}),DEVICE_NOT_SUPPORTED:i(i(i({},no.DEFAULT_ERROR),ln.DEVICE_NOT_SUPPORTED),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Js}}),GEOFENCING:i(i(i({},no.DEFAULT_ERROR),ln.GEOFENCING),{},{UI:i(i({},no.DEFAULT_ERROR.UI),{},{title:"O vídeo não está disponível nesta localidade",icon:to})}),GEO_BLOCKED:i(i(i({},no.DEFAULT_ERROR),ln.GEO_BLOCKED),{},{UI:{title:"V&#237;deo indispon&#237;vel nessa regi&#227;o",message:"Este v&#237;deo n&#227;o est&#225; dispon&#237;vel para ser exibido na sua regi&#227;o. Desculpe-nos pelo inconveniente.",className:"geoblocking",icon:to}}),HASH_LOAD_ERROR:i(i({},no.DEFAULT_ERROR),ln.HASH_LOAD_ERROR),PLAYER_NOT_RECOGNIZED:i(i({},no.DEFAULT_ERROR),ln.PLAYER_NOT_RECOGNIZED),RESOURCE_LOAD_ERROR:i(i({},no.DEFAULT_ERROR),ln.RESOURCE_LOAD_ERROR),LOCATION_UNAVAILABLE:i(i(i({},no.DEFAULT_ERROR),ln.LOCATION_UNAVAILABLE),{},{UI:i(i({},no.DEFAULT_ERROR.UI),{},{title:"Conteúdo disponível apenas com informação de localização.",icon:to})}),NOT_ALLOWED_DOMAIN:i(i({},no.DEFAULT_ERROR),ln.NOT_ALLOWED_DOMAIN),NOT_FOUND:i(i(i({},no.DEFAULT_ERROR),ln.NOT_FOUND),{},{UI:{title:"Conte&#250;do n&#227;o dispon&#237;vel.",message:"Infelizmente este v&#237;deo n&#227;o est&#225; mais dispon&#237;vel. Desculpe-nos pelo inconveniente.",className:"default-error",icon:Qs}}),PLAYLIST_LOAD_ERROR:i(i(i({},no.DEFAULT_ERROR),ln.PLAYLIST_LOAD_ERROR),{},{UI:i(i({},no.DEFAULT_ERROR.UI),{},{title:"Erro ao carregar o recurso de v&#237;deo."})}),RESTRICTED_CONTENT:i(i(i({},no.DEFAULT_ERROR),ln.RESTRICTED_CONTENT),{},{UI:{title:"Conteúdo restrito.",message:"O vídeo não está autorizado a ser exibido.",className:"default-error",icon:Qs}}),SIMULTANEOUS_ACCESS:i(i(i({},no.DEFAULT_ERROR),ln.SIMULTANEOUS_ACCESS),{},{UI:{title:"Acesso Simult&#226;neo.",message:"Existem muitas sess&#245;es ativas utilizando esta conta. Por favor, pare de assistir em algum dispositivo para continuar.",className:"simultaneous-access",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_">\r\n\t<path d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526c-1.026-1.021-1.026-2.685,0-3.707\r\n\t\tc1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g>\r\n\t\t<path d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013c1.215,0,1.561,0,4.561,0\r\n\t\t\tc0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),STREAMING_PAUSE_TIME_EXPIRED:i(i(i({},no.DEFAULT_ERROR),ln.STREAMING_PAUSE_TIME_EXPIRED),{},{UI:{title:"Sess&#227;o expirada.",message:'O v&#237;deo ficou pausado por muito tempo. Para voltar a assistir, <a class="player-error__link" href="" onclick="window.location.reload(); return false;">atualize</a> a p&#225;gina.',className:"time-expired",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_">\r\n\t<path d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),SUBSCRIBERS_ONLY:i(i(i({},no.DEFAULT_ERROR),ln.SUBSCRIBERS_ONLY),{},{UI:{title:"Conte&#250;do exclusivo para assinantes.",message:"Voc&#234; precisa ser assinante para ter acesso ao conte&#250;do.",className:"subscriber-only",icon:eo}}),UNSUPPORTED_BROWSER:i(i(i({},no.DEFAULT_ERROR),ln.UNSUPPORTED_BROWSER),{},{UI:{title:"Seu navegador est&#225; velhinho.",message:"Para assistir aos nossos v&#237;deos, por favor, atualize-o para uma vers&#227;o mais nova.",className:"unsupported-browser",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="94.054px" height="58.925px" viewBox="0 0 94.054 58.925" enable-background="new 0 0 94.054 58.925" xml:space="preserve">\r\n<g>\r\n\t<path d="M89.057,0H13.051c-2.755,0-4.997,2.242-4.997,4.997v14.44C3.515,20.05,0,23.941,0,28.646v28.278c0,1.104,0.896,2,2,2\r\n\t\ts2-0.896,2-2V28.646c0-2.492,1.734-4.574,4.054-5.139v30.421c0,2.755,2.241,4.996,4.997,4.996h76.006\r\n\t\tc2.756,0,4.997-2.241,4.997-4.996V4.997C94.054,2.242,91.812,0,89.057,0z M23.054,3c1.105,0,2,0.896,2,2s-0.895,2-2,2\r\n\t\tc-1.104,0-2-0.896-2-2S21.95,3,23.054,3z M18.054,3c1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S16.95,3,18.054,3z M13.054,3\r\n\t\tc1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S11.95,3,13.054,3z M91.054,53.929c0,1.102-0.894,1.996-1.997,1.996H13.051\r\n\t\tc-1.103,0-1.997-0.895-1.997-1.996V23.663c2.062,0.728,3.552,2.676,3.552,4.983c0,1.104,0.896,2,2,2s2-0.896,2-2\r\n\t\tc0-4.531-3.257-8.311-7.552-9.133V10h80V53.929z M91.054,6c0,0.552-0.447,1-1,1h-61c-0.552,0-1-0.448-1-1V4c0-0.552,0.448-1,1-1h61\r\n\t\tc0.553,0,1,0.448,1,1V6z"/>\r\n\t<path d="M55.14,37.386c-0.828,0-1.5,0.672-1.5,1.5c0,1.379-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5c0-0.828-0.672-1.5-1.5-1.5\r\n\t\tc-0.829,0-1.5,0.672-1.5,1.5c0,3.032,2.468,5.5,5.5,5.5s5.5-2.468,5.5-5.5C56.64,38.058,55.968,37.386,55.14,37.386z"/>\r\n\t<path d="M21.921,23.039c3.199,0,5.802,2.604,5.802,5.804c0,4.854,3.951,8.805,8.808,8.805c4.854,0,8.803-3.95,8.803-8.805\r\n\t\tc0-3.2,2.604-5.804,5.805-5.804c3.199,0,5.803,2.604,5.803,5.804c0,4.854,3.949,8.805,8.804,8.805s8.804-3.95,8.804-8.805\r\n\t\tc0-3.2,2.604-5.804,5.804-5.804c0.828,0,1.5-0.671,1.5-1.5s-0.672-1.5-1.5-1.5c-3.038,0-5.721,1.547-7.304,3.894\r\n\t\tc-1.583-2.347-4.266-3.894-7.304-3.894s-5.721,1.547-7.304,3.894c-1.583-2.347-4.266-3.894-7.303-3.894\r\n\t\tc-3.038,0-5.722,1.547-7.305,3.894c-1.583-2.347-4.265-3.894-7.303-3.894c-3.039,0-5.724,1.547-7.307,3.895\r\n\t\tc-1.583-2.348-4.265-3.895-7.303-3.895c-0.829,0-1.5,0.671-1.5,1.5S21.093,23.039,21.921,23.039z M65.745,23.039\r\n\t\tc3.2,0,5.804,2.604,5.804,5.804c0,3.201-2.604,5.805-5.804,5.805s-5.804-2.604-5.804-5.805\r\n\t\tC59.941,25.643,62.545,23.039,65.745,23.039z M36.531,23.039c3.2,0,5.803,2.604,5.803,5.804c0,3.201-2.603,5.805-5.803,5.805\r\n\t\tc-3.202,0-5.808-2.604-5.808-5.805C30.724,25.643,33.329,23.039,36.531,23.039z"/>\r\n\t<path d="M21.921,30.343h2.937c0.829,0,1.5-0.672,1.5-1.5s-0.671-1.5-1.5-1.5h-2.937c-0.829,0-1.5,0.672-1.5,1.5\r\n\t\tS21.093,30.343,21.921,30.343z"/>\r\n\t<path d="M80.353,27.343h-2.938c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h2.938c0.828,0,1.5-0.672,1.5-1.5\r\n\t\tS81.181,27.343,80.353,27.343z"/>\r\n\t<path d="M78.476,31.036c-0.586-0.586-1.535-0.586-2.121,0s-0.586,1.535,0,2.121l1.492,1.492c0.293,0.293,0.677,0.439,1.061,0.439\r\n\t\ts0.768-0.146,1.061-0.439c0.586-0.586,0.586-1.535,0-2.121L78.476,31.036z"/>\r\n\t<path d="M23.797,31.037l-1.49,1.492c-0.585,0.586-0.584,1.535,0.001,2.121c0.293,0.292,0.676,0.438,1.06,0.438\r\n\t\tc0.384,0,0.769-0.146,1.062-0.44l1.49-1.492c0.585-0.586,0.584-1.535-0.001-2.121C25.333,30.45,24.383,30.449,23.797,31.037z"/>\r\n</g>\r\n</svg>'}}),UNSUPPORTED_MOBILE_DEVICE:i(i(i({},no.DEFAULT_ERROR),ln.UNSUPPORTED_MOBILE_DEVICE),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Js}}),TIMESTAMP_ERROR:i(i(i({},no.DEFAULT_ERROR),ln.TIMESTAMP_ERROR),{},{UI:{title:"Relógio adiantado.",message:"Para assistir, ajuste o horário do seu dispositivo conforme sua localização.",className:"unsupported-device",icon:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M11.99 2C17.52 2 22 6.48 22 12s-4.48 10-10.01 10C6.47 22 2 17.52 2 12S6.47 2 11.99 2zM12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13v5.25l4.5 2.67-.75 1.23L11 13V7h1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'}})}),ro="ERROR_SCREEN_SHOW",ao="ERROR_SCREEN_HIDE",so=wn.session;Le.register(ro),Le.register(ao);var oo=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).playerId=i.options.playerId,i}return o(n,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<div class="player-error__background-overlay"></div>\n<div class="player-error__content">\n  <span class="player-error__icon <%= className %>"><%= icon %></span>\n  <p class="player-error__title"><%= title %></p>\n  <p class="player-error__description"><%= message %></p>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"posterImage",get:function(){return this.container&&(this.container.getPlugin("poster")||{}).posterImage}},{key:"attributes",get:function(){return{class:"player-error"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindPlaybackEvents),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.clearErrors)}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,Le.PLAYBACK_ERROR,this.onError)}},{key:"clearErrors",value:function(){this.error=null,this.$el.hide(),this.core.trigger(Le.Custom.ERROR_SCREEN_HIDE)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=i(i({},e),{},{videoSessionId:so.getVideoSessionId(this.options.playerId)}),this.showErrorScreen(),this.logError()}},{key:"showErrorScreen",value:function(){this.render(),this.$el.show(),this.core.trigger(Le.Custom.ERROR_SCREEN_SHOW)}},{key:"logError",value:function(){switch(this.error.level){case Ye.Levels.INFO:we.info("player_error","",this.error);break;case Ye.Levels.WARN:we.warn("player_error","",this.error);break;case Ye.Levels.FATAL:default:we.error("player_error","",this.error)}}},{key:"setPoster",value:function(){!(this.error.code===io.RESTRICTED_CONTENT.code)&&this.posterImage&&this.$el.css({"background-image":"url("+this.posterImage+")"})}},{key:"getErrorUI",value:function(e){var t=Object.values(io).find((function(t){return t.code===e}));return t&&t.UI||io.DEFAULT_ERROR.UI}},{key:"render",value:function(){if(this.error){Object.assign(this.error.UI,this.getErrorUI(this.error.code));var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 .player-error {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  cursor: default;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n}\n.clappr-player#wp3-player-0 .player-error__background-overlay {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n  position: absolute;\n  top: 0;\n}\n.clappr-player#wp3-player-0 .player-error__link, .clappr-player#wp3-player-0 .player-error__link:visited {\n  color: #CCCACA;\n}\n.clappr-player#wp3-player-0 .player-error__content {\n  position: relative;\n  line-height: 1.4;\n}\n.clappr-player#wp3-player-0 .player-error__title {\n  color: #CCCACA;\n  font-weight: bold;\n  font-size: 18px;\n}\n.clappr-player#wp3-player-0 .player-error__description {\n  color: #CCCACA;\n  width: 90%;\n  margin: 0 auto;\n  font-size: 14px;\n}\n.clappr-player#wp3-player-0 .player-error__icon svg {\n  width: 30px;\n  max-height: 30px;\n  fill: #ffffff;\n}\n.clappr-player#wp3-player-0 .player-error__icon.unsupported-browser svg {\n  width: 40px;\n}\n.clappr-player#wp3-player-0 .player-error--hide {\n  display: none;\n}",{playerId:this.playerId});return this.$el.html(this.template(i({},this.error.UI))),this.setPoster(),this.$el.append(e[0]),this.core.$el.append(this.el),this}}}]),n}(qe),lo=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"name",get:function(){return"overlay"}},{key:"internalName",get:function(){return"container-overlay"}},{key:"attributes",get:function(){return{class:"".concat(this.internalName)}}},{key:"playerId",get:function(){return this.options.playerId}},{key:"corePlugins",get:function(){return this.core.plugins}},{key:"bindEvents",value:function(){this.listenToOnce(this.core,Le.CORE_READY,this.initPlugins),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.bindAdEvents()}},{key:"bindAdEvents",value:function(){this.listenTo(this.container,In.DFP_AD_STARTED,this.disableVisibility),this.listenTo(this.container,In.DFP_AD_COMPLETED,this.enableVisibility),this.listenTo(this.container,In.DFP_AD_CLOSED,this.enableVisibility),this.listenTo(this.container,In.DFP_AD_SKIPPED,this.enableVisibility)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"--hidden"))}},{key:"enableVisibility",value:function(){this.$el.removeClass("".concat(this.internalName,"--hidden"))}},{key:"filterItems",value:function(e){return e instanceof n&&e!==this}},{key:"initPlugins",value:function(){var e=this;this.corePlugins.filter((function(t){return e.filterItems(t)})).forEach((function(t){return e.renderPlugin(t)}))}},{key:"renderPlugin",value:function(e){var t=e.el;this.$el.append(t)}},{key:"render",value:function(){this.$el.empty();var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 .container-overlay {\n  width: 100%;\n  z-index: 2;\n}\n.clappr-player#wp3-player-0 .container-overlay--hidden {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control::after {\n  height: 0;\n}",{playerId:this.playerId});return this.$el.append(e[0]),this.core.$el.append(this.el),this.triggerDidShowOverlay(),this}},{key:"triggerDidShowOverlay",value:function(){this.core.trigger(In.DID_SHOW_OVERLAY)}}]),n}(qe),uo="24px",co="40px",ho=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).lastChromelessValue=!!i.options.chromeless,i}return o(n,[{key:"name",get:function(){return"drawer"}},{key:"internalName",get:function(){return"drawer"}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e}},{key:"attributes",get:function(){return{class:"".concat(this.internalName," ").concat(this.internalName,"-hidden")}}},{key:"content",get:function(){return this._content||""},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._content=e}},{key:"height",get:function(){return this._height||"inherit"},set:function(e){this._height=e}},{key:"heightImmersion",get:function(){return"50%"}},{key:"heightImmersionUnit",get:function(){return this.heightImmersion.includes("%")?"%":"px"}},{key:"heightHint",get:function(){return uo}},{key:"headerHeight",get:function(){return"57px"}},{key:"hasHeader",get:function(){return!1}},{key:"hasPlaceholder",get:function(){return!1}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"gradientHeadSize",get:function(){return parseInt("32px",10)}},{key:"defaultExpandValues",get:function(){return{drawerExpanded:"50%",drawerHintSize:this.effectiveHeightHint}}},{key:"effectiveHeightHint",get:function(){var e=parseInt(this.heightHint,10);return Number.isInteger(e)?e>parseInt(co,10)?co:e<parseInt(uo,10)?uo:this.heightHint:uo}},{key:"container",get:function(){return this.core.activeContainer}},{key:"inactivityTimeout",get:function(){return 2e3}},{key:"bindEvents",value:function(){this.bindMouseEvents(),this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,Le.MEDIACONTROL_SHOW,this.showHint),this.listenTo(this.core,In.WM_SHARE_HIDE,this.showHint),this.listenTo(this.core,In.TAP_TO_UNMUTE_SHOW,this.showHint),this.listenTo(this.core,In.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked),this.listenTo(this.core,In.WM_SHARE_HIDE,this.bindMouseEvents),this.listenTo(this.core,Le.MEDIACONTROL_HIDE,this.hideHint),this.listenTo(this.core,In.WM_SHARE_SHOW,this.unbindMouseEvents),this.listenTo(this.core,In.WM_SHARE_SHOW,this.hideHint),this.listenTo(this.core,In.DID_CLOSE_HEADER,this.hide),this.listenTo(this.core,In.SYNC_DRAWER_STATE_REQUEST,this.currentState),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.core,Le.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,Le.ERROR,this.onError)}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,In.DFP_AD_STARTED,this.onDfpStarted),this.listenTo(this.container,In.DFP_AD_SKIPPED,this.onDfpClose),this.listenTo(this.container,In.DFP_AD_CLOSED,this.onDfpClose),this.listenTo(this.container,In.DFP_AD_COMPLETED,this.onDfpClose)}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.bindContainerEvents()}},{key:"onDfpStarted",value:function(){this.isDfpActive=!0,this.isPreviouslyExpanded=this.isExpanded,this.hide(),this.hideHint()}},{key:"onDfpClose",value:function(){this.isDfpActive=!1,this.isPreviouslyExpanded&&this.show()}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===Ye.Levels.FATAL&&this.showHint()}},{key:"updateChromelessState",value:function(){this.disableDrawer(),!1===this.options.chromeless&&(this.hideHint(),this.enableDrawer()),this.lastChromelessValue=this.options.chromeless}},{key:"bindMouseEvents",value:function(){var e=this;this.enableVisibilityDebounced||(this.enableVisibilityDebounced=Ia((function(){return e.enableVisibility.apply(e,arguments)}),100,{trailing:!1})),this.listenTo(this.core,Le.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.listenTo(this.core,Le.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"unbindMouseEvents",value:function(){this.stopListening(this.core,Le.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.stopListening(this.core,Le.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"events",get:function(){var e={click:"toggle"},t={mouseenter:"setUserKeepVisible",mouseleave:"resetUserKeepVisible",click:"toggle"},n=i(i(i({},e),t),{},{touchend:this.resetUserKeepVisible});return J.isHybridDevice?n:J.isMobile?e:t}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,!this.lastChromelessValue&&this.updateResponsiveStyle())}},{key:"onTapToUnmuteClicked",value:function(){J.isMobile&&this.hideHint()}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?this.disableDrawer():this.enableDrawer()}},{key:"enableDrawer",value:function(){this.$el.removeClass("".concat(this.internalName,"-disabled"))}},{key:"disableDrawer",value:function(){this.$el.addClass("".concat(this.internalName,"-disabled"))}},{key:"showHint",value:function(){this.isVisible()||this.isDfpActive||(this.$el.removeClass("".concat(this.internalName,"-hidden")),this.onDidShowDrawerHint())}},{key:"onDidShowDrawerHint",value:function(){this.core.trigger(In.DID_SHOW_DRAWER_HINT)}},{key:"hideHint",value:function(){!this.isExpanded&&this.isVisible()&&(this.disableVisibility(),this.onDidHideDrawerHint())}},{key:"onDidHideDrawerHint",value:function(){this.core.trigger(In.DID_HIDE_DRAWER_HINT)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"-hidden"))}},{key:"currentState",value:function(){this.core.trigger(In.SYNC_DRAWER_STATE_RESPONSE,this.isExpanded)}},{key:"show",value:function(e){this.isExpanded||(e&&e.stopPropagation(),this.isExpanded=!0,this.hideDelayed(),this.core.trigger(In.WILL_SHOW_DRAWER),this.addExpandBackground(),this.onDidShowDrawer())}},{key:"onDidShowDrawer",value:function(){this.core.trigger(In.DID_SHOW_DRAWER)}},{key:"hide",value:function(){var e=this;this.isExpanded&&(this.isExpanded=!1,this.core.trigger(In.WILL_HIDE_DRAWER),this.$el.removeClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.removeClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")})),this.onDidHideDrawer())}},{key:"onDidHideDrawer",value:function(){this.core.trigger(In.DID_HIDE_DRAWER)}},{key:"enableVisibility",value:function(e){var t=this;J.isMobile&&e&&"mousemove"===e.type||(clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout),this.isExpanded&&this.isVisible()||this.showHint())}},{key:"isVisible",value:function(){return!this.$el.hasClass("".concat(this.internalName,"-hidden"))}},{key:"hideDelayed",value:function(e){var t=this;!this.isExpanded||this.inactivityTimeout<=0||!this.isVisible()||J.supportsTouchEvents||(clearTimeout(this.hideId),this.userKeepVisible||e&&"mouseout"===e.type?this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout):!this.userKeepVisible&&this.disableVisibility())}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1)}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0)}},{key:"parseStyle",value:function(){var e=':root {\n  --player-drawer-hint-size: heightHint;\n}\n\n.clappr-player#wp3-player-0 .drawer--bottom {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  bottom: calc(-100% + var(--player-drawer-hint-size));\n  height: 100%;\n  background: transparent;\n  z-index: 9999;\n  will-change: transform, opacity;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer--bottom * {\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .drawer--bottom:hover {\n  transform: translateY(-12px);\n  transition: transform 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand {\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n  transform: translateY(heightImmersion);\n  transition: transform 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand * {\n  pointer-events: auto;\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand:hover {\n  transform: translateY(heightImmersion);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand:before {\n  content: "";\n  position: absolute;\n  top: -100%;\n  height: 100%;\n  width: 100%;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand__collapse {\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:hover {\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:before {\n  content: "";\n  position: absolute;\n  top: -100%;\n  height: 100%;\n  width: 100%;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-expand-with-header:before {\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.6) 100%);\n}\n.clappr-player#wp3-player-0 .drawer--bottom-disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .drawer--bottom-hidden {\n  pointer-events: none;\n  opacity: 0;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .drawer--bottom-hidden:hover {\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n\n.clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand {\n  transform: translateY(immersionFullScreen);\n}\n.clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand:hover {\n  transform: translateY(immersionFullScreen);\n}'.toString();return e=(e=(e=e.replace(/heightImmersion/g,this.expandOffset())).replace(/immersionFullScreen/g,this.expandOffsetFullscreen())).replace(/heightHint/g,this.effectiveHeightHint)}},{key:"expandOffset",value:function(){}},{key:"expandOffsetFullscreen",value:function(){}},{key:"addExpandBackground",value:function(){var e=this;this.$el.addClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.addClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")}))}},{key:"render",value:function(){var e=Cn.getStyleFrom(this.parseStyle(),{playerId:this.playerId});return this.$el.html(this.content),this.$el.append(e[0]),this.core.trigger(In.SHOW_DRAWER_REQUESTED),this.hasPlaceholder&&this.core.trigger(In.DRAWER_HAS_PLACEHOLDER,this.effectiveHeightHint),this.updateChromelessState(),this}}]),n}(lo),po=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"drawer_bottom"}},{key:"internalName",get:function(){return"drawer--bottom"}},{key:"hasPlaceholder",get:function(){return!0}},{key:"expandOffset",value:function(){return"max(".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") ")}},{key:"expandOffsetFullscreen",value:function(){return"px"==this.heightImmersionUnit?"max(-".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") "):"max(".concat(this.specifiedExpandOffsetPercentageFullscreen(),", ").concat(this.maxExpandOffset(),") ")}},{key:"maxExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," + ").concat(this.headerSize())}},{key:"specifiedExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," - ").concat(this.translateYValue())}},{key:"specifiedExpandOffsetPercentageFullscreen",value:function(){return"-".concat(this.translateYValue())}},{key:"headerSize",value:function(){return"".concat(this.headerHeight,"  - 100%")}},{key:"translateYValue",value:function(){return"".concat(parseInt(this.heightImmersion,10)).concat(this.heightImmersionUnit)}},{key:"toggle",value:function(e){e&&(this.isExpanded?this.clickAtHideArea(e)&&v(c(n.prototype),"hide",this).call(this):v(c(n.prototype),"show",this).call(this))}},{key:"clickAtHideArea",value:function(e){return e.clientY>=0&&e.clientY<=this.drawerYPosition()}},{key:"drawerYPosition",value:function(){return Math.round(this.$el[0].getBoundingClientRect().top)-1}}]),n}(ho),fo=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"name",get:function(){return"drawer-header"}},{key:"attributes",get:function(){return{class:"".concat(this.name," ").concat(this.name,"--hidden")}}},{key:"title",get:function(){return this._title},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._title=e}},{key:"template",get:function(){return je('<div class="drawer-header-panel drawer-header-panel--hidden">\n    <div class="opposites-container">\n        <div class="drawer-header-position__left">\n            <div class="drawer-header-element drawer-header-title">\n                <%= title %>\n            </div>\n        </div>\n        <div class="drawer-header-position__right">\n            <div class="drawer-header-element drawer-header-button" data-controls data-close>\n                <div class="drawer-header__close"><%= closeIcon %></div>\n            </div>\n        </div>\n    </div>\n</div>')}},{key:"bindEvents",value:function(){this.listenTo(this.core,In.SHOW_HEADER_REQUESTED,this.showHeader),this.listenTo(this.core,In.CLOSE_HEADER_REQUESTED,this.closeHeader)}},{key:"bindCloseButton",value:function(){var e=this;this.$el.find(".".concat(this.name,"__close")).on("click",(function(t){t&&t.stopPropagation(),e.closeHeader()}))}},{key:"showHeader",value:function(e){this.updateTitle(e),this.core.trigger(In.WILL_SHOW_HEADER),this.show(),this.core.trigger(In.DID_SHOW_HEADER)}},{key:"closeHeader",value:function(){this.core.trigger(In.WILL_CLOSE_HEADER),this.hide(),this.core.trigger(In.DID_CLOSE_HEADER)}},{key:"updateTitle",value:function(e){this.title=e,this.$el.find(".".concat(this.name,"-title")).text(this.title)}},{key:"show",value:function(){this.core.trigger(In.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).removeClass("".concat(this.name,"-panel--hidden")),this.$el.removeClass("".concat(this.name,"--hidden"))}},{key:"hide",value:function(){this.core.trigger(In.DID_HIDE_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).addClass("".concat(this.name,"-panel--hidden")),this.$el.addClass("".concat(this.name,"--hidden"))}},{key:"render",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .drawer-header {\n  height: 57px;\n  left: 0px;\n  position: absolute;\n  width: 100%;\n  z-index: 999;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s;\n}\n.clappr-player#wp3-player-0 .drawer-header-modal--visible .media-control-panel__upper {\n  display: none;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel {\n  padding: 4px 4px 0;\n  position: relative;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-element, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-element {\n  padding: 12px;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-button, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-button {\n  display: inline-block;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  background-color: transparent;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left {\n  width: calc(100% - 48px);\n}\n.clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-title {\n  box-sizing: border-box;\n  color: #fff;\n  pointer-events: none;\n  text-align: left;\n  text-shadow: none;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  overflow: hidden;\n  font-family: "opensans-regular";\n  letter-spacing: 0;\n  color: #fff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  margin-bottom: 6px;\n  font-size: 18px;\n  line-height: 24px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.clappr-player#wp3-player-0 .drawer-header-panel--hidden {\n  display: none !important;\n}\n.clappr-player#wp3-player-0 .drawer-header--hidden {\n  opacity: 0;\n  transform: translateY(100%);\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  z-index: 0;\n}',{playerId:this.core.options.playerId});return this.$el.empty(),this.$el.html(this.template({title:this.title,closeIcon:Qa})),this.$el.append(e[0]),this.core.$el.append(this.el),this.bindCloseButton(),this}}]),n}(qe),go=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"name",get:function(){return"media_control_placeholder"}},{key:"panel",get:function(){return"front-layer"}},{key:"position",get:function(){return""}},{key:"heightHint",get:function(){return 0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"attributes",get:function(){return{class:"media-control-placeholder disabled hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,In.DRAWER_HAS_PLACEHOLDER,this.onDrawerHasPlaceholder),this.listenTo(this.core,Le.CORE_RESIZE,this.onPlayerResize)}},{key:"onDrawerHasPlaceholder",value:function(){this.hasDrawer=!0,this.enablePlaceholder()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.updateResponsiveStyle())}},{key:"enablePlaceholder",value:function(e){e&&this.heightHint!==e&&this.$el.css({height:e}),this.$el.removeClass("disabled")}},{key:"disablePlaceholder",value:function(){this.$el.addClass("disabled")}},{key:"show",value:function(){this.$el.removeClass("hidden")}},{key:"updateResponsiveStyle",value:function(){this.hasDrawer&&(this.shouldDisable?this.disablePlaceholder():this.enablePlaceholder())}},{key:"render",value:function(){this.$el.empty();var e=Cn.getStyleFrom(".clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder {\n  position: relative;\n  width: 100%;\n  height: 24px;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.hidden {\n  visibility: hidden;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.disabled {\n  display: none;\n}\n.clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.media-control-element {\n  padding: 0;\n}\n.clappr-player#wp3-player-0 .media-control.ad .media-control-placeholder {\n  display: none;\n}",{playerId:this.core.options.playerId});return this.$el.append(e[0]),this}}]),n}(Ii),vo=ca(It),mo=ua((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="latest/",n(n.s="./src/clappr-stats.js")}({"./node_modules/lodash.get/index.js":
/*!******************************************!*\
    !*** ./node_modules/lodash.get/index.js ***!
    \******************************************/
/*! no static exports found */function(e,t,n){(function(t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="__lodash_hash_undefined__",a="[object Function]",s="[object GeneratorFunction]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,f="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,g=p||f||Function("return this")(),v=Array.prototype,m=Function.prototype,y=Object.prototype,b=g["__core-js_shared__"],E=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",A=m.toString,_=y.hasOwnProperty,T=y.toString,k=RegExp("^"+A.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=g.Symbol,w=v.splice,C=U(g,"Map"),I=U(Object,"create"),D=S?S.prototype:void 0,R=D?D.toString:void 0;function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function M(e,t){var n;t=function(e,t){if(j(e))return!1;var n=void 0===e?"undefined":i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!G(e))||(l.test(e)||!o.test(e)||null!=t&&e in Object(t))}(t,e)?[t]:j(n=t)?n:F(n);for(var r=0,a=t.length;null!=e&&r<a;)e=e[V(t[r++])];return r&&r==a?e:void 0}function N(e){if(!K(e)||(t=e,E&&E in t))return!1;var t,n=function(e){var t=K(e)?T.call(e):"";return t==a||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?k:h;return n.test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function B(e,t){var n=e.__data__;return function(e){var t=void 0===e?"undefined":i(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}L.prototype.clear=function(){this.__data__=I?I(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===r?void 0:n}return _.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:_.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?r:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=x(t,e);return!(n<0||(n==t.length-1?t.pop():w.call(t,n,1),0))},P.prototype.get=function(e){var t=this.__data__,n=x(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return x(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,i=x(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},O.prototype.clear=function(){this.__data__={hash:new L,map:new(C||P),string:new L}},O.prototype.delete=function(e){return B(this,e).delete(e)},O.prototype.get=function(e){return B(this,e).get(e)},O.prototype.has=function(e){return B(this,e).has(e)},O.prototype.set=function(e,t){return B(this,e).set(e,t),this};var F=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(G(e))return R?R.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(d,"$1"):t||e)})),n}));function V(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var s=e.apply(this,i);return n.cache=a.set(r,s),s};return n.cache=new(H.Cache||O),n}H.Cache=O;var j=Array.isArray;function K(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function G(e){return"symbol"==(void 0===e?"undefined":i(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}(e)&&"[object Symbol]"==T.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:M(e,t);return void 0===i?n:i}}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},"./src/clappr-stats.js":
/*!*****************************!*\
    !*** ./src/clappr-stats.js ***!
    \*****************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(/*! @clappr/core */"@clappr/core"),o=n(/*! lodash.get */"./node_modules/lodash.get/index.js"),l=(i=o)&&i.__esModule?i:{default:i},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._runEach=(0,l.default)(e,"options.clapprStats.runEach",5e3),n._onReport=(0,l.default)(e,"options.clapprStats.onReport",n._defaultReport),n._uriToMeasureLatency=(0,l.default)(e,"options.clapprStats.uriToMeasureLatency"),n._urisToMeasureBandwidth=(0,l.default)(e,"options.clapprStats.urisToMeasureBandwidth"),n._runBandwidthTestEvery=(0,l.default)(e,"options.clapprStats.runBandwidthTestEvery",10),n._bwMeasureCount=0,n._completion={watch:(0,l.default)(e,"options.clapprStats.onCompletion",[]),calls:[]},n._newMetrics(),n.on(t.REPORT_EVENT,n._onReport),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start"+e]}},{key:"_start",value:function(e){this["_start"+e]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start"+e]}},{key:"_defaultReport",value:function(e){console.log(e)}},{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.2"}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}}]),a(t,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,s.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,s.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,s.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,s.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,s.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,s.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,s.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,s.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,s.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,s.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,s.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,s.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,s.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,s.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(e){var t=parseInt((0,l.default)(e,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var i=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];i.end=n,i.time=n-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,s.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,s.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,s.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,s.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,n=1e3*e.total,i=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=t,this._metrics.extra.watchedPercentage=t/n*100,0===i?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[i-1][1]=t,this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end||(r.time=this._now()-r.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,s.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,s.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,i=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||i||(s.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(t.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(t.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this._metrics.extra.bitratesHistory.map((function(e){return e.time})).reduce((function(e,t){return e+t}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate*e.time})).reduce((function(e,t){return e+t}),0)/e,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(e,t){return e.time<t.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"_measureLatency",value:function(){var e=this;if(this._uriToMeasureLatency){var t,n=[],i=function(){t=n[2]-n[1],e._metrics.timers.latency=t};!function t(){if(n.push(e._now()),n.length>2)i();else{var r=new Image;r.onload=t,r.src=e._uriToMeasureLatency+"?"+Math.random()+"="+e._now()}}()}}},{key:"_measureBandwidth",value:function(){var e=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var t=0,n=function(n){var i=(e._urisToMeasureBandwidth[t-1].end-e._urisToMeasureBandwidth[t-1].start)/1e3,r=8*n.loaded/i;e._metrics.extra.bandwidth=r,e._urisToMeasureBandwidth.forEach((function(e){e.start=0,e.end=0,e.expired=!1,clearTimeout(e.timer)}))};!function i(r){if(t>0&&(e._urisToMeasureBandwidth[t-1].end=e._now(),clearTimeout(e._urisToMeasureBandwidth[t-1].timer)),t>=e._urisToMeasureBandwidth.length||t>0&&e._urisToMeasureBandwidth[t-1].expired)n(r);else{var a=new XMLHttpRequest;a.open("GET",e._urisToMeasureBandwidth[t].url,!0),a.responseType="arraybuffer",a.onload=a.onabort=i,e._urisToMeasureBandwidth[t].start=e._now(),e._urisToMeasureBandwidth[t].timer=setTimeout((function(t){e._urisToMeasureBandwidth[t].expired=!0,a.abort()}),e._urisToMeasureBandwidth[t].timeout,t),a.send()}t++}()}this._bwMeasureCount++}}]),t}(s.ContainerPlugin);t.default=u,u.REPORT_EVENT="clappr:stats:report",u.PERCENTAGE_EVENT="clappr:stats:percentage",e.exports=t.default},"@clappr/core":
/*!*************************!*\
    !*** external "Clappr" ***!
    \*************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(vo)})),yo=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),e.options.clapprStats=e.options.clapprStats||{runEach:1e3,onReport:function(e){return i.onMetricsReceived(e)}},i=t.call(this,e)}return o(n,[{key:"innerPlayback",get:function(){return this.container.playback&&this.container.playback.playback}},{key:"_playbackName",get:function(){return this.innerPlayback&&this.innerPlayback.name}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"onMetricsReceived",value:function(e){this.container.trigger(In.WM_STATS_REPORTED,e)}}]),n}(la(mo)),bo=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"cuepoints"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this._parseCuepoints)}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.container.playback,Le.PLAYBACK_TIMEUPDATE,this._onPositionUpdate)}},{key:"_onPositionUpdate",value:function(e){var t=this,n=e.current;this._cuepoints.forEach((function(e){(t._previousPosition<e.time||n===e.time)&&(n===e.time||n>=e.time&&n-t._previousPosition<=1)&&(we.debug(t.name,"cuepoint reached:",e),t.container.trigger(In.DID_REACH_CUEPOINT,e))})),this._previousPosition=n}},{key:"_parseCuepoints",value:function(e){var t=this;this._cuepoints=(e.cuepoints||[]).map((function(e){var t=i({},e);return t.time/=1e3,t})).sort((function(e,t){return e.time-t.time})),we.debug(this.name,"cuepoints loaded:",this._cuepoints),this._cuepoints.length>0&&($n((function(){return t.container.trigger(In.DID_LOAD_CUEPOINTS,t._cuepoints)})),this._bindPlaybackEvents(),this._previousPosition=-.01)}}]),n}(lt),Eo=function(){function e(t){a(this,e),this.channel=t.channel,this.channelId=t.channel_id,this.program=t.program,this.programId=t.program_id,this.startTime=t.start_time,this.endTime=t.end_time,this.rawData=t}return o(e,[{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=this.startTime-t&&e<this.endTime+t}},{key:"toString",value:function(){var e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},t=new Date(1e3*this.startTime).toLocaleDateString(void 0,e),n=new Date(1e3*this.endTime).toLocaleDateString(void 0,e);return"Program [".concat(this.channel).concat(this.channelId?" (".concat(this.channelId,")"):""," - ").concat(this.program).concat(this.programId?" (".concat(this.programId,")"):"",": ").concat(t," - ").concat(n,"]")}}]),e}(),Ao=function(){function e(t){a(this,e),this._programs=t.programs||[],this._programs=this._programs.map((function(e){return new Eo(e)})).sort((function(e,t){return t.endTime-e.endTime})),this.rawData=t}return o(e,[{key:"programs",get:function(){return this._programs}},{key:"latestProgram",get:function(){return this.programs[0]}},{key:"getProgramForTime",value:function(e,t){return this.programs&&this.programs.find((function(n){return n.contains(e,t)}))}}]),e}(),_o=wn.truncateTimeSeconds,To=wn.getCurrentTime,ko=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e))._playback=e.playback,i._throttledPositionUpdate=Ia((function(){var e;return(e=i)._onPositionUpdate.apply(e,arguments)}),5e3,{trailing:!1}),i._url=i.epgApiUrl,i}return o(n,[{key:"name",get:function(){return"epg"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"epgApiUrl",get:function(){return"".concat(this.options.env.protocol,"://epg-api.video.globo.com/v2/programs")}},{key:"playback",get:function(){return this._playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this._onResourceReady)}},{key:"parseEPG",value:function(e){this._updating=!1,this._epg=new Ao(e),this.container.trigger(In.DID_LOAD_EPG,{programs:this._epg.programs}),this._onPositionUpdate()}},{key:"updateEPG",value:function(){if(!this._updating){this._updating=!0;var e=To(this.innerPlayback),t=_o(e-this.playback.getDuration()),n=_o(e+1800);this._loadEpgData(t,n)}}},{key:"updateProgramForTime",value:function(e){if(!this._currentProgram||!this._currentProgram.contains(e)){var t=this._epg&&this._epg.getProgramForTime(e,5);this._currentProgram!==t&&(this._currentProgram=t,this.container.trigger(In.DID_CHANGE_CURRENT_PROGRAM,{program:this._currentProgram}))}}},{key:"_onResourceReady",value:function(e){var t,n=e.isLive,i=e.transmission&&e.transmission.id,r=!(null===(t=this.innerPlayback)||void 0===t||!t.getProgramDateTime);n&&i&&r?(this._video=e,this._transmissionId=i,this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate),this.listenTo(this.playback,Le.PLAYBACK_SEEKED,this._onPositionUpdate),this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,this.updateEPG)):we.info(this.name,"skipping EPG loading (isLive=".concat(n,", transmissionId=").concat(i,")"))}},{key:"_loadEpgData",value:function(e,t){var n=this;if(!isNaN(e)&&!isNaN(t)){var i="".concat(this._url,"?transmission_id=").concat(this._transmissionId,"&start_time=").concat(e,"&end_time=").concat(t);return X.ajax({url:i}).then((function(e){return n.parseEPG(e)}),(function(e,t,i){we.error(n.name,"could not load EPG:",i||t),!n._epg&&n.stopListening(n.playback)}))}we.warn(this.name,"skipping EPG request. Invalid start or end time. start: ".concat(e,",  end: ").concat(t))}},{key:"_onPositionUpdate",value:function(){if(this.innerPlayback){var e=To(this.innerPlayback);this.updateProgramForTime(e);var t=this._epg&&this._epg.latestProgram;!this._updating&&t&&t.endTime-e<=300&&this.updateEPG()}}}]),n}(lt),So=wn.autoplayManager,wo=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).options.disableControlsOnPoster||(i.options.disableControlsOnPoster=!0),i.options.disableControlsOnPoster&&i.container.disableMediaControl(),i._clicked=!1,i.playButtonVisible=!0,i.render(),i}return o(n,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<div class="poster__background"></div>\n<div class="poster__background-overlay"></div>\n<button class="poster__play-wrapper" tabindex="0"></button>\n')}},{key:"disableImage",get:function(){return this.options.poster&&this.options.poster.disableImage}},{key:"startHidden",get:function(){return this.options.poster&&this.options.poster.startHidden}},{key:"attributes",get:function(){return{class:"poster".concat(this.startHidden?" poster--hidden":"")}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"posterImage",get:function(){if(!this.options.src||!this.options.sources||!this.options.sources.length)return null;var e=this.video&&this.video.posterImageUrls||{},t=Object.keys(e),n=this.container.currentSize.height;return e[t.find((function(e){return e>=n}))||t[t.length-1]]}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED,this.hidePlayButton),this.listenTo(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container.playback,In.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,Le.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,Le.CONTAINER_STOP,this.onStop),this.listenTo(this.container,Le.CONTAINER_ENDED,this.onStop)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.authorizePosterImage=!e.adult||this.options.allowRestrictedContent,this.authorizePosterImage&&!this.disableImage&&this.addPosterImage()}},{key:"onAutoplayBlocked",value:function(){this.stopListening(this.container.playback,In.WM_PLAY_REQUESTED),this.showPlayButton()}},{key:"onBuffering",value:function(){this._clicked=!0,this.hidePlayButton()}},{key:"onPlay",value:function(){this.$el.addClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.enableMediaControl()}},{key:"onStop",value:function(){this._clicked=!1,this.show()}},{key:"show",value:function(){this.$el.removeClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.disableMediaControl(),this.options.poster&&this.options.poster.disablePlayButton||J.isChromecast||this.showPlayButton()}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.playButtonVisible=!1}},{key:"showPlayButton",value:function(){this.playButtonVisible=!0,this.$playButton.show()}},{key:"clicked",value:function(e){if(e.stopPropagation(),!this._clicked&&this.playButtonVisible)return this.container.playback.trigger(In.WM_USER_PLAY_REQUESTED,{event:e}),this.container.playback.playback&&this.container.playback.consent(),this.container.playback.play(),this.hidePlayButton(),this._clicked=!0,!1}},{key:"render",value:function(){var e=this,t=Cn.getStyleFrom(".clappr-player#wp3-player-0 .poster {\n  cursor: pointer;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n}\n.clappr-player#wp3-player-0 .poster--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .poster:hover .poster__play-wrapper {\n  filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));\n}\n.clappr-player#wp3-player-0 .poster__background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n}\n.clappr-player#wp3-player-0 .poster__background-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .poster__play-wrapper {\n  background: none;\n  border: none;\n  width: auto;\n  height: 30%;\n  text-align: center;\n  opacity: 0.97;\n  transition: filter 0.3s;\n  flex: 1;\n}\n.clappr-player#wp3-player-0 .poster__play-wrapper svg {\n  width: 100%;\n  height: 100%;\n  display: inline;\n}",{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(t[0]),this.container.$el.append(this.el),this.$playButton=this.$el.find(".poster__play-wrapper"),this.$playButton.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir vídeo</span>'),this.options.autoPlay&&this.hidePlayButton(),So.onAutoplayAvailable((function(){return e.hidePlayButton()}),this.options,(function(){So.isAutoPlayMutedAllowed(e.options)||e._clicked||e.showPlayButton()})),this}},{key:"addPosterImage",value:function(){if(this.container.currentSize&&this.container.currentSize.height>0){var e=this.posterImage;if(e){this.container.options.poster=e,this.imgEl=this.$(".poster__background"),this.imgEl.css({"background-image":"url("+e+")"}),this.$el.prepend(this.imgEl[0]);var t=this.container.$el.find("video");t.length&&(t[0].poster=e)}}else this.listenToOnce(this.container,Le.CONTAINER_RESIZE,this.addPosterImage)}}]),n}(ct),Co=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).render(),i}return o(n,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"animationModeTemplate",get:function(){return je('<p class="visually-hidden">Carregando</p>\n<div class="spinner__svg spinner__svg--animated" aria-hidden="true">\n  <%= spinnerIcon %>\n</div>\n')}},{key:"textModeTemplate",get:function(){return je('<div class="spinner__text">Carregando...</div>')}},{key:"playback",get:function(){return this.container.playback}},{key:"attributes",get:function(){var e,t;return{class:"spinner".concat(null!==(e=this.options)&&void 0!==e&&null!==(t=e.spinner)&&void 0!==t&&t.textMode?" spinner--text-mode":""),role:"alert"}}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,In.WM_PLAY_REQUESTED,this.start),this.listenToOnce(this.playback,In.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERING,this.start),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,Le.CONTAINER_PLAY,this.stop),this.listenTo(this.container,Le.CONTAINER_STOP,this.stop),this.listenTo(this.container,Le.CONTAINER_ERROR,this.stop)}},{key:"onAutoplayBlocked",value:function(){this.stop(),this.stopListening(this.playback,In.WM_PLAY_REQUESTED),this.listenToOnce(this.playback,In.WM_USER_PLAY_REQUESTED,this.start)}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.stop(),this.stopListening(),this.enabled=!1}},{key:"start",value:function(){var e=this;this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.timeoutId=setTimeout((function(){var t,n;e.$el.html(null!==(t=e.options)&&void 0!==t&&null!==(n=t.spinner)&&void 0!==n&&n.textMode?e.textModeTemplate():e.animationModeTemplate({spinnerIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M2.4 12c0-5.302 4.298-9.6 9.6-9.6.663 0 1.2.537 1.2 1.2 0 .663-.537 1.2-1.2 1.2-3.976 0-7.2 3.224-7.2 7.2 0 .663-.537 1.2-1.2 1.2-.663 0-1.2-.537-1.2-1.2z" fill="#FFF"/>\n    </g>\n</svg>'})),e.isVisible=!0,e.container.trigger(In.WM_SPINNER_START),e.timeoutId=null}),300)}},{key:"stop",value:function(){this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible&&(this.isVisible=!1,this.$el.html(""),this.container.trigger(In.WM_SPINNER_STOP))}},{key:"resetTimeoutToStart",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"disableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop&&(this.waitingTimeUpdateToStop=!1,this.stopListening(this.container,Le.CONTAINER_TIMEUPDATE))}},{key:"enableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop=!0,this.listenToOnce(this.container,Le.CONTAINER_TIMEUPDATE,this.stop)}},{key:"onBufferfull",value:function(){var e,t,n=this.playback&&this.playback.videoEl;"video"===(null==n||null===(e=n.nodeName)||void 0===e||null===(t=e.toLowerCase)||void 0===t?void 0:t.call(e))?n.currentTime>0?this.stop():this.enableTimeUpdateObserver():this.stop()}},{key:"render",value:function(){var e=this,t=Cn.getStyleFrom('.clappr-player#wp3-player-0 .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 998;\n  width: 48px;\n  height: 48px;\n  margin: -24px 0 0 -24px;\n  cursor: default;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .spinner--text-mode {\n  width: 190px;\n  margin-left: -95px;\n}\n.clappr-player#wp3-player-0 .spinner__text {\n  font-family: "opensans-regular", sans-serif;\n  font-size: 28px;\n  font-weight: bold;\n  text-align: center;\n  color: #fff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n}\n.clappr-player#wp3-player-0 .spinner__svg {\n  line-height: 100%;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n}\n.clappr-player#wp3-player-0 .spinner__svg--animated {\n  animation: rotate-spinner-player 0.5s linear infinite normal forwards;\n}\n@keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}',{playerId:this.options.playerId});return this.container.$el.append(t[0]),this.container.$el.append(this.el),this.options.autoPlay?this.start():this.stop(),wn.autoplayManager.onAutoplayAvailable((function(){return e.start()}),this.options,(function(){wn.autoplayManager.isAutoPlayMutedAllowed(e.options)||e.stop()})),this}}]),n}(ct),Io=/^https?:\/\/([a-z0-9\.\-]*)\.globoi?\.com/,Do=/^https?:\/\/[w]*\.?(techtudo)\.com\.br/,Ro=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).siteName=i.options.siteName,i.listenToOnce(i.container.playback,In.WM_RESOURCE_READY,i.onResourceReady),i.embedPlugin(),i}return o(n,[{key:"name",get:function(){return"comscore"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"environment",get:function(){return this.container.options.env}},{key:"scorecardBeacon",get:function(){return"".concat(this.environment.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/beacon.js")}},{key:"embedPlugin",value:function(){var e=this;if(!window.COMSCORE){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src=this.scorecardBeacon,t.onload=function(){return e.ready()},document.head.appendChild(t)}}},{key:"ready",value:function(){this.isReady=!0,this.trigger("comscore:ready")}},{key:"onResourceReady",value:function(e){var t=this;window.COMSCORE?(this.video=e,this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container,Le.CONTAINER_STOP,this.onStop),this.listenToOnce(this.container,Le.CONTAINER_ENDED,this.onStop)):this.listenToOnce(this,"comscore:ready",(function(){return t.onResourceReady(e)}))}},{key:"onPlay",value:function(){var e={c2:6035227,c3:this.getSiteName(),c4:this.video.channel,c5:this.getVideoType(),c6:null,c10:"1|1",rn:Math.random()};window.location.host.match(/globotv\.globo\.com$/)&&(e.c6="Globotv - "+this.video.channel),COMSCORE.beacon(e)}},{key:"onStop",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady)}},{key:"getSiteName",value:function(){return this.siteName?this.siteName:this.getSubdomain(window.location.href)}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(Io)||e.match(Do);return t?t[1]:null}return null}},{key:"getVideoType",value:function(){return{ad:"09",live:"03"}[this.video.kind]||"02"}}]),n}(lt),Lo=/([a-z0-9\.\-]*)\.globoi?\.com/,Po=/[w]*\.?(techtudo)\.com\.br/,Oo="*null",xo=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).options.daxExtras||(i.options.daxExtras=i.options.daxextras),i.adError=!1,i.isReady=!1,i.started=!1,i.currentTime=0,i.embedScript(),i}return o(n,[{key:"name",get:function(){return"streamsense"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"waitForDFP",get:function(){return!J.isChromecast&&!J.isMobile}},{key:"isAdPlayback",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"currentTimeInMilliseconds",get:function(){return this.toMilliseconds(this.currentTime)}},{key:"streamsenseScript",get:function(){return"".concat(this.options.env.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/vendor/libs/comScore-JS-6.3.1.181004.min.js")}},{key:"scorecardMeasurement",get:function(){return"".concat(this.options.env.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/p?c1=2&c2=6035227&ns_site=globo")}},{key:"contentType",get:function(){var e="live"===this.video.kind,t=!e&&this.video.duration/1e3/60;return e?"vc13":!e&&t>=10?"vc12":"vc11"}},{key:"bindEvents",value:function(){var e=this;this.waitForDFP&&(this.listenTo(this.container,In.DFP_CONTENT_RESUME,(function(){return e.checkAd(!1)})),this.listenTo(this.container,In.DFP_AD_ERROR,(function(){return e.checkAd(!0)})),this.listenTo(this.container,In.DFP_CONTENT_ENDED,this.bindPlaybackEvents)),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,(function(t){return e.setupStart(t)}))}},{key:"bindPlaybackEvents",value:function(){var e,t,n=this,i=(l(e={},Le.CONTAINER_TIMEUPDATE,this.timeUpdate),l(e,Le.CONTAINER_PLAY,this.onPlay),l(e,Le.CONTAINER_PAUSE,this.onPause),l(e,Le.CONTAINER_ERROR,this.onError),l(e,Le.CONTAINER_SEEK,this.onSeek),l(e,Le.CONTAINER_STATE_BUFFERING,this.onBuffering),e),r=(l(t={},Le.PLAYBACK_STOP,this.onEnded),l(t,Le.PLAYBACK_ENDED,this.onEnded),l(t,Le.PLAYBACK_ERROR,this.onEnded),t);Object.keys(i).forEach((function(e){var t=i[e];n.stopListening(n.container,e,t),n.listenTo(n.container,e,t)})),Object.keys(r).forEach((function(e){var t=r[e];n.stopListening(n.container.playback,e,t),n.listenTo(n.container.playback,e,t)}))}},{key:"setupStart",value:function(e){var t=this;this.video=e,!this.isReady&&!window.ns_||!this.dfpReady&&this.waitForDFP?this.listenToOnce(this,In.STREAMSENSE_READY,(function(){return t.setupStart(e)})):(this.start(),!this.waitForDFP&&this.bindPlaybackEvents())}},{key:"checkAd",value:function(e){this.adError=e,this.dfpReady=!0,!this.started&&this.setupStart(this.video),this.bindPlaybackEvents()}},{key:"ready",value:function(){window.ns_?(this.isReady=!0,this.trigger(In.STREAMSENSE_READY)):this.disable()}},{key:"embedScript",value:function(){var e=this;if(!window.ns_||!window.ns_.StreamingAnalytics){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",this.streamsenseScript),t.onload=function(){return e.ready()},t.onerror=function(){return e.ready()},document.head.appendChild(t)}}},{key:"start",value:function(){this.video&&ns_.StreamingAnalytics&&(this.streamSense=new ns_.StreamingAnalytics({liveEndpointURL:this.scorecardMeasurement}),this.setStreamSenseInitData(),this.setClip(),this.started=!0)}},{key:"setStreamSenseInitData",value:function(){this.streamSense.setLabels&&this.streamSense.setLabels({ns_st_mp:"Player",ns_st_mv:"7.85.0"}),this.streamSense.createPlaybackSession&&this.streamSense.createPlaybackSession({ns_st_pl:this.video.program+"-"+this.video.title})}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(Lo)||e.match(Po);return t?t[1]:null}return null}},{key:"setClip",value:function(){var e={short:"vc11",full:"vc12",live:"vc13",collaborative:"vc21",ad:"va00"}[this.contentType],t=this.container.options.dax&&this.container.options.dax.url,n=this.container.options.dax&&this.container.options.dax;n||(n=this.container.options.domain);var i=n||t&&new URL(t).hostname||document.location.hostname,r={c3:this.getSubdomain(i),c4:this.video.channel,ns_st_ty:e,ns_st_ct:this.contentType,ns_st_pr:this.video.program,ns_st_ep:this.video.title,ns_st_st:this.video.channel,ns_st_pu:"Globo",ns_st_ge:this.video.category,ns_st_ci:""+this.video.id,ns_st_cu:t||document.location.href,ns_st_cl:this.video.duration||0,ns_st_cn:1,ns_st_pn:1,ns_st_tp:1,ns_st_ia:Oo,ns_st_ce:Oo,ns_st_ddt:Oo,ns_st_tdt:Oo};Object.assign(r,this.options.daxExtras),this.streamSense.getPlaybackSession&&this.streamSense.getPlaybackSession().setAsset(r)}},{key:"timeUpdate",value:function(e){this.currentTime=e.current}},{key:"onPlay",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPlay(this.currentTimeInMilliseconds)}},{key:"onPause",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPause(this.currentTimeInMilliseconds)}},{key:"onEnded",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds)}},{key:"onBuffering",value:function(){this.started&&!this.isAdPlayback&&this.video&&"Live"===this.video.type&&this.streamSense.notifyBufferStart(this.currentTimeInMilliseconds)}},{key:"onSeek",value:function(){this.onPause()}},{key:"onError",value:function(){}},{key:"toMilliseconds",value:function(e){return 1e3*e>>0}},{key:"destroy",value:function(){this.started&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds),v(c(n.prototype),"destroy",this).call(this)}}]),n}(lt),Mo=wn.Ajax,No=wn.loadUrlAsImage,Bo=wn.hexGrf,Uo=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).url=i.webmediaApiHit,i}return o(n,[{key:"name",get:function(){return"webmedia_api_hit"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"type",get:function(){return J.isMobile?"mobile_browser":"desktop"}},{key:"environment",get:function(){return this.container.options.env}},{key:"webmediaApiHit",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://stats.video.globo.com"):"".concat(this.environment.protocol,"://stats.video.dev.globoi.com")}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.fillIds),this.listenToOnce(this.container.playback,Le.PLAYBACK_PLAY,this.seed),this.listenToOnce(this.container.playback,Le.PLAYBACK_ENDED,this.bindEvents),this.listenToOnce(this.container.playback,Le.PLAYBACK_STOP,this.bindEvents)}},{key:"fillIds",value:function(e){this.videoId=e.id,this.programId=e.programId}},{key:"seed",value:function(){var e=this;if(this.videoId&&this.programId){var t="hitStats_".concat(+new Date),n="/hits/".concat(this.videoId,"?type=").concat(this.type,"&callback=").concat(t),i="".concat(this.url).concat(n);Mo.jsonp({url:i,callbackName:t,timeout:5e3}).then((function(t){return e.hit(t)}),this.logError)}else this.logError("no argument was passed")}},{key:"hit",value:function(e){var t=e.data,n="".concat(t).concat(Bo(t+"w3bM3d!A")),i="hitIncStats_".concat(+new Date),r="/hits/".concat(this.videoId,"/").concat(this.programId,"/").concat(n,"?type=").concat(this.type,"&callback=").concat(i),a="".concat(this.url).concat(r);No(a)}},{key:"logError",value:function(e){we.error(this.name,"Webmedia api hit was not possible because ",e)}}]),n}(lt),Fo=/\n?(\r?\n){2}/,Vo=/\r?\n/,Ho=/([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]*)?/,jo=/[0-9:,]+/g,Ko=/[^\S\r\n]+$/gm,Go=function(){function e(t){var n=this;a(this,e),this.subtitleItems=[];var i=t.replace(Ko,"").split(Fo).filter((function(e){return n.isValid(e)}));this.subtitleItems=i.map((function(e){return n.parseSubtitle(e)}))}return o(e,[{key:"isCurrentSubtitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t>=e.start&&t<=e.end}},{key:"getSubtitleAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.subtitleItems[e]}},{key:"getSubtitleBy",value:function(e){for(var t=0,n=this.subtitleItems.length-1,i=Math.floor((t+n)/2);!this.isCurrentSubtitle(this.subtitleItems[i],e)&&t<n;)e>this.subtitleItems[i].start?t=i+1:n=i-1,i=Math.floor((t+n)/2);return this.isCurrentSubtitle(this.subtitleItems[i],e)?{index:i,subtitle:this.subtitleItems[i]}:void 0}},{key:"isValid",value:function(e){return e&&""!==e.trim()}},{key:"millisFromTimestamp",value:function(e){e=e.match(Ho);var t=60*parseInt(e[1],10)*60*1e3;return t+=60*parseInt(e[2],10)*1e3,t+=1e3*parseInt(e[3],10),e[4]&&(t+=parseInt(e[4],10)),t}},{key:"parseSubtitle",value:function(e){var t=-1,n=-1,i="",r=e.split(Vo);if(r.length>=2){var a=r[1].match(jo);if(a[0]&&(t=this.millisFromTimestamp(a[0])),a[1]&&(n=this.millisFromTimestamp(a[1])),-1!==t&&-1!==n)i=r.slice(2).join("<br>");return{start:t,end:n,content:i}}}}]),e}(),Wo="undefined"!=typeof window?window:void 0!==oa?oa:"undefined"!=typeof self?self:{},Yo=Array.prototype.slice,zo=function(e,t){"length"in e||(e=[e]);e=Yo.call(e);for(;e.length;){var n=e.shift(),i=t(n);if(i)return i;n.childNodes&&n.childNodes.length&&(e=Yo.call(n.childNodes).concat(e))}};var qo=$o;function $o(e,t){if(!(this instanceof $o))return new $o(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}$o.prototype.nodeType=8,$o.prototype.nodeName="#comment",$o.prototype.toString=function(){return"[object Comment]"};var Xo=Zo;function Zo(e,t){if(!(this instanceof Zo))return new Zo(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}Zo.prototype.type="DOMTextNode",Zo.prototype.nodeType=3,Zo.prototype.nodeName="#text",Zo.prototype.toString=function(){return this.data},Zo.prototype.replaceData=function(e,t,n){var i=this.data,r=i.substring(0,e),a=i.substring(e+t,i.length);this.data=r+n+a,this.length=this.data.length};var Qo=function(e){var t=this,n=e.type;e.target||(e.target=t);t.listeners||(t.listeners={});var i=t.listeners[n];if(i)return i.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)};var Jo=function(e,t){var n=this;n.listeners||(n.listeners={});n.listeners[e]||(n.listeners[e]=[]);-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)};var el=function(e,t){var n=this;if(!n.listeners)return;if(!n.listeners[e])return;var i=n.listeners[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)};var tl=il,nl=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function il(e){switch(e.nodeType){case 3:return sl(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],n=e.tagName;"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(n=n.toLowerCase());t.push("<"+n+function(e){var t=[];for(var n in e)rl(e,n)&&t.push({name:n,value:e[n]});for(var i in e._attributes)for(var r in e._attributes[i]){var a=e._attributes[i][r],s=(a.prefix?a.prefix+":":"")+r;t.push({name:s,value:a.value})}e.className&&t.push({name:"class",value:e.className});return t.length?al(t):""}(e)+function(e){var t=e.dataset,n=[];for(var i in t)n.push({name:"data-"+i,value:t[i]});return n.length?al(n):""}(e)),nl.indexOf(n)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(il)):e.textContent||e.innerText?t.push(sl(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+n+">"));return t.join("")}(e)}}function rl(e,t){var n=typeof e[t];return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function al(e){var t=[];return e.forEach((function(e){var n=e.name,i=e.value;"style"===n&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var i=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+i+";"})),t}(i)),t.push(n+'="'+(sl(i).replace(/"/g,"&quot;")+'"'))})),t.length?" "+t.join(" "):""}function sl(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ol="http://www.w3.org/1999/xhtml",ll=ul;function ul(e,t,n){if(!(this instanceof ul))return new ul(e);var i=void 0===n?ol:n||null;this.tagName=i===ol?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}ul.prototype.type="DOMElement",ul.prototype.nodeType=1,ul.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},ul.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},ul.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},ul.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},ul.prototype.setAttributeNS=function(e,t,n){var i=null,r=t,a=t.indexOf(":");(a>-1&&(i=t.substr(0,a),r=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[r]={value:n,prefix:i}},ul.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],i=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},ul.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},ul.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},ul.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},ul.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},ul.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},ul.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},ul.prototype.removeEventListener=el,ul.prototype.addEventListener=Jo,ul.prototype.dispatchEvent=Qo,ul.prototype.focus=function(){},ul.prototype.toString=function(){return tl(this)},ul.prototype.getElementsByClassName=function(e){var t=e.split(" "),n=[];return zo(this,(function(e){if(1===e.nodeType){var i=(e.className||"").split(" ");t.every((function(e){return-1!==i.indexOf(e)}))&&n.push(e)}})),n},ul.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return zo(this.childNodes,(function(n){1!==n.nodeType||"*"!==e&&n.tagName.toLowerCase()!==e||t.push(n)})),t},ul.prototype.contains=function(e){return zo(this,(function(t){return e===t}))||!1};var cl=dl;function dl(e){if(!(this instanceof dl))return new dl;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}dl.prototype.type="DocumentFragment",dl.prototype.nodeType=11,dl.prototype.nodeName="#document-fragment",dl.prototype.appendChild=ll.prototype.appendChild,dl.prototype.replaceChild=ll.prototype.replaceChild,dl.prototype.removeChild=ll.prototype.removeChild,dl.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")};var hl=pl;function pl(e){}pl.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},pl.prototype.preventDefault=function(){};var fl=gl;function gl(){if(!(this instanceof gl))return new gl;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var vl=gl.prototype;vl.createTextNode=function(e){return new Xo(e,this)},vl.createElementNS=function(e,t){var n=null===e?null:String(e);return new ll(t,this,n)},vl.createElement=function(e){return new ll(e,this)},vl.createDocumentFragment=function(){return new cl(this)},vl.createEvent=function(e){return new hl},vl.createComment=function(e){return new qo(e,this)},vl.getElementById=function(e){return e=String(e),zo(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},vl.getElementsByClassName=ll.prototype.getElementsByClassName,vl.getElementsByTagName=ll.prototype.getElementsByTagName,vl.contains=ll.prototype.contains,vl.removeEventListener=el,vl.addEventListener=Jo,vl.dispatchEvent=Qo;var ml,yl=new fl,bl=void 0!==oa?oa:"undefined"!=typeof window?window:{};"undefined"!=typeof document?ml=document:(ml=bl["__GLOBAL_DOCUMENT_CACHE@4"])||(ml=bl["__GLOBAL_DOCUMENT_CACHE@4"]=yl);var El=ml;var Al=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null},_l=El.createElement&&El.createElement("textarea"),Tl={rt:"ruby"},kl={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Sl={v:"title",lang:"lang"},wl={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var Cl=function(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!Tl[t.localName]||Tl[t.localName]===e.localName}function r(t,n){var i=kl[t];if(!i)return null;var r=e.document.createElement(i),a=Sl[t];return a&&n&&(r[a]=n.trim()),r}for(var a,s,o=e.document.createElement("div"),l=o,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((s=a,_l.innerHTML=s,s=_l.textContent,_l.textContent="",s)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=Al(a.substr(1,a.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(!i(l,c))continue;if(h[2]){var p=h[2].split(".");p.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(Object.prototype.hasOwnProperty.call(wl,n)){var i=t?"background-color":"color",r=wl[n];c.style[i]=r}})),c.className=p.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return o},Il=function(e,t){return e&&t?Cl(e,t):null};function Dl(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}Dl.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Dl.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Dl.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Dl.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Dl.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Dl.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Dl.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Dl.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}};var Rl=Dl;function Ll(){}Ll.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)Object.prototype.hasOwnProperty.call(e,n)&&(t.style[n]=e[n])},Ll.prototype.formatStyle=function(e,t){return 0===e?0:e+t};var Pl=Ll,Ol=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];var xl=function(e){for(var t=0;t<Ol.length;t++){var n=Ol[t];if(e>=n[0]&&e<=n[1])return!0}return!1};var Ml=function(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(n,e);i=a(n);)for(var s=0;s<i.length;s++)if(t=i.charCodeAt(s),xl(t))return"rtl";return"ltr"};function Nl(e,t,n){Pl.call(this),this.cue=t,this.cueDiv=Cl(e,t.text);var i={color:n.color||"rgba(255, 255, 255, 1)",backgroundColor:n.backgroundColor||"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:n.display||"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",padding:n.padding,borderRadius:n.borderRadius};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:Ml(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}Nl.prototype=Object.create(Pl.prototype),Nl.prototype.constructor=Nl;var Bl=Nl;var Ul=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i};var Fl=function(e,t,n,i){var r=new Rl(t),a=t.cue,s=Ul(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),d=n[l]+u,h=o[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),s<0&&(c+=""===a.vertical?n.height:n.width,o=o.reverse()),r.move(h,c)}else{var p=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new Rl(t)}var f=function(e,t){for(var r,a=new Rl(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i);)e.move(t[o]);if(e.within(n))return e;var l=e.intersectPercentage(n);s>l&&(r=new Rl(e),s=l),e=new Rl(a)}return r||a}(r,o);t.move(f.toCSSCompatValues(n))},Vl=function(e,t,n,i){if(!e||!t||!n)return null;for(i=i||{};n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],s=Rl.getSimpleBoxPosition(r),o=i.fontSize||Math.round(.05*s.height*100)/100,l=i.fontFamily||"sans-serif",u=Object.assign({font:o+"px "+l},i,u);!function(){for(var n,i,o=0;o<t.length;o++)i=t[o],n=new Bl(e,i,u),r.appendChild(n.div),Fl(e,n,s,a),i.displayState=n.div,a.push(Rl.getSimpleBoxPosition(n))}()}else for(var c=0;c<t.length;c++)r.appendChild(t[c].displayState)};function Hl(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}Hl.prototype=Object.create(Error.prototype),Hl.prototype.constructor=Hl,Hl.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};var jl=Hl;function Kl(){this.values=Object.create(null)}Kl.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Gl=Kl;var Wl=function(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);if(2===s.length)t(s[0],s[1])}};var Yl=function(e,t,n){var i=e;function r(){var t=Al(e);if(null===t)throw new jl(jl.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new jl(jl.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new Gl;Wl(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line",-1)}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position",-1)}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)},zl=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new e.TextDecoder("utf8"),this.regionList=[]};zl.prototype.reportOrThrowError=function(e){if(!(e instanceof jl))throw e;this.onparsingerror&&this.onparsingerror(e)},zl.prototype.parse=function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?Wl(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new Gl;Wl(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",Al(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):Wl(e,(function(e,n){if("Region"===e)!function(e){var n=new Gl;if(Wl(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new Gl;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new jl(jl.Errors.BadSignature);t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{Yl(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},zl.prototype.flush=function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new jl(jl.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this};var ql=zl;function $l(e){return e.default||e}function Xl(){}Xl.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Xl.convertCueToDOMTree=$l(Il),Xl.processCues=$l(Vl),Xl.Parser=$l(ql);var Zl=Xl;var Ql,Jl=(Ql=Il).default||Ql,eu={"":1,lr:1,rl:1},tu={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function nu(e){return"string"==typeof e&&(!!tu[e.toLowerCase()]&&e.toLowerCase())}function iu(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,l=null,u="",c=!0,d="auto",h="start",p="auto",f="auto",g=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!eu[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=nu(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=nu(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=nu(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}iu.prototype.getCueAsHTML=function(){return Jl(window,this.text)};var ru=iu,au={"":!0,up:!0};function su(e){return"number"==typeof e&&e>=0&&e<=100}var ou=function(){var e=100,t=3,n=0,i=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!su(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!su(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!su(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!su(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!su(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&!!au[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):s=t}}})},lu=ua((function(e){var t=e.exports={WebVTT:Zl,VTTCue:ru,VTTRegion:ou};Wo.vttjs=t,Wo.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=Wo.VTTCue,a=Wo.VTTRegion;t.shim=function(){Wo.VTTCue=n,Wo.VTTRegion=i},t.restore=function(){Wo.VTTCue=r,Wo.VTTRegion=a},Wo.VTTCue||t.shim()})),uu=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this)).subtitleItems=i.parseVttFile(e),i}return o(n,[{key:"init",value:function(){return{parser:new lu.WebVTT.Parser(window,lu.WebVTT.StringDecoder()),cues:[]}}},{key:"bindEvents",value:function(e,t){e.onparsingerror=function(e){we.error(this.name,"\n Error when trying to parse WebVTT file: ".concat(e))},e.oncue=function(e){t.push(e)}}},{key:"parseVttFile",value:function(e){if(e){var t=this.init(),n=t.parser,i=t.cues;return this.bindEvents(n,i),n.parse(e),n.flush(),i}}},{key:"getActiveCue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subtitleItems,n=y(t),i=n.length,r=0,a=i-1,s=Math.floor((i-1)/2),o=n[s],l=n.splice(0,s+1),u=n;if(!(r>a)&&o.startTime)return e>=o.startTime&&e<=o.endTime?[o]:i<=1?[]:e<=o.startTime?this.getActiveCue(e,l):e>o.startTime?this.getActiveCue(e,u):void 0}},{key:"processActiveCue",value:function(e,t,n){lu.WebVTT.processCues(window,e,t,n)}}]),n}(Oe),cu={fontFamily:"clearsans-bold",padding:"0.2em",borderRadius:"0.2em",display:"inline-block"},du=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).render(),i.createCachedElements(),i.idPlayback=i.container.playback,i.enableWebVtt=!!i.options.shouldDeviceUseWebVTT,i}return o(n,[{key:"attributes",get:function(){return{class:"subtitle__wrapper","data-subtitle":""}}},{key:"name",get:function(){return"subtitle"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<p class="subtitle"></p>\n')}},{key:"tagVideo",get:function(){return this.idPlayback.videoEl}},{key:"subtitleTrackAutoHandled",get:function(){return J.isiOS||J.isSafari&&"hls_fairplay_playback"===this.idPlayback.innerPlaybackName}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.updateSubtitle),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,In.WM_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,Le.CONTAINER_MEDIACONTROL_SHOW,(function(){return e.onMediaControlShow()})),this.listenTo(this.container,Le.CONTAINER_MEDIACONTROL_HIDE,(function(){return e.onMediaControlHide()})),this.listenTo(this.container,In.WM_MASTERTOPIP,(function(){return e.$el.hide()})),this.listenTo(this.container,In.WM_PIPTOMASTER,(function(){return e.$el.show()})),this.listenTo(this.container,Le.CONTAINER_RESIZE,this.onPlayerResize),this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.onPlay)}},{key:"onPlay",value:function(){this.createCachedElements(),this.updateCurrentSize(),this.updateResponsiveStyle()}},{key:"updateCurrentSize",value:function(){this.currentWidth=this.container.el.clientWidth,this.currentHeight=this.container.el.clientHeight}},{key:"onSubtitleAvailable",value:function(e,t){this.availableSubtitles=e,this.enableWebVtt=e.some((function(e){return"webvtt"===e.type})),this.generateSubtitleParser(t),this.updateStyle(),this.setInitialSubtitle()}},{key:"generateSubtitleParser",value:function(e){var t=this;this.availableContents=e.map((function(e){return e&&(t.enableWebVtt?new uu(e):new Go(e))}))}},{key:"onMediaControlShow",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-hide").addClass("subtitle--opacity-media-control-show")}},{key:"onMediaControlHide",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-show").addClass("subtitle--opacity-media-control-hide")}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.updateSize(),this.updateStyle()}},{key:"setInitialSubtitle",value:function(){var e=this,t=this.availableSubtitles.find((function(e){return e.selected}));this.subtitleTrackAutoHandled?setTimeout((function(){return e.onSubtitleChanged(t)})):this.onSubtitleChanged(t)}},{key:"onSubtitleChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.subtitleTrackAutoHandled)this.changeTextTrack(e);else{var t=this.availableContents[e.id];t?(this.subtitleParser=t,this.currentIndex=0,this.$el.show(),this.$subtitle.addClass("subtitle--hidden")):(delete this.subtitleParser,delete this.currentIndex,this.$subtitle.html(""),this.$el.hide())}}},{key:"changeTextTrack",value:function(e){var t=this.tagVideo.textTracks;Object.values(t).forEach((function(e){return e.mode="hidden"}));var n=Object.values(t).find((function(t){return e.keys.includes(t.language)}));n&&(n.mode="showing")}},{key:"updateSize",value:function(){wn.applySizeClass(this.$el,this.container.$el.width())}},{key:"updateStyle",value:function(){this.enableWebVtt&&this.processVttActiveCue(),this.updateFontSize(),this.updateVerticalPosition()}},{key:"updateFontSize",value:function(){this.$subtitle.css({fontSize:this.getFontSize()})}},{key:"updateVerticalPosition",value:function(){this.enableWebVtt?this.$el.css({bottom:"auto"}):this.$el.css({bottom:this.getVerticalPosition()})}},{key:"updateSubtitle",value:function(e){this.subtitleParser&&(this.enableWebVtt?this.updateWebVTTSubtitleContent(e.current):this.updateSrtSubtitleContent(1e3*e.current))}},{key:"updateWebVTTSubtitleContent",value:function(e){this.subtitleParser.subtitleItems&&(this.activeSubtitle=this.subtitleParser.getActiveCue(e),this.activeSubtitle&&!!this.activeSubtitle.length?(this.$el.addClass("subtitle__wrapper--override-webvtt"),this.$subtitle.removeClass("subtitle--hidden"),this.processVttActiveCue()):this.$subtitle.addClass("subtitle--hidden"))}},{key:"processVttActiveCue",value:function(){this.resetVttCueStyle(),this.subtitleParser&&this.subtitleParser.processActiveCue(this.activeSubtitle,this.$subtitle[0],this.getVttStyles())}},{key:"resetVttCueStyle",value:function(){this.activeSubtitle&&this.activeSubtitle[0]&&(this.activeSubtitle[0].hasBeenReset=this.activeSubtitle[0].playerWidth!==this.currentWidth,this.activeSubtitle[0].playerWidth=this.currentWidth)}},{key:"getVttStyles",value:function(){return i({fontSize:this.getFontSize()},cu)}},{key:"updateSrtSubtitleContent",value:function(e){var t=this.subtitleParser.getSubtitleAt(this.currentIndex),n=this.subtitleParser.isCurrentSubtitle(t,e);if(!n){var i=this.currentIndex+1,r=this.subtitleParser.getSubtitleAt(i);if(n=this.subtitleParser.isCurrentSubtitle(r,e))this.currentIndex=i,t=r;else if(r&&(e>r.end||e<t.start)){var a=this.subtitleParser.getSubtitleBy(e);t=a&&a.subtitle,a&&(this.currentIndex=a.index),n=!!a}}t&&this.$subtitle.html()!=t.content&&this.$subtitle.html(t.content),n?this.$subtitle.removeClass("subtitle--hidden"):this.$subtitle.addClass("subtitle--hidden")}},{key:"getMediaControlLowerHeight",value:function(){return this.$mediaControlPanelLower&&this.$mediaControlPanelLower.getBoundingClientRect().height||80}},{key:"getVerticalPosition",value:function(){return this.currentHeight/12}},{key:"getFontSize",value:function(){return this.currentWidth<560?14:2.5*this.currentWidth/100}},{key:"createCachedElements",value:function(){this.$subtitle=this.$el.find(".subtitle");var e=".clappr-player#wp3-player-".concat(this.options.playerId," .media-control-panel__lower");this.$mediaControlPanelLower=document.querySelector(e)}},{key:"render",value:function(){var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .subtitle {\n  background-color: rgba(0, 0, 0, 0.7);\n  position: relative;\n  font-family: "clearsans-bold", sans-serif;\n  font-size: 14px;\n  color: #f1f1f1;\n  line-height: 1.4;\n  margin: auto;\n  display: inline-block;\n  pointer-events: none;\n}\n.clappr-player#wp3-player-0 .subtitle--hidden {\n  visibility: hidden;\n  opacity: 0;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-show, .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n  transition: opacity 0.3s ease-in-out;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-show {\n  opacity: 0.5;\n}\n.clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n  opacity: 1;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper {\n  display: flex;\n  bottom: 0;\n  position: absolute;\n  width: 100%;\n  z-index: 993;\n  will-change: transform;\n  transition: transform 0.3s ease-out;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt {\n  /* This section is responsible for override wrapper styles for WebVTT resources */\n  bottom: auto;\n  height: 100%;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle {\n  background-color: transparent;\n  /* The WebVTT parser lib calculates based on the screen size where to put\n    the subtitles. This leaves 10/12 portion so it wont be placed on the screen limit */\n  height: 98%;\n  width: 98%;\n}\n.clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle i {\n  font-family: "clearsans-bolditalic";\n}\n.clappr-player#wp3-player-0 .cast-enabled .subtitle__wrapper, .clappr-player#wp3-player-0 .cast-connecting .subtitle__wrapper {\n  display: none;\n}',{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.container.$el.append(this.el),this}}]),n}(ct),hu=function(){function e(){a(this,e),this.youboraTimersStopped=!1,this.metrics={},this.youboraTimers={},this.initYouboraTimers()}return o(e,[{key:"YOUBORA_SERVICES",get:function(){return["init","adInit","adStart","adJoinTime","adStop","joinTime"]}},{key:"initYouboraTimers",value:function(){var e=this;this.YOUBORA_SERVICES.forEach((function(t){return e.youboraTimers[t]=0}))}},{key:"delta",value:function(e,t){var n=this.youboraTimers[e]-this.youboraTimers[t];return n>0?n:0}},{key:"onTimemark",value:function(e){var t=e.time,n=e.service,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="init"!==n&&this.youboraTimersStopped;-1===this.YOUBORA_SERVICES.indexOf(n)||r||(this.youboraTimers[n]=t,this.setAdMetrics(),this.setDFPMetrics(),this.setContentMetrics(),this.willSendParams(n)&&(this.setParams(i),this.initYouboraTimers()))}},{key:"setAdMetrics",value:function(){this.metrics.adInitTime=this.delta("adInit","init"),this.metrics.adStartTime=this.delta("adStart","adInit"),this.metrics.adJoinTime=this.delta("adJoinTime","adStart")}},{key:"setDFPMetrics",value:function(){this.metrics.dfpSetupTime=this.metrics.adStartTime+this.metrics.adJoinTime,this.metrics.dfpRunTime=this.delta("adStop","adInit"),this.metrics.dfpTime=this.metrics.dfpSetupTime?this.metrics.dfpSetupTime:this.metrics.dfpRunTime;var e=this.youboraTimers.adStop&&this.youboraTimers.adJoinTime;this.metrics.dfpWatchedTime=e?this.youboraTimers.adStop-this.youboraTimers.adJoinTime:0}},{key:"setContentMetrics",value:function(){this.metrics.contentStartTime=this.youboraTimers.adStop?this.delta("joinTime","adStop"):0,this.metrics.joinTime=this.delta("joinTime","init")-this.metrics.dfpWatchedTime}},{key:"willSendParams",value:function(e){var t="joinTime"===e;return this.youboraTimersStopped=t,t}},{key:"setParams",value:function(e){e.youboraMetrics=this.metrics}}]),e}(),pu=_i.Video,fu=wn.getExperimentsList,gu=wn.API_VERSION,vu=wn.getPlatformName,mu=wn.toQueryString,yu=wn.secondsToMillis,bu=wn.getCookie,Eu=wn.session,Au=wn.User,_u=wn.autoplayManager,Tu=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).initValues(),i.video={},i.setVideoSessionID(),i.browser="".concat(J.name).concat(J.version),i.playerId=Vt.playerId,i.url="".concat(i.horizonHost,"/auth-session/activity/webmedia/watch"),i.domain=i.options.domain||window.location.hostname.replace("www.","").split(".")[0],i.experiments=fu(i.options),_u.onAutoplayAvailable(i.onAutoplaySuccess.bind(h(i)),i.options,i.onAutoplayFailed.bind(h(i))),i.youboraTimemark=new hu,i.externalData={},i.onDFPInit(),i}return o(n,[{key:"name",get:function(){return"horizon"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"isLive",get:function(){return"live"===this.video.kind||"live"===this.container.getPlaybackType()}},{key:"isAdsDisabled",get:function(){return this.options.skipDFP||!1}},{key:"currentTime",get:function(){return this.currentTimeValue},set:function(e){this.currentTimeValue=e}},{key:"horizonHost",get:function(){return"".concat(this.options.env.protocol,"://horizon.globo.com")}},{key:"tenant",get:function(){var e=this.options.horizon;return(void 0===e?{}:e).tenant||"unknown"}},{key:"referrer",get:function(){var e=this.options.horizon,t=void 0===e?{}:e;return null==t?void 0:t.referrer}},{key:"isEncrypted",get:function(){var e=this.video&&this.video.encrypted;return void 0!==e?e:"unknown"}},{key:"playbackName",get:function(){var e=this.container,t=e&&e.playback;return t?t.innerPlaybackName||t.name||"":null}},{key:"bufferingTime",get:function(){this.isBuffering&&(this.bufftime+=Ee.now()-this.buffstarttime,this.buffstarttime=Ee.now());var e=this.bufftime;return this.bufftime=0,Math.trunc(e)}},{key:"shouldIgnoreVolumeUpdate",value:function(e,t){var n=!this.isReady&&!this.container.playback.isPlaying();return null===e||n||!t}},{key:"setYouboraParams",value:function(e){var t=this.externalData&&this.externalData.youboraMetrics||{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}},{key:"setVideoSessionID",value:function(){this.params.video_session_id=Eu.getVideoSessionId(this.options.playerId)}},{key:"setDeviceInfo",value:function(){var e=this;Object.keys(this.options.deviceInfo).forEach((function(t){e.params["device_".concat(t)]=e.options.deviceInfo[t]}))}},{key:"getPercentage",value:function(e){return 0===e?e:e/this.session.duration*100}},{key:"initValues",value:function(){this.params={},this.dfpInit=0,this.bufftime=0,this.playRequestTime=0,this.isBuffering=!1,this.hasStartedClip=!1,this.isPlaying=!1}},{key:"bindEvents",value:function(){this.listenToOnce(this.container,Le.CONTAINER_PLAY,this.onFirstPlaying),this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED_READY,this.onPlayRequested),this.listenTo(this.container,Le.CONTAINER_PLAY,this.play),this.listenTo(this.container,Le.CONTAINER_PAUSE,this.pause),this.listenTo(this.container,Le.CONTAINER_SEEK,this.seek),this.listenTo(this.container,Le.CONTAINER_TIMEUPDATE,this.timeUpdate),this.listenTo(this.container,Le.CONTAINER_ENDED,this.end),this.listenTo(this.container,Le.CONTAINER_DESTROYED,this.end),this.listenTo(this.container,Le.CONTAINER_STOP,this.end),this.listenTo(this.container,Le.CONTAINER_STATS_REPORT,this.onOldStatsReport),this.listenTo(this.container,Le.CONTAINER_ERROR,this.onError),this.listenTo(this.container,Le.CONTAINER_PIP_ENTER,this.onPIPEnter),this.listenTo(this.container,Le.CONTAINER_PIP_EXIT,this.onPIPExit),this.listenTo(this.container,In.WM_STATS_REPORTED,this.onStatsReport),this.listenTo(this.container,In.WM_MUTED,this.onVolumeMuted),this.listenTo(this.container,In.WM_UNMUTED,this.onVolumeUnmuted),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,In.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.container,In.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,In.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenTo(this.container,In.WM_BITRATE_CAP,this.onBitrateCap),this.listenTo(this.container,In.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,In.WM_GA_UNTRACKED_EVENT,this.onGoogleAnalyticsEventUntracked),this.listenTo(this.container.playback,In.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,In.WILL_SELECT_FALLBACK_SOURCE,this.onFallbackSource),this.listenTo(this.container.playback,In.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,In.WILL_RENEW_RESOURCE,this.onRenewResource),this.listenTo(this.container.playback,In.WM_WROOM_WAITING,this.onWRWaiting),this.listenToOnce(this.container,Le.Custom.DAI_ERROR,this.onDaiError),this.listenToOnce(this.container,Le.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded),this.listenToOnce(this.container,In.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats)}},{key:"onPlayRequested",value:function(){this.playRequestTime=Ee.now(),this.isReady=!0}},{key:"onMetadataLoaded",value:function(e){e&&(this.video=e,this.params.playback_id=e.id,this.params.subscriber_only=e.isSubscriberOnly,this.params.title=e.title,this.params.program=e.program,this.params.channel=e.channel,this.params.kind=e.kind,this.setExperimentsParams())}},{key:"setExperimentsParams",value:function(){this.experiments.length>0&&this.experiments[0]&&(this.params.experiment_1=this.experiments[0]),this.experiments.length>1&&this.experiments[1]&&(this.params.experiment_2=this.experiments[1])}},{key:"onStreamingDataLoaded",value:function(e){var t=e.pop,n=e.host;this.params.host=n,this.params.pop=t}},{key:"onFallbackSource",value:function(e){this.notifyAction(yu(this.currentTime),"will_fallback_source",e)}},{key:"onFallbackSourceSelected",value:function(e){this.notifyAction(yu(this.currentTime),"fallback_source_selected",e)}},{key:"onRenewResource",value:function(e){this.notifyAction(yu(this.currentTime),"willRenewResource",e)}},{key:"onDaiError",value:function(e){if(e.notifiable){var t=e.errorCode,n=e.errorMessage;this.notifyAction(yu(this.currentTime),"dai_error",{daiErrorCode:t,daiErrorMessage:n})}}},{key:"onDaiResourceLoaded",value:function(e){var t=e.implementationType;this.notifyAction(yu(this.currentTime),"dai_resource_loaded",{implementationType:t})}},{key:"onBitrateCap",value:function(e){this.params.cap_bitrate=e}},{key:"onDFPInit",value:function(){this.dfpInit=Ee.now()}},{key:"onAdNotServed",value:function(){this.params.dfp_status="not served"}},{key:"onAdError",value:function(){this.params.dfp_status="error"}},{key:"onOldStatsReport",value:function(e){this.isLive&&(this.params.dvr=e.dvr?1:0)}},{key:"onStatsReport",value:function(e){e.extra.bitratesHistory.length>0&&(this.params.nominal_bitrate=e.extra.bitratesHistory[e.extra.bitratesHistory.length-1].bitrate),this.params.avg_bitrate=Math.trunc(e.extra.bitrateWeightedMean),this.params.session_time=Math.trunc(e.timers.session),this.params.watch_time=Math.trunc(e.timers.watch)}},{key:"onFirstPlaying",value:function(){if(this.listenToOnce(this.container,Le.CONTAINER_STATE_BUFFERING,this.buffering),this.isAd&&!this.dfp_startup_time)return this.params.dfp_status="delivered",void(this.params.dfp_startup_time=Math.trunc(Ee.now()-this.dfpInit));this.params.startup_time=Math.trunc(Ee.now()-this.playRequestTime)}},{key:"onVolumeMuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(yu(this.currentTime),{mute_status:!0})}},{key:"onVolumeUnmuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(yu(this.currentTime),{mute_status:!1})}},{key:"onSubtitleChanged",value:function(e){this.hasStartedClip&&this.notify(yu(this.currentTime),{subtitle_status:"none"===e.language?"disabled":"enabled",subtitle_language:e.language})}},{key:"onLocationAvailable",value:function(e){this.params.lat=e.latitude,this.params.long=e.longitude}},{key:"onCurrentProgramUpdated",value:function(e){void 0!==e.program&&(this.params.program=e.program),void 0!==e.channel&&(this.params.channel=e.channel)}},{key:"onGoogleAnalyticsEventUntracked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;this.params.ga_untracked_event=n}},{key:"onPIPEnter",value:function(){this.notifyAction(yu(this.currentTime),"pip_enter")}},{key:"onPIPExit",value:function(){this.notifyAction(yu(this.currentTime),"pip_exit")}},{key:"onWRWaiting",value:function(){this.params.wroom=1,this.isLive?this.ping():this.sendRequest("".concat(this.url,"?").concat(mu(this.params)))}},{key:"onAutoplaySuccess",value:function(){this.params.autoPlayAvailable=!0}},{key:"onAutoplayFailed",value:function(){this.params.autoPlayAvailable=!1}},{key:"updateAuthorizedWRState",value:function(){this.params.wroom=0,this.ping()}},{key:"onResourceRequestStats",value:function(e){var t=e.retries,n=e.usedFallback;this.retryHistory=JSON.stringify({attempts:t,fallback:n})}},{key:"onResourceReady",value:function(){this.updateAuthorizedWRState(),!this.session&&this.startSession(),this.retryHistory&&this.notifyRequestStats(this.retryHistory)}},{key:"play",value:function(){var e=this;this.isAd||(this.notifyPlayOrSeek(yu(this.currentTime)),this.isPlaying||(this.breakTimerId=setInterval((function(){e.isPlaying=!0,e.notifyRelevantPoint(yu(e.currentTime))}),15e3),this.ping()),this.doingSeek=!1,this.paused=!1)}},{key:"pause",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.userInvoked,r=void 0!==i&&i;this.pauseTimerId=setTimeout((function(){t.notifyAction(yu(t.currentTime),"pause",{user_invoked:r})}),100)}},{key:"seek",value:function(){this.pauseTimerId&&(clearTimeout(this.pauseTimerId),this.pauseTimerId=null),this.doingSeek=!0}},{key:"timeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentTime=e.current}},{key:"onBufferStart",value:function(){this.isBuffering=!0,this.buffstarttime=Ee.now()}},{key:"onBufferEnd",value:function(){this.isBuffering=!1,this.bufftime+=Ee.now()-this.buffstarttime}},{key:"buffering",value:function(){this.onBufferStart(),this.listenToOnce(this.container,Le.CONTAINER_STATE_BUFFERFULL,this.bufferfull)}},{key:"bufferfull",value:function(){this.onBufferEnd(),this.listenToOnce(this.container,Le.CONTAINER_STATE_BUFFERING,this.buffering)}},{key:"end",value:function(){this.notifyAction(yu(this.currentTime),"stop"),this.cancelBreakTimer(),this.cancelPing(),this.initValues()}},{key:"clear",value:function(){this.params.dfp_startup_time=null,this.params.dfp_status=null}},{key:"cancelBreakTimer",value:function(){clearInterval(this.breakTimerId),clearInterval(this.playOrSeekTimerId),this.breakTimerId=null,this.isPlaying=!1}},{key:"cancelPing",value:function(){this.isLive&&(clearInterval(this.pingTimerId),this.pingTimerId=null)}},{key:"startSession",value:function(){var e=(new Date).getTime().toString();this.lastNotifiedPoint=-1,this.totalActions=0,this.isLive&&(this.params.signal=this.video.selectedResource.signal,this.params.started_at=e),this.video.providerId&&(this.params.gst=bu("GST")),this.session={duration:this.video.duration,started_at:e,play:0,seek:0,pause:0,stop:0,mute:0,unmute:0,subtitle_enable:0,subtitle_disable:0,will_fallback_source:0,fallback_source_selected:0,willRenewResource:0,dai_error:0,retry_history:0,pip_enter:0,pip_exit:0,dai_resource_loaded:0},this.doingSeek=!1,this.hasStartedClip=!0}},{key:"notifyRelevantPoint",value:function(e){if(this.hasStartedClip){var t=this.getPercentage(e),n=5*Math.floor(t/5);n>this.lastNotifiedPoint?(this.notify(e),this.lastNotifiedPoint=n):this.verbose&&we.info(this.name,"do not notify: ".concat(n," !> ").concat(this.lastNotifiedPoint))}}},{key:"notifyPlayOrSeek",value:function(e){var t=this,n=this.doingSeek;this.playOrSeekTimerId=setTimeout((function(){n?t.notifyAction(e,"seek"):t.notifyAction(e,"play")}),100)}},{key:"notifyRequestStats",value:function(e){this.notifyAction(yu(this.currentTime),"retry_history",{retryHistory:e})}},{key:"notifyAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.hasStartedClip){var i=++this.session[t];n["".concat(t,"_total")]=i,n["".concat(t,"_id_").concat(i)]=e,this.notify(e,n)}}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.hasStartedClip){this.setCommonParams();var n=++this.totalActions,r=i(i(i({},t),this.params),{},l({duration:this.session.duration,started_at:this.session.started_at,last_at:(new Date).getTime().toString(),btime:this.bufferingTime},"time_".concat(n),e));1===n&&this.setYouboraParams(r),this.sendRequest("".concat(this.url,"?").concat(mu(r))),this.clear()}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isLive?"watchlive":"watch";this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/").concat(t),this.params.started_at=(new Date).getTime().toString(),this.params.error=e.code||"unknown",this.params.errorDescription=e.description||"unknown",this.params.retryHistory=this.retryHistory,this.setCommonParams(),this.setExperimentsParams(),this.sendRequest("".concat(this.url,"?").concat(mu(this.params)))}},{key:"ping",value:function(){var e=this;this.isLive&&(this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/watchlive"),this.params.dvr=this.params.dvr||0,this.setCommonParams(),this.pingTimerId||(this.sendPing(),this.pingTimerId=setInterval((function(){e.sendPing()}),6e4)))}},{key:"sendPing",value:function(){this.params.btime=this.bufferingTime,this.params.n=++this.totalActions;var e=Object.assign({},this.params);1===this.totalActions&&this.setYouboraParams(e),this.sendRequest("".concat(this.url,"?").concat(mu(e)))}},{key:"sendRequest",value:function(e){return J.isSmartTvEnvironment?this.sendRequestWithHeaders(e):this.sendRequestAsJsonP(e)}},{key:"sendRequestAsJsonP",value:function(e){var t=new Image;return t.src=e,t}},{key:"sendRequestWithHeaders",value:function(e){var t=this;X.ajax({url:e,xhrFields:{withCredentials:!0},headers:l({},this.options.token?"GLBID":"GLBUID",this.options.token||Au.uid),error:function(e,n,i){return we.warn(t.name,"could not send request: ".concat(i))}})}},{key:"setCommonParams",value:function(){var e,t=(null===(e=this.video)||void 0===e?void 0:e.id)||this.options.src||this.options.sources,n=this.video&&this.video.playerType||pu.getPlayerType();this.setVideoSessionID(),this.options.deviceInfo&&this.setDeviceInfo(),this.params.player_id=this.playerId,this.params.browser=this.browser,this.params.object="video:".concat(t),this.params.playback_id=this.params.playback_id||t,this.params.playback=this.playbackName,this.params.player_type=n,this.params.platform=vu(n),this.params.ads_disabled=this.isAdsDisabled,this.params.encrypted=this.isEncrypted,this.params.url=document.location.href,this.params.domain=this.domain,this.params.Referrer=this.referrer,this.params.cdn=this.video.cdn,this.params.player_version="7.85.0",this.params.api_version=gu,this.params.tenant=this.tenant}}]),n}(lt),ku={ambient:"dimension1",provider:"dimension21",userId:"dimension22",platform:"dimension36",platform_manufacturer:"dimension37",platform_model:"dimension38",arc:"dimension100",signal:"dimension101",id:"dimension102",channel:"dimension103",program:"dimension104",episode:"dimension105",domain:"dimension106",type:"dimension107",kind:"dimension108",length_range:"dimension109",gsat_op:"dimension110",pisp:"dimension111",channel_id:"dimension112",program_id:"dimension113",keep_watching:"dimension114",pub_err:"dimension115",exb_date:"dimension116",creation_date:"dimension117",length:"dimension118",auto_play:"dimension119",quality:"dimension120",player_version:"dimension121",schema_version:"dimension122",affiliate_code:"dimension123",service_id:"dimension124",dvr_status:"dimension128",current_subtitle:"dimension130",current_audio:"dimension131",EPG_program_id:"dimension132",EPG_program:"dimension133",EPG_channel_id:"dimension134",EPG_channel:"dimension135",video_session_id:"dimension136",current_audio_type:"dimension142",current_subtitle_type:"dimension143"},Su={start:"metric100",seconds_watched:"metric101",complete:"metric102",bucket10:"metric103",bucket25:"metric104",bucket50:"metric105",bucket75:"metric106",bucket90:"metric107",bucket100:"metric108",seek:"metric109",load:"metric110",load_time:"metric111",skip_recap_displayed:"metric112",skip_recap_clicked:"metric113",skip_intro_displayed:"metric114",skip_intro_clicked:"metric115",quick_seek:"metric116",start_over_clicked:"metric117",auto_skip_recap:"metric118",start_over_displayed:"metric119"},wu=wn.session,Cu=wn.LocalStorage,Iu=wn.now,Du=wn.seekStringToSeconds,Ru=wn.toDurationString,Lu=wn.toLowerCase,Pu=wn.User,Ou=wn.getExperimentAlternative,xu="object"===r(window.onbeforeunload)?"beforeunload":"unload",Mu=1,Nu=2,Bu=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).videoUA="prod"===i.options.env.name?"UA-296593-59":"UA-296593-62",i.productUA=i.options.ga&&i.options.ga.productUA||i.options.gaProductua,i.gaClientId=i.options.ga&&i.options.ga.productClientId,i.gaExtras=i.options.ga&&i.options.ga.extras||{},i.isPaused=!1,i.seekCounter=0,i.checkpoint=0,i.trackedPlayTime=0,i.loadTimer=0,i.sentBuckets={},i.deviceInfo=i.options.deviceInfo||{},wn.registerGlobal("ga"),window.ga?(i.getGAClientId(),i.setupAnalytics()):wn.embedScript("https://www.google-analytics.com/analytics.js").then((function(){i.getGAClientId(),i.setupAnalytics()})),i}return o(n,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"schemaVersion",get:function(){return"player-web-ga4-enabled"===Ou(this.options,"player-isolated-experiment-02")?"14.0":"13.0"}},{key:"inflatedPlaytime",get:function(){return this.isLive?300:this.video.duration/1e3*3}},{key:"shouldResetPlaytime",get:function(){return this.trackedPlayTime>this.inflatedPlaytime||this.trackedPlayTime<0}},{key:"oneDayInMiliseconds",get:function(){return 864e5}},{key:"playerTracker",get:function(){return"playerTracker".concat(this.options.playerId)}},{key:"productTracker",get:function(){return"productTracker".concat(this.options.playerId)}},{key:"ambient",get:function(){return J.isSmartTvEnvironment?"app_tv":"web"}},{key:"platform",get:function(){return J.isSmartTvEnvironment?"big screen":J.isMobile?"mobile":"desktop"}},{key:"getGAClientId",value:function(){if(!this.gaClientId)if(window.GoogleAnalyticsObject&&window[window.GoogleAnalyticsObject]&&window[window.GoogleAnalyticsObject].getAll){var e,t=A(window[window.GoogleAnalyticsObject].getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.get("trackingId")===this.productUA&&(this.gaClientId=n.get("clientId"),we.info(this.name,"Getting GA product client id via GoogleAnalyticsObject"))}}catch(e){t.e(e)}finally{t.f()}}else{var i=Cu.loadRaw("wm.player._videoGa");if(!i){var r=new Date;r.setFullYear(r.getFullYear()+2),Cu.store("_videoGa",Pu.uid,r)}this.gaClientId=i,we.info(this.name,"Player has not found a valid client id. It`s been generated by the player.")}}},{key:"setupAnalytics",value:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,this.createGATrackers()}},{key:"createGATrackers",value:function(){var e=this.mountGAInitialParameters();ga("create",this.videoUA,"auto",this.playerTracker,e),ga("".concat(this.playerTracker,".set"),"location",window.location.href),this.productUA&&(ga("create",this.productUA,"auto",this.productTracker,e),ga("".concat(this.productTracker,".set"),"location",window.location.href))}},{key:"mountGAInitialParameters",value:function(){var e={};return this.gaExtras&&this.gaExtras.uid&&(e.userId=this.gaExtras.uid),this.productUA&&(e.clientId=this.gaClientId),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,In.DFP_CONTENT_RESUME,(function(){e.DFPError="false"})),this.listenTo(this.container,In.DFP_AD_ERROR,(function(){e.DFPError="true"})),this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.playback,Le.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.playback,Le.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,Le.CONTAINER_SEEK,this.onSeek),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,Le.PLAYBACK_STOP,this.onEnd),this.listenTo(this.playback,Le.PLAYBACK_ENDED,(function(){e.onEnd("complete")})),this.listenTo(this.container,Le.CONTAINER_DESTROYED,this.onEnd),this.listenTo(this.container,In.WM_STATS_REPORTED,(function(t){e.watchedTime=t.timers.watch})),this.listenTo(this.container,In.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,In.SKIP_BUTTON_SHOW,this.onSkipButtonDisplayed),this.listenTo(this.playback,Le.PLAYBACK_DVR,this.onDVR),this.listenTo(this.container,In.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,In.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,In.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,In.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap),this.bindCustomEvents()}},{key:"bindCustomEvents",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(xu,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.defineBuckets(this.video.duration),this.setVideoLayer(),this.layer.schema_version=this.schemaVersion,this.layer.gaAccounts=[this.videoUA],this.productUA&&this.layer.gaAccounts.push(this.productUA)}},{key:"onResourceReady",value:function(e,t){this.layer.video_session_id=wu.getVideoSessionId(this.options.playerId),t&&t.product&&(this.layer.pisp=t.product),e.transmission&&e.transmission.affiliate&&(this.layer.affiliate_code=e.transmission.affiliate.code)}},{key:"setVideoLayer",value:function(){var e={excerpt:"short",segment:"short",episode:"full"}[this.video.kind]||this.video.kind,t=this.options.resumeAt||Du(),n=this.container.options.domain;this.layer={arc:this.video.isArchived?"acervo":"grade",signal:this.video.isSubscriberOnly?"fechado":"aberto",id:"".concat(this.video.id),channel:this.video.channel,program:this.video.program,episode:this.video.title,domain:n||document.location.hostname,type:e,kind:Lu(this.video.category),length_range:Ru(this.video.duration),channel_id:this.video.channelId,program_id:this.video.programId,keep_watching:t>0?"true":"false",exb_date:this.video.exhibitedAt,creation_date:this.video.createdAt,length:Math.trunc(this.video.duration/1e3),auto_play:this.options.autoPlay+"",player_version:"7.85.0",start:0,service_id:this.video.serviceId,ambient:this.ambient,platform:this.platform},this.video.providerId&&this.video.isSubscriberOnly&&(this.layer.gsat_op=Lu(this.options.payTvServiceProvider)),J.isSmartTvEnvironment&&(this.layer=i(i({},this.layer),{},{platform_manufacturer:this.deviceInfo.manufacturer||J.device&&J.device.brand,platform_model:this.deviceInfo.model||J.device&&J.device.model}))}},{key:"onPlay",value:function(){this.isFirstPlay()?this.isPaused=!1:this.isPaused&&(this.initialTrackedPlayTime=Iu(),this.track("play"),this.isPaused=!1)}},{key:"getLanguageDimension",value:function(e){return e.languageISO_639_2B||e.language}},{key:"isFirstPlay",value:function(){return 0===this.layer.start&&(this.isLive&&(this.layer.dvr_status=this.container.isDvrEnabled()?"em-simulcast":"nao-disponivel"),this.playback.currentAudio&&(this.layer.current_audio=this.getLanguageDimension(this.playback.currentAudio),this.changeSettingType(this.playback.currentAudio,"audio")),this.playback.currentSubtitle&&(this.layer.current_subtitle=this.getLanguageDimension(this.playback.currentSubtitle),this.changeSettingType(this.playback.currentSubtitle,"subtitle")),this.layer.start=1,this.initialTrackedPlayTime=Iu(),this.track("start"),!0)}},{key:"calculatePlayTime",value:function(){if(this.initialTrackedPlayTime){var e=Iu(),t=(e-this.initialTrackedPlayTime)/1e3;this.isBuffering&&(this.calculateBufferTime(),this.onBufferStart()),this.trackedPlayTime=t-this.loadTimer,this.hasSentBuffer(),this.shouldResetPlaytime&&(this.sendToSentry({type:"GA ERROR: Not possible to calculate trackedPlayTime",description:"initialTrackedPlayTime = ".concat(this.initialTrackedPlayTime," / finalTrackedPlayTime = ").concat(e)}),this.trackedPlayTime=null),this.initialTrackedPlayTime=0}}},{key:"milestone",value:function(e){!this.isPaused&&0!==e&&this.checkpoint!==e&&e%60<1&&(this.calculatePlayTime(),1===this.layer.start&&this.track("milestone"),this.initialTrackedPlayTime=Iu()),this.checkpoint=e}},{key:"onSkipButtonDisplayed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_displayed")]!==Nu&&(this["".concat(t,"_displayed")]=Mu)}},{key:"onSkipButtonClicked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_clicked")]!==Nu&&(this["".concat(t,"_clicked")]=Mu)}},{key:"onAutoSkipRecap",value:function(){this.auto_skip_recap!==Nu&&(this.auto_skip_recap=Mu)}},{key:"onCurrentProgramUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.layer.EPG_program=t&&t.program||null,this.layer.EPG_channel=t&&t.channel||null,this.layer.EPG_program_id=t&&t.programId||null,this.layer.EPG_channel_id=t&&t.channelId||null}},{key:"changeSettingType",value:function(e,t){var n="current_".concat(t,"_type"),i="audio"===t&&"description"===(null==e?void 0:e.role),r="subtitle"===t&&"caption"===(null==e?void 0:e.role);this.layer[n]=i||r?e.role:null}},{key:"onAudioChanged",value:function(e){this.layer.current_audio=e&&this.getLanguageDimension(e)||null,this.changeSettingType(e,"audio")}},{key:"onSubtitleChanged",value:function(e){this.layer.current_subtitle=e&&this.getLanguageDimension(e)||null,this.changeSettingType(e,"subtitle")}},{key:"onQuickSeek",value:function(){this.didQuickSeek=!0}},{key:"onPause",value:function(){this.calculatePlayTime(),this.track("pause"),this.isPaused=!0}},{key:"onBuffering",value:function(){this.isBuffering||(this.isBuffering=!0,this.listenToOnce(this.container,Le.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.onBufferStart())}},{key:"onBufferStart",value:function(){this.loadInitialTime=Iu()}},{key:"onBufferFull",value:function(){this.calculateBufferTime(),this.isBuffering=!1}},{key:"calculateBufferTime",value:function(){this.loadEndTime=Iu(),this.loadEndTime>0&&this.loadInitialTime>0&&this.loadEndTime>this.loadInitialTime&&(this.loadTimer+=(this.loadEndTime-this.loadInitialTime)/1e3),this.loadInitialTime=0,this.loadEndTime=0}},{key:"hasSentBuffer",value:function(){this.loadTimer=0,this.layer.load=0,this.layer.load_time=0}},{key:"onSeek",value:function(){this.hasSeeked=!0,this.seekCounter++}},{key:"onEnd",value:function(e){!this.layer||this.layer&&0===this.layer.start||(this.layer.start=0,this.hasVideoCompleted="complete"===e,this.calculatePlayTime(),this.track("end"))}},{key:"destroy",value:function(){window.removeEventListener(xu,this.boundOnEnd),v(c(n.prototype),"destroy",this).call(this),this.stopListening(),window.ga&&ga.getByName&&ga.getByName(this.playerTracker)&&ga("".concat(this.playerTracker,".remove")),window.ga&&ga.getByName&&ga.getByName(this.productTracker)&&ga("".concat(this.productTracker,".remove"))}},{key:"onTimeUpdate",value:function(e){this.currentTime=this.isLive?Math.trunc(this.watchedTime/1e3):e.current,this.milestone(Math.trunc(this.currentTime))}},{key:"onDVR",value:function(e){this.layer.dvr_status=e?"em-dvr":"em-simulcast"}},{key:"track",value:function(e){window.ga?(this.layer.event=e,this.layer.quality=this.levelSelected,this.layer.pub_err=this.DFPError,this.setGACustomMetrics(this.layer.event),this.useGAtracker()):this.container.trigger(In.WM_GA_UNTRACKED_EVENT,{eventName:e})}},{key:"setGACustomMetrics",value:function(e){for(var t in this.GACustomMetrics={},this.GACustomMetrics[Su.start]="start"===e&&1,this.GACustomMetrics[Su.seconds_watched]=this.shouldSendPlayTime()&&this.trackedPlayTime,this.trackedPlayTime=0,this.GACustomMetrics[Su.load]=this.shouldSendLoadTime()&&1,this.GACustomMetrics[Su.load_time]=this.shouldSendLoadTime()&&this.loadTimer,this.GACustomMetrics[Su.complete]="end"===e&&this.hasVideoCompleted&&1,this.setSkipButtonsCustomMetric(),this.didQuickSeek&&(this.GACustomMetrics[Su.quick_seek]=1,this.didQuickSeek=!1),"milestone"!==e&&this.hasSeeked&&(this.hasSeeked=!1,this.GACustomMetrics[Su.seek]=this.seekCounter,this.seekCounter=0),!this.isLive&&this.watchedTime&&this.calculateBuckets(this.watchedTime),this.GACustomMetrics)!1===this.GACustomMetrics[t]&&delete this.GACustomMetrics[t]}},{key:"setSkipButtonsCustomMetric",value:function(){var e=this;["skip_recap_displayed","skip_recap_clicked","skip_intro_displayed","skip_intro_clicked","start_over_displayed","start_over_clicked","auto_skip_recap"].forEach((function(t){e[t]===Mu&&(e.GACustomMetrics[Su[t]]=1,e[t]=Nu)}))}},{key:"useGAtracker",value:function(){this.setGACustomDimensions(this.playerTracker),this.sendtoGA(this.playerTracker),this.productUA&&(this.setGACustomDimensions(this.productTracker),this.sendtoGA(this.productTracker))}},{key:"setGACustomDimensions",value:function(e){var t=this;for(var n in ku)void 0!==this.layer[n]&&ga("".concat(e,".set"),ku[n],this.layer[n]);this.gaExtras&&Object.keys(this.gaExtras).forEach((function(n){t.gaExtras[n]&&ga("".concat(e,".set"),ku[n]||n,t.gaExtras[n])}))}},{key:"sendtoGA",value:function(e){this.isLive?this.milestoneTime=this.milliToMinutes(this.watchedTime):this.milestoneTime=Math.trunc(this.currentTime/60),this.gaEventLabel="milestone"===this.layer.event?"minute - ".concat(this.milestoneTime):this.layer.episode,ga("".concat(e,".send"),"event","video",this.layer.event,this.gaEventLabel,this.GACustomMetrics),this.shouldSendLoadTime()&&this.hasSentBuffer()}},{key:"shouldSendPlayTime",value:function(){return"milestone"===this.layer.event||"pause"===this.layer.event||"end"===this.layer.event}},{key:"shouldSendLoadTime",value:function(){return"start"===this.layer.event||"play"===this.layer.event}},{key:"defineBuckets",value:function(e){this.videobuckets={};for(var t=0,n=[10,25,50,75,90,100];t<n.length;t++){var i=n[t];this.videobuckets["bucket".concat(i)]=i/100*e}}},{key:"calculateBuckets",value:function(e){for(var t in this.videobuckets)e>=this.videobuckets[t]&&!this.sentBuckets[t]&&(this.GACustomMetrics[Su[t]]=1,this.sentBuckets[t]=1)}},{key:"milliToMinutes",value:function(e){return Math.trunc(e/6e4)}},{key:"sendToSentry",value:function(e){this.container.trigger("wm:ga:error",e)}}]),n}(lt),Uu={prod:"G-5401XJ0K8J",local:"G-TY5Q77JETQ"},Fu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,e);var r=t.user_id,s=void 0===r?null:r,o=t.endpoint_keys,l=void 0===o?{}:o,u=t.event_params,c=void 0===u?{}:u,d=t.user_properties,h=void 0===d?{}:d;this.userId=s,this.clientId=l.clientId,this.defaultMeasurementId=Uu[n.name],this.productMeasurementId=l.measurementId,this.eventParams=c,this.userProperties=h,this.deviceProperties=i,this._loadGTagScript(n)}return o(e,[{key:"_loadGTagScript",value:function(t){var n=this,i=t.googleAnalyticsTagScript;wn.registerGlobal("wm_player_gtag"),window.wm_player_gtag?this.gtag=window.wm_player_gtag:wn.embedScript("".concat(i,"?id=").concat(this.defaultMeasurementId)).then((function(){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",n.defaultMeasurementId,{send_page_view:!1,client_id:n.clientId}),window.wm_player_gtag=n.gtag=e}),(function(t){we.warn(e.name,"error loading Google Analytics!",t)}))}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gtag&&this.gtag("event",e,i(i(i({},t),this.eventParams),{},{send_to:this.productMeasurementId,user_id:this.userId,user_properties:i(i({},this.userProperties),this.deviceProperties)}))}}]),e}(),Vu=wn.toDurationString,Hu={excerpt:"short",segment:"short",episode:"full"},ju=function(){function e(t){var n=t.isArchived,i=t.isSubscriberOnly,r=t.id,s=t.channel,o=t.program,l=t.title,u=t.channelId,c=t.programId,d=t.exhibitedAt,h=t.kind,p=t.createdAt,f=t.serviceId,g=t.category,v=t.duration,m=t.transmission,y=t.autoPlay,b=t.domain,E=t.initialTime,A=t.schemaVersion;a(this,e),this.video_grade_acervo=n?"acervo":"grade",this.video_fechado_aberto=i?"fechado":"aberto",this.video_id=r,this.video_channel=s,this.video_program=o,this.video_episode=l,this.video_channel_id=u,this.video_program_id=c,this.video_air_date_tv=d,this.video_date_created=p,this.video_length_ms=Math.trunc(v/1e3),this.video_player_version="7.85.0",this.video_place=null==m?void 0:m.affiliate.code,this.video_service_id=f,this.video_category=g,this.video_length_bucket=Vu(v),this.video_autoplay=y,this.video_domain=b,this.video_type=Hu[h]||h,this.video_keep_watching=E>0?"true":"false",this.video_tracking_version=A,this.video_playback="online"}return o(e,[{key:"setSessionIdDimension",value:function(e){this.video_session_id=e}},{key:"setVideoPlaceDimension",value:function(e){var t=e.affiliate;t&&(this.video_place=t.code)}},{key:"setAdErrorDimension",value:function(e){this.video_ad_error=e}},{key:"setDVRDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?t?"em-dvr":"em-simulcast":"nao-disponivel";this.video_dvr=n}},{key:"setProgramDimension",value:function(e){var t=e.program,n=e.channel,i={video_epg_program_id:e.programId,video_epg_program:t,video_epg_channel_id:e.channelId,video_epg_channel:n};for(var r in i)this[r]=i[r]}},{key:"setLanguageDimension",value:function(e,t){if(t){var n=t.languageISO_639_2B,i=t.language,r=t.role;this["video_".concat(e)]=n||i,"caption"===r||"description"===r?this["video_".concat(e,"_type")]=r:delete this["video_".concat(e,"_type")]}}}]),e}(),Ku=1e3,Gu=function(){function e(){a(this,e)}return o(e,[{key:"setVideoStart",value:function(){this.video_start=1}},{key:"setVideoComplete",value:function(){this.video_complete=1}},{key:"setVideoSeek",value:function(){this.video_seek=1}},{key:"setVideoQuickSeek",value:function(){this.video_quick_seek=1}},{key:"setVideoSkip",value:function(e,t){this["video_".concat({skip_intro:"open",skip_recap:"summary"}[e],"_skip_").concat(t)]=1}},{key:"setVideoAutoSkip",value:function(){this.video_autoskip=1}},{key:"setVideoBuffer",value:function(){this.video_buffer=1}},{key:"setVideoBufferTime",value:function(e,t){var n;this.video_buffer_time=null!==(n=this.video_buffer_time)&&void 0!==n?n:0,this._calculateBufferTime(e,t)}},{key:"setVideoBucket",value:function(e){this["video_bucket_".concat(e)]=1}},{key:"setVideoPlayTime",value:function(e,t){this._calculatePlayTime(e,t)}},{key:"_calculateBufferTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0&&e>0&&t>e;return n?(this.video_buffer_time+=(t-e)/Ku,this.video_buffer_time):this.video_buffer_time}},{key:"_calculatePlayTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video_playtime=(t-e)/Ku,this.video_buffer_time&&(this.video_playtime-=this.video_buffer_time)}}]),e}(),Wu=[100,90,75,50,25,10],Yu=function(){function e(t){a(this,e),this._calculateVideoBuckets(t)}return o(e,[{key:"getCurrentBucket",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=A(this._buckets);try{var a=function(){var i=e.value;if(n>=i.time){var r=t._buckets.filter((function(e){return e.percentage>i.percentage}));return t._buckets=r,{v:i.percentage}}};for(i.s();!(e=i.n()).done;){var s=a();if("object"===r(s))return s.v}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"_calculateVideoBuckets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._buckets=[];for(var t=0,n=Wu;t<n.length;t++){var i=n[t],r=i/100*e;this._buckets.push({percentage:i,time:r})}}}]),e}(),zu={event_name:"video_start",event_category:"video",event_action:"start"},qu={event_name:"video_play",event_category:"video",event_action:"play"},$u={event_name:"video_pause",event_category:"video",event_action:"pause"},Xu={event_name:"video_complete",event_category:"video",event_action:"end"},Zu={event_name:"video_milestone",event_category:"video",event_action:"milestone"},Qu=wn.seekStringToSeconds,Ju=wn.session,ec=wn.now,tc="object"===r(window.onbeforeunload)?"beforeunload":"unload",nc=function(e){u(n,e);var t=f(n);function n(e){var i;a(this,n);var r=(i=t.call(this,e)).options,s=r.ga4,o=r.env;return i.gtag=new Fu(s,o,i._getDeviceProperties()),i.boundOnEnd=i.onStop.bind(h(i)),i}return o(n,[{key:"name",get:function(){return"google-analytics4"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"schemaVersion",get:function(){return"14.0"}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"platform",get:function(){return J.isSmartTvEnvironment?"big screen":J.isMobile?"mobile":"desktop"}},{key:"ambient",get:function(){return J.isSmartTvEnvironment?"app_tv":"web"}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,this.onFirstPlay),this.listenTo(this.playback,Le.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.playback,Le.PLAYBACK_DVR,this.setDVRDimension),this.listenTo(this.container,Le.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,Le.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,In.DFP_CONTENT_RESUME,this.onAdResume),this.listenTo(this.container,In.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.setSubtitleDimension),this.listenTo(this.container,In.WM_AUDIO_CHANGED,this.setAudioDimension),this.listenTo(this.container,In.DID_CHANGE_CURRENT_PROGRAM,this.setProgramDimension),this.listenTo(this.container,In.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,In.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container,In.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,In.SKIP_BUTTON_SHOW,this.onSkipButtonShow),this.listenTo(this.container,In.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap)}},{key:"bindCustomEvents",value:function(){window.addEventListener(tc,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){var t={autoPlay:this.options.autoPlay,domain:this.container.options.domain||document.location.hostname,initialTime:this.options.resumeAt||Qu(),schemaVersion:this.schemaVersion},n=i(i({},e),t);this.customDimensions=new ju(n),this.customMetrics=new Gu,this.videoBucketMap=new Yu(e.duration)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transmission,n=Ju.getVideoSessionId(this.options.playerId);this.customDimensions.setSessionIdDimension(n),t&&this.customDimensions.setVideoPlaceDimension(t)}},{key:"onFirstPlay",value:function(){this.setDVRDimension(),this.setSubtitleDimension(this.playback.currentSubtitle),this.setAudioDimension(this.playback.currentAudio),this.customMetrics.setVideoStart(),this.sendEventToGTag(zu),this.listenTo(this.playback,Le.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this.onComplete),this.listenTo(this.playback,Le.PLAYBACK_STOP,this.onStop),this.listenTo(this.container,Le.CONTAINER_DESTROYED,this.onStop),this.bindCustomEvents()}},{key:"onPlay",value:function(){this.sendEventToGTag(qu)}},{key:"onPause",value:function(){this.setVideoPlayTimeMetric(),this.sendEventToGTag($u),this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,this.onPlay)}},{key:"onComplete",value:function(){this.customMetrics.setVideoComplete(),this.setVideoPlayTimeMetric(),this.sendEventToGTag(Xu),this._prepareToReplay()}},{key:"onStop",value:function(){this.setVideoPlayTimeMetric(),this.sendEventToGTag(Xu),this._prepareToReplay()}},{key:"onSeek",value:function(){this.customMetrics.setVideoSeek()}},{key:"onQuickSeek",value:function(){this.customMetrics.setVideoQuickSeek()}},{key:"onBuffering",value:function(){this.loadInitialTime=ec(),this.customMetrics.setVideoBuffer(),this.listenToOnce(this.container,Le.CONTAINER_STATE_BUFFERFULL,this.onBufferFull)}},{key:"onBufferFull",value:function(){this.loadEndTime=ec(),this.customMetrics.setVideoBufferTime(this.loadInitialTime,this.loadEndTime)}},{key:"onSkipButtonClicked",value:function(e){var t=e.name;this.customMetrics.setVideoSkip(t,"click")}},{key:"onSkipButtonShow",value:function(e){var t=e.name;this.customMetrics.setVideoSkip(t,"show")}},{key:"onAutoSkipRecap",value:function(){this.customMetrics.setVideoAutoSkip()}},{key:"onAdResume",value:function(){this.customDimensions.setAdErrorDimension(!1)}},{key:"onAdError",value:function(){this.customDimensions.setAdErrorDimension(!0)}},{key:"onStatsReported",value:function(e){var t=e.timers;this.watchedTime=t.watch}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.current,n=this.isLive?this.watchedTime/1e3:t,r=this._calculateMinute(n),a="minute - ".concat(r);r&&this.sendEventToGTag(i(i({},Zu),{},{event_label:a,event_minute:a}))}},{key:"setProgramDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.customDimensions.setProgramDimension(t)}},{key:"setSubtitleDimension",value:function(e){this.customDimensions.setLanguageDimension("subtitle",e)}},{key:"setAudioDimension",value:function(e){this.customDimensions.setLanguageDimension("audio",e)}},{key:"setDVRDimension",value:function(e){this.customDimensions.setDVRDimension(this.container.isDvrEnabled(),e)}},{key:"setVideoBucketMetric",value:function(){var e=this.videoBucketMap.getCurrentBucket(this.watchedTime);e&&this.customMetrics.setVideoBucket(e)}},{key:"setVideoPlayTimeMetric",value:function(){var e=ec();this.customMetrics.setVideoPlayTime(this.initialPlayTime,e)}},{key:"sendEventToGTag",value:function(e){var t=e.event_label||this.customDimensions.video_program;!this.isLive&&this.setVideoBucketMetric(),this.gtag.sendEvent(e.event_name,i(i(i({},e),{},{event_label:t},this.customDimensions),this.customMetrics)),this.customMetrics=new Gu,this._startPlayTime(e.event_name)}},{key:"_startPlayTime",value:function(e){e!==zu.event_name&&e!==qu.event_name||(this.initialPlayTime=ec())}},{key:"_calculateMinute",value:function(e){var t=Math.trunc(e),n=0!==t&&this.lastCheckedSecond!==t&&t%60<1;return this.lastCheckedSecond=t,n?Math.trunc(e/60):0}},{key:"_getDeviceProperties",value:function(){var e=this.options.deviceInfo;return{platform:this.platform,consumption_environment:this.ambient,tv_maker:(null==e?void 0:e.manufacturer)||J.device&&J.device.brand,tv_model:(null==e?void 0:e.model)||J.device&&J.device.model}}},{key:"_prepareToReplay",value:function(){var e=this;[Le.PLAYBACK_PLAY,Le.PLAYBACK_ENDED,Le.PLAYBACK_STOP].forEach((function(t){return e.stopListening(e.playback,t)})),this.stopListening(this.container,Le.CONTAINER_DESTROYED),this.unbindCustomEvents(),this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,this.onFirstPlay)}},{key:"unbindCustomEvents",value:function(){window.removeEventListener(tc,this.boundOnEnd)}},{key:"destroy",value:function(){this.unbindCustomEvents(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(lt),ic=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).rendered=!1,i}return o(n,[{key:"name",get:function(){return"waiting_room"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"template",get:function(){return je('<div class="waiting-room__aligner">\n<div class="waiting-room__main-text">Estamos lotados! Tentaremos carregar a transmissão novamente em </div>\n<p class="waiting-room__countdown"></p>\n</div>\n')}},{key:"attributes",get:function(){return{class:"waiting-room"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,In.WM_WROOM_WAITING,this.onResponse)}},{key:"onResponse",value:function(){var e=this;this.retryInterval=this.setRetryInterval(),this.rendered?this.updateScreenVisibility("flex"):this.render(),this.countdownStart=Date.now(),this.retryID=setTimeout((function(){e.retry()}),this.retryInterval),this.countdownID=setInterval((function(){e.updateScreen()}),1e3)}},{key:"retry",value:function(){clearInterval(this.retryID),clearInterval(this.countdownID),this.updateScreenVisibility("none"),this.container.playback.trigger(In.WILL_RESTART_PLAYBACK,"wroom")}},{key:"updateScreen",value:function(){this.updateCountdownElement(this.updateCountdownTime())}},{key:"updateScreenVisibility",value:function(e){this.$el[0].style.display=e}},{key:"updateCountdownElement",value:function(e){this.$el.find(".waiting-room__countdown").text(this.toSeconds(e))}},{key:"updateCountdownTime",value:function(){return this.retryInterval-(Date.now()-this.countdownStart)}},{key:"toSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"setRetryInterval",value:function(){return Math.round(-2e4*Math.random())+5e4}},{key:"render",value:function(){if(!this.rendered){this.$el.html(this.template());var e=Cn.getStyleFrom('.clappr-player#wp3-player-0 .waiting-room {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: #202020;\n  background-size: cover;\n  z-index: 999;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n}\n.clappr-player#wp3-player-0 .waiting-room__aligner {\n  flex-grow: 1;\n  width: 100%;\n}\n.clappr-player#wp3-player-0 .waiting-room__main-text {\n  color: rgb(204, 204, 204);\n  font-family: "opensans-bold", sans-serif;\n  font-size: 18px;\n  width: 100%;\n  left: 0;\n}\n.clappr-player#wp3-player-0 .waiting-room__countdown {\n  color: rgb(204, 204, 204);\n  font-family: "opensans-bold", sans-serif;\n  font-size: 18px;\n  margin: 0 auto;\n  background-color: rgba(0, 0, 0, 0.5);\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  line-height: 50px;\n  display: inline-block;\n  text-align: center;\n}',{baseUrl:this.options.baseUrl,playerId:this.options.playerId});return this.$el.append(e[0]),this.container.$el.append(this.el),this.rendered=!0,this}}}]),n}(ct),rc="6.8.42",ac=function(){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.slice,n=this,i=t.call(arguments,1);function r(){var r=n.prototype&&this instanceof n;return n.apply(!r&&e||this,i.concat(t.call(arguments)))}return r.prototype=n.prototype,r},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function!");for(var n=this.length,i=0;i<n;i++)e.call(t,this[i],i,this)},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)}},sc=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},oc=function(){},lc=function(){};lc.prototype={constructor:function(){}},lc.extend=function(e,t){var n,i=this;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},sc(n,i,t),n.prototype=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return oc.prototype=e,new oc}(i.prototype),e&&sc(n.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};var uc=lc,cc=function(e){return"[object Array]"===Object.prototype.toString.call(e)},dc=uc.extend({on:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},cc(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),cc(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,n){"function"==typeof n&&n({type:e,data:t,target:this})}}),hc=dc,pc={_emitter:new hc,on:function(){pc._emitter.on.apply(pc._emitter,arguments)},off:function(){pc._emitter.off.apply(pc._emitter,arguments)},emit:function(){pc._emitter.emit.apply(pc._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(e,t,n){if("undefined"!=typeof console&&console.log&&"undefined"!=typeof document){n=n||"darkcyan";var i,r={5:"e",4:"w",3:"n",2:"d",1:"v"}[t=t||pc.Level.NOTICE],a="[Youbora]"+pc._getCurrentTime()+" "+r+":";if(this.emit("log",{level:t,msg:e,prefix:a}),pc.logLevel<=t)if(pc.plainLogs||document.documentMode)pc._plainReport(e,a);else i=t===pc.Level.ERROR&&console.error?console.error:t===pc.Level.WARNING&&console.warn?console.warn:t===pc.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,cc(e)?(e.splice(0,0,a,"color: "+n),i.apply(console,e)):i.call(console,a,"color: "+n,e)}},_getCurrentTime:function(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"},_plainReport:function(e,t){if(e instanceof Array)for(var n in e)pc._plainReport(e[n],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},error:function(){pc.report([].slice.call(arguments),pc.Level.ERROR,"darkred")},warn:function(){pc.report([].slice.call(arguments),pc.Level.WARNING,"darkorange")},notice:function(){pc.report([].slice.call(arguments),pc.Level.NOTICE,"darkgreen")},debug:function(){pc.report([].slice.call(arguments),pc.Level.DEBUG,"indigo")},verbose:function(){pc.report([].slice.call(arguments),pc.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){"undefined"!=typeof window&&window.location&&this._parseLevelFromUrl(window.location.search)},_parseLevelFromUrl:function(e){if(e){var t=/\?.*&*youbora-debug=(.+)/i.exec(e);null!==t&&(pc.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(e)&&(pc.plainLogs=!0)}}},fc=pc,gc={stripProtocol:function(e){var t=e;try{t=e.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){fc.warn(e)}return t},addProtocol:function(e,t){var n="http://localhost/";try{n="http://"+e,t||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?n="https://"+e:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(n="//"+e)}catch(e){fc.warn(e)}return n},parseNumber:function(e,t){return!isNaN(e)&&e>=0&&e!==1/0&&e!==-1/0&&null!=e?e:t},logAllEvents:function(e,t,n){try{if(fc.logLevel<=fc.Level.DEBUG){n=n||function(e){fc.debug("Event: "+e.type)};var i=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),i=t):i=i.concat(t));for(var r=0;r<i.length;r++)"function"==typeof e?e.call(window,i[r],n):e.on?e.on(i[r],n):e.addEventListener&&e.addEventListener(i[r],n)}}catch(e){fc.error(e)}},buildRenditionString:function(e,t,n){1===arguments.length&&(n=e,e=null,t=null);var i=null;return e&&t&&(i=e+"x"+t),"number"==typeof n&&!isNaN(n)&&n>=1&&(i?i+="@":i="",i+=n<1e3?Math.round(n)+"bps":n<1e6?(n=Math.round(n/1e3))+"Kbps":(n=Math.round(n/1e4)/100)+"Mbps"),i},buildErrorParams:function(e,t,n,i){var r={};return"object"==typeof e&&null!==e?r=e:(r.errorCode=e||"FAILURE",r.msg=t||r.errorCode,r.errorMetadata=n,r.errorLevel=i),r},calculateAdViewability:function(e,t){var n=!0;if("undefined"!=typeof window&&e&&"function"==typeof e.getBoundingClientRect){var i=e.getBoundingClientRect();if(i.top>=window.innerHeight||i.bottom<=0||i.right<=0||i.left>=window.innerWidth)n=!1;else{var r=Math.trunc(i.height*i.width),a=i.top>0?i.top:0,s=i.bottom>window.innerHeight?window.innerHeight:i.bottom,o=i.left>0?i.left:0;n=100*(((i.right>window.innerWidth?window.innerWidth:i.right)-o)*(s-a))>r*(t||50)}}return n},getMetricsFrom:function(e,t){var n=e||t;for(var i in n)if("object"!=typeof n[i]||!n[i].value){var r={};r.value=n[i],n[i]=r}return n},assign:sc,isArray:cc},vc=gc,mc=uc.extend({getCdnTraffic:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)e=CdnBalancerStats.cdn.totalDownloadedBytes;else if("undefined"!=typeof Streamroot)e=this._getStreamrootPeerObject("cdn",!1)||this._getStreamrootInstanceObject("cdnDownload");else if("undefined"!=typeof peer5&&peer5.getStats)e=peer5.getStats().totalHttpDownloaded;else if("undefined"!=typeof teltoo&&teltoo.getStats){var t=teltoo.getStats();e=t.totalReceivedBytes-t.p2pReceivedBytes}return e},getMultiCdnInfo:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn&&CdnBalancerStats.cdn.cdns){var t=CdnBalancerStats.p2p;e={P2P:{downloaded_bytes:t.downloadedBytes,uploaded_bytes:t.uploadedBytes,downloaded_chunks:t.downloadedSegments,uploaded_chunks:t.uploadedSegments,errors:t.failedRequests?t.failedRequests.total:0,missed_downloaded_chunks:t.failedRequests?t.failedRequests.absent:0,timeout_errors:t.failedRequests?t.failedRequests.timeout:0,other_errors:t.failedRequests?t.failedRequests.error:0,late_uploaded_chunks:t.discardedUploadedSegments,late_uploaded_bytes:t.discardedUploadedBytes,late_downloaded_bytes:t.discardedDownloadedBytes,time:t.downloadMillis,active_peers:t.activePeers,peers:t.totalPeers}},CdnBalancerStats.cdn.cdns.forEach((function(t){e[t.name]={downloaded_bytes:t.bytes,downloaded_chunks:t.chunks,errors:t.failures,time:t.downloadMillis}}))}return e},getSegmentDuration:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.segmentDuration?CdnBalancerStats.segmentDuration:null},getBalancerResponseId:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn?CdnBalancerStats.cdn.responseUUID:null},getP2PTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.downloadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("p2p",!0)||this._getStreamrootInstanceObject("dnaDownload"):"undefined"!=typeof peer5&&peer5.getStats?e=peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats&&(e=teltoo.getStats().p2pReceivedBytes),e},getUploadTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.uploadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("upload",!0)||this._getStreamrootInstanceObject("dnaUpload"):"undefined"!=typeof peer5&&peer5.getStats&&(e=peer5.getStats().totalP2PUploaded),e},getIsP2PEnabled:function(){var e=!1;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p)e=CdnBalancerStats.p2p.downloadEnabled;else if("undefined"!=typeof Streamroot)if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;else Streamroot.instances&&Streamroot.instances.forEach((function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}));else"undefined"!=typeof peer5&&peer5.isEnabled?e=peer5.isEnabled():"undefined"!=typeof teltoo&&(e=!0);return e},_getStreamrootPeerObject:function(e,t){var n=null;if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var i in Streamroot.peerAgents){var r=Streamroot.peerAgents[i];!r.stats||t&&!r.isP2PEnabled||(n+=r.stats[e])}return n},_getStreamrootInstanceObject:function(e){var t=null;return Streamroot.instances&&Streamroot.instances.forEach((function(n){n.stats&&n.stats.currentContent&&(t+=n.stats.currentContent[e])})),t}}),yc=uc.extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=-1,n=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=n);var i=this.pauseTime?n-this.pauseTime:0,r=this.stopTime?this.stopTime:n;t=this.offset-i+(r-this.startTime)}return t},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pauseTime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new yc;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}}),bc=yc,Ec=uc.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new bc},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer),this._timer=null}catch(e){"undefined"!=typeof atv&&(atv.clearTimeout(this._timer),this._timer=null)}},_setTick:function(){if(this.isRunning){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(e){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}}}),Ac={Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}},_c={GET:"get",POST:"post"},Tc={AdPosition:{Preroll:"pre",Midroll:"mid",Postroll:"post"},ManifestError:{NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"},RequestMethod:_c,Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"},AdInsertionType:{ClientSide:"csai",ServerSide:"ssai"},Adapter:Ac},kc=uc.extend({constructor:function(e,t,n,i){this.xhr=this.createXHR(),this.host=e||"",this.service=t||"",this.params=n||{},this.options=vc.assign({},kc.defaultOptions,i),this.retries=0,this.sendPostRequest=!1,this.preparedPostRequest=!1,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var e={};try{e=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){fc.error(e)}return e},getXHR:function(){return this.xhr},getResponse:function(){return this.xhr.response},getResponseText:function(){return this.xhr.responseText},getResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t,n){return this.xhr.addEventListener?this.xhr.addEventListener(e,t.bind(this,this,n)):e===kc.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&t.bind(this,this,n)}.bind(this)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e="?";for(var t in this.params){var n=this.params[t];if(null!==n&&"object"==typeof n){var i=JSON.stringify(n);"{}"!==i&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")}else null!=n&&""!==n&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}return e.slice(0,-1)}catch(e){return fc.error(e),""}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},setPostRequest:function(e){this.sendPostRequest=e},getParamsForPostMessages:function(){var e={};try{var t=this.getParam("timemark"),n=this.getParam("code"),i=this.getParam("sessionRoot"),r=this.getParam("sessionId");t&&(e.timemark=t),n&&(e.code=n),i&&(e.sessionRoot=i),r&&(e.sessionId=r)}catch(e){fc.error(e)}return e},send:function(){try{try{this.sendPostRequest&&!this.preparedPostRequest&&(this.options.method="POST",this.body=JSON.stringify(this.params),this.params=this.getParamsForPostMessages(),this.preparedPostRequest=!0)}catch(e){}if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(this.options.retryAfter>0&&this.options.maxRetries>0){0===this.retries&&this.on(kc.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)fc.error('Aborting failed request "'+this.service+'". Max retries reached.');else{fc.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(e){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):fc.error(e)}}}.bind(this))}for(var t in fc.logLevel<=fc.Level.VERBOSE&&fc.verbose("XHR Req: "+this.getUrl()),kc._globalListeners)kc._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){fc.error(e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){kc._globalListeners[e]=kc._globalListeners[e]||[],kc._globalListeners[e].push(t)},offEvery:function(e,t){if(kc._globalListeners[e]){var n=kc._globalListeners[e].indexOf(t);-1!==n&&kc._globalListeners[e].splice(n,1)}}}),Sc=kc,wc=hc.extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(wc.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}}),Cc=wc,Ic=uc.extend({constructor:function(e){this.transforms=[],this.pluginRef=e,this._requests=[]},sendRequest:function(e,t,n){e&&("function"==typeof t&&e.on(Sc.Event.SUCCESS,t,n),this._registerRequest(e))},buildRequest:function(e,t,n,i){var r=new Sc(e,t,n=n||{});"function"==typeof i&&r.on(Sc.Event.SUCCESS,i),this._registerRequest(r)},addTransform:function(e){e.parse&&e.isBlocking?(this.transforms.push(e),e.on(Cc.Event.DONE,this._processRequests.bind(this))):fc.warn(e+" is not a valid RequestTransform.")},removeTransform:function(e){var t=this.transforms.indexOf(e);-1!==t?this.transforms.splice(t,1):fc.warn("Trying to remove unexisting Transform '"+e+"'.")},_registerRequest:function(e){if(this.pluginRef){var t=this.pluginRef.options;t.authToken&&(e.options.requestHeaders.Authorization=t.authType+" "+t.authToken)}this._requests.push(e),this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];for(var t=[];e.length;){var n=e.shift(),i=this._transform(n);i===Cc.STATE_NO_BLOCKED?(this.pluginRef&&(n.host=this.pluginRef.getHost()),n.send()):i===Cc.STATE_BLOCKED&&t.push(n)}for(;t.length;)this._requests.push(t.shift())},_transform:function(e){var t=Cc.STATE_NO_BLOCKED;return this.transforms.forEach((function(n){n.isBlocking(e)?t=Cc.STATE_BLOCKED:(n.parse(e),n.getState()===Cc.STATE_OFFLINE&&(t=Cc.STATE_OFFLINE))})),t}}),Dc=Ic,Rc=Cc.extend({constructor:function(e,t){Cc.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=t,this._httpSecure=e.options["app.https"],this._plugin=e,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if(this._plugin.storage.isEnabled()&&((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData()))return this.setData(this._plugin.getStoredData()),null;var e=Tc.Service.DATA,t={outputformat:"json"};null!==(t=this._plugin.requestBuilder.buildParams(t,e))&&(fc.notice(e+" "+t.system),"nicetest"===t.system&&fc.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new Sc(this._plugin.getHost(),e,t).on(Sc.Event.SUCCESS,this._receiveData.bind(this)).on(Sc.Event.ERROR,this._failedData.bind(this)).send())},setData:function(e){try{var t=JSON.parse(e);this._plugin.options["parse.fdsResponseHost"]&&(e=e.replace(t.q.h,this._plugin.options["parse.fdsResponseHost"](t.q.h)),t=JSON.parse(e)),this.response.msg=e,this.response.host=vc.addProtocol(t.q.h,this._httpSecure),this.response.code=t.q.c,this.response.pingTime=t.q.pt||5,this.response.beatTime=t.q.i&&t.q.i.bt||30,this.response.sessionExpire=t.q.i&&t.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(e){fc.error("Fastdata response is invalid.")}},_receiveData:function(e,t){var n=e.getResponse();this.setData(n)},_failedData:function(e,t){fc.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSession:function(){return this._session},setSession:function(e){this._session=e},setHost:function(e){this.response.host=e},parse:function(e){e.host=e.host||this.response.host,e.params.system=this._plugin.getAccountCode(),e.params.sessionRoot=e.params.sessionRoot||this.getSession(),-1!==Rc.EventList.PingTime.indexOf(e.service)&&(e.params.pingTime=e.params.pingTime||this.response.pingTime),-1===Rc.EventList.Infinity.indexOf(e.service)?e.params.code=e.params.code||this.getViewCode():e.params.sessionId=e.params.sessionRoot,-1!==Rc.EventList.CreateView.indexOf(e.service)&&(this._plugin.infinity.infinityStarted||this._plugin.storage.isEnabled()&&this._plugin.storage.getLocal("infinityStarted"))&&(e.params.parentId=e.params.sessionRoot,e.params.navContext=e.params.navContext||this._plugin.getContext())}},{EventList:{CreateView:[Tc.Service.START,Tc.Service.INIT,Tc.Service.ERROR],Infinity:[Tc.Service.NAV,Tc.Service.SESSION_START,Tc.Service.SESSION_STOP,Tc.Service.EVENT,Tc.Service.BEAT],PingTime:[Tc.Service.START,Tc.Service.PING]}}),Lc=Rc,Pc=hc.extend({constructor:function(e){this._realResource=null,this._lastManifest=null,this._transportFormat=null,this.iterations=3,this._headers=e},done:function(){this.iterations=3,this.emit(Pc.Event.DONE)},parse:function(e,t){},getResource:function(){return this._realResource},getTransportFormat:function(){return this._transportFormat},getLastManifest:function(){return this._lastManifest},shouldExecute:function(e){return!0}},{Event:{DONE:"done"}}),Oc=Pc,xc={MP4:"MP4",MPEG2:"TS",CMF:"CMF"},Mc=Oc.extend({parse:function(e,t,n){n=n||"";var i=null;try{i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv|\.m4a)((\?|;)\S*|\n|\r|$))/i.exec(e.replaceAll(",URI=","\n").replaceAll('"',"").replaceAll(",","\n"))}catch(e){fc.warn("Parse HLS Regex failed",e),this.done()}if(null!==i){var r=i[1].trim(),a="",s=n.lastIndexOf("/");if(0!==r.indexOf("http")&&-1!==s){if("/"===r[0]&&"/"!==r[1]){var o=n.indexOf("/")+1;o+=n.substr(o,n.length).indexOf("/")+1,o+=n.substr(o,n.length).indexOf("/"),r=n.slice(0,o)+r}else r=n.slice(0,s)+"/"+r;a=n.slice(0,s)+"/"}if(".m3u8"===i[3]||".m3u"===i[3])if(t)this._parseWithManifest(t,a,i);else{var l=new Sc(r,null,null,{cache:!0,requestHeaders:this._headers});l.on(Sc.Event.SUCCESS,function(e){this._parseWithManifest(e,a,i)}.bind(this)),l.on(Sc.Event.ERROR,function(e){this.done()}.bind(this)),l.send()}else{switch(i[3]){case".mp4":case".m4s":case".m4a":this._transportFormat=xc.MP4;break;case".ts":this._transportFormat=xc.MPEG2;break;case".cmfv":this._transportFormat=xc.CMF}this._realResource=r,this.done()}}else this.done()},_parseWithManifest:function(e,t,n){this._lastManifest=e,this.parse(e.getResponseText(),null,t+n[2])},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("#EXTM3U"));return t}}),Nc=Mc,Bc=hc.extend({constructor:function(e){this._options=vc.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(Bc.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestMethod:function(e){return this._options.requestMethod=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var n=JSON.stringify(this._options.requestHeaders);this._responses[n]?this._parseResponse(this._responses[n]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),n="{}"!==t,i=new Sc(e,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders,cache:!0});i.on(Sc.Event.SUCCESS,function(e){this._responses[t]=e.getResponseHeaders(),this._parseResponse(this._responses[t])}.bind(this)),i.on(Sc.Event.ERROR,function(t){n?(this._options.requestHeaders={},this._requestResponse(e)):this.done()}.bind(this)),i.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){var n=t.headerName?t.headerName.toLowerCase():"";n&&e.split("\n").forEach(function(e){var i=e.indexOf(":");-1!==i&&(e.slice(0,i).toLowerCase()===n&&this._executeParser(t,e.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(e,t){try{var n=e.regex.exec(t.trim());if(null!==n)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case Bc.ElementType.HOST:this._cdnNodeHost=n[1];break;case Bc.ElementType.TYPE:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case Bc.ElementType.HOST_AND_TYPE:this._cdnNodeHost=n[1],this._cdnNodeTypeString=n[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case Bc.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=n[2];break;case Bc.ElementType.NAME:this._cdnName=n[1].toUpperCase()}}catch(e){fc.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}},shouldExecute:function(){return!0}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(e,t){Bc._cdnConfigs.Balancer.parsers[0].headerName=e,Bc._cdnConfigs.Balancer.parsers[1].headerName=t},create:function(e){if(Bc._cdnConfigs[e])return new Bc(Bc._cdnConfigs[e]);fc.warn("Tried to create an unexisting CdnParser named "+e)},add:function(e,t){Bc._cdnConfigs[e]=t}});Bc.add("Level3",{cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(e){if(e){if(0===e.indexOf("TCP_HIT")||0===e.indexOf("TCP_MEM_HIT")||0===e.indexOf("TCP_IMS_HIT"))return 1;if(0===e.indexOf("TCP_MISS"))return 2}return 0}}),Bc.add("Cloudfront",{cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}),Bc.add("Akamai",{cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/},{element:"host",headerName:"akamai-mon-iucid-del",regex:/(.*)/},{element:"type",headerName:"akamai-cache-status",regex:/(.+)\sfrom\schild/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(e){var t=e.toLowerCase();return-1!==t.indexOf("hit")?1:-1!==t.indexOf("miss")?2:0}}),Bc.add("Highwinds",{cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}}),Bc.add("Fastly",{cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}}),Bc.add("Telefonica",{cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(e){if(e){if(-1!==e.indexOf("p")||-1!==e.indexOf("c"))return 1;if(-1!==e.indexOf("i")||-1!==e.indexOf("m"))return 2}return 0}}),Bc.add("Amazon",{cdnName:"AMAZON",parsers:[{element:"host",headerName:"x-amz-cf-pop",regex:/(.+)/},{element:"type",headerName:"x-cache",regex:/(.+)\sfrom.+/}],parseType:function(e){return-1!==e.toLowerCase().indexOf("hit")?1:-1!==e.toLowerCase().indexOf("miss")?2:0}}),Bc.add("Edgecast",{cdnName:"EDGECAST",parsers:[{element:"host",headerName:"Server",regex:/\((.+)\/.+\)/},{element:"type",headerName:"X-Cache",regex:/(.+)/}],parseType:function(e){return"HIT"===e?1:2}}),Bc.add("Balancer",{parsers:[{element:"name",headerName:null,regex:/(.+)/},{element:"host",headerName:null,regex:/(.+)/}]}),Bc.add("NosOtt",{cdnName:"NOSOTT",parsers:[{element:"host",headerName:"X-NOS-Server",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(.*)/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}});var Uc=Bc,Fc=hc.extend({constructor:function(e){this.plugin=e,this.headerName="x-cdn"},init:function(){var e=null;this.plugin&&(e=this.plugin.getAdapter()&&this.plugin.getAdapter().getURLToParse()?this.plugin.getAdapter().getURLToParse():this.plugin.getResource()),this.plugin&&this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isStarted&&this._request(e)},done:function(e){this.emit(Fc.Events.DONE,e)},error:function(){this.emit(Fc.Events.ERROR)},_successfulRequest:function(e){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"]));var t=e.getResponseHeaders().split("\n"),n=null;for(var i in t){var r=t[i],a=r.indexOf(this.headerName);a>-1&&(n=r.substring(a+this.headerName.length+1,r.length-1).replace(" ",""))}this.done(n)},_failedRequest:function(){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"])),fc.warn("CDN switch detection request failed"),this.error()},_request:function(e){var t=new Sc(e,null,null,{method:"HEAD",cache:!0});t.on(Sc.Event.SUCCESS,this._successfulRequest.bind(this)),t.on(Sc.Event.ERROR,this._failedRequest.bind(this)),t.send()}},{Events:{DONE:"done",ERROR:"error"}}),Vc=Fc,Hc=Oc.extend({parse:function(e,t){if(t)this.parseLocation(t,e);else{var n=new Sc(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Sc.Event.SUCCESS,function(t){this.parseLocation(t,e)}.bind(this)),n.on(Sc.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},parseLocation:function(e,t){this.iterations--;var n=new RegExp(/<Location>([\s\S]+)<\/Location>/);try{this._lastManifest=e;var i=e.getResponseText(),r=n.exec(i);if(r&&r[1])var a=this._htmlDecode(r[1].replace("\n",""));a&&a!==t&&this.iterations>0?this.parse(a):this.parseFinalResource(i,t)}catch(e){fc.warn("Dash parse failed"),this.done()}},_htmlDecode:function(e){if("undefined"!=typeof document&&"function"==typeof document.createElement){var t=document.createElement("textarea");return t.innerHTML=e,t.childNodes&&t.childNodes.length?t.childNodes[0].nodeValue:e}return e},parseFinalResource:function(e,t){var n=new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/),i=new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/),r=new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/),a=null;try{a=n.exec(e)||r.exec(e)||i.exec(e),this._getManifestMetadata(e),a&&a[1]&&this._isFullUrl(a[1])?a[1].indexOf('"')>0?this._realResource=a[1].substr(0,a[1].indexOf('"')).replace("\n",""):this._realResource=a[1].replace("\n",""):this._realResource=t}catch(e){fc.warn("Dash manifest parse failed")}this.done()},_getManifestMetadata:function(e){try{var t=new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/).exec(e),n=null;switch(t[1]){case"mp4":case"m4s":n=xc.MP4;break;case"mp2t":n=xc.MPEG2;break;case"cmfv":n=xc.CMF}this._transportFormat=n}catch(e){fc.warn("Couldnt find the transport format")}},_isFullUrl:function(e){return-1!==e.indexOf("http")},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("<MPD"));return t}}),jc=Hc,Kc=Oc.extend({parse:function(e,t){if(t)this._parseWithManifest(t);else{this._realResource=e;var n=new Sc(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Sc.Event.SUCCESS,function(e){this._parseWithManifest(e)}.bind(this)),n.on(Sc.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},_parseWithManifest:function(e){this._lastManifest=e;var t=e.getResponseHeaders(),n=!1;e&&e.xhr&&e.xhr.responseURL&&e.xhr.responseURL!==this._realResource?(this._realResource=e.xhr.responseURL,this.parse(this._realResource),n=!0):t.split("\n").forEach(function(e){e.startsWith("Location:")&&(this._realResource=e.slice(10),this.parse(this._realResource),n=!0)}.bind(this)),n||this.done()}}),Gc=Cc.extend({constructor:function(e){Gc.__super__.constructor.apply(this,arguments),this._plugin=e,this._realResource=null,this._transportFormat=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._realResource},_getInitialCdnResource:function(){return this._realResource||this._initResource},getTransportFormat:function(){return this._transportFormat},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){e?this._isBusy||(this._isBusy=!0,this._initResource=e,this._parseManifestEnabled=this._plugin.isParseManifest(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),Uc.setBalancerHeaderName(this._plugin.getParseCdnNodeNameHeader(),this._plugin.getParseNodeHeader()),this._setTimeout(),this._parseManifestEnabled?this._isFinalUrl(this._initResource)?(this._realResource=this._initResource,this.done()):this.parseManifest():this._parseCDN()):this.done()},_isFinalUrl:function(e){var t=[".ts",".mp4",".m4s",".cmfv"];for(var n in e=e||"",t){var i=t[n];if(e.lastIndexOf(i)===e.length-i.length)return!0}return!1},_setTimeout:function(){var e=function(){this._isBusy&&(this.done(),fc.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this);try{this._parseTimeout=setTimeout(e,3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(e,3e3):fc.error(t)}},parseManifest:function(e,t){var n=this._plugin.options["parse.manifest.auth"],i=[new Kc(n),new jc(n),new Nc(n)];this._parseManifest(i,e,t||this._initResource)},_parseManifest:function(e,t,n,i){if(e.length>0){var r=e[0];r.shouldExecute(t)?(r.on(Oc.Event.DONE,function(){this._parseManifest(e.slice(1,e.length),r.getLastManifest(),r.getResource(),r.getTransportFormat()||i)}.bind(this)),r.parse(n,t)):this._parseManifest(e.slice(1,e.length),t,n,i)}else this._transportFormat=i,this._realResource=n,this._parseCDN()},_parseCDN:function(){if(this._plugin.isCdnSwitch())this.switchDetector=new Vc(this._plugin),this.switchDetector.on(Vc.Events.DONE,function(e){this._cdnName=e.data,this.done()}.bind(this)),this.switchDetector.on(Vc.Events.ERROR,function(){this.done()}.bind(this)),this.switchDetector.init();else if(this._cdnEnabled&&this._cdnList.length>0){var e=this._cdnList.shift();if(this.getNodeHost())return;var t=Uc.create(e);t?(t.on(Uc.Event.DONE,function(){this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),t.parse(this._getInitialCdnResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===Tc.Service.START){var t=this._plugin.requestBuilder.lastSent;t.parsedResource=e.params.parsedResource=this.getResource()||e.params.parsedResource,t.transportFormat=e.params.transportFormat=this.getTransportFormat()||e.params.transportFormat,this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost()||e.params.nodeHost,t.nodeType=e.params.nodeType=this.getNodeType()||e.params.nodeType,t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString()||e.params.nodeTypeString)}}}),Wc=Gc,Yc=Cc.extend({constructor:function(e,t){this._sendRequest=!1,this._isBusy=!1,this.plugin=e,this.session=t,this.transformName="Offline"},parse:function(e){e&&this.plugin.offlineStorage&&this.plugin.offlineStorage.addEvent(e.service,e.params)},hasToSend:function(e){return!1},getState:function(){return Cc.STATE_OFFLINE}}),zc=Yc,qc=uc.extend({exists:function(e){return qc.Dictionary.hasOwnProperty(e)},getNewName:function(e){var t=qc.Dictionary[e];return fc.warn('The option "'+e+'" is deprecated, use "'+t+'" instead'),t}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","parse.hls":"parse.manifest","parse.dash":"parse.manifest","parse.locationHeader":"parse.manifest","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.customDimension.1","ad.extraparam.2":"ad.customDimension.2","ad.extraparam.3":"ad.customDimension.3","ad.extraparam.4":"ad.customDimension.4","ad.extraparam.5":"ad.customDimension.5","ad.extraparam.6":"ad.customDimension.6","ad.extraparam.7":"ad.customDimension.7","ad.extraparam.8":"ad.customDimension.8","ad.extraparam.9":"ad.customDimension.9","ad.extraparam.10":"ad.customDimension.10"}}),$c=qc,Xc={HDS:"HDS",HLS:"HLS",MSS:"MSS",DASH:"DASH",RTMP:"RTMP",RTP:"RTP",RTSP:"RTSP",DVB:"DVB",DVBC:"DVB-C",DVBT:"DVB-T",DVBT2:"DVB-T2",MULTICAST:"MULTICAST"},Zc=uc.extend({constructor:function(e){this.enabled=!0,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.authToken=null,this.authType="Bearer",this.preventZombieViews=!0,this.offline=!1,this.referer=null,this.referral=null,this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["user.privacyProtocol"]=null,this["parse.manifest"]=!1,this["parse.manifest.auth"]={},this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNodeHeader"]="",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Amazon","Cloudfront","Level3","Fastly","Highwinds","Telefonica","Edgecast","NosOtt"],this["parse.fdsResponseHost"]=null,this["parse.cdnSwitchHeader"]=!1,this["parse.cdnTTL"]=60,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.id"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["device.EDID"]=null,this["device.isAnonymous"]=!1,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.isLive.noMonitor"]=!1,this["content.title"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.segmentDuration"]=null,this["content.bitrate"]=null,this["content.totalBytes"]=null,this["content.sendTotalBytes"]=!1,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.transportFormat"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.autodetect.language"]=!0,this["content.subtitles"]=null,this["content.autodetect.subtitles"]=!0,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.creativeId"]=null,this["ad.provider"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.duration"]=null,this["ad.expectedPattern"]=null,this["ad.givenAds"]=null,this["ad.breaksTime"]=null,this["ad.expectedBreaks"]=null,this["ad.givenBreaks"]=null,this["ad.ignore"]=!1,this["ad.blockerDetected"]=null,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["content.customDimensions"]={},this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this["errors.fatal"]=[],this["errors.nonFatal"]=[],this["errors.ignore"]=[],this.linkedViewId=null,this.waitForMetadata=!1,this.pendingMetadata=[],this.method=_c.GET,this["playhead.monitor"]=!0,this["readyState.monitor"]=!0,this.setOptions(e)},setOptions:function(e,t){var n=!1;if(void 0===t){t=this,n=!0;var i=new $c}if(void 0!==e)for(var r in e){var a=!1,s=null;n&&(this.hasOwnProperty(r)||(i.exists(r)?(s=i.getNewName(r),a=!0):fc.warn('The option "'+r+'" does not exist, so it cannot be set'))),"object"!=typeof t[r]||null===t[r]||Array.isArray(t[r])||"parse.cdnNode.list"!==r?a?t[s]=e[r]:t[r]=e[r]:this.setOptions(e[r],t[r])}},setExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=20&&(e=e.slice(0,20));e.length<20;)e.push(null);e.forEach(function(e,t){this["content.customDimension."+(t+1).toString()]=e}.bind(this))}},setCustomDimensions:function(){Zc.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=10&&(e=e.slice(0,10));e.length<10;)e.push(null);e.forEach(function(e,t){this["ad.customDimension."+(t+1).toString()]=e}.bind(this))}},setAdCustomDimensions:function(){Zc.prototype.setAdExtraParams.apply(this,arguments)}},{StreamingProtocol:Xc,TransportFormat:xc,RequestMethod:_c}),Qc=Zc,Jc=Cc.extend({_services:[Tc.Service.INIT,Tc.Service.START,Tc.Service.OFFLINE_EVENTS],isBlocking:function(e){if(this._isBusy&&null!=e)if(-1!==this._services.indexOf(e.service))this.done();else if(e.service===Tc.Service.ERROR)return!1;return Cc.prototype.isBlocking.apply(this,arguments)}}),ed=Jc,td=uc.extend({constructor:function(e,t,n,i){this.prefix=e||"youbora",this.disableCookies=t,this.forceCookies=n,this.disabled=i},isEnabled:function(){if(this.disabled)return!1;var e=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){e=!1}return e},setLocal:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".local."+e,t)}catch(e){fc.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return n},getLocal:function(e){return this.disabled?null:this._localGetRemove("getItem","_getCookie",e)},removeLocal:function(e){return this.disabled?null:this._localGetRemove("removeItem","_removeCookie",e)},_localGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage[e](this.prefix+"."+n):this[t](this.prefix+".local."+n)}catch(e){fc.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return i},setSession:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".session."+e,t)}catch(e){fc.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return n},getSession:function(e){return this.disabled?null:this._sessionGetRemove("getItem","_getCookie",e)},removeSession:function(e){return this.disabled?null:this._sessionGetRemove("removeItem","_removeCookie",e)},_sessionGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage[e](this.prefix+"."+n):this[t](this.prefix+".session."+n)}catch(e){fc.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return i},getStorages:function(e){return this.getSession(e)||this.getLocal(e)},setStorages:function(e,t){this.setSession(e,t),this.setLocal(e,t)},removeStorages:function(e){this.removeSession(e),this.removeLocal(e)},_setCookie:function(e,t){if("undefined"!=typeof document){var n=";";"undefined"!=typeof location&&(n+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=e+"="+t+n}},_getCookie:function(e){if("undefined"!=typeof document)for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},_removeCookie:function(e){this._setCookie(e,"")}}),nd=td,id=uc.extend({constructor:function(){this.storage=new nd("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,""),this.viewList.push(e),this.storage.setLocal("views",this.viewList),this.actualView=e},addEvent:function(e,t){if("/start"===e&&this._newView(),"/init"===e)return null;if(!this.actualView)return null;var n='{"request":"'+e.slice(1)+'",';for(var i in n+='"unixtime":'+Date.now()+",",t){if(void 0===t[i])break;n+='"'+i+'":',"code"===i?n+='"CODE_PLACEHOLDER",':"sessionId"===i?n+='"SESSION_PLACEHOLDER",':"sessionRoot"===i?n+='"ROOT_PLACEHOLDER",':"string"==typeof t[i]?n+='"'+t[i]+'",':"object"==typeof t[i]?n+='"'+JSON.stringify(t[i]).replace(/"/g,'\\"')+'",':n+=t[i]+","}n=n.slice(0,-1),n+="}";var r=this.storage.getLocal(this.actualView);""!==r&&(r+=","),this.storage.setLocal(this.actualView,r+n)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(this.givenIds.indexOf(t)<0)return this.givenIds.push(t),["["+this.storage.getLocal(t)+"]",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal("views",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e="";this.storage.getLocal("views")?e=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===e?this.viewList=[]:"function"==typeof e.split&&(this.viewList=e.split(","))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(e)>=0?this._getValidId():e},sent:function(){this.givenIds=[]}}),rd=id,ad=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","segmentDuration","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","dimensions","playerStartupTime","obfuscateIp","privacyProtocol","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","transportFormat","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution","linkedViewId","edid","cdnBalancerResponseUUID","triggeredEvents"],sd=["player","playhead","adTitle","position","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","adInsertionType","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable","adNumber","adNumberInBreak","breakNumber"],od=uc.extend({constructor:function(e){this._plugin=e,this._adNumber=0,this._adNumberInBreak=0,this.lastSent={}},fetchParams:function(e,t,n){e=e||{},t=t||[];for(var i=0;i<t.length;i++){var r=t[i];if(!e[r]){var a=od.getters[r];if(this._plugin[a]){var s=this._plugin[a]();null===s||n&&this.lastSent[r]===s||(e[r]=s,this.lastSent[r]=s)}else fc.warn("Trying to call undefined getter "+r+":"+a)}}return e},getGetters:function(){return od.getters},buildBody:function(e){return this.fetchParams(null,od.bodyParams[e],!1)},buildParams:function(e,t){return e=e||{},this.fetchParams(e,od.params[t],!1),this.fetchParams(e,od.differentParams[t],!0),e},getNewAdNumber:function(){var e=this.lastSent.adNumber;return e&&this.lastSent.position===this._plugin.getAdPosition()?e+=1:e=1,this.lastSent.adNumber=e,e},getNewAdNumberInBreak:function(){return this._adNumberInBreak++,this.lastSent.adNumberInBreak=this._adNumberInBreak,this._adNumberInBreak},getNewBreakNumber:function(){var e=1;return this._adNumberInBreak=0,this.lastSent.breakNumber&&(e=this.lastSent.breakNumber+1),this.lastSent.breakNumber=e,e},getChangedEntities:function(){return this.fetchParams({},od.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/init":ad,"/start":ad,"/joinTime":["joinDuration","playhead","bitrate","triggeredEvents"],"/pause":["playhead","triggeredEvents"],"/resume":["pauseDuration","playhead","triggeredEvents"],"/seek":["seekDuration","playhead","triggeredEvents"],"/bufferUnderrun":["bufferDuration","playhead","triggeredEvents"],"/error":["player","playhead","triggeredEvents"].concat(ad),"/stop":["bitrate","totalBytes","playhead","pauseDuration","metrics","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","triggeredEvents"],"/infinity/video/event":[],"/adInit":sd,"/adStart":sd,"/adJoin":["playhead","position","adJoinDuration","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adPause":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adResume":["playhead","position","adPlayhead","adPauseDuration","adNumber","adNumberInBreak","breakNumber"],"/adBufferUnderrun":["playhead","position","adPlayhead","adBufferDuration","adNumber","adNumberInBreak","breakNumber"],"/adStop":["playhead","position","adPlayhead","adBitrate","adTotalDuration","pauseDuration","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/adClick":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adError":["playhead"].concat(sd),"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["position","givenAds","expectedAds","breakNumber","adInsertionType"],"/adBreakStop":["position","breakNumber"],"/adQuartile":["position","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics","totalBytes","segmentDuration"],"/infinity/session/start":["accountCode","username","userType","anonymousUser","route","page","referer","referral","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion","isp","connectionType","ip","obfuscateIp","privacyProtocol","dimensions","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","edid"],"/infinity/session/stop":["sessionMetrics"],"/infinity/session/nav":["route","page","scrollDepth"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",segmentDuration:"getSegmentDuration",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",totalBytes:"getTotalBytes",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",transportFormat:"getTransportFormat",obfuscateIp:"getObfuscateIp",privacyProtocol:"getPrivacyProtocol",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",dimensions:"getCustomDimensions",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",position:"getAdPosition",adNumber:"getAdNumber",adNumberInBreak:"getAdNumberInBreak",breakNumber:"getBreakNumber",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",adInsertionType:"getAdInsertionType",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",edid:"getEDID",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",page:"getPageName",playerStartupTime:"getPlayerStartupTime",pageLoadTime:"getPageLoadTime",cdnDownloadedTraffic:"getCdnTraffic",multiCdnInfo:"getMultiCdnInfo",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",cdnBalancerResponseUUID:"getBalancerResponseId",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",scrollDepth:"getScrollDepth",adsBlocked:"getIsBlocked",linkedViewId:"getLinkedViewId",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}}),ld=od,ud=Cc.extend({isBlocking:function(e){return!e.params.sessionId}}),cd=ud,dd=hc.extend({constructor:function(e){this._plugin=e,this.infinityStopped=!1,this.infinityStarted=!1},andBeyond:function(){dd.prototype.begin.apply(this,arguments)},begin:function(e,t){(t=t||!1)&&(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._plugin.restartViewTransform()),this._comm=new Dc(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new cd(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),this.fireSessionStart(e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(e){this.infinityStopped&&(this._plugin.restartViewTransform(),this._comm=new Dc(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new cd(this._plugin)),this.infinityStopped=!1),this.infinityStarted||(this._plugin.storage.setLocal("infinityStarted","true"),this.infinityStarted=!0,this.emit(dd.Event.SESSION_START,this._getParamsJson(e,null,null,!0,!0)),this._setLastActive())},fireSessionStop:function(e){this.infinityStarted&&(this.infinityStopped=!0,this.infinityStarted=!1,this._plugin.storage.removeStorages("infinityStarted"),this.emit(dd.Event.SESSION_STOP,e),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive"))},newSession:function(e,t){this.isActive()&&(this.infinityStarted?this.fireSessionStop():(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._comm&&this._comm.removeTransform(this._plugin.viewTransform),this._plugin.restartViewTransform(),this._comm&&this._comm.addTransform(this._plugin.viewTransform))),this._plugin.setOptions(e),this.begin(t)},fireNav:function(e){this.isActive()&&(this.infinityStarted=!0,this.emit(dd.Event.NAV,this._getParamsJson(e,null,null,!0)))},_sendExtraBeat:function(){if(this._plugin&&this._plugin._beat){var e=(new Date).getTime(),t=this._plugin._beat.chrono.startTime?e-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(t),this._plugin._beat.chrono.startTime=e}this._setLastActive()},fireEvent:function(e,t,n,i){if(this.infinityStarted){var r=this._getParamsJson(t,n,e);vc.assign(r.params,i||{}),this.emit(dd.Event.EVENT,r),this._setLastActive()}},register:function(e,t){this._registeredProperties={dimensions:e,values:t},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(e,t){this._registeredProperties||this.register(e,t)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(e,t,n,i,r){var a={};if(n&&(a.name=n),a.dimensions=e||{},a.values=t||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)a.dimensions[s]=this._registeredProperties.dimensions[s];for(var o in this._registeredProperties.values)a.values[o]=this._registeredProperties.values[o]}var l={params:a};return i&&(l.params.dimensions.page&&(l.params.page=l.params.dimensions.page,delete l.params.dimensions.page),l.params.dimensions.route&&(l.params.route=l.params.dimensions.route,delete l.params.dimensions.route),r||delete l.params.dimensions,delete l.params.values),l},isActive:function(){var e=this._plugin.storage.getLocal("infinityStarted");if(this.infinityStarted||e&&"false"!==e)return!0;var t=(new Date).getTime();return Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}}),hd=dd,pd=function(e){var t,n,i=(e=e||window).document,r=function(t){var n=!1;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();(n={top:Math.max(r.top,0),left:Math.max(r.left,0),bottom:Math.min(r.bottom,e.innerHeight||i.documentElement.clientHeight),right:Math.min(r.right,e.innerWidth||i.documentElement.clientWidth)}).bottom<=n.top||n.right<=n.left?n=!1:n.area=(n.bottom-n.top)*(n.right-n.left)}return n},a=function(e,t){if(t){var n=r(e);n&&s.push({url:t,area:n.area,rect:n})}},s=[],o=[],l=.1;try{var u=e.performance.timing.navigationStart;!function(){for(var t=i.getElementsByTagName("*"),n=/url\(.*(http.*)\)/gi,o=0;o<t.length;o++){var l=t[o],u=e.getComputedStyle(l);if("IMG"===l.tagName&&a(l,l.src),u["background-image"]){n.lastIndex=0;var c=n.exec(u["background-image"]);c&&c.length>1&&a(l,c[1].replace('"',""))}if("IFRAME"===l.tagName)try{var d=r(l);if(d){var h=pd(l.contentWindow);h&&s.push({tm:h,area:d.area,rect:d})}}catch(e){}}}(),function(){for(var t={},n=e.performance.getEntriesByType("resource"),i=0;i<n.length;i++)t[n[i].name]=n[i].responseEnd;for(var r=0;r<s.length;r++)"tm"in s[r]||(s[r].tm=void 0!==t[s[r].url]?t[s[r].url]:0)}(),function(){"msFirstPaint"in e.performance.timing&&(t=e.performance.timing.msFirstPaint-u);for(var n=e.performance.getEntriesByType("paint"),r=0;r<n.length;r++)"first-paint"===n[r].name&&(t=n[r].startTime);if(void 0===t||t<0||t>12e4){t=e.performance.timing.responseStart-u;for(var a={},s=i.getElementsByTagName("head")[0].children,o=0;o<s.length;o++){var l=s[o];"SCRIPT"===l.tagName&&l.src&&!l.async&&(a[l.src]=!0),"LINK"===l.tagName&&"stylesheet"===l.rel&&l.href&&(a[l.href]=!0)}for(var c=e.performance.getEntriesByType("resource"),d=!1,h=0;h<c.length;h++)if(d||!a[c[h].name]||"script"!==c[h].initiatorType&&"link"!==c[h].initiatorType)d=!0;else{var p=c[h].responseEnd;(void 0===t||p>t)&&(t=p)}}t=Math.max(t,0)}(),function(){for(var n={0:0},r=0,a=0;a<s.length;a++){var u=t;"tm"in s[a]&&s[a].tm>t&&(u=s[a].tm),void 0===n[u]&&(n[u]=0),n[u]+=s[a].area,r+=s[a].area}var c=Math.max(i.documentElement.clientWidth,e.innerWidth||0)*Math.max(i.documentElement.clientHeight,e.innerHeight||0);if(c>0&&(c=Math.max(c-r,0)*l,void 0===n[t]&&(n[t]=0),n[t]+=c,r+=c),r){for(var d in n)n.hasOwnProperty(d)&&o.push({tm:d,area:n[d]});o.sort((function(e,t){return e.tm-t.tm}));for(var h=0,p=0;p<o.length;p++)h+=o[p].area,o[p].progress=h/r}}(),function(){if(o.length){n=0;for(var e=0,i=0,r=0;r<o.length;r++){var a=o[r].tm-e;a>0&&i<1&&(n+=(1-i)*a),e=o[r].tm,i=o[r].progress}}else n=t}()}catch(e){}return n},fd=pd,gd=uc.extend({constructor:function(e){if(this.infinity=e.infinity,this.timeObject=null,this.playerSetup=null,this.perfObject=null,this.myTimesObject={},"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("load",this._windowLoaded.bind(this)),window.performance&&window.performance.timing)){try{"function"==typeof window.performance.getEntriesByType&&(this.perfObject=window.performance)}catch(e){}this.timeObject=window.performance.timing}try{if("function"==typeof PerformanceObserver){var t=new PerformanceObserver(function(e,t){var n=e.getEntries();this.myTimesObject.largestContentfulPaint=n[n.length-1].renderTime}.bind(this));PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>-1&&t.observe({entryTypes:["largest-contentful-paint"]})}}catch(e){}},_windowLoaded:function(){this.myTimesObject.onLoad=(new Date).getTime(),this._getEnoughFPS(),setTimeout(this._fireLoadTimesEvent.bind(this),1e3)},_fireLoadTimesEvent:function(){this._getLastMetrics(),this.infinity.fireEvent("loadTimes",{},this._getAllValues())},_getAllValues:function(){var e={PageLoadTime:this.getPageLoadTime(),DNSTime:this.getDnsTime(),TCPTime:this.getTcpTime(),HandshakeTime:this.getHandshakeTime(),DomReadyTime:this.getDomReadyTime(),BackendTime:this.getBackendTime(),FrontendTime:this.getFrontendTime(),VisualReady:this.getTimeToVisuallyReady(),TimeToInteractive:this.getTimeToInteractive(),JsTime:this.getJSTime(),CssTime:this.getCSSTime(),ImageTime:this.getImageTime(),FontTime:this.getFontTime(),AvgReqLatency:this.getAvgReqLatency(),MaxReqLatency:this.getMaxReqLatency(),FirstPaint:this.getFirstPaint(),FirstContentfulPaint:this.getFirstContentfulPaint(),LargestContentfulPaint:this.getLargestContentfulPaint(),SpeedIndex:this.getSpeedIndex()};for(var t in e)null===e[t]||void 0===e[t]||e[t]<0?delete e[t]:e[t]=Math.round(e[t]);return e},getPageLoadTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.loadEventEnd-this.timeObject.navigationStart),e},getPlayerStartupTime:function(){var e=null;return this.timeObject&&this.playerSetup&&(e=this.playerSetup-this.timeObject.navigationStart),e},getDnsTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domainLookupEnd-this.timeObject.domainLookupStart),e},getTcpTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.connectEnd-this.timeObject.connectStart),e},getHandshakeTime:function(){var e=null;return this.timeObject&&this.timeObject.secureConnectionStart&&(e=this.timeObject.connectEnd-this.timeObject.secureConnectionStart),e},getDomReadyTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domComplete-this.timeObject.navigationStart),e},getBackendTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.responseStart-this.timeObject.navigationStart),e},getFrontendTime:function(){var e=null;return this.timeObject&&(e=this.myTimesObject.onLoad-this.timeObject.responseStart),e},getTimeToVisuallyReady:function(){var e=this.myTimesObject.firstPaint||0;return this.timeObject?Math.max(e,this.timeObject.domContentLoadedEventEnd-this.timeObject.navigationStart||0):e||null},getTimeToInteractive:function(){if(this.myTimesObject.fps&&this.getTimeToVisuallyReady())return Math.max(this.myTimesObject.fps,this.getTimeToVisuallyReady());setTimeout(function(){this.getTimeToInteractive()}.bind(this),500)},getJSTime:function(){return this._getXTime("script")},getCSSTime:function(){return this._getXTime("css")},getImageTime:function(){return this._getXTime("img")},getFontTime:function(){return this._getXTime("css",[".woff",".otf",".ttf"])},getAvgReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=0,t=0,n=this.perfObject.getEntriesByType("resource");for(var i in n)n[i].requestStart&&n[i].responseStart&&(t+=n[i].responseStart-n[i].requestStart),e++;return t/e}}catch(e){}return null},getFirstPaint:function(){return this.myTimesObject?this.myTimesObject.firstPaint:null},getFirstContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.firstContentfulPaint:null},getLargestContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.largestContentfulPaint:null},getMaxReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=this.perfObject.getEntriesByType("resource"),t=0;for(var n in e)e[n].requestStart&&e[n].responseStart&&(t=Math.max(t,e[n].responseStart-e[n].requestStart));return t}}catch(e){}return null},getSpeedIndex:function(){var e=null;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.getEntriesByType)try{e=fd()}catch(e){}return e},_getXTime:function(e,t){var n=0;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var i=this.perfObject.getEntriesByType("resource");for(var r in i)if(i[r].initiatorType===e)if(t){var a=!1;for(var s in t)i[r].name.indexOf(t[s]>0)&&(a=!0);a&&(n+=i[r].duration)}else n+=i[r].duration}}catch(e){}return Math.round(n)||null},_getLastMetrics:function(){var e=null,t=null;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var n=this.perfObject.getEntriesByType("paint");for(var i in n)"first-paint"===n[i].name?e=n[i].startTime:"first-contentful-paint"===n[i].name&&(t=n[i].startTime)}}catch(e){}!e&&this.timeObject&&(e=this.timeObject.msFirstPaint-this.timeObject.navigationStart),this.myTimesObject.firstPaint=e,this.myTimesObject.firstContentfulPaint=t,this.getTimeToInteractive()},_getEnoughFPS:function(){if(!this.timeObject||"undefined"==typeof window)return!0;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){};this.preFPS=(new Date).getTime(),e(function(){var e=(new Date).getTime();e<this.preFPS+50?this.myTimesObject.fps=e-this.timeObject.navigationStart:setTimeout(function(){return this._getEnoughFPS()}.bind(this),50)}.bind(this))},setPlayerSetupTime:function(){this.playerSetup=this.playerSetup||(new Date).getTime()}}),vd=gd,md=uc.extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(e){if("undefined"!=typeof document){var t=this._getSettings();"hidden"===document.visibilityState?this._toBackground(t):"visible"===document.visibilityState&&this._toForeground(t)}},_toBackground:function(e){if(this.isInBackground=!0,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.stopChronoView(),"string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(this.plugin.infinity.infinityStarted){this.lastBeatTime=(new Date).getTime();var t=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(t),this.plugin._beat.stop()}}},_toForeground:function(e){if(this.isInBackground=!1,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.startChronoView(),"string"==typeof e&&e&&this.plugin.infinity.infinityStarted){var t=(new Date).getTime();t-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(t-this.lastBeatTime),this.plugin._beat.start()):this.plugin.infinity.newSession()}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this._fireX("firePause")},_fireStop:function(){this._fireX("fireStop"),this.plugin.fireStop()},_fireX:function(e){this.adsAdapter=this.plugin.getAdsAdapter(),this.adsAdapter&&this.adsAdapter[e](),this.contentAdapter=this.plugin.getAdapter(),this.contentAdapter&&this.contentAdapter[e]()},canBlockStartCalls:function(){return this.isInBackground&&!0===this.plugin.options["background.enabled"]&&this._getSettings()}}),yd=md,bd=uc.extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}}),Ed=uc.extend({constructor:function(e){this.pluginref=e,this.listenerReference=this._changeListener.bind(this),this.loadReference=this._loadListener.bind(this),this.isEnabled=!1,this.pageHeight=0,this.maxHeight=0,this.startDetection()},startDetection:function(){this.isEnabled||"undefined"==typeof window||"function"!=typeof window.addEventListener||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),window.addEventListener("load",this.loadReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.removeEventListener&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),window.removeEventListener("load",this.loadReference),this.isEnabled=!1)},getScrollDepth:function(){var e=null;return this.maxHeight&&this.pageHeight&&(e=Math.min(Math.trunc(this.maxHeight/this.pageHeight*100),100)),e},_loadListener:function(){if("undefined"!=typeof document){var e=document.documentElement;e&&(this.pageHeight=Math.round(e.scrollHeight,e.clientHeight,e.offsetHeight),this.maxHeight=window.innerHeight,this._updateCompletionRate())}},_changeListener:function(){if(this.pageHeight){var e=this.maxHeight;this.maxHeight=Math.max(this.maxHeight,window.pageYOffset+window.innerHeight),e!==this.maxHeight&&this._updateCompletionRate()}var t=this.pluginref.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())},_updateCompletionRate:function(){setTimeout(function(){this.pluginref.storage.setSession("pageScrollDepth",this.getScrollDepth())}.bind(this),3e3)}}),Ad=Ed,_d=uc.extend({constructor:function(e){this.plugin=e},getAllData:function(){var e=this.getNonRandomData();return e.timestamp=this.getTimestamp(),e},getNonRandomData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._getNavigatorValue("userAgent")},getVirtualCores:function(){return this._getNavigatorValue("hardwareConcurrency")},getLanguage:function(){return this._getNavigatorValue("language")},getAvailableLanguages:function(){return this._getNavigatorValue("languages")},getResolution:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.width.toString()+navigator.screen.height.toString())}catch(e){}return e},getColorDepth:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.colorDepth)}catch(e){}return e},getMemory:function(){return this._getNavigatorValue("deviceMemory")},getTouchscreen:function(){return this._getNavigatorValue("maxTouchPoints")||!1},getLocalStorage:function(){var e=!1;try{e="undefined"!=typeof localStorage}catch(e){}return e},getSessionStorage:function(){var e=!1;try{e="undefined"!=typeof sessionStorage}catch(e){}return e},getCookiesAvailable:function(){return this._getNavigatorValue("cookieEnabled")||!1},getHasFlash:function(){var e=!1;try{var t=this._getNavigatorValue("plugins");e=t&&"object"==typeof t["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}return e},getPluginList:function(){var e=null;try{var t=this._getNavigatorValue("plugins");if(t&&0!==t.length){for(var n="",i=0;i<navigator.plugins.length;i++)n+=navigator.plugins[i].description+" "+navigator.plugins[i].filename+" "+navigator.plugins[i].name+" ";e=n}}catch(e){}return e},getTimeZone:function(){var e=null;try{e=(new Date).getTimezoneOffset().toString()}catch(e){}return e},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator},_getNavigatorValue:function(e){var t=null;try{this._navigatorCheck()&&(t=navigator[e])}catch(e){}return t}}),Td=_d,kd=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,r,a,s;return r=2147483648&e,a=2147483648&t,s=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^s^r^a:n|i?1073741824&s?3221225472^s^r^a:1073741824^s^r^a:s^r^a}function i(e,i,r,a,s,o,l){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,r,a),s),l)),n(t(e,o),i)}function r(e,i,r,a,s,o,l){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,r,a),s),l)),n(t(e,o),i)}function a(e,i,r,a,s,o,l){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,r,a),s),l)),n(t(e,o),i)}function s(e,i,r,a,s,o,l){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,r,a),s),l)),n(t(e,o),i)}function o(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var l,u,c,d,h,p,f,g,v,m=Array();for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e),m=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),a=Array(r-1),s=0,o=0;o<n;)s=o%4*8,a[t=(o-o%4)/4]=a[t]|e.charCodeAt(o)<<s,o++;return s=o%4*8,a[t=(o-o%4)/4]=a[t]|128<<s,a[r-2]=n<<3,a[r-1]=n>>>29,a}(e),p=1732584193,f=4023233417,g=2562383102,v=271733878,l=0;l<m.length;l+=16)u=p,c=f,d=g,h=v,p=i(p,f,g,v,m[l+0],7,3614090360),v=i(v,p,f,g,m[l+1],12,3905402710),g=i(g,v,p,f,m[l+2],17,606105819),f=i(f,g,v,p,m[l+3],22,3250441966),p=i(p,f,g,v,m[l+4],7,4118548399),v=i(v,p,f,g,m[l+5],12,1200080426),g=i(g,v,p,f,m[l+6],17,2821735955),f=i(f,g,v,p,m[l+7],22,4249261313),p=i(p,f,g,v,m[l+8],7,1770035416),v=i(v,p,f,g,m[l+9],12,2336552879),g=i(g,v,p,f,m[l+10],17,4294925233),f=i(f,g,v,p,m[l+11],22,2304563134),p=i(p,f,g,v,m[l+12],7,1804603682),v=i(v,p,f,g,m[l+13],12,4254626195),g=i(g,v,p,f,m[l+14],17,2792965006),p=r(p,f=i(f,g,v,p,m[l+15],22,1236535329),g,v,m[l+1],5,4129170786),v=r(v,p,f,g,m[l+6],9,3225465664),g=r(g,v,p,f,m[l+11],14,643717713),f=r(f,g,v,p,m[l+0],20,3921069994),p=r(p,f,g,v,m[l+5],5,3593408605),v=r(v,p,f,g,m[l+10],9,38016083),g=r(g,v,p,f,m[l+15],14,3634488961),f=r(f,g,v,p,m[l+4],20,3889429448),p=r(p,f,g,v,m[l+9],5,568446438),v=r(v,p,f,g,m[l+14],9,3275163606),g=r(g,v,p,f,m[l+3],14,4107603335),f=r(f,g,v,p,m[l+8],20,1163531501),p=r(p,f,g,v,m[l+13],5,2850285829),v=r(v,p,f,g,m[l+2],9,4243563512),g=r(g,v,p,f,m[l+7],14,1735328473),p=a(p,f=r(f,g,v,p,m[l+12],20,2368359562),g,v,m[l+5],4,4294588738),v=a(v,p,f,g,m[l+8],11,2272392833),g=a(g,v,p,f,m[l+11],16,1839030562),f=a(f,g,v,p,m[l+14],23,4259657740),p=a(p,f,g,v,m[l+1],4,2763975236),v=a(v,p,f,g,m[l+4],11,1272893353),g=a(g,v,p,f,m[l+7],16,4139469664),f=a(f,g,v,p,m[l+10],23,3200236656),p=a(p,f,g,v,m[l+13],4,681279174),v=a(v,p,f,g,m[l+0],11,3936430074),g=a(g,v,p,f,m[l+3],16,3572445317),f=a(f,g,v,p,m[l+6],23,76029189),p=a(p,f,g,v,m[l+9],4,3654602809),v=a(v,p,f,g,m[l+12],11,3873151461),g=a(g,v,p,f,m[l+15],16,530742520),p=s(p,f=a(f,g,v,p,m[l+2],23,3299628645),g,v,m[l+0],6,4096336452),v=s(v,p,f,g,m[l+7],10,1126891415),g=s(g,v,p,f,m[l+14],15,2878612391),f=s(f,g,v,p,m[l+5],21,4237533241),p=s(p,f,g,v,m[l+12],6,1700485571),v=s(v,p,f,g,m[l+3],10,2399980690),g=s(g,v,p,f,m[l+10],15,4293915773),f=s(f,g,v,p,m[l+1],21,2240044497),p=s(p,f,g,v,m[l+8],6,1873313359),v=s(v,p,f,g,m[l+15],10,4264355552),g=s(g,v,p,f,m[l+6],15,2734768916),f=s(f,g,v,p,m[l+13],21,1309151649),p=s(p,f,g,v,m[l+4],6,4149444226),v=s(v,p,f,g,m[l+11],10,3174756917),g=s(g,v,p,f,m[l+2],15,718787259),f=s(f,g,v,p,m[l+9],21,3951481745),p=n(p,u),f=n(f,c),g=n(g,d),v=n(v,h);return(o(p)+o(f)+o(g)+o(v)).toLowerCase()},Sd=uc.extend({constructor:function(e){this.plugin=e,this.dataExtractor=new Td,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),this.plugin.storage.setLocal("youboraDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),kd(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraDeviceUUID")}}),wd=Sd,Cd=uc.extend({constructor:function(){this.reset()},reset:function(){this.join=new bc,this.seek=new bc,this.pause=new bc,this.buffer=new bc,this.total=new bc,this.viewedMax=[]}}),Id=uc.extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isVideoStateBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0}}),Dd=uc.extend({constructor:function(e,t,n){this._adapter=e,this._seekEnabled=t&Dd.Type.SEEK,this._bufferEnabled=t&Dd.Type.BUFFER,n=n||800,this._chrono=new bc,this._lastPlayhead=0,n>0&&(this._timer=new Ec(this.progress.bind(this),n))},start:function(){this.stop(),this.canBeUsed()&&this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*Dd.kBUFFER_THRESHOLD_RATIO,n=e*Dd.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),n*=this._adapter.getPlayrate());var i=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-i);r<t?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1,"playheadMonitor"):r>n?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1,"playheadMonitor"):(this._seekEnabled&&this._adapter.fireSeekEnd(null,"playheadMonitor"),this._bufferEnabled&&this._adapter.fireBufferEnd(null,"playheadMonitor")),this._lastPlayhead=i},canBeUsed:function(){var e=this._adapter.plugin;return!(!e||!e.getPlayheadMonitorEnabled()||!this._seekEnabled&&!this._bufferEnabled)&&(!e.getIsLive()||!e.options["content.isLive.noMonitor"])},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2}),Rd=Dd,Ld=uc.extend({constructor:function(e,t){this._adapter=e,this._videoElement=e.getVideoObject(),this._startedStateCheck=!1,this._intervalCheckId=null,this._intervalMilliseconds=t||300},start:function(){var e=this._adapter.plugin;e&&e.getReadyStateMonitorEnabled()&&this._videoElement&&!this._startedStateCheck&&(this._intervalCheckId=setInterval(this.checkStateProperty.bind(this),this._intervalMilliseconds),this._startedStateCheck=!0)},stop:function(){try{this._startedStateCheck&&this._intervalCheckId&&clearInterval(this._intervalCheckId),this._intervalCheckId=null,this._startedStateCheck=!1}catch(e){fc.error("Produced error stopping the network monitor")}},checkStateProperty:function(e){try{this._videoElement&&this._adapter&&this._videoElement.readyState&&(this._videoElement.readyState>3&&!this._adapter.flags.isSeeking?this._adapter.flags.isBuffering?this.fireBufferEnd({},"stateMonitor"):this._adapter.flags.isJoined||this.fireJoin({},"stateMonitor"):this._videoElement.readyState<4&&!this._adapter.flags.isBuffering&&this.fireBufferBegin({},!1,"stateMonitor",!0))}catch(e){}}}),Pd=Ld,Od={getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},getAdInsertionType:function(){return null},fireClick:function(e){"string"==typeof e&&(e={url:e}),this.emit(Ac.Event.CLICK,{params:e})},fireQuartile:function(e){this.flags.isStarted&&"number"==typeof e&&e>this.flags.lastQuartileSent&&e<4&&(this.flags.lastQuartileSent++,this.emit(Ac.Event.QUARTILE,{params:{quartile:e}}))},startChronoView:function(){if(this.getIsVisible()&&!this.plugin.backgroundDetector.isInBackground){var e=this.chronos.viewedMax;0!==e.length&&0===e[e.length-1].stopTime||(e.push(new bc),e[e.length-1].start())}},stopChronoView:function(){var e=this.chronos.viewedMax;e[0]&&e.length>0&&0===e[e.length-1].stopTime&&e[e.length-1].stop()},fireManifest:function(e,t){var n={params:e};"string"==typeof e&&(n={params:{errorType:e,errorMessage:t}}),this.emit(Ac.Event.MANIFEST,n)},fireSkip:function(e){void 0===e&&(e={}),e.skipped=!0,this.fireStop(e)},fireBreakStart:function(e){this.emit(Ac.Event.PODSTART,{params:e})},fireBreakStop:function(e){this.emit(Ac.Event.PODSTOP,{params:e})}},xd={getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getCdnTraffic:function(){return null},getP2PTraffic:function(){return null},getUploadTraffic:function(){return null},getIsP2PEnabled:function(){return null},getSegmentDuration:function(){return null},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},getAudioCodec:function(){return null},getVideoCodec:function(){return null},getURLToParse:function(){return null},fireSeekBegin:function(e,t,n){if(this._discardFalseBuffers(),this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;fc.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();try{this.fireEventsStruct.seek=[],n?this.fireEventsStruct.seek.push(n):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}this.flags.isSeeking=!0,this.emit(Ac.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e,t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&this.flags.isSeeking){try{t?this.fireEventsStruct.seek.push(t):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.seek,this.cancelSeek(),this.emit(Ac.Event.SEEK_END,{params:e})}},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireEvent:function(e,t,n,i){var r=i||{};r.name=e||"",r.dimensions=t||{},r.values=n||{},this.emit(Ac.Event.VIDEO_EVENT,{params:r})}},Md=hc.extend({constructor:function(e){this.flags=new Id,this.chronos=new Cd,this.fireEventsStruct={},this.fireEventsStruct.buffer=[],this.fireEventsStruct.seek=[],this.monitor=null,this.plugin=null,this.player=null,this._isAdsAdapter=null,this.setPlayer(e),this.tag=this.player,fc.notice("Adapter "+this.getVersion()+" with Lib "+rc+" is ready.")},setPlayer:function(e){this.player&&this.unregisterListeners(),"string"==typeof e&&"undefined"!=typeof document?this.player=document.getElementById(e):this.player=e,this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.stopMonitor(),this.stopReadyStateMonitor(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(e,t,n){this.stopMonitor();var i=0;e&&(i|=Rd.Type.BUFFER),t&&(i|=Rd.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new Rd(this,i,n)},stopMonitor:function(){this.monitor&&this.monitor.stop()},monitorReadyState:function(e){this.stopReadyStateMonitor(),this.stateMonitor=new Pd(this,e)},startReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.start()},stopReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.stop()},checkReadyState:function(e,t){try{this.plugin&&this.plugin.getReadyStateMonitorEnabled()&&e&&(e>3&&!this.flags.isSeeking?this.flags.isBuffering?this.fireBufferEnd({},t+"-readyState"):this.flags.isJoined||this.fireJoin({},t+"-readyState"):e<4&&!this.flags.isBuffering&&this.fireBufferBegin({},!1,t+"-readyState",!0))}catch(e){fc.error("Can't check readyState property correctly")}},getPlayhead:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getTotalBytes:function(){return null},getTitle:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return rc+"-generic-js"},getVideoObject:function(){return null},fireInit:function(e,t){this.plugin&&this.plugin.fireInit(e,t)},fireStart:function(e,t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),t&&((e=e||{}).triggeredEvents=[t]),this.startReadyStateMonitor(),this.emit(Ac.Event.START,{params:e}))},fireJoin:function(e,t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this.plugin||!this.plugin.isInitiated||this.fireStart({},t),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Ac.Event.JOIN,{params:e}))},firePause:function(e,t){this._discardFalseBuffers(),this.flags.isBuffering&&this.fireBufferEnd(null,"firePauseCall"),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Ac.Event.PAUSE,{params:e}))},fireResume:function(e,t){this._discardFalseBuffers(),this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Ac.Event.RESUME,{params:e}))},fireBufferBegin:function(e,t,n,i){if(i=i||!1,this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;fc.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();try{this.fireEventsStruct.buffer=[],n?this.fireEventsStruct.buffer.push(n):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}this.flags.isBuffering=!0,this.flags.isVideoStateBuffering=i,this.emit(Ac.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e,t){if(this.flags.isJoined&&this.flags.isBuffering){try{t?this.fireEventsStruct.buffer.push(t):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.buffer,this.cancelBuffer(),this.emit(Ac.Event.BUFFER_END,{params:e})}},_discardFalseBuffers:function(){try{this.flags.isBuffering&&this.flags.isVideoStateBuffering&&this._getDeltaBufferTime()<=100&&this.cancelBuffer()}catch(e){}},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.flags.isVideoStateBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},_getDeltaBufferTime:function(){return this.chronos&&this.chronos.buffer?this.chronos.buffer.getDeltaTime(!1):0},fireStop:function(e,t){(this._isAds()||this.plugin&&this.plugin._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this.plugin&&this.plugin.isInitiated))&&(this.stopMonitor(),this.stopReadyStateMonitor(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Ac.Event.STOP,{params:e}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length))},setIsAds:function(e){this._isAdsAdapter=e},_isAds:function(){return this._isAdsAdapter},fireCasted:function(e,t){e||(e={}),e.casted=!0,this.fireStop(e,t)},fireError:function(e,t,n,i,r){var a=vc.buildErrorParams(e,t,n,i);a.code&&delete a.code,r&&((a=a||{}).triggeredEvents=[r]);var s=this.plugin?this.plugin.options:{};void 0!==a.errorCode&&s["errors.ignore"]&&s["errors.ignore"].indexOf(a.errorCode.toString())>-1||(this.emit(Ac.Event.ERROR,{params:a}),void 0!==a.errorCode&&s["errors.fatal"]&&s["errors.fatal"].indexOf(a.errorCode.toString())>-1&&this.fireStop({},r))},fireFatalError:function(e,t,n,i,r){var a=this.plugin?this.plugin.options:{};void 0!==e&&a["errors.ignore"]&&a["errors.ignore"].indexOf(e.toString())>-1||(this.monitor&&this.monitor.stop(),this.fireError(e,t,n,i,r),void 0!==e&&a["errors.nonFatal"]&&a["errors.nonFatal"].indexOf(e.toString())>-1||this.fireStop({},r))}},{Event:Ac.Event});vc.assign(Md.prototype,Od),vc.assign(Md.prototype,xd);var Nd=Md,Bd={setAdapter:function(e){if(this.browserLoadTimes&&this.browserLoadTimes.setPlayerSetupTime(),e.plugin)fc.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdapter(),this._adapter=e,e.plugin=this,e.setIsAds(!1),this.contentAdapterListeners={},this.contentAdapterListeners[Nd.Event.START]=this._startListener.bind(this),this.contentAdapterListeners[Nd.Event.JOIN]=this._joinListener.bind(this),this.contentAdapterListeners[Nd.Event.PAUSE]=this._pauseListener.bind(this),this.contentAdapterListeners[Nd.Event.RESUME]=this._resumeListener.bind(this),this.contentAdapterListeners[Nd.Event.SEEK_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[Nd.Event.SEEK_END]=this._seekEndListener.bind(this),this.contentAdapterListeners[Nd.Event.BUFFER_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[Nd.Event.BUFFER_END]=this._bufferEndListener.bind(this),this.contentAdapterListeners[Nd.Event.ERROR]=this._errorListener.bind(this),this.contentAdapterListeners[Nd.Event.STOP]=this._stopListener.bind(this),this.contentAdapterListeners[Nd.Event.VIDEO_EVENT]=this._videoEventListener.bind(this),this.contentAdapterListeners)this._adapter.on(t,this.contentAdapterListeners[t])},getAdapter:function(){return this._adapter},removeAdapter:function(){if(this._adapter){if(this._adapter.dispose(),this._adapter.plugin=null,this.contentAdapterListeners){for(var e in this.contentAdapterListeners)this._adapter.off(e,this.contentAdapterListeners[e]);delete this.contentAdapterListeners}this._adapter=null}},_startListener:function(e){this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{},n=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();(n=!this.options.forceInit&&(n&&this._isExtraMetadataReady()))&&!this.isInitiated?(this._send(Tc.WillSendEvent.WILL_SEND_START,Tc.Service.START,t),this._adSavedError(),this._adSavedManifest(),fc.notice(Tc.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),this._send(Tc.WillSendEvent.WILL_SEND_INIT,Tc.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),fc.notice(Tc.Service.INIT+" "+(t.title||t.mediaResource)))},_retryStart:function(e){this._isExtraMetadataReady()&&(this._send(Tc.WillSendEvent.WILL_SEND_START,Tc.Service.START,{}),this.startDelayed=!1)},_joinListener:function(e){var t={};vc.assign(t,e.data.params||{}),this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this._adapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(Tc.WillSendEvent.WILL_SEND_START,Tc.Service.START,t):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),fc.notice(Tc.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0),t=e.data.params||{},this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),this._send(Tc.WillSendEvent.WILL_SEND_JOIN,Tc.Service.JOIN,t),fc.notice(Tc.Service.JOIN+" "+t.joinDuration+"ms"))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};this._send(Tc.WillSendEvent.WILL_SEND_PAUSE,Tc.Service.PAUSE,t),fc.notice(Tc.Service.PAUSE+" at "+t.playhead+"s")},_resumeListener:function(e){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireBreakStop();var t=e.data.params||{};this._send(Tc.WillSendEvent.WILL_SEND_RESUME,Tc.Service.RESUME,t),fc.notice(Tc.Service.RESUME+" "+t.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),e.type&&e.type.includes("buffer")?fc.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.buffer):fc.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.seek)},_seekEndListener:function(e){var t=e.data.params||{};this._send(Tc.WillSendEvent.WILL_SEND_SEEK,Tc.Service.SEEK,t),fc.notice(Tc.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_bufferEndListener:function(e){var t=e.data.params||{};this._send(Tc.WillSendEvent.WILL_SEND_BUFFER,Tc.Service.BUFFER,t),fc.notice(Tc.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_errorListener:function(e){this._blockError(e.data.params)||(this.fireError(e.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(e){var t=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg)&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){this.fireStop(e.data.params||{})},_isStopReady:function(e){var t=!1;if(!this.requestBuilder.lastSent.live&&this._adsAdapter&&this._adapter&&(!this._adapter.getPlayhead()||this._adapter.getPlayhead()>=this.requestBuilder.lastSent.mediaDuration-1)){var n=0,i=this.options["ad.expectedPattern"];if(i&&i.post&&i.post[0])n=i.post[0];else if(this.requestBuilder.lastSent.breaksTime){if(this.requestBuilder.lastSent.position===Tc.AdPosition.Postroll&&(n=this.requestBuilder.lastSent.givenAds),!n&&this.requestBuilder.lastSent.breaksTime){var r=this.requestBuilder.lastSent.breaksTime;if(r.length>0&&this.requestBuilder.lastSent.mediaDuration)Math.round(r[r.length-1])+1>=this.requestBuilder.lastSent.mediaDuration&&(n=1)}}else t=!0;n<=this.playedPostrolls&&(t=!0)}else t=!0;return t},_videoEventListener:function(e){this._send(Tc.WillSendEvent.WILL_SEND_VIDEO_EVENT,Tc.Service.VIDEO_EVENT,e.data.params)},_isExtraMetadataReady:function(e){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var t=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(e){if(t.hasOwnProperty(e))return!!this[t[e]]()}.bind(this)).indexOf(!1)<0}},Ud=Bd,Fd={getHost:function(){var e=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(e=this.viewTransform.response.host),vc.addProtocol(vc.stripProtocol(e),this.options["app.https"])},getUserType:function(){return this.options["user.type"]},isParseManifest:function(){return this.options["parse.manifest"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isCdnSwitch:function(){return this.options["parse.cdnSwitchHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getParseNodeHeader:function(){return this.options["parse.cdnNodeHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]},getPrivacyProtocol:function(){var e=this.options["user.privacyProtocol"];return"string"==typeof e&&(e=e.toLowerCase()),"optin"===e||"optout"===e?e:null},getCustomDimensions:function(){var e=this.options["content.customDimensions"];return"object"==typeof e?e:null},getExtraparam1:function(){return this.options["content.customDimension.1"]},getExtraparam2:function(){return this.options["content.customDimension.2"]},getExtraparam3:function(){return this.options["content.customDimension.3"]},getExtraparam4:function(){return this.options["content.customDimension.4"]},getExtraparam5:function(){return this.options["content.customDimension.5"]},getExtraparam6:function(){return this.options["content.customDimension.6"]},getExtraparam7:function(){return this.options["content.customDimension.7"]},getExtraparam8:function(){return this.options["content.customDimension.8"]},getExtraparam9:function(){return this.options["content.customDimension.9"]},getExtraparam10:function(){return this.options["content.customDimension.10"]},getExtraparam11:function(){return this.options["content.customDimension.11"]},getExtraparam12:function(){return this.options["content.customDimension.12"]},getExtraparam13:function(){return this.options["content.customDimension.13"]},getExtraparam14:function(){return this.options["content.customDimension.14"]},getExtraparam15:function(){return this.options["content.customDimension.15"]},getExtraparam16:function(){return this.options["content.customDimension.16"]},getExtraparam17:function(){return this.options["content.customDimension.17"]},getExtraparam18:function(){return this.options["content.customDimension.18"]},getExtraparam19:function(){return this.options["content.customDimension.19"]},getExtraparam20:function(){return this.options["content.customDimension.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return{lib:rc,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var e={};return this.getDeviceCode()&&(e.deviceCode=this.getDeviceCode()),this.getModel()&&(e.model=this.getModel()),this.getBrand()&&(e.brand=this.getBrand()),this.getDeviceType()&&(e.deviceType=this.getDeviceType()),this.getDeviceName()&&(e.deviceName=this.getDeviceName()),this.getOsName()&&(e.osName=this.getOsName()),this.getOsVersion()&&(e.osVersion=this.getOsVersion()),this.getBrowserName()&&(e.browserName=this.getBrowserName()),this.getBrowserVersion()&&(e.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(e.browserType=this.getBrowserType()),this.getBrowserEngine()&&(e.browserEngine=this.getBrowserEngine()),e!=={}?e:null},getEDID:function(){var e=this.options["device.EDID"];return e?e.toString():null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]},getAnonymousUser:function(){return this.options["user.anonymousId"]},getEmail:function(){return this.options["user.email"]},getReferer:function(){var e=this.options.referer||"";return!e&&"undefined"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){var e=this.options.referral||"";return e||"undefined"==typeof document||(e=document.referrer),e},getLanguage:function(){var e=null;return"undefined"!=typeof navigator&&(e=navigator.language),e},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){var e=null;return this.offlineStorage&&(e=this.offlineStorage.getView()),e},getDeviceUUID:function(){var e=null;return this.options["device.isAnonymous"]||(e=this.options["device.id"]||this.uuidGenerator.getKey()),e},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]},getIsBlocked:function(){return this.options["ad.blockerDetected"]},isMethodPostEnabled:function(){return this.options.method&&this.options.method.toLowerCase()===_c.POST},getPlayheadMonitorEnabled:function(){return this.options["playhead.monitor"]},getReadyStateMonitorEnabled:function(){return this.options["readyState.monitor"]}},Vd={getPlayhead:function(){var e=this._safeGetterAdapter("getPlayhead");return vc.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter&&this._adapter.flags&&!this._adapter.flags.isPaused)try{e=this._adapter.getPlayrate()}catch(e){fc.warn("An error occured while calling getPlayrate",e)}return e},getFramesPerSecond:function(){return this._safeGetterAdapter("getFramesPerSecond","content.fps")},getSegmentDuration:function(){return this.hybridNetwork.getSegmentDuration()||this._safeGetterAdapter("getSegmentDuration","content.segmentDuration")},getDroppedFrames:function(){var e=this._safeGetterAdapter("getDroppedFrames");return e||(e=this.getWebkitDroppedFrames()),vc.parseNumber(e,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var e=this._safeGetterAdapter("getDuration","content.duration")||null;return vc.parseNumber(Math.round(e),null)},getBitrate:function(){var e=this._safeGetterAdapter("getBitrate","content.bitrate");return e&&-1!==e||(e=this.getWebkitBitrate()),vc.parseNumber(e,-1)},getTotalBytes:function(){return this.options["content.sendTotalBytes"]?this._safeGetterAdapter("getTotalBytes","content.totalBytes"):null},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getThroughput:function(){var e=this._safeGetterAdapter("getThroughput","content.throughput");return vc.parseNumber(e,-1)},getRendition:function(){return this._safeGetterAdapter("getRendition","content.rendition")},getTitle:function(){return this._safeGetterAdapter("getTitle","content.title")},getTitle2:function(){return this._safeGetterAdapter("getTitle2","content.program")},getIsLive:function(){var e=this.options["content.isLive"];return e||!1===e||(e=this._safeGetterAdapter("getIsLive")||!1),e},getResource:function(){return this._safeGetterAdapter("getResource","content.resource")},getParsedResource:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getResource()),(e=e||this._safeGetterAdapter("getURLToParse"))===this.getResource()?null:e},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){return this._safeGetterAdapter("getPlayerVersion")||""},getPlayerName:function(){return this._safeGetterAdapter("getPlayerName")||""},getCdn:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getCdnName()),e||this.options["content.cdn"]},getPluginVersion:function(){var e=this.getAdapterVersion();return e||(e=rc+"-adapterless-js"),e},getLibVersion:function(){return rc},getAdapterVersion:function(){return this._safeGetterAdapter("getVersion")},getCdnTraffic:function(){return this._safeGetterAdapter("getCdnTraffic")||this.hybridNetwork.getCdnTraffic()},getMultiCdnInfo:function(){return this.hybridNetwork.getMultiCdnInfo()},getBalancerResponseId:function(){return this.hybridNetwork.getBalancerResponseId()},getP2PTraffic:function(){return this._safeGetterAdapter("getP2PTraffic")||this.hybridNetwork.getP2PTraffic()},getUploadTraffic:function(){return this._safeGetterAdapter("getUploadTraffic")||this.hybridNetwork.getUploadTraffic()},getIsP2PEnabled:function(){return this._safeGetterAdapter("getIsP2PEnabled")||this.hybridNetwork.getIsP2PEnabled()},getStreamingProtocol:function(){var e=this.options["content.streamingProtocol"];if(e)for(var t in Xc)if(Xc[t]===e)return e;return null},getTransportFormat:function(){var e=this.options["content.transportFormat"];if(e||!this.options["parse.manifest"]||this.resourceTransform.isBlocking()||(e=this.resourceTransform.getTransportFormat()),e)for(var t in xc)if(xc[t]===e)return e;return null},getHouseholdId:function(){return this._safeGetterAdapter("getHouseholdId")},getLatency:function(){return this.getIsLive()?this._safeGetterAdapter("getLatency"):null},getPacketLoss:function(){return this._safeGetterAdapter("getPacketLoss")},getPacketSent:function(){return this._safeGetterAdapter("getPacketSent")},getVideoMetrics:function(){return vc.getMetricsFrom(this._adapter?this._adapter.getMetrics():null,this.options["content.metrics"])},getPlayerStartupTime:function(){return this.browserLoadTimes.getPlayerStartupTime()},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){var e=this.options["content.playbackType"];if(!e){var t=this.options["content.isLive"];"boolean"!=typeof t&&(t=this._safeGetterAdapter("getIsLive")),"boolean"==typeof t&&(e=t?"Live":"VoD")}return e},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this._safeGetterAdapter("getVideoCodec","content.encoding.videoCodec")},getAudioCodec:function(){return this._safeGetterAdapter("getAudioCodec","content.encoding.audioCodec")},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]},getLinkedViewId:function(){return this.options.linkedViewId},_safeGetterAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adapter&&"function"==typeof this._adapter[e]&&(n=this._adapter[e]())}catch(t){fc.warn("An error occured while calling "+e,t)}return n}},Hd=Vd,jd={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e){if(e.plugin)fc.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdsAdapter(),e.plugin=this,this._adsAdapter=e,e.setIsAds(!0),this.adsAdapterListeners={},this.adsAdapterListeners[Nd.Event.START]=this._adStartListener.bind(this),this.adsAdapterListeners[Nd.Event.JOIN]=this._adJoinListener.bind(this),this.adsAdapterListeners[Nd.Event.PAUSE]=this._adPauseListener.bind(this),this.adsAdapterListeners[Nd.Event.RESUME]=this._adResumeListener.bind(this),this.adsAdapterListeners[Nd.Event.BUFFER_BEGIN]=this._adBufferBeginListener.bind(this),this.adsAdapterListeners[Nd.Event.BUFFER_END]=this._adBufferEndListener.bind(this),this.adsAdapterListeners[Nd.Event.STOP]=this._adStopListener.bind(this),this.adsAdapterListeners[Nd.Event.ERROR]=this._adErrorListener.bind(this),this.adsAdapterListeners[Nd.Event.CLICK]=this._adClickListener.bind(this),this.adsAdapterListeners[Nd.Event.MANIFEST]=this._adManifestListener.bind(this),this.adsAdapterListeners[Nd.Event.PODSTART]=this._adBreakStartListener.bind(this),this.adsAdapterListeners[Nd.Event.PODSTOP]=this._adBreakStopListener.bind(this),this.adsAdapterListeners[Nd.Event.QUARTILE]=this._adQuartileListener.bind(this),this.adsAdapterListeners)this._adsAdapter.on(t,this.adsAdapterListeners[t])},removeAdsAdapter:function(){if(this._adsAdapter){if(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this.adsAdapterListeners){for(var e in this.adsAdapterListeners)this._adsAdapter.off(e,this.adsAdapterListeners[e]);delete this.adsAdapterListeners}this.resizeScrollDetector.stopDetection(),this._adsAdapter=null}},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(null,"adStartListener"),this._adapter.fireSeekEnd(null,"adStartListener"),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.chronos.viewedMax=[]);var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),(this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_START,Tc.Service.AD_START,t)):(this.adInitSent=!0,t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_INIT,Tc.Service.AD_INIT,t))},_adJoinListener:function(e){var t={};vc.assign(t,e.data.params||{}),this.adInitSent&&!this.adStartSent&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_START,Tc.Service.AD_START,t)),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),t=e.data.params||{},this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_JOIN,Tc.Service.AD_JOIN,t),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_PAUSE,Tc.Service.AD_PAUSE,t)},_adResumeListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_RESUME,Tc.Service.AD_RESUME,t)},_adBufferBeginListener:function(e){fc.notice("Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_BUFFER,Tc.Service.AD_BUFFER,t)},_adStopListener:function(e){this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime();var t=e.data.params||{};if(t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_STOP,Tc.Service.AD_STOP,t),this.requestBuilder.lastSent.position===Tc.AdPosition.Postroll){var n=this.options["ad.expectedPattern"];this.playedPostrolls++,(this.requestBuilder.lastSent.givenAds&&this.requestBuilder.lastSent.givenAds<=this.playedPostrolls||!this.requestBuilder.lastSent.givenAds&&n&&n.post&&n.post[0]&&n.post[0]<=this.playedPostrolls)&&this.fireStop()}this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(e){var t=e.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(e.data.params)?null:(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted||(t.adNumber=this.requestBuilder.getNewAdNumber(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak()),this.isBreakStarted||(t.breakNumber=this.requestBuilder.getNewBreakNumber()),void this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_ERROR,Tc.Service.AD_ERROR,t)):(this._savedAdError=e,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(e){var t=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg&&this._lastAdErrorParams.adCreativeId===this.getAdCreativeId()&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_CLICK,Tc.Service.AD_CLICK,t)},_adManifestListener:function(e){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return this._savedAdManifest=e,null;var t=e.data.params||{};this.isAdsManifestSent=!0,this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_MANIFEST,Tc.Service.AD_MANIFEST,t)}},_adBreakStartListener:function(e){if(!this.isBreakStarted){this.isBreakStarted=!0,this._adapter&&this._adapter.firePause();var t=e.data.params||{};t.breakNumber=this.requestBuilder.getNewBreakNumber(),this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_POD_START,Tc.Service.AD_POD_START,t),this.adConnected=!1}},_adBreakStopListener:function(e){if(this.isBreakStarted){this.isBreakStarted=!1;var t=e.data.params||{};t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_POD_STOP,Tc.Service.AD_POD_STOP,t),this.adConnected=!1,this._adapter&&this._adapter.fireResume()}},_adQuartileListener:function(e){var t=e.data.params||{};t.quartile&&this._sendAdEventIfAllowed(Tc.WillSendEvent.WILL_SEND_AD_QUARTILE,Tc.Service.AD_QUARTILE,t)},_sendAdEventIfAllowed:function(e,t,n){this.options["ad.ignore"]||this._send(e,t,n),fc.notice(t)}},Kd=jd,Gd={getAdPlayerVersion:function(){return this._safeGetterAdsAdapter("getPlayerVersion")||""},getAdPosition:function(){var e=Tc.AdPosition.Preroll;if(this._adsAdapter)try{var t=this._adsAdapter.getPosition();Tc.AdPosition.Preroll!==t&&Tc.AdPosition.Midroll!==t&&Tc.AdPosition.Postroll!==t||(e=t)}catch(e){fc.warn("An error occured while calling getAdPosition",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?Tc.AdPosition.Midroll:Tc.AdPosition.Preroll),e},getAdNumber:function(){return this.requestBuilder.lastSent.adNumber||0},getAdNumberInBreak:function(){return this.requestBuilder.lastSent.adNumberInBreak||0},getBreakNumber:function(){return this.requestBuilder.lastSent.breakNumber||0},getAdPlayhead:function(){var e=this._safeGetterAdsAdapter("getPlayhead");return vc.parseNumber(e,0)},getAdDuration:function(){var e=this._safeGetterAdsAdapter("getDuration","ad.duration");return vc.parseNumber(e,0)},getAdBitrate:function(){var e=this._safeGetterAdsAdapter("getBitrate");return e&&-1!==e||(e=this.getWebkitAdBitrate()),vc.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adsAdapter&&this._adsAdapter.tag&&this._adsAdapter.tag.webkitVideoDecodedByteCount){var e=this._adsAdapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adsAdapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adsAdapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getAdTitle:function(){return this._safeGetterAdsAdapter("getTitle","ad.title")},getAdResource:function(){return this._safeGetterAdsAdapter("getResource","ad.resource")},getAdCampaign:function(){return this._safeGetterAdsAdapter("getCampaign","ad.campaign")},getAdCreativeId:function(){return this._safeGetterAdsAdapter("getCreativeId","ad.creativeId")},getAdProvider:function(){return this._safeGetterAdsAdapter("getProvider","ad.provider")},getAdAdapterVersion:function(){return this._safeGetterAdsAdapter("getVersion")},getAdMetadata:function(){return this.options["ad.metadata"]},getAdInsertionType:function(){return this._safeGetterAdsAdapter("getAdInsertionType")},getGivenBreaks:function(){return this._safeGetterAdsAdapter("getGivenBreaks","ad.givenBreaks")},getExpectedBreaks:function(){var e=null,t=this.options["ad.expectedBreaks"],n=this.options["ad.expectedPattern"];if(t)e=t;else if(n)e=0,e=n.pre?n.pre.length:0,e+=n.mid?n.mid.length:0,e+=n.post?n.post.length:0;else if(this._adsAdapter)try{e=this._adsAdapter.getExpectedBreaks()}catch(e){fc.warn("An error occured while calling expectedBreaks",e)}return e},getExpectedPattern:function(){return this._safeGetterAdsAdapter("getExpectedPattern","ad.expectedPattern")},getBreaksTime:function(){return this._safeGetterAdsAdapter("getBreaksTime","ad.breaksTime")},getGivenAds:function(){return this._safeGetterAdsAdapter("getGivenAds","ad.givenAds")},getExpectedAds:function(){var e=null;try{if(this._adsAdapter){var t=this.options["ad.expectedPattern"];if(t&&this.getAdPosition()){var n=[];if(t.pre&&(n=n.concat(t.pre)),t.mid&&(n=n.concat(t.mid)),t.post&&(n=n.concat(t.post)),n.length>0){var i=this.requestBuilder.lastSent.breakNumber;i>n.length&&(i=n.length),e=n[i-1]}}else e=this._adsAdapter.getExpectedAds()}}catch(e){fc.warn("An error occured while calling expectedAds",e)}return e},getAdsExpected:function(){var e=null;try{e=this.getExpectedPattern()||this.getGivenAds()||!1}catch(e){fc.warn("An error occured while calling givenAds or expectedPattern",e)}return e},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){return this._getTimeMaxOrAcum(!0)},getAdViewability:function(){return this._getTimeMaxOrAcum()},_getTimeMaxOrAcum:function(e){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.forEach((function(n){e?t+=n.getDeltaTime(!1):t=Math.max(n.getDeltaTime(!1),t)})),t},getAudioEnabled:function(){return this._safeGetterAdsAdapter("getAudioEnabled")},getIsSkippable:function(){return this._safeGetterAdsAdapter("getIsSkippable")},getIsFullscreen:function(){return this._safeGetterAdsAdapter("getIsFullscreen")},_safeGetterAdsAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adsAdapter&&"function"==typeof this._adsAdapter[e]&&(n=this._adsAdapter[e]())}catch(t){fc.warn("An error occured while calling "+e,t)}return n}},Wd=Gd,Yd={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(t=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(t,["pauseDuration"]):this.requestBuilder.fetchParams(t,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(t=this.requestBuilder.fetchParams(t,["playhead"])),this._adapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["bufferDuration"])),this._adapter.flags.isSeeking&&(t=this.requestBuilder.fetchParams(t,["seekDuration"]))),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(t=this.requestBuilder.fetchParams(t,["adPlayhead","adViewedDuration","adViewability"]),t=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(t,["adPauseDuration"]):this.requestBuilder.fetchParams(t,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["adBufferDuration"]))),this._send(Tc.WillSendEvent.WILL_SEND_PING,Tc.Service.PING,t),this.startDelayed&&this._retryStart(),fc.verbose(Tc.Service.PING)}},zd={fireInit:function(e,t){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},t&&(e.triggeredEvents=[t]),this._send(Tc.WillSendEvent.WILL_SEND_INIT,Tc.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),fc.notice(Tc.Service.INIT+" "+(e.title||e.mediaResource)))},fireError:function(e,t,n,i){this.fireInit();var r=vc.buildErrorParams(e,t,n,i);r.code&&delete r.code,this._send(Tc.WillSendEvent.WILL_SEND_ERROR,Tc.Service.ERROR,r),this._adSavedError(),this._adSavedManifest(),fc.notice(Tc.Service.ERROR+" "+r.errorLevel+" "+r.errorCode),"fatal"===r.errorLevel&&this.fireStop()},fireFatalError:function(e,t,n,i){this.fireError(e,t,n,i),this.fireStop()},fireStop:function(e){if(this.isInitiated||this.isStarted){this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&(this._adsAdapter.fireStop(),this._adsAdapter.fireBreakStop()),e=e||{},this._send(Tc.WillSendEvent.WILL_SEND_STOP,Tc.Service.STOP,e);var t=this._adapter?this._adapter.chronos:null;t&&(t.total.stop(),t.join.reset(),t.pause.reset(),t.buffer.reset(),t.seek.reset()),fc.notice(Tc.Service.STOP+" at "+e.playhead+"s"),this._reset()}},fireOfflineEvents:function(e){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?fc.error("Adapters have to be stopped"):(this._offlineParams=e,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(Cc.Event.DONE,this.offlineReference))):fc.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){if(this.options.disableStorage)return null;var e=this._offlineParams;for(this._initComm();;){var t=this.requestBuilder.buildBody(Tc.Service.OFFLINE_EVENTS).viewJson;if(null===t[0])break;var n=this.viewTransform.nextView(),i=t[0].replace(/CODE_PLACEHOLDER/g,n.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"");this._send(Tc.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,Tc.Service.OFFLINE_EVENTS,e,i,"POST",function(e,t){this.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.offlineStorage.sent(),this._offlineParams=null}},qd=zd,$d={_initInfinity:function(){this.infinity.on(hd.Event.NAV,this._navListener.bind(this)),this.infinity.on(hd.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(hd.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(hd.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(e,t,n){var i={params:n=this.requestBuilder.buildParams(n,t),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,i),this.infinity._comm&&null!==n&&this.options.enabled){this.lastServeiceSent=t;var r=new Sc(null,t,n);this.isMethodPostEnabled()&&r.setPostRequest(!0),this.infinity._comm.sendRequest(r)}},_navListener:function(e){var t=e.data.params||{};this._sendInfinity(Tc.WillSendEvent.WILL_SEND_NAV,Tc.Service.NAV,t),this._beat.isRunning||this._beat.start(),fc.notice(Tc.Service.NAV+" "+t.route)},_sessionStartListener:function(e){var t=e.data.params||{};this._sendInfinity(Tc.WillSendEvent.WILL_SEND_SESSION_START,Tc.Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),fc.notice(Tc.Service.SESSION_START+" "+t.route)},_sessionStopListener:function(e){var t=e.data.params||{};this._sendInfinity(Tc.WillSendEvent.WILL_SEND_SESSION_STOP,Tc.Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),fc.notice(Tc.Service.SESSION_STOP+" "+t.route)},_eventListener:function(e){var t=e.data.params||{};this._sendInfinity(Tc.WillSendEvent.WILL_SEND_EVENT,Tc.Service.EVENT,t),fc.notice(Tc.Service.EVENT+" "+t.name)},_sendBeat:function(e){var t={diffTime:e};this._sendInfinity(Tc.WillSendEvent.WILL_SEND_BEAT,Tc.Service.BEAT,t),this.infinity&&this.infinity._setLastActive(),fc.verbose(Tc.Service.BEAT)},getSessionMetrics:function(){return vc.getMetricsFrom(this.options["session.metrics"])}},Xd=$d,Zd={getContext:function(){return"Default"},getScrollDepth:function(){var e=this.storage.getSession("pageScrollDepth");return this.storage.removeSession("pageScrollDepth"),e},getSession:function(){var e=this.storage.getStorages("session");if("undefined"===e&&(e=void 0),!e){var t=this.getStoredData();if(t)try{e=JSON.parse(t).q.c}catch(e){}}return e},getStorageHost:function(){var e=null,t=this.getStoredData();if(t)try{e=JSON.parse(t).q.h}catch(e){}return e?vc.addProtocol(e,this.options["app.https"]):e},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(e){this.storage.setStorages("data",e)},setSession:function(e){this.storage.setStorages("session",e)},setDataTime:function(e){this.storage.setStorages("dataTime",e)},setLastActive:function(e){this.storage.setStorages("lastactive",e)},getPageName:function(){if("undefined"!=typeof document&&document.title)return document.title},getPageLoadTime:function(){return this.browserLoadTimes.getPageLoadTime()},getIsSessionExpired:function(){var e=(new Date).getTime();return!this.getSession()||this.infinity.getFirstActive()<e-this.sessionExpire},getIsDataExpired:function(){var e=(new Date).getTime();return!this.storage.isEnabled()||!this.getStoredData()||this.infinity.getFirstActive()<e-this.sessionExpire}},Qd=Zd,Jd=hc.extend({constructor:function(e,t,n){"string"!=typeof t||n||(n=t,t=null),this.storage=new nd,this.uuidGenerator=new wd(this),this.infinity=new hd(this),this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new bc,this.options=new Qc(e),this.storage=new nd(null,this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.options.disableStorage||(this.offlineStorage=new rd),this._adapter=null,this._adsAdapter=null,this._ping=new Ec(this._sendPing.bind(this),5e3),this._beat=new Ec(this._sendBeat.bind(this),3e4),this._refreshData=new Ec(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||18e4,this.requestBuilder=new ld(this),this.resourceTransform=new Wc(this),this.lastEventTime=null,this.restartViewTransform(n),this._initInfinity(),this.hybridNetwork=new mc,this.browserLoadTimes=new vd(this),this.deviceDetector=new bd,this.backgroundDetector=new yd(this),this.resizeScrollDetector=new Ad(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),t&&this.setAdapter(t)},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted||this.restartViewTransform()},restartViewTransform:function(e){this.viewTransform=new Lc(this),this.viewTransform.on(Lc.Event.DONE,this._receiveData.bind(this)),e?this.viewTransform.setData(e):this.getIsDataExpired()||!this.getStorageHost()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(e){this._ping.interval=1e3*e.target.response.pingTime,this._beat.interval=1e3*e.target.response.beatTime,this.sessionExpire=1e3*e.target.response.sessionExpire,this.storage.setStorages("data",e.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSession(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code),this.storage.setStorages("host",this.viewTransform.response.host)):(this.viewTransform.setSession(this.getSession()),this.viewTransform.setHost(this.getStorageHost()))},_reset:function(){this._stopPings(),this.resourceTransform=new Wc(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1},_send:function(e,t,n,i,r,a,s){var o=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&o>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=t===Tc.Service.STOP?null:o,n=this.requestBuilder.buildParams(n,t),this.getIsLive()&&(n.mediaDuration=this.options["content.duration"],n.playhead=void 0);var l={params:n,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,l),this._comm&&(null!==n||void 0!==r)&&this.options.enabled){this.lastServeiceSent=t;var u={};void 0!==r&&"GET"!==r&&(u.method=r);var c=new Sc(null,t,n,u);i&&c.setBody(i),this.isMethodPostEnabled()&&c.setPostRequest(!0),this._comm.sendRequest(c,a,s)}},_initComm:function(){var e=this.getResource();this._adapter&&this._adapter.getURLToParse()&&(e=this._adapter.getURLToParse()),this.resourceTransform.init(e),this._comm=new Dc,this._comm.addTransform(new ed),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new zc(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(e){e&&(this.options.setOptions(e),"boolean"==typeof e["background.enabled"]&&(e["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},getFastDataConfig:function(){return this.viewTransform.response.msg},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:Tc.WillSendEvent});vc.assign(Jd.prototype,Ud),vc.assign(Jd.prototype,Fd),vc.assign(Jd.prototype,Hd),vc.assign(Jd.prototype,Kd),vc.assign(Jd.prototype,Wd),vc.assign(Jd.prototype,Yd),vc.assign(Jd.prototype,qd),vc.assign(Jd.prototype,Xd),vc.assign(Jd.prototype,Qd);var eh=Jd,th=nh,nh={noConflict:function(){return nh=th,this}};nh.VERSION=rc,nh.polyfills=ac,nh.polyfills(),nh.Object=uc,nh.Emitter=hc,nh.Log=fc,nh.Log.loadLevelFromUrl(),nh.Util=vc,nh.HybridNetwork=mc,nh.Chrono=bc,nh.Timer=Ec,nh.Constants=Tc,nh.Request=Sc,nh.Communication=Dc,nh.Transform=Cc,nh.ViewTransform=Lc,nh.ResourceTransform=Wc,nh.CdnParser=Uc,nh.HlsParser=Nc,nh.DashParser=jc,nh.OfflineParser=zc,nh.LocationheaderParser=Kc,nh.Options=Qc,nh.Plugin=eh,nh.Storage=nd,nh.RequestBuilder=ld,nh.PlayheadMonitor=Rd,nh.Adapter=Nd,nh.adapters={},nh.Infinity=hd,nh.BackgroundDetector=yd,nh.DeviceDetector=bd,nh.UUIDGenerator=wd,nh.registerAdapter=function(e,t){this.adapters[e]=t}.bind(nh),nh.unregisterAdapter=function(e){this.adapters[e]=null}.bind(nh);var ih=nh;var rh=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"getVersion",value:function(){return"youbora-6"}},{key:"getPlayerName",value:function(){return"clappr-web"}},{key:"getPlayerVersion",value:function(){return"7.85.0"}},{key:"getTitle",value:function(){return this.player.video.title}},{key:"getPlayhead",value:function(){return this.player.idPlayback.currentTime}},{key:"getDuration",value:function(){return this.player.video.duration/1e3}},{key:"getIsLive",value:function(){var e;return!(null===(e=this.player.video)||void 0===e||!e.isLive)}},{key:"getResource",value:function(){return this.player.resource}},{key:"getBitrate",value:function(){return this.bitrate||-1}},{key:"getRendition",value:function(){return this.rendition}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.player.listenToOnce(this.player.idPlayback,Le.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenTo(this.player.container,In.WATCH_SESSION_END,this.watchSessionEndListener.bind(this)),this.references={},this.references[Le.PLAYBACK_PAUSE]=this.pauseListener.bind(this),this.references[Le.PLAYBACK_SEEK]=this.seekStart.bind(this),this.references[Le.PLAYBACK_SEEKED]=this.seekStopListener.bind(this),this.references[Le.PLAYBACK_BUFFERING]=this.bufferingListener.bind(this),this.references[Le.PLAYBACK_BUFFERFULL]=this.bufferfullListener.bind(this),this.references[Le.PLAYBACK_ERROR]=this.errorListener.bind(this),this.references[Le.PLAYBACK_BITRATE]=this.bitrateListener.bind(this),this.references)this.player.listenTo(this.player.idPlayback,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.player.stopListening(this.player.container,In.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,Le.PLAYBACK_PLAY),this.player.stopListening(this.player.idPlayback,In.WM_PLAY_REQUESTED),this.references)this.player.stopListening(this.player.idPlayback,e),delete this.references[e]}},{key:"onReplayRequested",value:function(){this.fireInit(void 0,In.WM_PLAY_REQUESTED)}},{key:"onFirstPlayListener",value:function(){this.fireStart(void 0,Le.PLAYBACK_PLAY),this.fireJoin(void 0,Le.PLAYBACK_PLAY),this.player.listenTo(this.player.idPlayback,Le.PLAYBACK_PLAY,this.playListener.bind(this))}},{key:"playListener",value:function(){this.fireResume(void 0,Le.PLAYBACK_PLAY)}},{key:"pauseListener",value:function(){this.firePause(void 0,Le.PLAYBACK_PAUSE)}},{key:"watchSessionEndListener",value:function(){this.fireStop(void 0,In.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,Le.PLAYBACK_PLAY),this.player.listenToOnce(this.player.idPlayback,Le.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenToOnce(this.player.idPlayback,In.WM_PLAY_REQUESTED,this.onReplayRequested.bind(this))}},{key:"seekStart",value:function(){this.fireSeekBegin(void 0,!1,Le.PLAYBACK_SEEK)}},{key:"seekStopListener",value:function(){this.fireSeekEnd(void 0,Le.PLAYBACK_SEEKED)}},{key:"bufferingListener",value:function(){this.fireBufferBegin(void 0,!1,Le.PLAYBACK_BUFFERING)}},{key:"bufferfullListener",value:function(){this.fireBufferEnd(void 0,Le.PLAYBACK_BUFFERFULL)}},{key:"errorListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError(null==e?void 0:e.code,null==e?void 0:e.description)}},{key:"bitrateListener",value:function(e){this.bitrate=e.bitrate,e.bandwidth&&e.width&&e.height&&(this.rendition=ih.Util.buildRenditionString(e.width,e.height,e.bandwidth))}}]),n}(ih.Adapter),ah=1,sh=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).requestState=ah,i}return o(n,[{key:"getTitle",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getTitle()}},{key:"getAdInsertionType",value:function(){var e,t,n=ih.Constants.AdInsertionType,i=n.ServerSide,r=n.ClientSide;return null!==(e=this.ad)&&void 0!==e&&null!==(t=e.isServerSide)&&void 0!==t&&t.call(e)?i:r}},{key:"getPosition",value:function(){var e,t,n=null===(e=this.ad)||void 0===e||null===(t=e.getAdPodInfo())||void 0===t?void 0:t.getPodIndex();return this.ad&&0!==n?-1===n?"post":"mid":"pre"}},{key:"getIsSkippable",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.isSkippable()}},{key:"getResource",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getMediaUrl()}},{key:"getDuration",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getDuration()}},{key:"getPlayhead",value:function(){var e;return(null===(e=this.adPlayback)||void 0===e?void 0:e.getCurrentTime())||0}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.references={},this.references[In.DID_START_ADS_MANAGER]=this.onDidStartAdsManager.bind(this),this.references[In.DID_SET_AD_PLAYBACK]=this.onDidSetAdPlayback.bind(this),this.references[In.DFP_AD_METADATA]=this.onAdMetadata.bind(this),this.references[In.DFP_AD_LOADED]=this.onAdLoaded.bind(this),this.references[In.DFP_CONTENT_PAUSE]=this.onContentPause.bind(this),this.references[In.DFP_AD_STARTED]=this.onAdStarted.bind(this),this.references[In.DFP_AD_ERROR]=this.onAdError.bind(this),this.references[In.DFP_AD_PAUSE]=this.onAdPause.bind(this),this.references[In.DFP_AD_RESUME]=this.onAdResume.bind(this),this.references[In.DFP_AD_SKIPPED]=this.onAdSkipped.bind(this),this.references[In.DFP_AD_CLICKED]=this.onAdClicked.bind(this),this.references[In.DFP_AD_COMPLETED]=this.onAdCompleted.bind(this),this.references[In.DFP_CONTENT_RESUME]=this.onContentResume.bind(this),this.references)this.player.listenTo(this.player.container,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.references)this.player.stopListening(this.player.container,e),delete this.references[e]}},{key:"onDidStartAdsManager",value:function(){this.fireStart()}},{key:"onDidSetAdPlayback",value:function(e){this.adPlayback=e}},{key:"onAdMetadata",value:function(){this.fireManifest()}},{key:"onAdLoaded",value:function(e){this.ad=e}},{key:"onContentPause",value:function(){this.fireStart(),this.fireBreakStart()}},{key:"onAdStarted",value:function(){this.fireStart(),this.fireJoin()}},{key:"onAdPause",value:function(){this.firePause()}},{key:"onAdResume",value:function(){this.fireResume()}},{key:"onAdSkipped",value:function(){this.fireSkip()}},{key:"onAdClicked",value:function(){this.fireClick()}},{key:"onAdCompleted",value:function(){this.fireStop()}},{key:"onContentResume",value:function(){this.fireBreakStop()}},{key:"onAdError",value:function(){var e,t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError((null==r?void 0:r.type)||(null==r?void 0:r.code)||(null==r||null===(e=r.ad)||void 0===e||null===(t=e.error)||void 0===t?void 0:t.code),(null==r?void 0:r.message)||(null==r?void 0:r.description)||(null==r||null===(n=r.ad)||void 0===n||null===(i=n.error)||void 0===i?void 0:i.description)),this._isVastEmpty(r)&&(this.fireBreakStop(),this.fireResume())}},{key:"_isVastEmpty",value:function(e){var t,n,i=1009===(null==e||null===(t=e.message)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorCode),r="pre"===this.getPosition();return i&&r}}]),n}(ih.Adapter),oh=we.getInstance(),lh=function(){function e(){a(this,e)}return o(e,[{key:"Keys",get:function(){return oh.warn("Device","Keys","not implemented on this device")}},{key:"defaultOptions",get:function(){return{}}},{key:"UUID",value:function(){return oh.info("Device","UUID","not implemented on this device")}},{key:"test",value:function(){return oh.warn("Device","test","not implemented on this device, using default"),!0}},{key:"osName",value:function(){oh.info("Device","osName","not implemented on this device")}},{key:"deviceYear",value:function(){oh.info("Device","deviceYear","not implemented on this device")}},{key:"deviceBrand",value:function(){oh.info("Device","deviceBrand","not implemented on this device")}},{key:"deviceModel",value:function(){oh.info("Device","deviceModel","not implemented on this device")}},{key:"deviceVersion",value:function(){oh.info("Device","deviceVersion","not implemented on this device")}},{key:"deviceType",value:function(){oh.info("Device","deviceType","not implemented on this device")}},{key:"sdkVersion",value:function(){oh.info("Device","sdkVersion","not implemented on this device")}},{key:"playerType",value:function(){oh.warn("Device","playerType","not implemented on this device")}},{key:"supportsHTTPSStreams",value:function(){return oh.info("Device","supportsHTTPSStreams","not implemented on this device, using default"),!0}},{key:"supportsHTTPSLicenseServers",value:function(){return oh.info("Device","supportsHTTPSLicenseServers","not implemented on this device, using default"),!0}},{key:"supportsUHD",value:function(){return oh.info("Device","supportsUHD","not implemented on this device, using default"),!1}},{key:"supportsHDR",value:function(){return oh.info("Device","supportsHDR","not implemented on this device, using default"),!1}},{key:"supportsPointerEvents",value:function(){return oh.info("Device","supportsPointerEvents","not implemented on this device, using default"),!1}}],[{key:"deviceTypes",get:function(){return{TV:"TV"}}},{key:"getInstance",value:function(){return void 0===this._instance&&(this._instance=new this),this._instance}},{key:"Keys",get:function(){return this.getInstance().Keys}},{key:"isDAISSBRequired",get:function(){return!1}},{key:"isDAISupported",get:function(){return!1}},{key:"defaultOptions",get:function(){return this.getInstance().defaultOptions}},{key:"UUID",value:function(){return this.getInstance().UUID()}},{key:"test",value:function(e){return this.getInstance().test(e)}},{key:"getDeviceInfo",value:function(){oh.info("Device","getDeviceInfo","not implemented on this device")}},{key:"osName",value:function(){return this.getInstance().osName()}},{key:"deviceYear",value:function(){return this.getInstance().deviceYear()}},{key:"deviceBrand",value:function(){return this.getInstance().deviceBrand()}},{key:"deviceModel",value:function(){return this.getInstance().deviceModel()}},{key:"deviceVersion",value:function(){return this.getInstance().deviceVersion()}},{key:"deviceType",value:function(){return this.getInstance().deviceType()}},{key:"sdkVersion",value:function(){return this.getInstance().sdkVersion()}},{key:"playerType",value:function(){return this.getInstance().playerType()}},{key:"supportsHTTPSStreams",value:function(){return this.getInstance().supportsHTTPSStreams()}},{key:"supportsHTTPSLicenseServers",value:function(){return this.getInstance().supportsHTTPSLicenseServers()}},{key:"supportsUHD",value:function(){return this.getInstance().supportsUHD()}},{key:"supportsHDR",value:function(){return this.getInstance().supportsHDR()}},{key:"supportsPointerEvents",value:function(){return this.getInstance().supportsPointerEvents()}}]),e}(),uh={VK_BREAK:[3],VK_BACK:[8],VK_TAB:[9],VK_CLEAR:[12],VK_ENTER:[13],VK_SHIFT:[16],VK_CTRL:[17],VK_ALT:[18],VK_PAUSE:[19],VK_CAPS_LOCK:[20],VK_ESCAPE:[27],VK_SPACE_BAR:[32],VK_LEFT:[37],VK_UP:[38],VK_RIGHT:[39],VK_DOWN:[40],VK_0:[48],VK_1:[49],VK_2:[50],VK_3:[51],VK_4:[52],VK_5:[53],VK_6:[54],VK_7:[55],VK_8:[56],VK_9:[57],VK_A:[65],VK_B:[66],VK_C:[67],VK_D:[68],VK_E:[69],VK_F:[70],VK_G:[71],VK_H:[72],VK_I:[73],VK_J:[74],VK_K:[75],VK_L:[76],VK_M:[77],VK_N:[78],VK_O:[79],VK_P:[80],VK_Q:[81],VK_R:[82],VK_S:[83],VK_T:[84],VK_U:[85],VK_V:[86],VK_W:[87],VK_X:[88],VK_Y:[89],VK_Z:[90],VK_SUBTITLE:[112],VK_PLAY_PAUSE:[402],VK_RED:[403],VK_GREEN:[404],VK_YELLOW:[405],VK_BLUE:[406],VK_STOP:[413],VK_PLAY:[415],VK_FAST_FWD:[417],VK_REWIND:[424]},ch=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"Keys",get:function(){return uh}},{key:"test",value:function(){return!0}},{key:"playerType",value:function(){return"desktop_flat"}},{key:"supportsPointerEvents",value:function(){return!0}}]),n}(lh),dh=_i.Video,hh=wn.getExperimentsList,ph=wn.API_VERSION,fh=wn.getPlatformName,gh=wn.session,vh=wn.toLowerCase,mh=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).idPlayback=i.container.playback,i.plugin=i.createPlugin(),i}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"name",get:function(){return"globo_youbora_plugin"}},{key:"accountCode",get:function(){return"prod"===(this.options.youbora?this.options.youbora.account:this.options.env.name)?"globo":"globodev"}},{key:"product",get:function(){var e=this.options.product;return void 0===e?{}:e}},{key:"smartTVOptions",get:function(){return["webOS","VIDAA","Tizen"].includes(ch.osName())?{"device.model":ch.deviceModel(),"device.brand":ch.deviceBrand(),"device.type":ch.deviceType(),"device.osName":ch.osName(),"device.osVersion":ch.sdkVersion()}:{}}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenToOnce(this.container.playback,In.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,In.WM_PLAYBACK_WILL_PLAY,this.onWillPlay),this.listenToOnce(this.container,In.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats),this.listenToOnce(this.container,Le.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.plugin.setOptions(this.createYouboraOptions())}},{key:"onPlayRequestedReady",value:function(){this.plugin.fireInit(void 0,In.WM_PLAY_REQUESTED_READY)}},{key:"onResourceReady",value:function(e){var t,n,i={"content.transactionCode":gh.getVideoSessionId(this.options.playerId),"content.cdn":(e.cdn||"").toUpperCase(),"content.resource":e.selectedResource.url,"content.customDimension.11":"live"===this.video.kind?this.video.transmission.signal:"","content.customDimension.14":(null===(t=e.selectedResource)||void 0===t?void 0:t.playbackApiVersion)||"","content.customDimension.15":this.video.selectedResource&&this.video.selectedResource.resourcePOP||"","content.customDimension.10":this.container.playback.innerPlaybackName,"content.customDimension.20":!(null===(n=this.video.selectedResource)||void 0===n||!n.dai)};this.plugin.setOptions(i)}},{key:"onResourceRequestStats",value:function(e){var t={"content.customDimension.16":e.usedFallback};this.plugin.setOptions(t)}},{key:"onDaiResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.streamId,n={"content.customDimension.17":!0,"content.customDimension.18":t};this.plugin.setOptions(n)}},{key:"onWillPlay",value:function(){var e={"content.resource":this.video.selectedResource.url};this.plugin.setOptions(e)}},{key:"getPlayerVersion",value:function(){var e="7.85.0",t=window.GloboplaySDKPlugins,n=void 0===t?{}:t;return n.Version&&(e="".concat(e,"/").concat(n.Version)),e}},{key:"createPlugin",value:function(){var e=new ih.Plugin(this.createYouboraOptions());return e.setAdapter(new rh(this)),e.setAdsAdapter(new sh(this)),e}},{key:"createYouboraOptions",value:function(){var e,t,n,r,a,s,o,l,u,c,d,h,p,f,g;return i({enabled:!0,accountCode:this.accountCode,"app.https":!this.options.httpOnly,"app.name":null===(e=this.product)||void 0===e?void 0:e.name,"app.releaseVersion":null===(t=this.product)||void 0===t?void 0:t.version,"user.name":this.options.globoId,"content.cdn":null===(n=this.video)||void 0===n?void 0:n.cdn,"content.channel":null===(r=this.video)||void 0===r?void 0:r.channelId,"content.drm":null!==(a=this.video)&&void 0!==a&&a.encrypted?null===(s=this.video)||void 0===s?void 0:s.drm:null,"content.id":null===(o=this.video)||void 0===o?void 0:o.id,"content.isLive":null===(l=this.video)||void 0===l?void 0:l.isLive,"content.program":null===(u=this.video)||void 0===u?void 0:u.programId,"content.resource":this.resource,"content.title":null===(c=this.video)||void 0===c?void 0:c.title,"content.transactionCode":gh.getVideoSessionId(this.options.playerId),"ad.campaign":this.options.adUnit||(null===(d=this.video)||void 0===d?void 0:d.adUnit)||"","content.customDimension.1":this.options.src,"content.customDimension.2":(null===(h=this.video)||void 0===h?void 0:h.programId)||"","content.customDimension.3":(null===(p=this.video)||void 0===p?void 0:p.channelId)||"","content.customDimension.4":this.getPlayerVersion(),"content.customDimension.5":ph,"content.customDimension.6":vh(null===(f=this.video)||void 0===f?void 0:f.kind)||"","content.customDimension.7":document.location.hostname,"content.customDimension.8":fh(dh.getPlayerType()),"content.customDimension.9":hh(this.options).toString(),"content.customDimension.10":this.container.playback.innerPlaybackName||this.container.playback.name,"content.customDimension.11":void 0,"content.customDimension.12":!!this.options.autoPlay,"content.customDimension.13":this.container.getPlaybackType()!==Xe.LIVE&&!!this.options.resumeAt&&this.options.resumeAt>0,"content.customDimension.14":"","content.customDimension.15":void 0,"content.customDimension.16":!1,"content.customDimension.17":(null===(g=this.video)||void 0===g||!g.isLive)&&null,"content.customDimension.18":"","content.customDimension.19":!!this.options.skipDFP,"content.customDimension.20":void 0,"background.enabled":!1,"errors.ignore":[ln.PLAYLIST_LOAD_ERROR.code]},this.smartTVOptions)}},{key:"destroy",value:function(){this.removeAdapters(),v(c(n.prototype),"destroy",this).call(this)}},{key:"removeAdapters",value:function(){this.plugin&&(this.plugin.removeAdapter(),this.plugin.removeAdsAdapter())}}]),n}(lt),yh="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==yh&&yh,bh="URLSearchParams"in yh,Eh="Symbol"in yh&&"iterator"in Symbol,Ah="FileReader"in yh&&"Blob"in yh&&function(){try{return new Blob,!0}catch(e){return!1}}(),_h="FormData"in yh,Th="ArrayBuffer"in yh;if(Th)var kh=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Sh=ArrayBuffer.isView||function(e){return e&&kh.indexOf(Object.prototype.toString.call(e))>-1};function wh(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function Ch(e){return"string"!=typeof e&&(e=String(e)),e}function Ih(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Eh&&(t[Symbol.iterator]=function(){return t}),t}function Dh(e){this.map={},e instanceof Dh?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Rh(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Lh(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Ph(e){var t=new FileReader,n=Lh(t);return t.readAsArrayBuffer(e),n}function Oh(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function xh(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Ah&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:_h&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:bh&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Th&&Ah&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Oh(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Th&&(ArrayBuffer.prototype.isPrototypeOf(e)||Sh(e))?this._bodyArrayBuffer=Oh(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):bh&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Ah&&(this.blob=function(){var e=Rh(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Rh(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Ph)}),this.text=function(){var e,t,n,i=Rh(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Lh(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_h&&(this.formData=function(){return this.text().then(Bh)}),this.json=function(){return this.text().then(JSON.parse)},this}Dh.prototype.append=function(e,t){e=wh(e),t=Ch(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Dh.prototype.delete=function(e){delete this.map[wh(e)]},Dh.prototype.get=function(e){return e=wh(e),this.has(e)?this.map[e]:null},Dh.prototype.has=function(e){return this.map.hasOwnProperty(wh(e))},Dh.prototype.set=function(e,t){this.map[wh(e)]=Ch(t)},Dh.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Dh.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Ih(e)},Dh.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Ih(e)},Dh.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Ih(e)},Eh&&(Dh.prototype[Symbol.iterator]=Dh.prototype.entries);var Mh=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Nh(e,t){if(!(this instanceof Nh))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof Nh){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Dh(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Dh(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),Mh.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Bh(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function Uh(e,t){if(!(this instanceof Uh))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Dh(t.headers),this.url=t.url||"",this._initBody(e)}Nh.prototype.clone=function(){return new Nh(this,{body:this._bodyInit})},xh.call(Nh.prototype),xh.call(Uh.prototype),Uh.prototype.clone=function(){return new Uh(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Dh(this.headers),url:this.url})},Uh.error=function(){var e=new Uh(null,{status:0,statusText:""});return e.type="error",e};var Fh=[301,302,303,307,308];Uh.redirect=function(e,t){if(-1===Fh.indexOf(t))throw new RangeError("Invalid status code");return new Uh(null,{status:t,headers:{location:e}})};var Vh=yh.DOMException;try{new Vh}catch(e){Vh=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},Vh.prototype=Object.create(Error.prototype),Vh.prototype.constructor=Vh}function Hh(e,t){return new Promise((function(n,i){var r=new Nh(e,t);if(r.signal&&r.signal.aborted)return i(new Vh("Aborted","AbortError"));var a=new XMLHttpRequest;function s(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Dh,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new Uh(r,i))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new Vh("Aborted","AbortError"))}),0)},a.open(r.method,function(e){try{return""===e&&yh.location.href?yh.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&(Ah?a.responseType="blob":Th&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Dh?r.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,Ch(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",s),a.onreadystatechange=function(){4===a.readyState&&r.signal.removeEventListener("abort",s)}),a.send(void 0===r._bodyInit?null:r._bodyInit)}))}Hh.polyfill=!0,yh.fetch||(yh.fetch=Hh,yh.Headers=Dh,yh.Request=Nh,yh.Response=Uh);var jh=window.WM&&window.WM.Settings||{},Kh=(jh.bitrateCapping&&jh.bitrateCapping||{}).poolingInterval||jh.bitrateCappingPoolingInterval||6e5,Gh=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},Wh=function(e){return e.json()},Yh=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).options.bitrateCappingDisabled&&i.disable(),i}return o(n,[{key:"name",get:function(){return"bitrate_capping"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"host",get:function(){return"".concat(this.options.env.protocol,"://wroom.video.globo.com/limits")}},{key:"isHlsjsPlayback",get:function(){return"id_playback"===this.playback.name&&"hls"===this.playback.innerPlaybackName}},{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.playback,In.WM_RESOURCE_READY,this._onResourceReady),this.listenTo(this.playback,In.WM_RESOURCE_ERROR,this._onResourceError),this.listenTo(this.playback,In.WM_RESOURCE_SELECTED,this._onResourceSelected)}},{key:"disable",value:function(){v(c(n.prototype),"disable",this).call(this),this._currentBitrate&&this._capBitrate(0),this._stopPolling()}},{key:"enable",value:function(){v(c(n.prototype),"enable",this).call(this),this._bindPlaybackEvents(),this.playback.isPlaying()&&this._startPolling()}},{key:"_bindPlaybackEvents",value:function(){this._unbindPlaybackEvents(),this.listenTo(this.playback,Le.PLAYBACK_PLAY,this._startPolling),this.listenTo(this.playback,Le.PLAYBACK_PAUSE,this._stopPolling),this.listenTo(this.playback,Le.PLAYBACK_STOP,this._stopPolling),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this._stopPolling),this.listenTo(this.playback,Le.PLAYBACK_ERROR,this._stopPolling)}},{key:"_unbindPlaybackEvents",value:function(){this.stopListening(this.playback,Le.PLAYBACK_PLAY,this._startPolling),this.stopListening(this.playback,Le.PLAYBACK_PAUSE,this._stopPolling),this.stopListening(this.playback,Le.PLAYBACK_STOP,this._stopPolling),this.stopListening(this.playback,Le.PLAYBACK_ENDED,this._stopPolling),this.stopListening(this.playback,Le.PLAYBACK_ERROR,this._stopPolling)}},{key:"_buildLimitsUrl",value:function(){var e=new URL(this.host),t=this.resource.selectedResource,n=(void 0===t?{}:t).resourcePOP;return n&&(e.search=new URLSearchParams({pop:n})),e}},{key:"_fetchLimits",value:function(){var e=this;we.info(this.name,"fetching bitrate capping"),fetch(this._buildLimitsUrl()).then(Gh).then(Wh).then((function(t){var n=t.b;return e._capBitrate(n)})).catch((function(t){return we.warn(e.name,"error fetching bitrate capping:",t)}))}},{key:"_capBitrate",value:function(e){if(this._currentBitrate!==e){e?we.warn(this.name,"capping bitrate to ".concat(e)):we.warn(this.name,"reset bitrate to unlimited");var t=this._getLevelFromBitrate(e);t>=0&&we.warn(this.name,"capping level to ".concat(t)),this._currentBitrate=e,this._capLevelIndex(t),this.container.trigger(In.WM_BITRATE_CAP,e)}else we.info(this.name,"no limit changes")}},{key:"_capLevelIndex",value:function(e){this.isHlsjsPlayback&&this._capHlsjsLevel(e)}},{key:"_capHlsjsLevel",value:function(e){this._destroyCapLevelController(),this._updateHlsjsConfig(e),this._createCapLevelController()}},{key:"_createCapLevelController",value:function(){if(!this._currentBitrate&&this.playback.options.playback.hlsjsConfig.capLevelToPlayerSize){var e=this.playback.playback._hls,t=new e.config.capLevelController(e);t.onMediaAttaching(e),t.onManifestParsed(e),this.playback.playback._hls.coreComponents.push(t)}}},{key:"_destroyCapLevelController",value:function(){var e=this;this.playback.playback._hls.coreComponents=this.playback.playback._hls.coreComponents.filter((function(t){var n=e._isHlsjsCapLevelController(t);return n&&t.destroy(),!n}))}},{key:"_updateHlsjsConfig",value:function(e){this.playback.playback._hls.autoLevelCapping=e}},{key:"_isHlsjsCapLevelController",value:function(e){return e.constructor===this.playback.playback._hls.config.capLevelController}},{key:"_getLevelFromBitrate",value:function(e){if(!e)return-1;var t,n=[];return this.isHlsjsPlayback&&(n=this.playback.playback._hls.levels),(t=n.reduce((function(t,n,i){return n.bitrate<=e?i:t}),0))>n.length&&(t=-1),we.debug(this.name,"selected level:",n[t]),t}},{key:"_onResourceSelected",value:function(e){this._stopPolling(),this.resource=e}},{key:"_onResourceError",value:function(){we.info(this.name,"resource error: disabling"),this.disable()}},{key:"_onResourceReady",value:function(e){"globo"===e.cdn?(we.info(this.name," video loaded, waiting for start"),this._bindPlaybackEvents()):(we.info(this.name,"cdn does not allow bitrate capping"),this.disable())}},{key:"_startPolling",value:function(){var e=this;this._pollTimerId||(we.info(this.name,"video playing, configuring polling"),this._pollTimerId=setInterval((function(){return e._fetchLimits()}),Kh),this._fetchLimits())}},{key:"_stopPolling",value:function(){this._pollTimerId&&(we.info(this.name,"polling canceled"),clearInterval(this._pollTimerId),delete this._pollTimerId)}}]),n}(lt),zh=(window.WM&&window.WM.Settings||{}).lockClientPoolingInterval||29e3,qh=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"lock_client"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"lockKey",get:function(){return this.playback.selectedResource.session}},{key:"endpoint",get:function(){return"".concat(this.options.env.protocol,"://watcher.playback.video.globo.com/heartbeat")}},{key:"bindEvents",value:function(){this.listenTo(this.playback,In.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(e){e.selectedResource.session&&this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,Le.PLAYBACK_PLAY,this.startPolling),this.listenTo(this.playback,Le.PLAYBACK_STOP,this.stopPolling),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this.stopPolling),this.listenTo(this.playback,Le.PLAYBACK_ERROR,this.stopPolling)}},{key:"startPolling",value:function(){var e=this;this._pollTimerId||(this._pollTimerId=setInterval((function(){return e.sendPing()}),zh),this.sendPing())}},{key:"sendPing",value:function(){var e=this,t=new Headers;t.append("Authorization","Bearer ".concat(this.lockKey));var n={method:"POST",headers:t};fetch(this.endpoint,n).then((function(t){if(403===t.status)return t.json().then((function(n){return e.onPingResponse({status:t.status,body:n})}))})).catch((function(t){return we.warn(e.name,"error",t)}))}},{key:"onPingResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.body;if(we.info(this.name,{status:t,body:n}),403===t&&(null==n?void 0:n.code)===ln.SIMULTANEOUS_ACCESS.code){var i={useCodePrefix:!1};this.playback.trigger(Le.PLAYBACK_ERROR,this.createError(ln.SIMULTANEOUS_ACCESS,i))}}},{key:"stopPolling",value:function(){this._pollTimerId&&(clearInterval(this._pollTimerId),delete this._pollTimerId)}},{key:"destroy",value:function(){this.stopPolling(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(lt),$h=wn.getCurrentTime,Xh=1,Zh=0,Qh=-1,Jh=1,ep=0,tp=-1,np=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).daiHasPlayed=!1,i}return o(n,[{key:"name",get:function(){return"simulcast-ping"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"pingInterval",get:function(){return 6e4}},{key:"isDvrInUse",get:function(){return this.container.isDvrEnabled()?this.container.isDvrInUse()?Xh:Zh:Qh}},{key:"hasDaiPlayed",get:function(){return this.daiHasPlayed?Jh:this.video.selectedResource.dai?ep:tp}},{key:"playbackHasLatencyInfo",get:function(){return void 0!==this.innerPlayback.currentProgramDateTime||void 0!==this.innerPlayback.latency}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,Le.Custom.DAI_AD_BREAK_STARTED,(function(){return e.daiHasPlayed=!0})),this.listenTo(this.playback,In.WM_VIDEO_METADATA_LOADED,this.bindPlaybackEvents)}},{key:"bindPlaybackEvents",value:function(e){e.isLive&&(this.video=e,this.listenTo(this.playback,Le.PLAYBACK_STOP,this.stopTimer),this.listenTo(this.playback,Le.PLAYBACK_ERROR,this.stopTimer),this.listenTo(this.playback,Le.PLAYBACK_ENDED,this.stopTimer),this.listenToOnce(this.playback,Le.PLAYBACK_PLAY,this.onPlay))}},{key:"onPlay",value:function(){this.startTimer(),this.heartbeatTick()}},{key:"heartbeatTick",value:function(){if(this.innerPlayback)return this.playbackHasLatencyInfo?void this.container.trigger(In.SIMULCAST_PING,{isDvrInUse:this.isDvrInUse,liveEdge:this.getLiveEdge(),hasDaiPlayed:this.hasDaiPlayed,liveEndOfPlaylist:this.getLiveEndOfPlaylist()}):this.container.trigger(In.SIMULCAST_PING,$h(this.innerPlayback))}},{key:"getLiveEdge",value:function(){if(!this.container.isDvrInUse())return Math.trunc(this.innerPlayback.currentProgramDateTime.getTime()/1e3);var e=this.innerPlayback.getProgramDateTime(),t=(new Date(e).getTime()+1e3*this.innerPlayback.getDuration())/1e3;return Math.trunc(t)}},{key:"getLiveEndOfPlaylist",value:function(){var e=(this.innerPlayback.currentProgramDateTime.getTime()+1e3*this.innerPlayback.latency)/1e3;return Math.trunc(e)}},{key:"startTimer",value:function(){this.heartbeat=setInterval(this.heartbeatTick.bind(this),this.pingInterval)}},{key:"stopTimer",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopTimer(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(lt),ip=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e))._isVideoFinished=!1,i}return o(n,[{key:"name",get:function(){return"watch_session"}},{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"dfp",get:function(){return this.options.dfp}},{key:"bindEvents",value:function(){this.listenTo(this.container,In.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,Le.CONTAINER_ENDED,this.onVideoFinished),this.listenTo(this.container,Le.CONTAINER_STOP,this.onVideoFinished)}},{key:"onAllAdsCompleted",value:function(){this.sendEvent()}},{key:"onVideoFinished",value:function(){this._isVideoFinished=!0,this.sendEvent()}},{key:"sendEvent",value:function(){var e=this;(this.dfp.isAllAdsCompleted||this.dfp.shouldSkipAd||this.dfp.error)&&this._isVideoFinished&&setTimeout((function(){e.container.trigger(In.WATCH_SESSION_END),e.onWatchSessionEnd()}))}},{key:"onWatchSessionEnd",value:function(){this._isVideoFinished=!1}}]),n}(lt),rp=ua((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var a={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:r(n(2)).default.getResource("clientInstanceUUID",(0,i.default)()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"1.10.0",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0},s={avoidCookieUsage:function(){a.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){a.USE_HTTPS=!1},useQAConfiguration:function(){a.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",a.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",a.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(a,s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_STRING_NUMERIC_STRING:"[Horizon] numericString should be string.",INVALID_EMPTY_NUMERIC_STRING:"[Horizon] numericString should be empty.",INVALID_NUMERIC_STRING:"[Horizon] Invalid number. Field with NumericString must to be number.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",INVALID_RELATION_ID:"[Horizon] Invalid relation identification.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},r={mustBeDefined:function(e){throw new Error(i.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(i,r)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return window.horizonResources=window.horizonResources||{},window.horizonResources};t.default={getContext:i,getResource:function(e,t){var n=i();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={execAsync:function(e,t){setTimeout((function(){return e(t)}),1)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,i){var r=new XMLHttpRequest;r.open(e,t,!0),r.onload=function(){return r.status<400?n(JSON.parse(r.response)):i(r.response)},r.onerror=i,r.send()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),s=u(n(1)),o=u(n(4)),l=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){return a.default.getResource("idManager",{loggedIDs:null,anonymousIDs:null,sessionIDs:null})},d=["GLBID","GST"],h={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n?h.STATE_READY:h.STATE_NOT_READY,this.url=t,this.bypass=n,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===h.STATE_READY)return e(this.getClientIDs());if(this.callbacks.onReady.length>l.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(s.default.LIMIT_EXCEEDED+" IDManager callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===h.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error(""+s.default.COMPONENT_NOT_READY);if(this.bypass)return"";var e=this.getClientIDs();return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},{key:"getClientIDs",value:function(){var e=c();return Object.assign(e.loggedIDs||{},e.anonymousIDs||{},e.sessionIDs||{})}},{key:"isReady",value:function(){return this.state===h.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=h.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=h.STATE_NOT_READY,e.load()}),l.default.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===d.indexOf(e))throw Error(s.default.INVALID_AUTH_TOKEN);var n=c();n.loggedIDs=Object.assign(n.loggedIDs||{},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"setAnonymousUser",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=c();if(null==n.anonymousIDs||t){if(!("glb_uid"in e)||!("glb_uid_public"in e))throw s.default.mustBeDefined("glb_uid and glb_uid_public");var i={glb_uid:e.glb_uid,glb_uid_public:e.glb_uid_public};n.anonymousIDs=Object.assign(n.anonymousIDs||{},i)}}},{key:"getAnonymousUser",value:function(){return c().anonymousIDs}},{key:"setSessionID",value:function(e){e.hsid&&(c().sessionIDs=Object.assign({},{hsid:e.hsid}))}},{key:"removeLoggedUser",value:function(){var e=c();d.forEach((function(t){e.loggedIDs[t]&&delete e.loggedIDs[t]}))}},{key:"load",value:function(){var e=this;if(this.state===h.STATE_NOT_READY){this.state=h.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var t=l.default.USE_HTTPS?"https://":"http://";o.default.request("GET",""+t+this.url,(function(t){e.setSessionID(t),e.setAnonymousUser(t,!1),e.state=h.STATE_READY,e.callbacks.onReady.forEach((function(t){return r.default.execAsync(t,e.getClientIDs())}))}),(function(t){e.state=h.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}(),f=function(e){var t=c();if(!t.instance){var n=e||l.default.HORIZON_TRACK_HOST+"/"+l.default.HORIZON_TRACK_IDENTIFICATION_RESOURCE,i=!1===l.default.AVOID_COOKIE_USAGE;t.instance=new p(n,i)}return t.instance};t.default={getInstance:f,getContextManager:c,setLoggedUser:function(e,t){if(!l.default.AVOID_COOKIE_USAGE)throw Error(s.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||s.default.mustBeDefined("tokenName"),t&&0!==t.length||s.default.mustBeDefined("tokenValue"),f().setLoggedUser(e,t)},removeLoggedUser:function(){if(!l.default.AVOID_COOKIE_USAGE)throw Error(s.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);f().removeLoggedUser()},setAnonymousUser:function(e){f().setAnonymousUser(e)},getAnonymousUser:function(){return f().getAnonymousUser()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IDManager=t.Settings=t.HorizonClient=void 0,n(7);var i=s(n(9)),r=s(n(0)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var o={setLoggedUser:a.default.setLoggedUser,removeLoggedUser:a.default.removeLoggedUser,setAnonymousUser:a.default.setAnonymousUser,getAnonymousUser:a.default.getAnonymousUser};t.HorizonClient=i.default,t.Settings=r.default,t.IDManager=o},function(e,t,n){n(8).polyfill()},function(e,t,n){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),s=0,o=a.length;s<o;s++){var l=a[s],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=h(n(0)),s=h(n(13)),o=h(n(1)),l=h(n(15)),u=h(n(26)),c=h(n(27)),d=h(n(5));function h(e){return e&&e.__esModule?e:{default:e}}var p={READY:"stateReady",UNLOADED:"stateNotReady",LOADING:"stateLoading"},f=["web","instant-article","app"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"web";if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=t||c.default.getTenant()||o.default.mustBeDefined("tenant"),this.deviceGroup=n||c.default.getDeviceGroup()||o.default.mustBeDefined("deviceGroup"),this.defaultContentType=r,-1===f.indexOf(h))throw Error(o.default.INVALID_ENVIRONMENT);this.environment=h,this.validator=s.default,this.clientVersion=a.default.PACKAGE_VERSION,this.state=p.UNLOADED,this.referer=document.referrer;var g=null,v=null,m=null;this.setSchemasProvider=function(e){g=e},this.getSchemasProvider=function(){if(!g){var e=u.default.getInstance();i.setSchemasProvider(e)}return g},this.setEventBus=function(e){v=e},this.getEventBus=function(){if(!v){var e=l.default.getInstance(i.tenant,i.deviceGroup,i.environment,i.getIdManager());i.setEventBus(e)}return v},this.setIdManager=function(e){m=e},this.getIdManager=function(){if(!m){var e=d.default.getInstance();i.setIdManager(e)}return m},this.isReady=function(){return!!g&&!!m&&i.validator.isReady()&&g.isReady()&&m.isReady()},window.addEventListener("beforeunload",(function(){i.unload()}))}return r(e,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(e){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer,horizonRelationId:e}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state=p.READY,e()):(this.state=p.LOADING,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=p.LOADING,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=p.LOADING,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady((function(){return e.flush()}))}},{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&"string"!=typeof n)throw new Error(o.default.INVALID_RELATION_ID+" Wrong relationId type. It should be a String: actual type is "+(void 0===n?"undefined":i(n)));[].concat(e).forEach((function(e){t.validator.validateArgs(e),t.sendWithInfo(e,t.getScopeInfo(n))}))}},{key:"sendWithInfo",value:function(e,t){var n=this;if(!this.isReady())return this.state===p.UNLOADED&&this.flush(),void this.onReady((function(){return n.sendWithInfo(e,t)}));this.validateBeforeEnqueue(e);var i=Object.assign({},t,e);i.contentType||(this.defaultContentType||o.default.mustBeDefined("contentType"),i.contentType=this.defaultContentType),this.getEventBus().enqueue(i)}}]),e}();t.default=g},function(e,t,n){var i=n(11),r=n(12);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[a+o]=s[o];return t||r(s)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(n(14)),a=o(n(1)),s=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var l={ready:[]},u=["url"],c=function(){return!!window.tv4},d=function(e){return null===e||isNaN(e)&&!isNaN(Date.parse(e))?null:a.default.INVALID_DATE},h=function(e){return"string"!=typeof e?a.default.INVALID_STRING_NUMERIC_STRING:""===e.trim()?a.default.INVALID_EMPTY_NUMERIC_STRING:Number.isFinite(Number(e))?null:a.default.INVALID_NUMERIC_STRING};t.default={validateFor:function(e,t){if(!c())throw new Error(a.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(a.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(a.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(a.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(e){var t=Object.prototype.hasOwnProperty;if(!(e&&t.call(e,"id")&&t.call(e,"version")&&t.call(e,"properties")))throw new Error(a.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(e));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==i(e.properties))throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(u.filter((function(t){return e[t]&&"string"!=typeof e[t]})).length>0)throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(e.id.length<2||e.version.length<3)throw new Error(a.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(e));var n=Object.assign({},e);delete n.id,delete n.version,delete n.properties,delete n.contentType;var r=Object.keys(n);if(r.length>0&&!r.every((function(e){return-1!==u.indexOf(e)})))throw new Error(a.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:d,tv4IsNumericString:h,isReady:c,onReady:function(e){if(c())return e();if(l.ready.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Validator callback stack.");return l.ready.unshift(e)},load:function(){if(!r.default.isDefined("tv4")){var e=(s.default.USE_HTTPS?"https://":"http://")+s.default.SCHEMA_VALIDATOR_SCRIPT_URL;(0,r.default)([e],"tv4",{async:!0,numRetries:s.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",d),tv4.addFormat("numericString",h),l.ready.forEach((function(e){return e()}))},error:function(e){throw new Error(a.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}}},function(e,t,n){var i,r,a,s;s=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function s(t,n,i,r){var a,o,l=document,u=i.async,c=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((o=l.createElement("link")).rel="stylesheet",o.href=h,(a="hideFocus"in o)&&o.relList&&(a=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(o=l.createElement("img")).src=h:((o=l.createElement("script")).src=t,o.async=void 0===u||u),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(a)try{o.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<c)return s(t,n,i,r)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,o)&&l.head.appendChild(o)}function o(e,n,i){var o,l;if(n&&n.trim&&(o=n),l=(o?i:n)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function u(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,o=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<o;r++)s(e[r],i,n)}(e,(function(e){a(l,e),t&&a({success:t,error:n},e),r(o,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return o.ready=function(e,t){return function(e,t){var r,a,s,o=[],l=(e=e.push?e:[e]).length,u=l;for(r=function(e,n){n.length&&o.push(e),--u||t(o)};l--;)a=e[l],(s=n[a])?r(a,s):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),o},o.done=function(e){r(e,[])},o.reset=function(){t={},n={},i={}},o.isDefined=function(e){return e in t},o},r=[],void 0===(a="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(16);var r=d(n(2)),a=d(n(17)),s=d(n(0)),o=d(n(1)),l=d(n(22)),u=d(n(24)),c=d(n(25));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){return r.default.getResource("bus",{})},p=function(){function e(t,n,i,r,a){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||o.default.mustBeDefined("tenant"),this.instanceID=n||o.default.mustBeDefined("instanceID"),this.deviceGroup=i||o.default.mustBeDefined("deviceGroup"),this.environment=r||o.default.mustBeDefined("environment"),this.queue=new u.default(s.default.EVENTS_BUFFER_SIZE),this.idManager=a,this.dispatchNumber=1,this.actionCounter=0,(new c.default).every(s.default.EVENTS_SENDER_INTERVAL).call((function(){d.queue=d.filterQueue();var e=d.prepareRequest();d.dispatch(e,s.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach((function(e){return d.enqueue(e)}))})).call(l.default.applyThrottlingPolicy).start()}return i(e,[{key:"setMaxQueueSize",value:function(e){this.queue=u.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-s.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter((function(t){return t.actionTs>e}))}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,s.default.EVENTS_BULK_SIZE);return this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(o.default.INVALID_REQUEST);return e.actions.length>0}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=s.default.USE_HTTPS?"https://":"http://",i=this.idManager.getAsKeyValue(),r=i?"?"+i:"",o=""+n+l.default.applyDestinationPolicy()+"/event/"+this.currentTenant+r,u=a.default.get(t);if(!this.isValidRequest(e))return!1;this.dispatchNumber+=1;var c=u(e);return navigator.sendBeacon(o,c)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(o.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,s.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),e}();t.default={getInstance:function(e,t,n,i){var r=h(),a=e+"-"+t;return r[a]||(r[a]=new p(e,s.default.HORIZON_CLIENT_UUID,t,n,i)),r[a]},reset:function(e,t){e&&0!==e.length||o.default.mustBeDefined("tenant"),t&&0!==t.length||o.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete h()[n]},getContextBus:h}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"string"==typeof e},r=function(e){return e instanceof Blob};(function(){(function(){return"navigator"in this&&"sendBeacon"in this.navigator}).call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,a="unload"===n||"beforeunload"===n,s="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.open("POST",e,!a),s.withCredentials=!0,s.setRequestHeader("Accept","*/*"),i(t)?(s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),s.responseType="text/plain"):r(t)&&t.type&&s.setRequestHeader("Content-Type",t.type);try{s.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(18)),r=s(n(21)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var o={base64:function(e){var t=new FormData;return t.append("data",i.default.encode(r.default.encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in o))throw new Error(a.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return o[e]}}},function(e,t,n){(function(e,i){var r;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(a){var s=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);s.global!==s&&s.window;var o=function(e){this.message=e};(o.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new o(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,s="",o=-1,c=e.length-a;++o<c;)t=e.charCodeAt(o)<<16,n=e.charCodeAt(++o)<<8,i=e.charCodeAt(++o),s+=u.charAt((r=t+n+i)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==a?(t=e.charCodeAt(o)<<8,n=e.charCodeAt(++o),s+=u.charAt((r=t+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(o),s+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),s},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",s=-1;++s<t;)i=u.indexOf(e.charAt(s)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(19)(e),n(20))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(e){var t,n,i,r=String.fromCharCode;function a(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function o(e,t){return r(e>>t&63|128)}function l(e){if(0==(4294967168&e))return r(e);var t="";return 0==(4294965248&e)?t=r(e>>6&31|192):0==(4294901760&e)?(s(e),t=r(e>>12&15|224),t+=o(e,6)):0==(4292870144&e)&&(t=r(e>>18&7|240),t+=o(e,12),t+=o(e,6)),t+r(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(e=255&t[i],i++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return s(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,i=-1,r="";++i<n;)r+=l(t[i]);return r},e.decode=function(e){t=a(e),n=t.length,i=0;for(var s,o=[];!1!==(s=c());)o.push(s);return function(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=r((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=r(t);return a}(o)}}(t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(23)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.default={applyThrottlingPolicy:function(e){var t=r.default.EVENTS_SENDER_MIN_INTERVAL,n=r.default.EVENTS_SENDER_MAX_INTERVAL,a=Number(i.default.get("_hzt.interval"))||r.default.EVENTS_SENDER_INTERVAL;a<=n&&a>=t&&e.interval!==a&&e.reschedule(a)},applyDestinationPolicy:function(){return i.default.get("_hzt.host")||r.default.HORIZON_TRACK_HOST}}},function(e,t,n){var i,r;
/*!
   * JavaScript Cookie v2.2.0
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */!function(a){void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),e.exports=a()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}a.expires=a.expires?a.expires.toUTCString():"";try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,!0!==a[u]&&(l+="="+a[u]));return document.cookie=t+"="+r+l}t||(s={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var p=c[h].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var g=p[0].replace(d,decodeURIComponent);if(f=n.read?n.read(f,g):n(f,g)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===g){s=f;break}t||(s[g]=f)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=t}return i(e,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(t,n){var i=new e(n);return t.forEach((function(e){return i.push(e)})),i}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}return i(e,[{key:"tick",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),s=u(n(1)),o=u(n(0)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},d=function(){return a.default.getResource("schemas",{data:{}})},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=c.STATE_NOT_READY,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+s.default.COMPONENT_NOT_READY);var i=d().data[n];if(!i)throw new Error(s.default.UNSUPPORTED_TYPE+": "+n);return i}},{key:"isReady",value:function(){return this.state===c.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=c.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=c.STATE_NOT_READY,e.load()}),o.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===c.STATE_READY)return e(d().data);if(this.callbacks.onReady.length>o.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(s.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===c.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var e=this,t=d();if(this.state===c.STATE_NOT_READY){this.state=c.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var n=o.default.USE_HTTPS?"https://":"http://";l.default.request("GET",""+n+this.url,(function(n){t.data=Object.assign(t.data||{},n),e.state=c.STATE_READY,e.callbacks.onReady.forEach((function(e){return r.default.execAsync(e,t.data)}))}),(function(t){e.state=c.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}();t.default={getInstance:function(e){var t=d();return t.provider||(t.provider=new h(e||o.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:d}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null},r=function(e){return window.utag_data?window.utag_data[e]:null};t.default={getTenant:function(){return i("SITE_ID")||r("ut.profile")||"unknown"},getDeviceGroup:function(){return i("MOBILE_GROUP")||r("platform")||"unknown"}}}])})),ap=la(rp),sp=t({__proto__:null,default:ap},[rp]),op=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(a(this,e),e.instance)return e.instance;this.initHorizonClient(t,n,i)}return o(e,[{key:"initHorizonClient",value:function(e,t,n){var i=J.isSmartTvEnvironment?"tv":null,r=ap||sp;"prod"!==e&&r.Settings.useQAConfiguration(),t&&r.Settings.useHTTPOnly(),this.horizon=new r.HorizonClient(n,i),this.saveInstance()}},{key:"saveInstance",value:function(){e.instance=this}},{key:"send",value:function(e){this.horizon.send(e)}},{key:"unload",value:function(){this.horizon.unload()}}]),e}(),lp=wn.session,up="object"===r(window.onbeforeunload)?"beforeunload":"unload",cp=function(e){return function(e){u(n,e);var t=f(n);function n(e){var i;a(this,n),(i=t.call(this,e))[e.type]=e;var r=i.options.env&&i.options.env.name||"",s=i.options.httpOnly,o=i.options.horizon&&i.options.horizon.tenant||(J.isSmartTvEnvironment?"player":null);return i.horizon=new op(r,s,o),i.setupUnload(),i}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.7.1"}}},{key:"playerId",get:function(){return Vt.playerId}},{key:"videoSessionId",get:function(){return lp.getVideoSessionId(this.options.playerId)}},{key:"contentType",get:function(){return"monitoring"}},{key:"basicData",get:function(){return{id:this.id,version:this.version,contentType:this.contentType}}},{key:"setupUnload",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(up,this.boundOnEnd)}},{key:"bindEvents",value:function(){}},{key:"onUnload",value:function(){}},{key:"onEnd",value:function(){this.onUnload(),this.horizon.unload()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{this.horizon.send(i(i({},this.basicData),{},{properties:e}))}catch(e){we.error(this.name,"Error when trying to send data to Horizon",e)}}},{key:"destroy",value:function(){window.removeEventListener(up,this.boundOnEnd),this.stopListening(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(e)},dp=/^\s+|\s+$/g,hp=/^[-+]0x[0-9a-f]+$/i,pp=/^0b[01]+$/i,fp=/^0o[0-7]+$/i,gp=parseInt,vp="object"==typeof oa&&oa&&oa.Object===Object&&oa,mp="object"==typeof self&&self&&self.Object===Object&&self,yp=vp||mp||Function("return this")(),bp=Object.prototype.toString,Ep=Math.max,Ap=Math.min,_p=function(){return yp.Date.now()};function Tp(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function kp(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==bp.call(e)}(e))return NaN;if(Tp(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Tp(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(dp,"");var n=pp.test(e);return n||fp.test(e)?gp(e.slice(2),n?2:8):hp.test(e)?NaN:+e}var Sp=function(e,t,n){var i,r,a,s,o,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,a=r;return i=r=void 0,u=t,s=e.apply(a,n)}function f(e){return u=e,o=setTimeout(v,t),c?p(e):s}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=_p();if(g(e))return m(e);o=setTimeout(v,function(e){var n=t-(e-l);return d?Ap(n,a-(e-u)):n}(e))}function m(e){return o=void 0,h&&i?p(e):(i=r=void 0,s)}function y(){var e=_p(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===o)return f(l);if(d)return o=setTimeout(v,t),p(l)}return void 0===o&&(o=setTimeout(v,t)),s}return t=kp(t)||0,Tp(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Ep(kp(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),u=0,i=l=r=o=void 0},y.flush=function(){return void 0===o?s:m(_p())},y},wp=function(){return{}},Cp=function(e){return{subject:e}},Ip=function(e,t){return{subject:t,value:e}},Dp=function(e,t){return{subject:t}},Rp=wn.getCurrentTime,Lp=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).counter=0,i}return o(n,[{key:"name",get:function(){return"events-schema"}},{key:"id",get:function(){return"player-events"}},{key:"version",get:function(){return"2.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"playbackType",get:function(){return this.container&&this.container.getPlaybackType()}},{key:"playHeadTimeLive",get:function(){return this.innerPlayback&&Rp(this.innerPlayback)||-1}},{key:"playHeadTimeVOD",get:function(){return this.container&&parseInt(1e3*this.container.getCurrentTime(),10)||-1}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"coreEvents",get:function(){var e;return l(e={},Le.CORE_FULLSCREEN,(function(e,t){return{subject:t,value:e}})),l(e,Le.CORE_RESIZE,(function(e,t){var n=e.width,i=e.height;return{value:"".concat(n,"x").concat(i),subject:t}})),l(e,Le.CORE_SCREEN_ORIENTATION_CHANGED,(function(e,t){return{subject:t,value:e.orientation}})),l(e,In.WM_PIP_ADDED,wp),l(e,In.WM_PIP_DISCARDED,wp),l(e,In.WM_MASTER_ADDED,wp),l(e,In.WM_MASTER_CHANGED,wp),l(e,In.WM_PIPTOMASTER,wp),l(e,In.WM_MASTERTOPIP,wp),l(e,In.MEDIACONTROL_DOUBLE_TAP,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide,n=void 0===t?"":t;return{value:n}})),l(e,In.WILL_SHOW_QUICK_SEEK_HINT,wp),l(e,In.WILL_HIDE_QUICK_SEEK_HINT,wp),l(e,In.START_DRAGGING_SEEKBAR,wp),l(e,In.STOP_DRAGGING_SEEKBAR,wp),e}},{key:"mediaControlEvents",get:function(){var e;return l(e={},In.MEDIACONTROL_MODAL_SHOW,wp),l(e,In.MEDIACONTROL_MODAL_HIDE,wp),l(e,In.MEDIACONTROL_ITEMCLICKED,Cp),l(e,Le.MEDIACONTROL_RENDERED,Cp),l(e,In.WM_VOLUME_SHOW,Cp),l(e,In.WM_VOLUME_HIDE,Cp),l(e,In.WM_SHARE_SHOW,Cp),l(e,In.WM_SHARE_HIDE,Cp),e}},{key:"containerEvents",get:function(){var e,t=(l(e={},Le.CONTAINER_CLICK,Dp),l(e,Le.CONTAINER_DESTROYED,Dp),l(e,Le.CONTAINER_DBLCLICK,Dp),l(e,Le.CONTAINER_VOLUME,(function(e,t){return{value:Math.round(e),subject:t}})),l(e,Le.Custom.DAI_RESOURCE_LOADED,(function(e){return{value:e.implementationType}})),l(e,In.WM_BITRATE_CAP,(function(e,t){return{value:e.toFixed(2),subject:t}})),l(e,In.DFP_AD_LOADED,wp),l(e,In.DFP_AD_CLOSED,wp),l(e,In.DFP_AD_STARTED,wp),l(e,In.DFP_AD_RESUME,wp),l(e,In.DFP_AD_PAUSE,wp),l(e,In.DFP_AD_CLICKED,wp),l(e,In.DFP_AD_COMPLETED,wp),l(e,In.DFP_AD_SKIPPED,wp),l(e,In.DFP_AD_NOTSERVED,wp),l(e,In.DFP_AD_METADATA,wp),l(e,In.DFP_ALL_ADS_COMPLETED,wp),l(e,In.DFP_CONTENT_PAUSE,wp),l(e,In.DFP_CONTENT_RESUME,wp),l(e,In.DFP_CONTENT_STARTED,wp),l(e,In.DFP_CONTENT_ENDED,wp),l(e,In.DFP_FINISHED,wp),l(e,In.WM_MUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),l(e,In.WM_UNMUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),l(e,In.WM_AUDIO_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),l(e,In.WM_AUDIO_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,In.WM_LOCATION_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,In.WM_SUBTITLE_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),l(e,In.SKIP_BUTTON_CLICKED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),l(e,In.SKIP_BUTTON_SHOW,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),l(e,In.DID_CHANGE_CURRENT_PROGRAM,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,In.WILL_QUICK_SEEK,wp),l(e,In.WILL_AUTO_SKIP_RECAP,wp),l(e,In.WM_GA_UNTRACKED_EVENT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;return{value:n}})),l(e,In.SIMULCAST_PING,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,In.WM_RESOURCE_REQUEST_STATS,(function(e){var t=e.retries,n=e.usedFallback;return{value:JSON.stringify({attempts:t,fallback:n}),eventName:"retry_history"}})),e);return t}},{key:"playbackEvents",get:function(){var e;return l(e={},Le.PLAYBACK_READY,Ip),l(e,Le.PLAYBACK_BUFFERING,Ip),l(e,Le.PLAYBACK_BUFFERFULL,Ip),l(e,Le.PLAYBACK_LOADEDMETADATA,(function(e,t){var n=e.duration;return{subject:t,value:Math.round(n)}})),l(e,Le.PLAYBACK_HIGHDEFINITIONUPDATE,Ip),l(e,Le.PLAYBACK_BITRATE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,Le.PLAYBACK_DVR,Ip),l(e,Le.PLAYBACK_ENDED,Cp),l(e,Le.PLAYBACK_PLAY_INTENT,Cp),l(e,Le.PLAYBACK_PLAY,Cp),l(e,Le.PLAYBACK_PAUSE,(function(e,t){return{subject:e,value:JSON.stringify(t)}})),l(e,Le.PLAYBACK_SEEK,Cp),l(e,Le.PLAYBACK_SEEKED,Cp),l(e,Le.PLAYBACK_STOP,Cp),l(e,Le.PLAYBACK_LEVEL_SWITCH,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),l(e,Le.PLAYBACK_SUBTITLE_AVAILABLE,Cp),l(e,In.WM_WROOM_WAITING,Dp),l(e,In.WM_PLAY_REQUESTED_READY,Dp),l(e,In.WILL_SELECT_FALLBACK_SOURCE,(function(e){return{value:JSON.stringify(e)}})),l(e,In.WILL_CHANGE_SOURCE,(function(e){return{value:JSON.stringify(e)}})),l(e,In.FALLBACK_SOURCE_SELECTED,(function(e){return{value:JSON.stringify(e)}})),l(e,In.WILL_RENEW_RESOURCE,(function(e){return{value:JSON.stringify(e)}})),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_READY,this.bindContainerEvents),Object.entries(this.coreEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.core,i,r)})),Object.entries(this.mediaControlEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.mediaControl,i,r)}))}},{key:"onUnload",value:function(){this.sendEvent("user","DID_LEAVE")}},{key:"playheadTime",value:function(){return this.playbackType?this.playbackType===Xe.LIVE?this.playHeadTimeLive:this.playHeadTimeVOD:-1}},{key:"handleEventArgs",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=t.apply(void 0,i),s=a.subject,o=a.value,l=a.eventName;this.sendEvent(s,l||e,o)}},{key:"subscribeEvent",value:function(e,t,n){this.listenTo(e,t,Sp(this.handleEventArgs.bind(this,t,n),500,{leading:!0,trailing:!0}))}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.bindPlaybackEvents(),Object.entries(this.containerEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.container,i,r)})))}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.playback&&Object.entries(this.playbackEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.playback,i,r)}))}},{key:"sendEvent",value:function(e,t,n){this.send(Object.assign({},this.baseProperties,{subject:e||"unknown"},t&&{event:t.toString()},n&&{value:n.toString()},{playheadTime:this.playheadTime()},{counter:parseInt(this.counter,10)})),this.counter+=1}}]),n}(cp(ut)),Pp=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"session-info-schema"}},{key:"id",get:function(){return"player-session-info"}},{key:"version",get:function(){return"2.3"}},{key:"innerPlayback",get:function(){return this.container.playback.playback}},{key:"startAt",get:function(){return"live"===this.container.getPlaybackType()?this.options.liveStartTime:this.options.resumeAt}},{key:"baseProperties",get:function(){var e={playerId:this.playerId,videoSessionId:this.videoSessionId,autoPlay:!!this.options.autoPlay,disableAds:!!this.options.skipDFP};return this.startAt&&(e.startAt=Math.floor(this.startAt)),e}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send(i(i(i({},this.baseProperties),this.containerProperties()),this.videoProperties(e)))}},{key:"containerProperties",value:function(){return{playback:this.innerPlayback.name,muted:!this.container.playback.getVolume()}}},{key:"liveProps",value:function(e){return{duration:-1,dvr:this.container.isDvrEnabled(),signal:e.transmission.signal}}},{key:"videoProperties",value:function(e){var t={videoId:e.id,programId:e.programId,channelId:e.channelId,kind:e.kind,encrypted:e.encrypted,subscriberOnly:e.isSubscriberOnly,adult:e.adult,cdn:e.cdn,duration:e.duration,downloadedSession:!1};return e.encrypted&&(t.drmProtocol=e.drm),"live"==e.kind&&(t=i(i({},t),this.liveProps(e))),t}}]),n}(cp(lt)),Op=wn.API_VERSION,xp=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).chromecastStatus=i.getChromecastStatus(),i}return o(n,[{key:"name",get:function(){return"environment-web-info-schema"}},{key:"id",get:function(){return"player-environment-web"}},{key:"version",get:function(){return"2.0"}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_READY,this.sendEvents)}},{key:"getChromecastStatus",value:function(){return Promise.race([this.subscribe(this.listenTo.bind(this,this.core,In.CHROMECAST_SCRIPT_ERROR)).then((function(){return"script-load-error"})),this.subscribe(this.listenTo.bind(this,this.core,In.CHROMECAST_API_ERROR)).then((function(){return"api-error"})),this.subscribe(this.listenTo.bind(this,this.core,In.CHROMECAST_INITIALIZE_ERROR)).then((function(){return"initialize-error"})),this.subscribe(this.listenTo.bind(this,this.core,In.CHROMECAST_AVAILABLE)).then((function(){return"available"})),this.subscribe(this.listenTo.bind(this,this.core,In.CHROMECAST_UNAVAILABLE)).then((function(){return"unavailable"}))]).then((function(e){return{castStatus:e}})).catch((function(){return{castStatus:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,apiVersion:Op,browserVersion:J.data.fullVersion,browser:J.name,location:this.core.options.domain||document.location.hostname}),this.chromecastStatus]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(y(t))))}))}}]),n}(cp(ut)),Mp=_i.Video,Np=wn.getDeviceType,Bp=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).deviceInfo=i.options.deviceInfo||{},i}return o(n,[{key:"name",get:function(){return"environment-info-schema"}},{key:"id",get:function(){return"player-environment-data"}},{key:"version",get:function(){return"3.0"}},{key:"osVersion",get:function(){return(J.isSmartTvEnvironment?this.deviceInfo.firmwareVersion:J.os.fullVersion)||"other"}},{key:"deviceModel",get:function(){return J.isSmartTvEnvironment&&(this.deviceInfo.model||J.device.model)||"not-informed"}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_READY,this.sendEvents)}},{key:"initialSize",value:function(){return this.subscribe(this.listenTo.bind(this,this.core,Le.CORE_RESIZE)).then((function(e){var t=e.width,n=e.height;return{initialSize:"".concat(t,"x").concat(n)}})).catch((function(){return{initialSize:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,os:this.deviceInfo.os||J.os.name,osVersion:this.osVersion,playerVersion:"7.85.0",playerType:Mp.getPlayerType(),application:this.core.options.domain||document.location.hostname,deviceType:Np(),applicationVersion:this.core.options.applicationVersion||"not-informed",networkType:"None/web",deviceModel:this.deviceModel}),this.initialSize()]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(y(t))))}))}}]),n}(cp(ut)),Up=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"errors-schema"}},{key:"id",get:function(){return"player-errors"}},{key:"version",get:function(){return"2.2"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{playerId:this.playerId,videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Le.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,Le.CORE_READY,this.bindContainerEvents),this.listenToCoreErrors()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenToOnce(this.container.playback,In.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToContainerErrors())}},{key:"listenToContainerErrors",value:function(){var e=this;this.listenTo(this.container,Le.CONTAINER_ERROR,this.sendEvents),this.listenTo(this.container,In.DFP_AD_ERROR,(function(t){var n=e.formatAdErrors(t);e.sendEvents(n)})),this.listenTo(this.container,In.WM_VIDEO_METADATA_ERROR,this.sendEvents),this.listenTo(this.container,In.WM_RESOURCE_ERROR,this.sendEvents)}},{key:"listenToCoreErrors",value:function(){this.listenTo(this.core,In.CHROMECAST_API_ERROR,this.sendEvents),this.listenTo(this.core,In.CHROMECAST_SCRIPT_ERROR,this.sendEvents),this.listenTo(this.core,In.CHROMECAST_INITIALIZE_ERROR,this.sendEvents),this.listenTo(this.core,In.CHROMECAST_LAUNCH_ERROR,this.sendEvents),this.listenTo(this.core,In.CHROMECAST_MEDIA_LOAD_ERROR,this.sendEvents)}},{key:"onMetadataLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.kind=e.kind}},{key:"formatAdErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===r(e.message)?{code:e.message&&e.message.getType&&e.message.getType()||"",message:e.message&&e.message.getMessage&&e.message.getMessage()}:e}},{key:"videoProperties",value:function(){var e=this.container.options,t=parseInt(null==e?void 0:e.source,10);return{videoId:wn.isVideoId(t)?t:-1,kind:this.kind||""}}},{key:"errorProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{code:String(e.code||e.type||"unknown"),clientCode:e.clientCode||"unknown",message:e.description||e.message||"unknown",extraData:""}}},{key:"sendEvents",value:function(e){this.send(i(i(i({},this.baseProperties),this.videoProperties()),this.errorProperties(e)))}}]),n}(cp(ut)),Fp=function(e){u(n,e);var t=f(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"ad-config-schema"}},{key:"id",get:function(){return"player-ad-config"}},{key:"version",get:function(){return"2.0"}},{key:"dfp",get:function(){return this.container.options.dfp}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.container,In.DFP_AD_LOADED,this.sendEvents)}},{key:"adConfigProperties",value:function(e){return i(i({},this.adProperties(e)),this.dfpProperties())}},{key:"adProperties",value:function(e){return{adId:e.getAdId(),linear:e.isLinear(),position:this.getAdPosition(e),skippable:e.isSkippable(),duration:parseInt(e.getDuration(),10),timeOffset:parseInt(e.getAdPodInfo().getTimeOffset(),10)}}},{key:"dfpProperties",value:function(){return{adUnit:this.dfp.adUnit,adCustomData:this.dfp.adCustomData,accountId:this.dfp.adAccountId,cmsId:this.dfp.adCmsId}}},{key:"getAdPosition",value:function(e){if(!e.isLinear())return"overlay";switch(e.getAdPodInfo().getPodIndex()){case 0:return"pre-roll";case-1:return"pos-roll";default:return"mid-roll"}}},{key:"sendEvents",value:function(e){this.send(i(i({},this.baseProperties),this.adConfigProperties(e)))}}]),n}(cp(lt)),Vp=6e4,Hp=15e3,jp=.05,Kp=function(e){u(n,e);var t=f(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).measurements=[],i.counter=0,i.bufferingTime=0,i.decodedFrames=0,i.droppedFrames=0,i.lastBufferType=null,i.updateMeasurements({}),i}return o(n,[{key:"name",get:function(){return"network-monitoring-schema"}},{key:"id",get:function(){return"player-network-monitoring"}},{key:"version",get:function(){return"6.0"}},{key:"currentTime",get:function(){return(new Date).getTime()}},{key:"isBuffering",get:function(){return this.lastBufferType===Le.PLAYBACK_BUFFERING}},{key:"bandwidthEstimate",get:function(){var e=this.container.playback.bandwidthEstimate;return"number"==typeof e&&e>=0?e:-1}},{key:"bindEvents",value:function(){this.listenTo(this.container,In.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container.playback,In.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,In.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,In.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,Le.PLAYBACK_BITRATE,this.updateMeasurements),this.listenTo(this.container.playback,Le.PLAYBACK_STOP,this.stopHeartbeat),this.listenTo(this.container.playback,Le.PLAYBACK_ERROR,this.stopHeartbeat),this.listenTo(this.container.playback,Le.PLAYBACK_ENDED,this.stopHeartbeat),this.listenTo(this.container.playback,Le.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.container.playback,Le.PLAYBACK_BUFFERFULL,this.onBufferFull)}},{key:"onStatsReported",value:function(e){this.decodedFrames=e.counters.decodedFrames,this.droppedFrames=e.counters.droppedFrames}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.domainHost=this.getDomainFromURL(t)}},{key:"onStreamingDataLoaded",value:function(e){var t=e.host;this.domainHost=t}},{key:"pingInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"live"==e.kind?Vp:Math.max(Hp,jp*e.duration)}},{key:"onResourceReady",value:function(e){this.setCDNHost(e),this.setPoP(e),this.stopHeartbeat(),this.heartbeat=setInterval(this.onHeartbeatTick.bind(this),this.pingInterval(e)),this.onHeartbeatTick()}},{key:"setCDNHost",value:function(e){var t=e.selectedResource.url;this.domainHost=this.getDomainFromURL(t)}},{key:"setPoP",value:function(e){var t=e.selectedResource.resourcePOP;this.pop=t}},{key:"getDomainFromURL",value:function(e){return e&&/:\/\/(?:www\.)?(.[^/]+)(.*)/.exec(e)[1]}},{key:"updateMeasurements",value:function(e){var t=e.bitrate,n=void 0===t?0:t;this.lastMeasurement={nominalBitrate:parseInt(n,10),bandwidth:parseInt(this.bandwidthEstimate,10),timestamp:this.currentTime},this.measurements.push(this.lastMeasurement)}},{key:"increaseTotalBuffering",value:function(){this.isBuffering&&this.bufferStartTime>0&&(this.bufferingTime+=this.currentTime-this.bufferStartTime,this.bufferStartTime=this.currentTime)}},{key:"onBuffering",value:function(){this.bufferStartTime=this.currentTime,this.increaseTotalBuffering(),this.lastBufferType=Le.PLAYBACK_BUFFERING}},{key:"onBufferFull",value:function(){this.increaseTotalBuffering(),this.bufferStartTime=0,this.lastBufferType=Le.PLAYBACK_BUFFERFULL}},{key:"onHeartbeatTick",value:function(){0==this.measurements.length&&this.measurements.push(this.lastMeasurement),this.increaseTotalBuffering(),this.sendEvent(),this.resetStateTimmingInfo(),this.eraseMeasurements(),this.updateCounter()}},{key:"updateCounter",value:function(){this.counter+=1}},{key:"resetStateTimmingInfo",value:function(){this.bufferingTime=0}},{key:"eraseMeasurements",value:function(){this.measurements=[]}},{key:"onUnload",value:function(){this.sendEvent()}},{key:"sendEvent",value:function(){this.send({videoSessionId:this.videoSessionId,measurements:this.measurements,counter:this.counter,domainHost:this.domainHost||"unknown",pop:this.pop||"unknown",bufferingTime:this.bufferingTime,decodedFrames:this.decodedFrames,droppedFrames:this.droppedFrames})}},{key:"stopHeartbeat",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopHeartbeat(),v(c(n.prototype),"destroy",this).call(this)}}]),n}(cp(lt)),Gp={EnvironmentInfo:Bp,EnvironmentWebInfo:xp,SessionInfoSchema:Pp,ErrorsInfo:Up,EventsInfo:Lp,AdConfigSchema:Fp,NetworkMonitoring:Kp},Wp=Object.entries(Gp).reduce((function(e,t){var n=m(t,2),i=n[0],r=n[1];return e[r.type]=e[r.type]||{},e[r.type][i]=r,e}),{}),Yp=Wp.core,zp=Wp.container,qp=function(e){return(t=e,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).match(/skd\:\/\/(.*)$/)[1];var t},$p=function(e,t,n){var i="string"==typeof t?function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t):t,r=0,a=new ArrayBuffer(e.byteLength+4+i.byteLength+4+n.byteLength),s=new DataView(a);new Uint8Array(a,r,e.byteLength).set(e),r+=e.byteLength,s.setUint32(r,i.byteLength,!0),r+=4;var o=new Uint16Array(a,r,i.length);return o.set(i),r+=o.byteLength,s.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},Xp=function(e){u(n,e);var t=f(n);function n(){var e;a(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._isReadyState=!1,e.certificate=null,e.setupDRM(e.options.fairplay||{}),e}return o(n,[{key:"name",get:function(){return"hls_fairplay_playback"}},{key:"events",get:function(){return i(i({},v(c(n.prototype),"events",this)),{},{webkitneedkey:this.onNeedKey})}},{key:"_setup",value:function(){this.setupDRM(this.options.fairplay||{})}},{key:"load",value:function(e){this._setup(),v(c(n.prototype),"load",this).call(this,e)}},{key:"_ready",value:function(){this.certificate&&v(c(n.prototype),"_ready",this).call(this)}},{key:"setupDRM",value:function(e){this.certificateUrl=e.certificate,this.serverUrl=e.server,this.certificateUrl&&this.loadCertificate()}},{key:"loadCertificate",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("load",(function(t){return e.onCertificateLoaded(t)}),!1),t.addEventListener("error",(function(t){return e.onCertificateError(t)}),!1),t.open("GET",this.certificateUrl,!0),t.send()}},{key:"onCertificateLoaded",value:function(e){var t=e.target;this.certificate=new Uint8Array(t.response),this._ready(),we.info(this.name,"Certificate loaded successfully")}},{key:"onCertificateError",value:function(e){var t=this.createError({code:"certificateError",description:"Failed to retrieve the server certificate",raw:e});this.trigger(Le.PLAYBACK_ERROR,t),we.error(this.name,"Failed to retrieve the server certificate",t)}},{key:"onNeedKey",value:function(e){var t=e.target,n=e.initData,i=qp(n);n=$p(n,i,this.certificate),this.createMediaKeys(t),this.createKeySession(t,n,i)}},{key:"createMediaKeys",value:function(e){if(!e.webkitKeys){var t=WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?"com.apple.fps.1_0":null;if(t)e.webkitSetMediaKeys(new WebKitMediaKeys(t));else{var n=this.createError({code:"unsupportedKeySystem",description:"Could not create MediaKeys. Key System not supported"});this.trigger(Le.PLAYBACK_ERROR,n),we.error(this.name,"Could not create MediaKeys. Key System not supported",n)}}}},{key:"createKeySession",value:function(e,t,n){if(e.webkitKeys){var i=e.webkitKeys.createSession("video/mp4",t);if(i)i.contentId=n,this.bindKeySessionEvents(i);else{var r=this.createError({code:"mediaKeysError",description:"Could not create key session"});this.trigger(Le.PLAYBACK_ERROR,r),we.error(this.name,"Could not create key session",r)}}}},{key:"bindKeySessionEvents",value:function(e){var t=this;e.addEventListener("webkitkeymessage",(function(e){return t.licenseRequestReady(e)}),!1),e.addEventListener("webkitkeyadded",(function(e){return t.onKeyAdded(e)}),!1),e.addEventListener("webkitkeyerror",(function(e){return t.onKeyError(e)}),!1)}},{key:"onKeyAdded",value:function(e){we.info(this.name,"Decryption key was added to session",e)}},{key:"onKeyError",value:function(e){var t=this.createError({code:"decryptionKeyError",description:"A decryption key error was encountered",level:"WARN",raw:e});we.warn(this.name,"A decryption key error was encountered",t)}},{key:"licenseRequestReady",value:function(e){var t=this,n=e.target,i=e.message,r=new XMLHttpRequest,a="spc=".concat(encodeURIComponent(function(e){for(var t,n,i,r,a,s,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)r=(t=e[c++])>>2,a=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,s=(15&n)<<2|(i=c<e.length?e[c++]:Number.NaN)>>6,o=63&i,isNaN(n)?(s=64,o=64):isNaN(i)&&(o=64),u+=l.charAt(r)+l.charAt(a)+l.charAt(s)+l.charAt(o);return u}(i)));r.responseType="text",r.session=n,r.addEventListener("load",(function(e){return t.onLicenseRequestLoaded(e)}),!1),r.addEventListener("error",(function(e){return t.onLicenseRequestError(e)}),!1),r.open("POST",this.serverUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),we.info(this.name,"License request ready")}},{key:"onLicenseRequestLoaded",value:function(e){var t=e.target,n=t.session,i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}(JSON.parse(t.responseText.trim()).ckc);n.update(i),we.info(this.name,"License loaded successfully")}},{key:"onLicenseRequestError",value:function(e){var t=this.createError({code:"licenseRequestError",description:"The license request failed",raw:e});this.trigger(Le.PLAYBACK_ERROR,t),we.error(this.name,"The license request failed",t)}}]),n}(gt);Xp.canPlay=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.encrypted,r=e.split("?")[0].match(/.*\.(.*)$/)||[],a=r.length>1&&"m3u8"===r[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t;return!(!J.isSafari&&!J.isiOS||!a||!i)};var Zp=ua((function(e,t){e.exports=function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(t);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?f(e):t}function v(e){var t=p();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=m(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},y(e,t,n||e)}function b(e){return E(e)||A(e)||_(e)||k()}function E(e){if(Array.isArray(e))return T(e)}function A(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var S=e.Utils.now,w=e.Utils.listContainsIgnoreCase,C=-1,I=16;e.Events.register("PLAYBACK_FRAGMENT_CHANGED"),e.Events.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var D=function(t){c(r,t);var n=v(r);function r(){var e;s(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).options.hlsPlayback=a(a({},e.defaultOptions),e.options.hlsPlayback),e._setInitialState(),e}return l(r,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?C:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"latency",get:function(){return this._hls.latency}},{key:"currentProgramDateTime",get:function(){return this._hls.playingDate}},{key:"_startTime",get:function(){return this._playbackType===e.Playback.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return S()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,n=(e.remote+t)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,n=this._now-t.local,i=(t.remote+n)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(i,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"sourceMedia",get:function(){return this.options.src}},{key:"_setInitialState",value:function(){this._minDvrSize=void 0===this.options.hlsMinimumDvrSize?60:this.options.hlsMinimumDvrSize,this._extrapolatedWindowNumSegments=this.options.playback&&void 0!==this.options.playback.extrapolatedWindowNumSegments?this.options.playback.extrapolatedWindowNumSegments:2,this._playbackType=e.Playback.VOD,this._lastTimeUpdate={current:0,total:0},this._lastDuration=null,this._playableRegionStartTime=0,this._localStartTimeCorrelation=null,this._localEndTimeCorrelation=null,this._playableRegionDuration=0,this._programDateTime=0,this._durationExcludesAfterLiveSyncPoint=!1,this._segmentTargetDuration=null,this._playlistType=null,this._recoverAttemptsRemaining=this.options.hlsRecoverAttempts||I}},{key:"_setup",value:function(){this._destroyHLSInstance(),this._createHLSInstance(),this._listenHLSEvents(),this._attachHLSMedia()}},{key:"_destroyHLSInstance",value:function(){this._hls&&(this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._setInitialState(),this._hls.destroy(),this._hls=null)}},{key:"_createHLSInstance",value:function(){var e=a({},this.options.playback.hlsjsConfig);this._hls=new i.default(e)}},{key:"_attachHLSMedia",value:function(){this._hls&&this._hls.attachMedia(this.el)}},{key:"_listenHLSEvents",value:function(){var e=this;this._hls&&(this._hls.once(i.default.Events.MEDIA_ATTACHED,(function(){e.options.hlsPlayback.preload&&e._hls.loadSource(e.options.src)})),this._hls.on(i.default.Events.MANIFEST_PARSED,(function(){return e._manifestParsed=!0})),this._hls.on(i.default.Events.LEVEL_LOADED,(function(t,n){return e._updatePlaybackType(t,n)})),this._hls.on(i.default.Events.LEVEL_UPDATED,(function(t,n){return e._onLevelUpdated(t,n)})),this._hls.on(i.default.Events.LEVEL_SWITCHING,(function(t,n){return e._onLevelSwitch(t,n)})),this._hls.on(i.default.Events.FRAG_CHANGED,(function(t,n){return e._onFragmentChanged(t,n)})),this._hls.on(i.default.Events.FRAG_LOADED,(function(t,n){return e._onFragmentLoaded(t,n)})),this._hls.on(i.default.Events.FRAG_PARSING_METADATA,(function(t,n){return e._onFragmentParsingMetadata(t,n)})),this._hls.on(i.default.Events.ERROR,(function(t,n){return e._onHLSJSError(t,n)})),this._hls.on(i.default.Events.SUBTITLE_TRACK_LOADED,(function(t,n){return e._onSubtitleLoaded(t,n)})),this._hls.on(i.default.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this.bindCustomListeners())}},{key:"bindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var n=t.eventName,i=t.once?"once":"on";n&&e._hls["".concat(i)](n,t.callback)}))}},{key:"unbindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var n=t.eventName;n&&e._hls.off(n,t.callback)}))}},{key:"_onFragmentParsingMetadata",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:t,data:n})}},{key:"render",value:function(){return this._ready(),y(d(r.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(e.Events.PLAYBACK_READY,this.name))}},{key:"_recover",value:function(t,n,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){e.Log.error("hlsjs: failed to recover",{evt:t,data:n}),i.level=e.PlayerError.Levels.FATAL;var r=this.createError(i);this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=e>0?this._duration*(e/100):this._duration;this.seek(t)}},{key:"seek",value:function(t){t<0&&(e.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,this.el.currentTime=t}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(t){this.trigger(e.Events.PLAYBACK_DVR,t),this.trigger(e.Events.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"_updateSettings",value:function(){this._playbackType===e.Playback.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(e.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(t,n){var r,a={code:"".concat(n.type,"_").concat(n.details),description:"".concat(this.name," error: type: ").concat(n.type,", details: ").concat(n.details),raw:n};if(n.response&&(a.description+=", response: ".concat(JSON.stringify(n.response))),n.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,n.type){case i.default.ErrorTypes.NETWORK_ERROR:switch(n.details){case i.default.ErrorDetails.MANIFEST_LOAD_ERROR:case i.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case i.default.ErrorDetails.MANIFEST_PARSING_ERROR:case i.default.ErrorDetails.LEVEL_LOAD_ERROR:case i.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.Log.error("hlsjs: unrecoverable network fatal error.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();break;default:e.Log.warn("hlsjs: trying to recover from network error.",{evt:t,data:n}),a.level=e.PlayerError.Levels.WARN,this._hls.startLoad()}break;case i.default.ErrorTypes.MEDIA_ERROR:e.Log.warn("hlsjs: trying to recover from media error.",{evt:t,data:n}),a.level=e.PlayerError.Levels.WARN,this._recover(t,n,a);break;default:e.Log.error("hlsjs: could not recover from error.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else e.Log.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(n))return e.Log.error("hlsjs: could not load decrypt key.",{evt:t,data:n}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),void this.stop();a.level=e.PlayerError.Levels.WARN,e.Log.warn("hlsjs: non-fatal error occurred",{evt:t,data:n})}}},{key:"_keyIsDenied",value:function(e){return e.type===i.default.ErrorTypes.NETWORK_ERROR&&e.details===i.default.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(e.Events.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,y(d(r.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var t=[],n=0,i=0;i<this.el.buffered.length;i++)t=[].concat(b(t),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=t[i].start&&this.el.currentTime<=t[i].end&&(n=i);var r={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(e.Events.PLAYBACK_PROGRESS,r,t)}}},{key:"load",value:function(e){this._stopTimeUpdateTimer(),this.options.src=e,this._setup()}},{key:"play",value:function(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),y(d(r.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&y(d(r.prototype),"stop",this).call(this),this._destroyHLSInstance()}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._destroyHLSInstance(),y(d(r.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(t,n){this._playbackType=n.details.live?e.Playback.LIVE:e.Playback.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===e.Playback.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(e.Events.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(t,n){this._segmentTargetDuration=n.details.targetduration,this._playlistType=n.details.type||null;var r=!1,a=!1,s=n.details.fragments,o=this._playableRegionStartTime,l=this._playableRegionDuration;if(0!==s.length){if(s[0].rawProgramDateTime&&(this._programDateTime=s[0].rawProgramDateTime),this._playableRegionStartTime!==s[0].start&&(r=!0,this._playableRegionStartTime=s[0].start),r)if(this._localStartTimeCorrelation){var u=this._localStartTimeCorrelation,c=this._now-u.local,d=(u.remote+c)/1e3;d<s[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*s[0].start}:d>o+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(s[0].start,o+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(s[0].start+this._extrapolatedWindowDuration/2)};var h=n.details.totalduration;if(this._playbackType===e.Playback.LIVE){var p=n.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||i.default.DefaultConfig.liveSyncDurationCount);p<=h?(h-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}h!==this._playableRegionDuration&&(a=!0,this._playableRegionDuration=h);var f=s[0].start+h,g=o+l;if(f!==g)if(this._localEndTimeCorrelation){var v=this._localEndTimeCorrelation,m=this._now-v.local,y=(v.remote+m)/1e3;y>f?this._localEndTimeCorrelation={local:this._now,remote:1e3*f}:y<f-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(f-this._extrapolatedWindowDuration)}:y>g&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*g})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*f};a&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_CHANGED,n)}},{key:"_onFragmentLoaded",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_LOADED,n)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(e.Events.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===e.Playback.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(t,n){this.levels.length||this._fillLevels(),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_END),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH,n);var i=this._hls.levels[n.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(e.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(e.Events.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:n.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===e.Playback.LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===e.Playback.VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function(){return i.default}}]),r}(e.HTML5Video);return D.canPlay=function(e,t){var n=e.split("?")[0].match(/.*\.(.*)$/)||[],r=n.length>1&&"m3u8"===n[1].toLowerCase()||w(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!i.default.isSupported()||!r)},D}(vo,ws)})),Qp=ua((function(e,t){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var e="undefined"!=typeof window?window:oa,n={};for(var i in function(e,t,n){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var s=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function c(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=s[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={a:!0},p=f.a;break e}catch(e){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=d;function v(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.zh=t.prototype}function m(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function y(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function b(e,t){e.i={Ee:t,Le:!0},e.g=e.m||e.j}function E(e,t,n){return e.g=n,{value:t}}function A(e){e.g=0}function _(e,t,n){e.m=t,null!=n&&(e.j=n)}function T(e){e.m=0,e.j=2}function k(e,t){e.g=t,e.m=0}function S(e){e.m=0;var t=e.i.Ee;return e.i=null,t}function w(e){e.u=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Le?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function I(e){this.g=new m,this.h=e}function D(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,b(e.g,t),R(e)}return e.g.l=null,i.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,b(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Le)throw t.Ee;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function L(e){this.next=function(t){return y(e.g),e.g.l?t=D(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=R(e)),t},this.throw=function(t){return y(e.g),e.g.l?t=D(e,e.g.l.throw,t,e.g.s):(b(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){y(e.g);var n=e.g.l;return n?D(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function P(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new L(new I(e)))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Je:r,v:a}}return{Je:-1,v:void 0}}function N(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function B(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}m.prototype.s=function(e){this.h=e},m.prototype.return=function(e){this.i={return:e},this.g=this.j},m.prototype.A=function(e){this.g=e},o("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=s.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;r((function(){if(e.B()){var t=s.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.H=function(e){var t=this.j();e.Lc(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,s=new t((function(e,t){r=e,a=t}));return this.Lc(i(e,r),i(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Lc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).Lc(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){s[t]=n,0==--o&&e(s)}}var s=[],o=0;do{s.push(void 0),o++,i(r.value).Lc(a(s.length-1),t),r=n.next()}while(!r.done)}))},t})),o("WeakMap",(function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!x(e,o)){var t=new n;a(e,o,{value:t})}}function s(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();s("freeze"),s("preventExtensions"),s("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!x(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.g]=t,this},t.prototype.get=function(e){return i(e)&&x(e,o)?e[o][this.g]:void 0},t.prototype.has=function(e){return i(e)&&x(e,o)&&x(e[o],this.g)},t.prototype.delete=function(e){return!!(i(e)&&x(e,o)&&x(e[o],this.g))&&delete e[o][this.g]},t})),o("Map",(function(e){function t(){var e={};return e.Qa=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.Qa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&x(e.h,n))for(e=0;e<i.length;e++){var r=i[e];if(t!=t&&r.key!=r.key||t===r.key)return{id:n,list:i,index:e,fa:r}}return{id:n,list:i,index:-1,fa:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).fa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,!0)},r.prototype.clear=function(){this.h={},this.g=this.g.Qa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).fa},r.prototype.get=function(e){return(e=i(this,e).fa)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),o("Set",(function(e){function t(e){if(this.g=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),o("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).Je}})),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){return-1!==N(this,e,"includes").indexOf(e,t||0)}})),o("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).v}})),o("String.prototype.startsWith",(function(e){return e||function(e,t){var n=N(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}})),o("Array.prototype.keys",(function(e){return e||function(){return B(this,(function(e){return e}))}}));var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)x(i,r)&&(e[r]=i[r])}return e};o("Object.assign",(function(e){return e||U})),o("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),o("Array.prototype.values",(function(e){return e||function(){return B(this,(function(e,t){return t}))}})),o("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),o("Array.prototype.entries",(function(e){return e||function(){return B(this,(function(e,t){return[e,t]}))}})),o("String.prototype.repeat",(function(e){return e||function(e){var t=N(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),o("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),o("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)x(e,t)&&n.push(e[t]);return n}})),o("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),o("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),o("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)x(e,t)&&n.push([t,e[t]]);return n}}));var F=this||self;function V(e,t){e=e.split(".");var n,i=F;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function H(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function j(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new H(2),this.j=new H(5),this.g=0,this.i=128e3,this.l=16e3}function G(){}function W(){}function Y(){}function z(e){var t=O.apply(1,arguments);$.has(e)||($.add(e),Y.apply(G,c(t)))}function q(){}H.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(j(this.h),j(this.j))};var $=new Set;if(e.console&&e.console.log.bind){var X={},Z=(X[1]=console.error.bind(console),X[2]=console.warn.bind(console),X[3]=console.info.bind(console),X[4]=console.log.bind(console),X[5]=console.debug.bind(console),X[6]=console.debug.bind(console),X);Y=Z[2],W=Z[1]}function Q(e){if(J.has(e))return J.get(e);var t=MediaSource.isTypeSupported(e);return J.set(e,t),t}var J=new Map;function ee(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function te(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function ne(e,t,n){if(n||(n=ee),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={md:i.md},r=e.next()){if(i.md=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.md,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ie(e,t,n){if(n||(n=ee),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function re(e,t,n){this.startTime=e,this.direction=de,this.endTime=t,this.payload=n,this.region=new Ae,this.position=null,this.positionAlign=se,this.size=0,this.textAlign=oe,this.writingMode=he,this.lineInterpretation=pe,this.line=null,this.lineHeight="",this.lineAlign=fe,this.displayAlign=ue,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ye,this.fontStyle=be,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function ae(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ie(e.nestedCues,t.nestedCues,ae))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!ie(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}re.prototype.clone=function(){var e,t=new re(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",re);var se="auto";re.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:se};var oe="center",le={LEFT:"left",RIGHT:"right",CENTER:oe,START:"start",END:"end"};re.textAlign=le;var ue="after",ce={BEFORE:"before",CENTER:"center",AFTER:ue};re.displayAlign=ce;var de="ltr";re.direction={HORIZONTAL_LEFT_TO_RIGHT:de,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var he="horizontal-tb";re.writingMode={HORIZONTAL_TOP_TO_BOTTOM:he,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var pe=0;re.lineInterpretation={LINE_NUMBER:pe,PERCENTAGE:1};var fe="start",ge={CENTER:"center",START:fe,END:"end"};re.lineAlign=ge;var ve={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};re.defaultTextColor=ve;var me={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};re.defaultTextBackgroundColor=me;var ye=400;re.fontWeight={NORMAL:ye,BOLD:700};var be="normal",Ee={NORMAL:be,ITALIC:"italic",OBLIQUE:"oblique"};function Ae(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=_e,this.scroll=Te}re.fontStyle=Ee,re.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",Ae);var _e=1;Ae.units={PX:0,PERCENTAGE:_e,LINES:2};var Te="";function ke(){}function Se(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(we(e)==we(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ie(e);t=Ie(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function we(e){return e instanceof ArrayBuffer?e:e.buffer}function Ce(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ie(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function De(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Re(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(we(e),t,Math.min(t+Math.max(n,0),r)-t)}function Le(e,t,n){var i=O.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}Ae.scrollMode={NONE:Te,UP:"up"},V("shaka.util.BufferUtils",ke),ke.toDataView=De,ke.toUint8=Ie,ke.toArrayBuffer=Ce,ke.equal=Se,Le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",Le),Le.Severity={RECOVERABLE:1,CRITICAL:2},Le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
var Pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */function Oe(e){var t;e instanceof Oe?(xe(this,e.Ea),this.pb=e.pb,this.Ha=e.Ha,Me(this,e.Kb),this.qa=e.qa,Ne(this,e.g.clone()),this.fb=e.fb):e&&(t=String(e).match(Pe))?(xe(this,t[1]||"",!0),this.pb=Be(t[2]||""),this.Ha=Be(t[3]||"",!0),Me(this,t[4]),this.qa=Be(t[5]||"",!0),Ne(this,t[6]||"",!0),this.fb=Be(t[7]||"")):this.g=new We(null)}function xe(e,t,n){e.Ea=n?Be(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function Me(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Kb=t}else e.Kb=null}function Ne(e,t,n){t instanceof We?e.g=t:(n||(t=Ue(t,Ke)),e.g=new We(t))}function Be(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Ue(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Fe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=Oe.prototype).Ea="",i.pb="",i.Ha="",i.Kb=null,i.qa="",i.fb="",i.toString=function(){var e=[],t=this.Ea;if(t&&e.push(Ue(t,Ve,!0),":"),t=this.Ha){e.push("//");var n=this.pb;n&&e.push(Ue(n,Ve,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Kb)&&e.push(":",String(t))}return(t=this.qa)&&(this.Ha&&"/"!=t.charAt(0)&&e.push("/"),e.push(Ue(t,"/"==t.charAt(0)?je:He,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.fb)&&e.push("#",Ue(t,Ge)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Ea&&(t=new Oe);var n=!!e.Ea;n?xe(t,e.Ea):n=!!e.pb,n?t.pb=e.pb:n=!!e.Ha,n?t.Ha=e.Ha:n=null!=e.Kb;var i=e.qa;if(n)Me(t,e.Kb);else if(n=!!e.qa){if("/"!=i.charAt(0))if(this.Ha&&!this.qa)i="/"+i;else{var r=t.qa.lastIndexOf("/");-1!=r&&(i=t.qa.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],s=0;s<i.length;){var o=i[s++];"."==o?r&&s==i.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==i.length&&a.push("")):(a.push(o),r=!0)}i=a.join("/")}}return n?t.qa=i:n=""!==e.g.toString(),n?Ne(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},i.clone=function(){return new Oe(this)};var Ve=/[#\/\?@]/g,He=/[#\?:]/g,je=/[#\?]/g,Ke=/[#\?@]/g,Ge=/#/g;function We(e){this.g=e||null}function Ye(e){if(!e.la&&(e.la={},e.Oc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," ")),r=r||"",e.add(a,decodeURIComponent(r.replace(/\+/g," ")))}}function ze(e,t){return e.concat(t)}function qe(){}function $e(e){return null!=e}function Xe(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Oe(e)}));return e.map((function(e){return new Oe(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(ze,[]).map((function(e){return e.toString()}))}function Ze(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Qe(e,t){if(1==t.length)return t[0];if(null!=(e=Je(e,t)))return e;throw new Le(2,4,4025,t)}function Je(e,t){for(var n=u(nt[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==et?"":null}(i=We.prototype).la=null,i.Oc=null,i.add=function(e,t){Ye(this),this.g=null;var n=this.la.hasOwnProperty(e)?this.la[e]:null;return n||(this.la[e]=n=[]),n.push(t),this.Oc++,this},i.set=function(e,t){return Ye(this),this.g=null,this.la.hasOwnProperty(e)?this.la[e]=[t]:this.add(e,t),this},i.toString=function(){if(this.g)return this.g;if(!this.la)return"";var e,t=[];for(e in this.la)for(var n=encodeURIComponent(e),i=this.la[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},i.clone=function(){var e=new We;if(e.g=this.g,this.la){var t,n={};for(t in this.la)n[t]=this.la[t].concat();e.la=n,e.Oc=this.Oc}return e};var et="text",tt={va:"video",Hc:"audio",X:et,Wb:"image",Gg:"application"},nt={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function it(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function rt(e){this.h=e,this.g=void 0}function at(e){this.h=e,this.g=null}function st(e){this.h=e,this.g=null}function ot(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function lt(e){return""!=vt().canPlayType(e)}function ut(){return gt("Xbox One")}function ct(){return gt("Tizen")}function dt(){return gt("Web0S")&&gt("Chrome/38.0.2125.122 Safari/537.36")}function ht(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ct()&&!gt("PC=EOS")&&!gt("VirginMedia")&&!pt()&&!gt("AFT")}function pt(){return gt("PlayStation 4")}function ft(){if(!ht())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function gt(e){return(navigator.userAgent||"").includes(e)}function vt(){return yt||(mt||(mt=new st((function(){yt=null}))),(yt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(yt=document.createElement("video")),mt.N(1),yt)}it.prototype.resolve=function(){},it.prototype.reject=function(){},rt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},at.prototype.N=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},at.prototype.stop=function(){this.g&&(this.g(),this.g=null)},st.prototype.Mb=function(){return this.stop(),this.h(),this},st.prototype.N=function(e){var t=this;return this.stop(),this.g=new at((function(){t.h()})).N(e),this},st.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new at((function(){t.g.N(e),t.h()})).N(e),this},st.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},V("shaka.util.Timer",st),st.prototype.stop=st.prototype.stop,st.prototype.tickEvery=st.prototype.Ca,st.prototype.tickAfter=st.prototype.N,st.prototype.tickNow=st.prototype.Mb;var mt=null,yt=null;function bt(){}function Et(t){if(!t)return"";if(239==(t=Ie(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!pt())return(t=(new TextDecoder).decode(t)).includes("�")&&W('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(0==(128&t[i])?r=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),65535>=r)n+=String.fromCharCode(r);else{var a=1023&(r-=65536);n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+a)}}return n}function At(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Le(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=De(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return St.value()(i)}function _t(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Ie(e);if(239==n[0]&&187==n[1]&&191==n[2])return Et(n);if(254==n[0]&&255==n[1])return At(n.subarray(2),!1);if(255==n[0]&&254==n[1])return At(n.subarray(2),!0);if(0==n[0]&&0==n[2])return At(e,!1);if(0==n[1]&&0==n[3])return At(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Et(e);throw new Le(2,2,2003)}function Tt(t){if(e.TextEncoder&&!pt()){var n=new TextEncoder;return Ce(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Ce(n)}function kt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}V("shaka.util.StringUtils",bt),bt.resetFromCharCode=function(){St.g=void 0},bt.toUTF16=kt,bt.toUTF8=Tt,bt.fromBytesAutoDetect=_t,bt.fromUTF16=At,bt.fromUTF8=Et;var St=new rt((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ua)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ua));return n}}(t);return null}));function wt(){}function Ct(e){return e=Ie(e),e=St.value()(e),btoa(e)}function It(e,t){return t=null==t||t,e=Ct(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Dt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Rt(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Lt(e){var t=Ie(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Pt(){for(var e=O.apply(0,arguments),t=0,n=u(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=u(e)).next();!i.done;i=e.next())i=i.value,t.set(Ie(i),n),n+=i.byteLength;return t}function Ot(){}V("shaka.util.Uint8ArrayUtils",wt),wt.concat=Pt,wt.toHex=Lt,wt.fromHex=Rt,wt.fromBase64=Dt,wt.toBase64=It,wt.toStandardBase64=Ct,V("shaka.dependencies",Ot),Ot.has=function(e){return Mt.has(e)},Ot.add=function(e,t){if(!xt[e])throw Error(e+" is not supported");Mt.set(e,(function(){return t}))};var xt={muxjs:"muxjs"};Ot.Allowed=xt;var Mt=new Map([["muxjs",function(){return e.muxjs}]]);function Nt(e){var t=this;this.o=e,this.m=Mt.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",(function(e){t.i=e.captions,t.l.push(Pt(e.initSegment,e.data))})),this.g.on("done",(function(){var e={data:Pt.apply(wt,c(t.l)),captions:t.i};t.h.resolve(e),t.j=!1}))}function Bt(e,t){var n=Ut(e),i="audio/aac"==e.toLowerCase().split(";")[0];return!(!Mt.get("muxjs")()||!n&&!i)&&(i?Q('audio/mp4; codecs="mp4a.40.2"'):t?Q(Vt(t,e)):(t=Vt("audio",e),e=Vt("video",e),Q(t)||Q(e)))}function Ut(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Ft(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp4a.40.2"':Ut(t)?Vt(e,t):t}function Vt(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",i=e[1],r=Number(e[2]);n=("66"==i?n+"4200":"77"==i?n+"4d00":n+"6400")+(r>>4).toString(16),n+=(15&r).toString(16),t=t.replace(e[0],n)}return t}function Ht(){}function jt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Kt(e,t,n){return Bt(e=jt(e,t),n)?Ft(n,e):"audio"==n?e.replace("video","audio"):e}function Gt(e){var t=Yt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Wt(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Yt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function zt(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function qt(e){return!(!Qt[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function $t(e,t,n){if(e.B=t,t=e.o.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function Xt(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=u(t.nestedCues)).next();!i.done;i=t.next())Xt(e,i.value,n)}function Zt(e,t,n,i,r){for(var a=n+" "+i,s=new Map,o=(t=u(t)).next();!o.done;o=t.next()){var l=o.value;o=l.stream,l=l.cue,s.has(o)||s.set(o,new Map),s.get(o).has(a)||s.get(o).set(a,[]),Xt(e,l,r),l.startTime>=e.l&&l.startTime<e.m&&(s.get(o).get(a).push(l),o==e.B&&e.i.append([l]))}for(a=(r=u(s.keys())).next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),o=(t=u(s.get(a).keys())).next();!o.done;o=t.next())o=o.value,l=s.get(a).get(o),e.o.get(a).set(o,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}Nt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},V("shaka.util.MimeUtils",Ht),Ht.getFullType=jt,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),zt.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},zt.prototype.remove=function(e,t){var n=this;return P((function(i){if(1==i.g)return E(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),A(i)}))},V("shaka.text.TextEngine",zt),zt.prototype.destroy=zt.prototype.destroy,zt.findParser=function(e){return Qt[e]},zt.unregisterParser=function(e){delete Qt[e]},zt.registerParser=function(e,t){Qt[e]=t};var Qt={};function Jt(){}function en(e,t){return e=rn(e),t=rn(t),e.split("-")[0]==t.split("-")[0]}function tn(e,t){return e=rn(e),t=rn(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function nn(e,t){return e=rn(e),t=rn(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function rn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=un.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function an(e,t){return e=rn(e),(t=rn(t))==e?4:tn(t,e)?3:nn(t,e)?2:tn(e,t)?1:0}function sn(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),un.get(e)||e}function on(e){return e.language?rn(e.language):e.audio&&e.audio.language?rn(e.audio.language):e.video&&e.video.language?rn(e.video.language):"und"}function ln(e,t){e=rn(e);var n=new Set,i=u(t);for(t=i.next();!t.done;t=i.next())n.add(rn(t.value));for(t=(i=u(n)).next();!t.done;t=i.next())if((t=t.value)==e)return t;for(t=(i=u(n)).next();!t.done;t=i.next())if(tn(t=t.value,e))return t;for(t=(i=u(n)).next();!t.done;t=i.next())if(nn(t=t.value,e))return t;for(t=(n=u(n)).next();!t.done;t=n.next())if(tn(e,t=t.value))return t;return null}V("shaka.util.LanguageUtils",Jt),Jt.findClosestLocale=ln,Jt.getLocaleForVariant=on,Jt.getLocaleForText=function(e){return rn(e.language||"und")},Jt.getBase=sn,Jt.relatedness=an,Jt.areSiblings=function(e,t){var n=sn(e),i=sn(t);return e!=n&&t!=i&&n==i},Jt.normalize=rn,Jt.isSiblingOf=nn,Jt.isParentOf=tn,Jt.areLanguageCompatible=en,Jt.areLocaleCompatible=function(e,t){return(e=rn(e))==(t=rn(t))};var un=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function cn(){this.g={}}function dn(e,t,n,i,r){var a=e.variants;(t.length||n.length)&&(a=function(e,t,n){for(var i={},r=(t=u(t)).next();!r.done;i={xd:i.xd},r=t.next())if(i.xd=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.xd)}}(i)),r.length){e=r;break}for(i={},n=u(n),t=n.next();!t.done;i={jd:i.jd},t=n.next())if(i.jd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.jd)}}(i)),t.length){e=t;break}return e}(a,t,n)),t=function(e){for(var t=new cn,n=(e=u(e)).next();!n.done;n=e.next()){var i=pn(n=n.value);t.push(i,n)}return t}(a=Pn(a,i)),t=function(e){var t=0,n=new Map,i=e.size();return e.forEach((function(e,r){for(var a=(r=u(r)).next();!a.done;a=r.next()){var s=(a=a.value).video;if(s&&s.width&&s.height){s=s.width*s.height*(s.frameRate||1),n.has(s)||n.set(s,new cn);var o=n.get(s);o.push(e,a),o.size()===i&&(t=Math.max(t,s))}}})),t?n.get(t):e}(t);var s=function(e,t){for(var n=(t=u(t)).next();!n.done;n=t.next())if((n=n.value)==Un||n==Fn){if(1==(e=hn(e,n)).size())return e.keys()[0]}else if(n==Vn)break;return function(e){var t="",n=1/0;return e.forEach((function(e,i){for(var r=0,a=0,s=(i=u(i)).next();!s.done;s=i.next())r+=s.value.bandwidth||0,++a;(r/=a)<n&&(t=e,n=r)})),t}(e)}(t,r);e.variants=e.variants.filter((function(e){return pn(e)==s}))}function hn(e,t){var n=0,i=new cn;return e.forEach((function(e,r){for(var a=0,s=0,o=u(r),l=o.next();!l.done;l=o.next())(l=l.value).decodingInfos.length&&(a+=l.decodingInfos[0][t]?1:0,s++);(a/=s)>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)})),i}function pn(e){var t="";e.video&&(t=Gt(e.video.codecs));var n="";return e.audio&&(n=Gt(e.audio.codecs)),t+"-"+n}function fn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function gn(e,t,n){for(var i=!1,r=(e=u(e)).next();!r.done;r=e.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=fn(r,t,n),a!=r.allowedByApplication&&(i=!0)}return i}function vn(e,t){return P((function(n){return 1==n.g?E(n,mn(t,0<t.offlineSessionIds.length),2):(_n(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return qt(jt(e.mimeType,e.codecs))}))}(t),E(n,function(e){var t,n,i,r,a,s,o;return P((function(l){switch(l.g){case 1:t=[],n=u(e.imageStreams),i=n.next();case 2:if(i.done){l.A(4);break}if(r=i.value,a=r.mimeType,Hn.has(a)){l.A(5);break}if(!(s=jn.get(a))){Hn.set(a,!1),l.A(5);break}return E(l,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(s),7);case 7:o=l.h,Hn.set(a,o);case 5:Hn.get(a)&&t.push(r),i=n.next(),l.A(2);break;case 4:e.imageStreams=t,A(l)}}))}(t),0))}))}function mn(e,t){return P((function(n){if(1==n.g)return E(n,yn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=An(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");n=An(n=Qe("video",i)),i=En(i=Qe("audio",i));var r=Kt(t.mimeType,i,"audio");if(!Q(r))return!1;n=[n,i].join()}if(!Q(i=Kt(t.mimeType,n,"video")))return!1;t.codecs=n}if(n=e.audio){if(i=En(n.codecs),!Q(r=Kt(n.mimeType,i,"audio")))return!1;n.codecs=i}return ut()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(Mn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||Mn(e),t)})),A(n)}))}function yn(e,t,n){var i,r,a,s,o,l,c,d,h,p;return P((function(f){if(e.some((function(e){return e.decodingInfos.length})))return f.return();for(i=navigator.mediaCapabilities,r=[],a=function(e,t){var n;return P((function(r){return 1==r.g?(_(r,2),E(r,i.decodingInfo(t),4)):2!=r.g?(n=r.h,e.decodingInfos.push(n),k(r,0)):(S(r),JSON.stringify(t),void A(r))}))},s=u(e),o=s.next();!o.done;o=s.next())for(l=o.value,c=bn(l,t,n),d=u(c),h=d.next();!h.done;h=d.next())p=h.value,r.push(a(l,p));return E(f,Promise.all(r),0)}))}function bn(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a=r.codecs;if(r.codecs.includes(",")){var s=r.codecs.split(",");a=An(a=Qe("video",s)),s=Qe("audio",s),s=Kt(r.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(a=An(a),a=Kt(r.mimeType,a,"video"),n.video={contentType:a,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(a=En(i.codecs),a=Kt(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],a=new Map;for(var o=(s=u(s)).next();!o.done;o=s.next()){var l=o.value;a.get(l.keySystem)||a.set(l.keySystem,[]),a.get(l.keySystem).push(l)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var c=(l=u(a.keys())).next();!c.done;c=l.next()){var d=c.value;c=Object.assign({},n);var h=a.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},o=(h=u(h)).next();!o.done;o=h.next()){if((o=o.value).initData&&o.initData.length){for(var p=new Set,f=u(o.initData),g=f.next();!g.done;g=f.next())p.add(g.value.initDataType);d.initDataType=o.initData[0].initDataType}o.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),o.persistentStateRequired&&(d.persistentState="required"),o.sessionType&&(d.sessionTypes=[o.sessionType]),i&&(d.audio?d.audio.robustness=d.audio.robustness||o.audioRobustness:d.audio={robustness:o.audioRobustness}),r&&(d.video?d.video.robustness=d.video.robustness||o.videoRobustness:d.video={robustness:o.videoRobustness})}c.keySystemConfiguration=d,e.push(c)}return e}function En(e){return ct()&&"ac-3"==e.toLowerCase()?"ec-3":e}function An(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function _n(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!Tn(n,e.audio)||t&&e&&e.video&&!Tn(t,e.video))}))}function Tn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function kn(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,s=n?n.codecs:null,o=[];s&&o.push(s),a&&o.push(a);var l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var d=new Set;if(t)for(var h=u(t.roles),p=h.next();!p.done;p=h.next())d.add(p.value);if(n)for(p=(h=u(n.roles)).next();!p.done;p=h.next())d.add(p.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:l,audioMimeType:i,videoMimeType:r,codecs:o.join(", "),audioCodec:a,videoCodec:s,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function Sn(e){return{id:e.id,active:!1,type:et,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function wn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Cn(e){return e.__shaka_id||(e.__shaka_id=Bn++),e.__shaka_id}function In(e){var t=Rn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Dn(e){var t=Rn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Rn(e){return{id:Cn(e),active:!1,type:"",bandwidth:0,language:rn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Ln(e){return e.allowedByApplication&&e.allowedByKeySystem}function Pn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(e=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,c(e))):i.get(Math.min.apply(Math,c(n)))}function On(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var s=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==s})),t){var o=ln(rn(t),e.map((function(e){return e.language})));o&&(r=e.filter((function(e){return rn(e.language)==o})))}if(r=r.filter((function(e){return e.forced==i})),n){if((e=xn(r,n)).length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(ze,[]),e.length?xn(r,e[0]):r}function xn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Mn(e){var t=[];return e.audio&&t.push(Nn(e.audio)),e.video&&t.push(Nn(e.video)),t.join(", ")}function Nn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(i=cn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.forEach=function(e){for(var t in this.g)e(t,this.g[t])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)};var Bn=0,Un="smooth",Fn="powerEfficient",Vn="bandwidth",Hn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Kn(){var e=this;this.l=null,this.o=!1,this.i=new K,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.o){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}})),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new st((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t)}}))}function Gn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Wn(e,t,n,i){return e&&(t=t.filter((function(t){return fn(t,e,{width:i,height:n})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(i=Kn.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},i.init=function(e){this.l=e},i.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight),t=Wn(this.g.restrictions,this.m,t,n),n=this.i.getBandwidthEstimate(Gn(this)),this.m.length&&!t.length&&(t=[(t=Wn(null,this.m,1/0,1/0))[0]]);for(var i=t[0]||null,r=0;r<t.length;r++){for(var a=t[r],s=isNaN(this.u)?1:Math.abs(this.u),o=s*a.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:1/0},u=r+1;u<t.length;u++)if(a.bandwidth!=t[u].bandwidth){l=t[u];break}s=s*l.bandwidth/this.g.bandwidthUpgradeTarget,n>=o&&n<=s&&i.bandwidth!=a.bandwidth&&(i=a)}return this.s=Date.now(),i},i.enable=function(){this.o=!0},i.disable=function(){this.o=!1},i.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.B=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(Gn(this)),e&&this.l(e)}},i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Gn(this))},i.setVariants=function(e){this.m=e},i.playbackRateChanged=function(e){this.u=e},i.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.N(Yn)})),this.h.observe(this.j))},i.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},V("shaka.abr.SimpleAbrManager",Kn),Kn.prototype.configure=Kn.prototype.configure,Kn.prototype.setMediaElement=Kn.prototype.setMediaElement,Kn.prototype.playbackRateChanged=Kn.prototype.playbackRateChanged,Kn.prototype.setVariants=Kn.prototype.setVariants,Kn.prototype.getBandwidthEstimate=Kn.prototype.getBandwidthEstimate,Kn.prototype.segmentDownloaded=Kn.prototype.segmentDownloaded,Kn.prototype.disable=Kn.prototype.disable,Kn.prototype.enable=Kn.prototype.enable,Kn.prototype.chooseVariant=Kn.prototype.chooseVariant,Kn.prototype.init=Kn.prototype.init,Kn.prototype.stop=Kn.prototype.stop;var Yn=1;function zn(e,t){this.g=e,this.h=t}function qn(e,t){var n=new zn(5,0),i=Zn,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function $n(e,t,n,i){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Xn(e,t,n,i){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}zn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Zn=null;function Qn(e,t){for(this.h=e,this.g=new Set([e]),t=(e=u(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function Jn(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&ei(n,i)&&ti(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(ei(e=e.video,t=t.video)&&ti(e.roles,t.roles))),!n}function ei(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return Yt(e)[0]})),t=t.codecs.split(",").map((function(e){return Yt(e)[0]})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ti(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=u(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function ni(e){this.g=e,this.h=new ii(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ii(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function ri(){this.g=oi,this.h=(new Map).set(oi,2).set(si,1)}function ai(e,t,n){e.h.set(oi,n).set(si,t)}V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Qn.prototype.add=function(e){return!!Jn(this.h,e)&&(this.g.add(e),!0)},Qn.prototype.values=function(){return this.g.values()},ni.prototype.create=function(e){var t=this,n=e.filter((function(e){return Jn(t.g,e)}));return n.length?new Qn(n[0],n):this.h.create(e)},ii.prototype.create=function(e){var t=[];t=function(e,t){t=rn(t);var n=ln(t,e.map((function(e){return on(e)})));return n?e.filter((function(e){return n==on(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&((e=Pn(t,this.g)).length&&(t=e)),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new Qn(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Jn(e.h,n)&&e.add(n);return e};var si=0,oi=1;function li(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function ui(e){var t,n;return P((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Le(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),E(i,new Promise((function(e){new st(e).N(n/1e3)})),2))}e.h*=e.m,A(i)}))}function ci(e,t){this.promise=e,this.i=t,this.g=!1}function di(e){return new ci(Promise.reject(e),(function(){return Promise.resolve()}))}function hi(){var e=Promise.reject(new Le(2,7,7001));return e.catch((function(){})),new ci(e,(function(){return Promise.resolve()}))}function pi(e){return new ci(Promise.resolve(e),(function(){return Promise.resolve()}))}function fi(e){return new ci(e,(function(){return e.catch((function(){}))}))}function gi(e){return new ci(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function vi(t,n){if(n)if(n instanceof Map)for(var i=u(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function mi(e){var t,n=new vi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ci.prototype.abort=function(){return this.g=!0,this.i()},ci.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ci.prototype.Y=function(e,t){function n(n){return function(o){if(r.g&&n)a.reject(s);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,o,a):(n?a.resolve:a.reject)(o)}}}function i(){return a.reject(s),r.abort()}var r=this,a=new it,s=new Le(2,7,7001);return this.promise.then(n(!0),n(!1)),new ci(a,(function(){return i()}))},V("shaka.util.AbortableOperation",ci),ci.prototype.chain=ci.prototype.Y,ci.prototype.finally=ci.prototype.finally,ci.all=gi,ci.prototype.abort=ci.prototype.abort,ci.notAbortable=fi,ci.completed=pi,ci.aborted=hi,ci.failed=di,vi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},vi.prototype.stopImmediatePropagation=function(){this.g=!0},vi.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",vi);var yi={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function bi(){this.ca=new cn,this.Wc=this}function Ei(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Ai(e){var t,n={};for(t in e)n[t]=e[t];return n}function _i(){this.g=[]}function Ti(e,t){e.g.push(t.finally((function(){te(e.g,t)})))}function ki(e,t,n){bi.call(this),this.i=!1,this.m=new _i,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function Si(e,t,n,i){n=n||Li;var r=Pi[e];(!r||n>=r.priority)&&(Pi[e]={priority:n,jg:t,kg:void 0!==i&&i})}function wi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Ci(e,t,n,i,r,a,s){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var o=new Oe(n.uris[r]),l=o.Ea,u=!1;l||(xe(o,l=(l=location.protocol).slice(0,-1)),n.uris[r]=o.toString()),l=l.toLowerCase();var c=(l=Pi[l])?l.jg:null;if(!c)return di(new Le(2,1,1e3,o));var d,h=l.kg,p=null,f=null,g=!1,v=!1;return fi(ui(i)).Y((function(){if(e.i)return hi();d=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){p&&p.stop(),f&&f.N(o/1e3),e.l&&t==Ri&&(e.l(n,i),u=!0,s.g=r)}),(function(i){e.j&&e.j(i,n,t),v=!0}));if(!h)return i;var a=n.retryParameters.connectionTimeout;a&&(p=new st((function(){g=!0,i.abort()}))).N(a/1e3);var o=n.retryParameters.stallTimeout;return o&&(f=new st((function(){g=!0,i.abort()}))),i})).Y((function(i){p&&p.stop(),f&&f.stop(),null==i.timeMs&&(i.timeMs=Date.now()-d);var r={response:i,Yf:u};return!v&&e.j&&e.j(i.headers,n,t),r}),(function(o){if(p&&p.stop(),f&&f.stop(),e.s){var l=null,u=0;o instanceof Le&&(l=o,1001==o.code&&(u=o.data[1])),e.s(n,l,u,g)}if(e.i)return hi();if(g&&(o=new Le(1,1,1003,n.uris[r],t)),o instanceof Le){if(7001==o.code)throw o;if(1010==o.code)throw a;if(1==o.severity)return l=new vi("retry",l=(new Map).set("error",o)),e.dispatchEvent(l),r=(r+1)%n.uris.length,Ci(e,t,n,i,r,o,s)}throw o}))}function Ii(){this.g=0}function Di(e,t,n){ci.call(this,e,t),this.h=n}bi.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},bi.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},bi.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Wc,e.currentTarget=this.Wc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},bi.prototype.release=function(){this.ca=null},_i.prototype.destroy=function(){for(var e=[],t=u(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},v(ki,bi),(i=ki.prototype).je=function(e){this.o=e},i.lg=function(e){this.g.add(e)},i.Bg=function(e){this.g.delete(e)},i.rf=function(){this.g.clear()},i.mg=function(e){this.h.add(e)},i.Cg=function(e){this.h.delete(e)},i.tf=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),bi.prototype.release.call(this),this.m.destroy()},i.request=function(e,t){var n=this,i=new Ii;if(this.i){var r=Promise.reject(new Le(2,7,7001));return r.catch((function(){})),new Di(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ei(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Ei(t.uris),r=function(e,t,n){for(var i=pi(void 0),r={},a=(e=u(e.g)).next();!a.done;r={sd:r.sd},a=e.next())r.sd=a.value,i=i.Y(function(e){return function(){return n.body&&(n.body=Ce(n.body)),e.sd(t,n)}}(r));return i.Y(void 0,(function(e){if(e instanceof Le&&7001==e.code)throw e;throw new Le(2,1,1006,e)}))}(this,e,t);var a=r.Y((function(){return Ci(n,e,t,new li(t.retryParameters,!1),0,null,i)})),s=a.Y((function(t){return function(e,t,n){for(var i=pi(void 0),r={},a=(e=u(e.h)).next();!a.done;r={td:r.td},a=e.next())r.td=a.value,i=i.Y(function(e){return function(){var i=n.response;return i.data&&(i.data=Ce(i.data)),e.td(t,i)}}(r));return i.Y((function(){return n}),(function(e){var t=2;if(e instanceof Le){if(7001==e.code)throw e;t=e.severity}throw new Le(t,1,1007,e)}))}(n,e,t)})),o=Date.now(),l=0;r.promise.then((function(){l=Date.now()-o}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=s.Y((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Yf||!n.l||r.fromCache||e!=Ri||n.l(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Di(d.promise,(function(){return d.abort()}),i),Ti(this.m,r),r},V("shaka.net.NetworkingEngine",ki),ki.prototype.request=ki.prototype.request,ki.prototype.destroy=ki.prototype.destroy,ki.makeRequest=wi,ki.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},ki.prototype.clearAllResponseFilters=ki.prototype.tf,ki.prototype.unregisterResponseFilter=ki.prototype.Cg,ki.prototype.registerResponseFilter=ki.prototype.mg,ki.prototype.clearAllRequestFilters=ki.prototype.rf,ki.prototype.unregisterRequestFilter=ki.prototype.Bg,ki.prototype.registerRequestFilter=ki.prototype.lg,ki.unregisterScheme=function(e){delete Pi[e]},ki.registerScheme=Si,ki.prototype.setForceHTTPS=ki.prototype.je,ki.NumBytesRemainingClass=Ii,v(Di,ci),ki.PendingRequest=Di;var Ri=1;ki.RequestType={MANIFEST:0,SEGMENT:Ri,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var Li=3;ki.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Li};var Pi={};function Oi(e){this.g=!1,this.h=new it,this.i=e}function xi(e,t){if(e.g){if(t instanceof Le&&7003==t.code)throw t;throw new Le(2,7,7003,t)}}function Mi(){this.g=new cn}function Ni(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Bi;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Bi=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}Oi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=Mi.prototype).release=function(){this.nb(),this.g=null},i.C=function(e,t,n,i){this.g&&(e=new Ni(e,t,n,i),this.g.push(t,e))},i.ma=function(e,t,n,i){var r=this;this.C(e,t,(function i(a){r.zc(e,t,i),n(a)}),i)},i.zc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.zc(),this.g.remove(t,r))},i.nb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,c(t.g[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.zc();this.g.g={}}},V("shaka.util.EventManager",Mi),Mi.prototype.removeAll=Mi.prototype.nb,Mi.prototype.unlisten=Mi.prototype.zc,Mi.prototype.listenOnce=Mi.prototype.ma,Mi.prototype.listen=Mi.prototype.C,Mi.prototype.release=Mi.prototype.release,Ni.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Bi=void 0;function Ui(e,t){for(var n=[],i=(e=u(e)).next();!i.done;i=e.next())n.push(t(i.value));return n}function Fi(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Vi(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Hi(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=u(e)).next();!n.done;n=e.next()){var i=u(n.value);if(n=i.next().value,i=i.next().value,!t.has(n))return!1;if((n=t.get(n))!=i||null==n)return!1}return!0}function ji(e,t){this.S=De(e),this.h=t==Gi,this.g=0}function Ki(){return new Le(2,3,3e3)}(i=ji.prototype).ga=function(){return this.g<this.S.byteLength},i.Z=function(){return this.g},i.Gf=function(){return this.S.byteLength},i.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){throw Ki()}},i.$d=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw Ki()}},i.K=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw Ki()}},i.Pe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw Ki()}},i.$a=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0);else t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch(e){throw Ki()}if(2097151<t)throw new Le(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Za=function(e){if(this.g+e>this.S.byteLength)throw Ki();var t=Ie(this.S,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.S.byteLength)throw Ki();this.g+=e},i.sg=function(e){if(this.g<e)throw Ki();this.g-=e},i.seek=function(e){if(0>e||e>this.S.byteLength)throw Ki();this.g=e},i.sc=function(){for(var e=this.g;this.ga()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=Ie(this.S,e,this.g-e),this.g+=1,Et(e)},V("shaka.util.DataViewReader",ji),ji.prototype.readTerminatedString=ji.prototype.sc,ji.prototype.seek=ji.prototype.seek,ji.prototype.rewind=ji.prototype.sg,ji.prototype.skip=ji.prototype.skip,ji.prototype.readBytes=ji.prototype.Za,ji.prototype.readUint64=ji.prototype.$a,ji.prototype.readInt32=ji.prototype.Pe,ji.prototype.readUint32=ji.prototype.K,ji.prototype.readUint16=ji.prototype.$d,ji.prototype.readUint8=ji.prototype.Ra,ji.prototype.getLength=ji.prototype.Gf,ji.prototype.getPosition=ji.prototype.Z,ji.prototype.hasMoreData=ji.prototype.ga;var Gi=1;function Wi(){this.i=[],this.h=[],this.g=!1}function Yi(e){for(var t=Qi(e);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function zi(e){for(var t=Qi(e),n=e.reader.K(),i=0;i<n&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function qi(e){var t=Qi(e);for(e.reader.skip(78);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function $i(e){return function(t){e(t.reader.Za(t.reader.S.byteLength-t.reader.Z()))}}function Xi(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Zi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Qi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ji.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Gi},(i=Wi.prototype).box=function(e,t){return e=Xi(e),this.i[e]=Ji,this.h[e]=t,this},i.P=function(e,t){return e=Xi(e),this.i[e]=er,this.h[e]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new ji(e,0),this.g=!1;e.ga()&&!this.g;)this.qc(0,e,t,n)},i.qc=function(e,t,n,i){var r=t.Z();if(i&&r+8>t.S.byteLength)this.g=!0;else{var a=t.K(),s=t.K(),o=Zi(s),l=!1;switch(a){case 0:a=t.S.byteLength-r;break;case 1:if(i&&t.Z()+8>t.S.byteLength)return void(this.g=!0);a=t.$a(),l=!0}var u=this.h[s];if(u){var c=null,d=null;if(this.i[s]==er){if(i&&t.Z()+4>t.S.byteLength)return void(this.g=!0);c=(d=t.K())>>>24,d&=16777215}s=r+a,n&&s>t.S.byteLength&&(s=t.S.byteLength),i&&s>t.S.byteLength?this.g=!0:(i=s-t.Z(),u({name:o,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t=new ji(t=0<i?t.Za(i):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:l}))}else t.skip(Math.min(r+a-t.Z(),t.S.byteLength-t.Z()))}},V("shaka.util.Mp4Parser",Wi),Wi.headerSize=Qi,Wi.typeToString=Zi,Wi.allData=$i,Wi.visualSampleEntry=qi,Wi.sampleDescription=zi,Wi.children=Yi,Wi.prototype.parseNext=Wi.prototype.qc,Wi.prototype.parse=Wi.prototype.parse,Wi.prototype.stop=Wi.prototype.stop,Wi.prototype.fullBox=Wi.prototype.P,Wi.prototype.box=Wi.prototype.box;var Ji=0,er=1;function tr(e){var t=this;this.g=[],this.h=[],this.data=[],(new Wi).box("moov",Yi).box("moof",Yi).P("pssh",(function(e){if(!(1<e.version)){var n=Ie(e.reader.S,-12,e.size);if(t.data.push(n),t.g.push(Lt(e.reader.Za(16))),0<e.version){n=e.reader.K();for(var i=0;i<n;i++){var r=Lt(e.reader.Za(16));t.h.push(r)}}}})).parse(e)}function nr(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var s=new Uint8Array(a),o=De(s),l=0;if(o.setUint32(l,a),l+=4,o.setUint32(l,1886614376),l+=4,1>i?o.setUint32(l,0):o.setUint32(l,16777216),l+=4,s.set(t,l),l+=t.length,0<i)for(o.setUint32(l,n.size),l+=4,n=(t=u(n)).next();!n.done;n=t.next())n=Rt(n.value),s.set(n,l),l+=n.length;return o.setUint32(l,r),s.set(e,l+4),s}function ir(e,t){return 1!=(e=ar(e,t)).length?null:e[0]}function rr(e,t,n){return 1!=(e=sr(e,t,n)).length?null:e[0]}function ar(e,t){for(var n=[],i=(e=u(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.tagName==t&&n.push(i);return n}function sr(e,t,n){for(var i=[],r=(e=u(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function or(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function lr(e,t,n){for(var i=(t=u(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function ur(e){return Array.from(e.childNodes).every(cr)?e.textContent.trim():null}function cr(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function dr(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function hr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function pr(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function fr(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function gr(e){return 0==(e=Number(e))%1?e:null}function vr(e){return 0==(e=Number(e))%1&&0<e?e:null}function mr(e){return 0==(e=Number(e))%1&&0<=e?e:null}function yr(e){return e=Number(e),isNaN(e)?null:e}function br(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Er(e,t){var n=new DOMParser,i=_r.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Ar(e,t){try{return Er(Et(e),t)}catch(e){return null}}var _r=new rt((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function Tr(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new Mi,this.i=new Map,this.B=[],this.o=new it,this.h=null,this.m=function(t){n.o.reject(t),e.onError(t)},this.ia=new Map,this.ba=new Map,this.O=new st((function(){return function(e){var t=e.ia,n=e.ba;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.m(new Le(2,6,6014)),e.D.cd(Vi(n))}(n)})),this.L=!1,this.J=[],this.M=!1,this.ca=new st((function(){!function(e){e.i.forEach((function(t,n){var i=t.Vd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Vd=r)}))}(n)})).Ca(t),this.o.catch((function(){})),this.j=new Oi((function(){return function(e){return P((function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.o.reject(),e.ca.stop(),e.ca=null,e.O.stop(),e.O=null,E(t,Nr(e),2);case 2:if(!e.l){t.A(3);break}return _(t,4),E(t,e.l.setMediaKeys(null),6);case 6:k(t,5);break;case 4:S(t);case 5:e.l=null;case 3:e.g=null,e.G.clear(),e.u=null,e.B=[],e.h=null,e.m=function(){},e.D=null,e.V=!1,e.F=null,A(t)}}))}(n)})),this.V=!1,this.F=null}function kr(e,t,n){return e.B=n,e.L=0<n.length,Sr(e,t)}function Sr(t,n){var i,r,a,s,o,l,c,d,h,p,f,g;return P((function(v){if(1==v.g){if(i=function(t){if(t=Fi(t.h.clearKeys),0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=t;22!=r.length&&(r=It(Rt(t),!1)),22!=(t=e).length&&(t=It(Rt(e),!1)),e={kty:"oct",kid:r,k:t},n.push(e),i.push(e.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:Ie(Tt(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}(t))for(r=u(n),a=r.next();!a.done;a=r.next())(s=a.value).video&&(s.video.drmInfos=[i]),s.audio&&(s.audio.drmInfos=[i]);for((o=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(l=Fi(t.h.servers),function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=u(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(n,l)),c=u(n),a=c.next();!a.done;a=c.next())for(d=a.value,h=Ur(d),p=u(h),f=p.next();!f.done;f=p.next())Hr(f.value,Fi(t.h.servers),Fi(t.h.advanced||{}),t.h.keySystemsMapping);return E(v,yn(n,t.L,t.V),2)}return o||Object.keys(t.h.servers).length?(g=Pr(t,void 0,n),v.return(o?g:g.catch((function(){})))):(t.W=!0,v.return(Promise.resolve()))}))}function wr(e){var t;return P((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.F){n.A(2);break}return E(n,e.F,3);case 3:return xi(e.j),n.return();case 2:return _(n,4),e.F=e.l.setMediaKeys(e.u),E(n,e.F,6);case 6:k(n,5);break;case 4:t=S(n),e.m(new Le(2,6,6003,t.message));case 5:xi(e.j),A(n)}}))}function Cr(e){var t,n;return P((function(i){switch(i.g){case 1:if(!e.u||!e.g)return i.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){i.A(2);break}return t=wi([e.g.serverCertificateUri],e.h.retryParameters),_(i,3),E(i,e.D.kb.request(5,t).promise,5);case 5:n=i.h,e.g.serverCertificate=Ie(n.data),k(i,4);break;case 3:throw new Le(2,6,6017,S(i));case 4:if(e.j.g)return i.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(_(i,6),E(i,e.u.setServerCertificate(e.g.serverCertificate),8)):i.return();case 8:k(i,0);break;case 6:throw new Le(2,6,6004,S(i).message)}}))}function Ir(e){for(var t=(e.g?e.g.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())Dr(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.B)).next();!i.done;i=n.next())Or(e,i.value);return t.length||e.B.length||e.o.resolve(),e.o}function Dr(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=u(i)).next();!r.done;r=i.next())if(Se(n,r.value.initData)&&!gt("Tizen 2"))return;0<e.i.size&&Fr(e)&&(e.o.resolve(),e.o=new it,e.o.catch((function(){}))),function(e,t,n,i){try{var r=e.u.createSession(i)}catch(t){return void e.m(new Le(2,6,6005,t.message))}e.s.C(r,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):xr(e,t)})),e.s.C(r,"keystatuseschange",(function(t){return Mr(e,t)})),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Vd:1/0,Ja:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof Le||(t=new Le(2,6,6016,n)),void e.m(t)}e.h.logLicenseExchange&&It(n),r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.m(new Le(2,6,6006,t.message,t,i))}}))}(e,t,n,e.g.sessionType)}}function Rr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Lr(e){return e=Ui(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function Pr(e,t,n){var i,r,a,s,o,l,c,d,h,p,f,g,v;return P((function(m){switch(m.g){case 1:if(i=new Map,n.length){r=function(e,t,n){for(var i=u(t),r=i.next();!r.done;r=i.next()){var a=u(Ur(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new Le(2,6,6e3);for(i={},e=u(e.h.preferredKeySystems),r=e.next();!r.done;i={qd:i.qd},r=e.next())for(i.qd=r.value,a=u(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.qd}}(i)))return r.keySystemAccess;for(e=u([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,a=u(t),r=a.next();!r.done;r=a.next()){var s=u(r.value.decodingInfos);for(r=s.next();!r.done;r=s.next()){var o=r.value;if(o.supported&&o.keySystemAccess){var l=u(r=n.get(o.keySystemAccess.keySystem));for(r=l.next();!r.done;r=l.next())if(!!r.value.licenseServerUri==i)return o.keySystemAccess}}}return null}(e,n,i),m.A(2);break}return E(m,function(e,t){var n,i,r,a,s,o,l,c,d,h,p,f,g,v,m;return P((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new Le(2,6,6e3);for(i=u(t.values()),r=i.next();!r.done;r=i.next())0==(a=r.value).audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;s=u(e.h.preferredKeySystems),o=s.next();case 2:if(o.done){y.A(4);break}if(l=o.value,!t.has(l)){y.A(3);break}return c=t.get(l),_(y,6),E(y,navigator.requestMediaKeySystemAccess(l,[c]),8);case 8:return n=y.h,y.return(n);case 6:S(y);case 7:xi(e.j);case 3:o=s.next(),y.A(2);break;case 4:d=u([!0,!1]),h=d.next();case 9:if(h.done){y.A(11);break}p=h.value,f=u(t.keys()),o=f.next();case 12:if(o.done){h=d.next(),y.A(9);break}if(g=o.value,v=t.get(g),m=v.drmInfos.some((function(e){return!!e.licenseServerUri})),m!=p){y.A(13);break}return _(y,15),E(y,navigator.requestMediaKeySystemAccess(g,[v]),17);case 17:return n=y.h,y.return(n);case 15:S(y);case 16:xi(e.j);case 13:o=f.next(),y.A(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:r=m.h;case 2:if(!(a=r))throw new Le(2,6,6001);for(xi(e.j),_(m,4),e.G.clear(),s=a.getConfiguration(),o=s.audioCapabilities||[],l=s.videoCapabilities||[],c=u(o),d=c.next();!d.done;d=c.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(p=u(l),d=p.next();!d.done;d=p.next())f=d.value,e.G.add(f.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=i.get(a.keySystem),A=[],T=[],w=[],C=[],I=new Set;Vr(b,A,w,T,C,I);var D=e.L?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:A[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||D,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:w[0],serverCertificateUri:T[0],initData:C,keyIds:I},A=(b=u(b)).next();!A.done;A=b.next())(A=A.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=A.distinctiveIdentifierRequired),A.persistentStateRequired&&(y.persistentStateRequired=A.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),A=[],T=[],w=[],C=[],I=new Set,Vr(y.drmInfos,A,w,T,C,I),b={keySystem:b,licenseServerUri:A[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:w[0],serverCertificateUri:T[0],initData:C,keyIds:I};if(e.g=b,!e.g.licenseServerUri)throw new Le(2,6,6012,e.g.keySystem);return E(m,a.createMediaKeys(),6);case 6:return g=m.h,xi(e.j),e.u=g,e.W=!0,E(m,Cr(e),7);case 7:xi(e.j),k(m,0);break;case 4:if(v=S(m),xi(e.j,v),e.g=null,e.G.clear(),v instanceof Le)throw v;throw new Le(2,6,6002,v.message)}}))}function Or(e,t){var n,i,r,a,s;return P((function(o){switch(o.g){case 1:try{n=e.u.createSession("persistent-license")}catch(t){return i=new Le(2,6,6005,t.message),e.m(i),o.return(Promise.reject(i))}return e.s.C(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):xr(e,t)})),e.s.C(n,"keystatuseschange",(function(t){return Mr(e,t)})),r={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},e.i.set(n,r),_(o,2),E(o,n.load(t),4);case 4:return a=o.h,xi(e.j),a?(r.loaded=!0,Fr(e)&&e.o.resolve(),o.return(n)):(e.i.delete(n),e.m(new Le(2,6,6013)),o.return(Promise.resolve()));case 2:s=S(o),xi(e.j,s),e.i.delete(n),e.m(new Le(2,6,6005,s.message));case 3:return o.return(Promise.resolve())}}))}function xr(e,t){var n,i,r,a,s,o,l,c,d,h,p,f;P((function(g){switch(g.g){case 1:return n=t.target,e.h.logLicenseExchange&&It(t.message),i=e.i.get(n),r=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(s=wi([r],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),Rr(e.g.keySystem)&&function(e){var t=At(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=Er(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=Dt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(s),o=Date.now(),_(g,2),E(g,e.D.kb.request(2,s).promise,4);case 4:l=g.h,k(g,3);break;case 2:return c=S(g),d=new Le(2,6,6007,c),e.m(d),i&&i.Ja&&i.Ja.reject(d),g.return();case 3:return e.j.g?g.return():(e.H+=(Date.now()-o)/1e3,e.h.logLicenseExchange&&It(l.data),_(g,5),E(g,n.update(l.data),7));case 7:k(g,6);break;case 5:return h=S(g),p=new Le(2,6,6008,h.message),e.m(p),i&&i.Ja&&i.Ja.reject(p),g.return();case 6:if(e.j.g)return g.return();f=new vi("drmsessionupdate"),e.D.onEvent(f),i&&(i.Ja&&i.Ja.resolve(),new st((function(){i.loaded=!0,Fr(e)&&e.o.resolve()})).N(Kr)),A(g)}}))}function Mr(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach((function(t,r){if("string"==typeof r){var a=r;r=t,t=a}if(Rr(e.g.keySystem)&&16==r.byteLength&&(navigator.userAgent.match(/Edge?\//)||pt())){var s=(a=De(r)).getUint32(0,!0),o=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,s,!1),a.setUint16(4,o,!1),a.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),r=Lt(r).slice(0,32),e.ia.set(r,t)}));var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Ja&&(e.i.delete(t),t.close().catch((function(){}))),Fr(e)&&(e.o.resolve(),e.O.N(Gr))}function Nr(e){var t;return P((function(n){return t=Array.from(e.i.entries()),e.i.clear(),E(n,Promise.all(t.map((function(t){var n=(t=u(t)).next().value,i=t.next().value;return P((function(t){return 1==t.g?(_(t,2),e.da||e.B.includes(n.sessionId)||"persistent-license"!==i.type?E(t,function(e){var t;return P((function(n){return 1==n.g?(t=new Promise((function(e,t){new st(t).N(jr)})),_(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?k(n,0):(S(n),void A(n))}))}(n),5):E(t,n.remove(),5)):2!=t.g?k(t,0):(S(t),void A(t))}))}))),0)}))}function Br(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=(e=u(e)).next();!i.done;i=e.next()){i=i.value;for(var r={},a=u(t),s=a.next();!s.done;r={Da:r.Da},s=a.next())if(s=s.value,i.keySystem==s.keySystem){r.Da=[],r.Da=r.Da.concat(i.initData||[]),r.Da=r.Da.concat(s.initData||[]),r.Da=r.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(r)),a=i.keyIds&&s.keyIds?new Set([].concat(c(i.keyIds),c(s.keyIds))):i.keyIds||s.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||s.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||s.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||s.persistentStateRequired,videoRobustness:i.videoRobustness||s.videoRobustness,audioRobustness:i.audioRobustness||s.audioRobustness,serverCertificate:i.serverCertificate||s.serverCertificate,serverCertificateUri:i.serverCertificateUri||s.serverCertificateUri,initData:r.Da,keyIds:a});break}}return n}function Ur(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Fr(e){return function(e,t){for(var n=(e=u(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function Vr(e,t,n,i,r,a){for(var s={},o=(e=u(e)).next();!o.done;s={oa:s.oa},o=e.next()){if(s.oa=o.value,t.includes(s.oa.licenseServerUri)||t.push(s.oa.licenseServerUri),i.includes(s.oa.serverCertificateUri)||i.push(s.oa.serverCertificateUri),s.oa.serverCertificate&&(n.some(function(e){return function(t){return Se(t,e.oa.serverCertificate)}}(s))||n.push(s.oa.serverCertificate)),s.oa.initData){o={};for(var l=u(s.oa.initData),c=l.next();!c.done;o={Dc:o.Dc},c=l.next())o.Dc=c.value,r.some(function(e){return function(t){var n=e.Dc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Se(t.initData,n.initData)}}(o))||r.push(o.Dc)}if(s.oa.keyIds)for(l=(o=u(s.oa.keyIds)).next();!l.done;l=o.next())a.add(l.value)}}function Hr(t,n,i,r){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&(n=n.get(a)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),r[a]&&(t.keySystem=r[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}(i=Tr.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e},i.Yb=function(e){var t,n=this;return P((function(i){if(1==i.g)return n.u?(n.l=e,n.s.ma(n.l,"play",(function(){for(var e=u(n.J),t=e.next();!t.done;t=e.next())xr(n,t.value);n.M=!0,n.J=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.s.C(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Nr(n)})),(t=n.g.initData.find((function(e){return 0<e.initData.length})))||"com.apple.fps"!==n.g.keySystem||n.B.length?E(i,wr(n),2):i.A(2)):(n.s.ma(e,"encrypted",(function(){n.m(new Le(2,6,6010))})),i.return());Ir(n),t||n.B.length||n.h.parseInbandPsshEnabled||n.s.C(n.l,"encrypted",(function(e){return function(e,t){return P((function(n){if(1==n.g)return E(n,wr(e),2);Dr(e,t.initDataType,Ie(t.initData)),A(n)}))}(n,e)})),A(i)}))},i.ic=function(){for(var e=1/0,t=this.i.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Qc=function(){return Vi(this.ba)};var jr=1,Kr=5,Gr=.5,Wr=new rt((function(){return Ce(new Uint8Array([0]))}));function Yr(){}function zr(e,t,n,i){var r,a,s,o;return P((function(l){if(1==l.g)return i&&(r=Xr[i.toLowerCase()])?l.return(r):(a=$r(e))&&(s=Zr[a])?l.return(s):i?l.A(2):E(l,qr(e,t,n),3);if(2!=l.g&&(i=l.h)&&(o=Xr[i]))return l.return(o);throw new Le(2,4,4e3,e)}))}function qr(e,t,n){var i,r,a;return P((function(s){return 1==s.g?((i=wi([e],n)).method="HEAD",E(s,t.request(0,i).promise,2)):(r=s.h,a=r.headers["content-type"],s.return(a?a.toLowerCase().split(";").shift():""))}))}function $r(e){return 1==(e=new Oe(e).qa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",Yr),Yr.unregisterParserByMime=function(e){delete Xr[e]},Yr.registerParserByMime=function(e,t){Xr[e]=t},Yr.registerParserByExtension=function(e,t){Zr[e]=t};var Xr={},Zr={};function Qr(e,t,n,i,r){var a=ea.value(),s=e.subarray(n.start,n.start+n.size),o=De(s),l=new Uint8Array(n.size+a.byteLength);for(l.set(s,0),(s=De(l)).setUint32(4,r),l.set(a,n.size),r=o.getUint32(4),s.setUint32(n.size+16,r),Jr(l,0,l.byteLength),r=new Uint8Array(e.byteLength+l.byteLength),n=ut()?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(l,n),r.set(a,n+l.byteLength),i=(e=u(i)).next();!i.done;i=e.next())Jr(r,(i=i.value).start,i.size+l.byteLength);return l=De(r,t.start),t=Qi(t),e=l.getUint32(t),l.setUint32(t,e+1),r}function Jr(e,t,n){0!=(t=(e=De(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var ea=new rt((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function ta(e,t,n,i,r){if(i>=r)return null;for(var a=-1,s=-1,o=0;o<n.length;o++)if(n[o].some((function(e){return null!=e&&""!=e.g.trim()}))){a=o;break}for(o=n.length-1;0<=o;o--)if(n[o].some((function(e){return null!=e&&""!=e.g.trim()}))){s=o;break}if(-1===a||-1===s)return null;for(var l=o=!1,u="white",c="black",d=na(i,r,o,l,u,c);a<=s;a++){for(var h=n[a],p=-1,f=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}if(-1===p||-1===f)h=ia(i,r),e.nestedCues.push(h);else{for(;p<=f;p++)if(g=h[p]){var v=g.l,m=g.i,y=g.j,b=g.h;v==o&&m==l&&y==u&&b==c||(d.payload&&e.nestedCues.push(d),d=na(i,r,v,m,y,b),o=v,l=m,u=y,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==s&&(d=ia(i,r),e.nestedCues.push(d)),d=na(i,r,o,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function na(e,t,n,i,r,a){return e=new re(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function ia(e,t){return(e=new re(e,t,"")).lineBreak=!0,e}function ra(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function aa(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",oa(this)}function sa(e,t,n){return ta(new re(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function oa(e){ca(e,0,15),e.g=1}function la(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case da:i=ga.has(n)?ga.get(n):String.fromCharCode(n);break;case ha:i=va.get(n);break;case pa:e.i[e.g].pop(),i=ma.get(n);break;case fa:e.i[e.g].pop(),i=ya.get(n)}i&&e.i[e.g].push(new ra(i,e.m,e.j,e.o,e.l))}}function ua(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function ca(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var da=0,ha=1,pa=2,fa=3,ga=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),va=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),ma=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),ya=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function ba(e,t){this.h=Ta,this.o=new aa(e,t),this.i=new aa(e,t),this.l=new aa(e,t),this.g=this.i,this.j=0,this.m=null}function Ea(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Sa&&e.h!==wa&&(r=sa(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,ca(n,0,15),(n=e.l).g=0<n.h?n.h:0,ca(n,0,15),i.g=15),e.h=Sa,i.h=t,r}function Aa(e){e.h=ka,e.g=e.l,e.g.h=0}function _a(e){z("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=wa}var Ta=0,ka=1,Sa=3,wa=4,Ca="black green blue cyan red yellow magenta black".split(" "),Ia="white green blue cyan red yellow magenta white_italics".split(" ");function Da(){this.l=!1,this.B=this.F=0,this.D=Ba,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Ra(this)}function Ra(e){e.i=[];for(var t=0;16>t;t++)e.i.push(La())}function La(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Pa(e,t){Oa(e)&&(e.i[e.h][e.g]=new ra(t,e.u,e.o,e.m,e.s),e.g++)}function Oa(e){var t=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function xa(e,t,n){var i=new re(e.j,t,"");return i.textAlign=e.D===Ma?"left":e.D===Na?"right":oe,(n=ta(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Da.prototype.isVisible=function(){return this.l};var Ma=0,Na=1,Ba=2;function Ua(){this.i=[],this.h=null,this.g=0}function Fa(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Va(e.h)),e.h=null,e.g=0))}function Va(e){this.g=0,this.h=e}function Ha(e){if(!e.ga())throw new Le(2,2,3e3);return e.h[e.g++]}function ja(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Ka(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=Ha(t).value,t=null;for(var r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=xa(r,i,e.i)),Ra(r);return t}if(137===n)for(n=(t=u(Ga(e,t=Ha(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=Ha(t).value,t=null,r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=xa(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=Ha(t).value,t=null,r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=xa(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return Wa(e,t=Ha(t).value,i);if(143===n)return i=Wa(e,255,i),Ya(e),i;if(144===n)t.skip(1),i=Ha(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i));else if(145===n)i=Ha(t).value,n=Ha(t).value,t.skip(1),e.g&&(t=za((48&n)>>4,(12&n)>>2,3&n),e.g.s=za((48&i)>>4,(12&i)>>2,3&i),e.g.m=t);else if(146===n)i=Ha(t).value,t=Ha(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=Ha(t).value,t.skip(1),e.g&&(e.g.D=3&i);else if(152<=n&&159>=n){if(n=(15&n)-8,!(r=null!==e.h[n])){var a=new Da;a.j=i,e.h[n]=a}i=Ha(t).value,Ha(t),Ha(t),a=Ha(t).value;var s=Ha(t).value;t=Ha(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&a),t.B=1+(63&s),e.g=e.h[n]}}}return null}function Ga(e,t){for(var n=[],i=0;8>i;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function Wa(e,t,n){for(var i=null,r=(t=u(Ga(e,t))).next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=xa(a,n,e.i)),e.h[r]=null}return i}function Ya(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function za(e,t,n){var i={0:0,1:0,2:1,3:1};return $a[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}Va.prototype.ga=function(){return this.g<this.h.length},Va.prototype.Z=function(){return this.g},Va.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Le(2,2,3e3);this.g+=e};var qa=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),$a="black blue green cyan red magenta yellow white".split(" ");function Xa(){this.h=[],this.g=[],this.i=new Ua,this.l=0,this.s=new Map([["CC1",new ba(0,0)],["CC2",new ba(0,1)],["CC3",new ba(1,0)],["CC4",new ba(1,1)]]),this.o=this.m=0,this.j=new Map,Za(this)}function Za(e){e.m=0,e.o=0;for(var t=(e=u(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,oa(t.i),oa(t.l),oa(t.o)}function Qa(e,t){var n=t.type;if(16==(112&t.xa)){var i=t.xa>>3&1;0===n?e.m=i:e.o=i}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.xa&&255===t.La||!t.xa&&!t.La||!es(t.xa)||!es(t.La))return 45<=++e.l&&Za(e),null;if(e.l=0,t.xa&=127,t.La&=127,!t.xa&&!t.La)return null;if(e=null,16==(112&t.xa))e:{if(i=t.xa,e=t.La,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16==(240&i)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1];var r=(30&e)>>1;i="white";var a=!1;if(7>r?i=Ia[r]:7===r&&(a=!0),e=1==(1&e),n.h!==wa){if(r=n.g,n.h===Sa&&t!==r.g){var s=1+t-r.h;ua(r,s,1+r.g-r.h,r.h),ca(r,0,s-1),ca(r,t+1,15-t)}r.g=t,n.g.m=e,n.g.j=a,n.g.l=i,n.g.o="black"}}else if(17==(247&i)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",la(n.g,da,32),i=!1,"white_italics"===(t=Ia[(14&e)>>1])&&(t="white",i=!0),n.g.m=1==(1&e),n.g.j=i,n.g.l=t;else if(16==(247&i)&&32==(240&e)||23==(247&i)&&45==(255&e))t="black",0==(7&i)&&(t=Ca[(14&e)>>1]),n.g.o=t;else if(17==(247&i)&&48==(240&e))la(n.g,ha,e);else if(18==(246&i)&&32==(224&e))la(n.g,1&i?fa:pa,e);else if(20==(246&i)&&32==(240&e)){switch(e=t.pts,i=null,t.La){case 32:Aa(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Ea(n,2,e);break;case 38:i=Ea(n,3,e);break;case 39:i=Ea(n,4,e);break;case 40:la(n.g,da,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=e;break;case 42:oa(n.o),_a(n);break;case 43:_a(n);break;case 44:t=n.i,i=null,n.h!==wa&&(i=sa(t,n.j,e)),ca(t,0,15);break;case 45:t=n.g,n.h!==Sa?i=null:(i=sa(t,n.j,e),ua(t,(a=t.g-t.h+1)-1,a,t.h),ca(t,0,a-1),ca(t,t.g,15-t.g),n.j=e);break;case 46:ca(n.l,0,15);break;case 47:t=null,n.h!==wa&&(t=sa(n.i,n.j,e)),i=n.l,n.l=n.i,n.i=i,Aa(n),n.j=e,i=t}e=i;break e}e=null}else i=t.La,la(n.g,da,t.xa),la(n.g,da,i);return e}function Ja(e,t){var n=[];try{for(;t.ga();){var i=Ha(t).value,r=(224&i)>>5,a=31&i;if(7===r&&0!=a&&(r=63&Ha(t).value),0!=r){e.j.has(r)||e.j.set(r,new ja(r));for(var s=e.j.get(r),o=t.Z();t.Z()-o<a;){var l=Ha(r=t),u=l.value,c=l.pts;if(16===u)u=u<<16|Ha(r).value;if(0<=u&&31>=u){var d=c;if(s.g){var h=s.g;switch(r=null,u){case 8:!Oa(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.B-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(r=xa(h,d,s.i)),h.h+1>=h.F){d=h;for(var p=0,f=1;16>f;f++,p++)d.i[p]=d.i[f];for(f=0;1>f;f++,p++)d.i[p]=La()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(r=xa(h,d,s.i)),h.i[h.h]=La(),h.g=0;break;case 12:h.isVisible()&&(r=xa(h,d,s.i)),Ra(h),(d=h).h=0,d.g=0}var g=r}else g=null}else if(128<=u&&159>=u)g=Ka(s,r,u,c);else{if(4096<=u&&4127>=u)8<=(d=255&u)&&15>=d?r.skip(1):16<=d&&23>=d?r.skip(2):24<=d&&31>=d&&r.skip(3);else if(4224<=u&&4255>=u)128<=(d=255&u)&&135>=d?r.skip(4):136<=d&&143>=d&&r.skip(5);else if(32<=u&&127>=u)r=u,s.g&&Pa(s.g,127===r?"♪":String.fromCharCode(r));else if(160<=u&&255>=u)s.g&&Pa(s.g,String.fromCharCode(u));else if(4128<=u&&4223>=u){if(r=255&u,s.g)if(qa.has(r)){var v=qa.get(r);Pa(s.g,v)}else Pa(s.g,"_")}else 4256<=u&&4351>=u&&s.g&&Pa(s.g,160!=(255&u)?"_":"[CC]");g=null}(r=g)&&n.push(r)}}}}catch(e){if(!(e instanceof Le&&3e3===e.code))throw e;z("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function es(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function ts(){}function ns(e,t){var n=null,i=null,r=null,a=e.K();return 1&t&&(r=e.$a()),2&t&&e.skip(4),8&t&&(n=e.K()),16&t&&(i=e.K()),{trackId:a,Ce:n,xf:i,th:r}}function is(e,t){return{we:1==t?e.$a():e.K()}}function rs(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.K()}}function as(e,t,n){var i=e.K(),r=[],a=null;1&n&&(a=e.K()),4&n&&e.skip(4);for(var s=0;s<i;s++){var o={ee:null,sampleSize:null,ed:null};256&n&&(o.ee=e.K()),512&n&&(o.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(o.ed=0==t?e.K():e.Pe()),r.push(o)}return{yh:i,Re:r,wf:a}}function ss(){this.j=new Map,this.i=this.h=0,this.g=os}ts.prototype.init=function(){},ts.prototype.parse=function(){return[]},ss.prototype.init=function(e){function t(e){(e=e.name)in cs&&(n.g=cs[e])}var n=this,i=[],r=[];if((new Wi).box("moov",Yi).box("mvex",Yi).P("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.K(),t=t.K(),n.h=e,n.i=t})).box("trak",Yi).P("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.K(),i.push(e)})).box("mdia",Yi).P("mdhd",(function(e){e=rs(e.reader,e.version),r.push(e.timescale)})).box("minf",Yi).box("stbl",Yi).P("stsd",zi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",qi).box("sinf",Yi).box("frma",(function(e){(e=Zi(e=e.reader.K()))in cs&&(n.g=cs[e])})).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new Le(2,2,2010);this.g==os&&Y("Unable to determine bitstream format for CEA parsing!"),i.forEach((function(e,t){n.j.set(e,r[t])}))},ss.prototype.parse=function(e){var t=this;if(this.g==os)return[];var n=[],i=this.h,r=this.i,a=[],s=null,o=null,l=null,d=9e4;return(new Wi).box("moof",(function(e){s=e.start,Yi(e)})).box("traf",Yi).P("trun",(function(e){e=as(e.reader,e.version,e.flags),a=e.Re,o=e.wf})).P("tfhd",(function(e){e=ns(e.reader,e.flags),i=e.Ce||t.h,r=e.xf||t.i,e=e.trackId,t.j.has(e)&&(d=t.j.get(e))})).P("tfdt",(function(e){l=is(e.reader,e.version).we})).box("mdat",(function(e){if(null===l)throw new Le(2,2,2010);e:{var h=e.reader,p=l,f=d,g=i,v=r,m=a,y=0,b=v;for(m.length&&(b=m[0].sampleSize||v),h.skip((s||0)+(o||0)-e.start-8);h.ga();){e=h.K();var E=h.Ra();switch(t.g){case ls:E=6==(E&=31);break;case us:E=39==(E=E>>1&63)||40==E;break;default:break e}if(E){E=0,m.length>y&&(E=m[y].ed||0),E=(p+E)/f;for(var A,_=[],T=h.Za(e-1),k=A=0;k<T.length;)2==A&&3==T[k]?(A=0,(T=[].concat(c(T))).splice(k,1),T=new Uint8Array(T)):0==T[k]?A++:A=0,k++;for(A=T,k=0;k<A.length;){for(T=0;255==A[k];)T+=255,k++;T+=A[k++];for(var S=0;255==A[k];)S+=255,k++;S+=A[k++],4==T&&_.push(A.subarray(k,k+S)),k+=S}for(A=(_=u(_)).next();!A.done;A=_.next())n.push({ig:A.value,pts:E})}else try{h.skip(e-1)}catch(e){break}0==(b-=e+4)&&(p=m.length>y?p+(m[y].ee||g):p+g,y++,b=m.length>y&&m[y].sampleSize||v)}}})).parse(e,!1),n};var os=0,ls=1,us=2,cs={avc1:ls,avc3:ls,hev1:us,hvc1:us,dvh1:us,dvhe:us};function ds(e){this.h=new ts,e.includes("video/mp4")&&(this.h=new ss),this.g=new Xa}function hs(e,t){for(var n=(t=u(t=e.h.parse(t))).next();!n.done;n=t.next()){var i=n.value,r=Ie(i.ig);if(0<r.length&&(n=e.g,i=i.pts,181===(r=new ji(r,0)).Ra()&&49===r.$d()&&1195456820===r.K()&&3===r.Ra())){var a=r.Ra();if(0!=(64&a)){a&=31,r.skip(1);for(var s=0;s<a;s++){var o=r.Ra(),l=(4&o)>>2,d=r.Ra(),h=r.Ra();l&&(0===(o&=3)||1===o?n.h.push({pts:i,type:o,xa:d,La:h,order:n.h.length}):(n.g.push({pts:i,type:o,value:d,order:n.g.length}),n.g.push({pts:i,type:2,value:h,order:n.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i=u(e.h),r=i.next();!r.done;r=i.next())(r=Qa(e,r.value))&&n.push(r);for(r=(i=u(e.g)).next();!r.done;r=i.next())Fa(e.i,r.value);for(r=(i=u(e.i.i)).next();!r.done;r=i.next())r=Ja(e,r.value),n.push.apply(n,c(r));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function ps(e,t,n,i,r){this.ya=e,this.Ba=t,this.ka=n,this.Od=void 0===i?null:i,this.timescale=r}function fs(e,t,n,i,r,a,s,o,l,u,c,d,h,p,f){u=void 0===u?[]:u,p=void 0===p?gs:p,this.startTime=e,this.j=this.endTime=t,this.u=n,this.Ba=i,this.ka=r,this.h=a,this.timestampOffset=s,this.appendWindowStart=o,this.appendWindowEnd=l,this.i=u,this.tilesLayout=void 0===c?"":c,this.s=void 0===d?null:d,this.g=void 0===h?null:h,this.status=p,this.l=void 0===f?null:f,this.o=null,this.m=0}ds.prototype.init=function(e){this.h.init(e)},ps.prototype.lc=function(){return this.Ba},ps.prototype.hc=function(){return this.ka},V("shaka.media.InitSegmentReference",ps),ps.prototype.getEndByte=ps.prototype.hc,ps.prototype.getStartByte=ps.prototype.lc,(i=fs.prototype).ya=function(){return this.u()},i.getStartTime=function(){return this.startTime},i.Ef=function(){return this.endTime},i.lc=function(){return this.Ba},i.hc=function(){return this.ka},i.Vf=function(){return this.tilesLayout},i.Uf=function(){return this.s},i.Eb=function(){return this.status},i.bg=function(){this.status=vs},i.Ye=function(e){this.o=e},i.Sf=function(){return this.o},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=u(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.oe=function(e){null==this.g?W("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},V("shaka.media.SegmentReference",fs),fs.prototype.syncAgainst=fs.prototype.oe,fs.prototype.offset=fs.prototype.offset,fs.prototype.getThumbnailSprite=fs.prototype.Sf,fs.prototype.setThumbnailSprite=fs.prototype.Ye,fs.prototype.markAsUnavailable=fs.prototype.bg,fs.prototype.getStatus=fs.prototype.Eb,fs.prototype.getTileDuration=fs.prototype.Uf,fs.prototype.getTilesLayout=fs.prototype.Vf,fs.prototype.getEndByte=fs.prototype.hc,fs.prototype.getStartByte=fs.prototype.lc,fs.prototype.getEndTime=fs.prototype.Ef,fs.prototype.getStartTime=fs.prototype.getStartTime,fs.prototype.getUris=fs.prototype.ya;var gs=0,vs=1;function ms(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function ys(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function bs(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function Es(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=(e=u(As(e))).next();!i.done;i=e.next()){var r=i.value;i=r.start,(r=r.end)>t&&(n+=r-Math.max(i,t))}return n}function As(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function _s(){}function Ts(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function ks(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=Et(Ie(e.data,1,n));return e=Et(Ie(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(i=Et(Ie(e.data,1,n)),e=Et(Ie(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(i=e.data.indexOf(0))?null:(i=Et(Ie(e.data,0,i)),e=Ce(e.data.subarray(i.length+1)),t.description=i,t.data=e,t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=Et(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Et(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ce(e.data),t):null}function Ss(e){for(var t=0,n=[];t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9];){var i=Ts(e,t+6);for(e[t+5]>>6&1&&(t+=10),i=(t+=10)+i;t+10<i;){var r=e.subarray(t),a=Ts(r,4);(a=ks(r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)}))&&n.push(a),t+=r.size+10}t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]&&(t+=10)}return n}function ws(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}function Cs(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),xh:6+(e[4]<<8|e[5]),pts:null,dts:null},n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),t.data=e.subarray(9+e[8]),t}function Is(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1}function Ds(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&Y("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?Y("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Y(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function Rs(e,t){var n=Ls;switch(t.mimeType){case"video/webm":n=Ps;break;case"video/mp4":n=Os}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}fs.Status={Hg:gs,qh:vs,Xg:2},V("shaka.util.Id3Utils",_s),_s.getID3Frames=Ss,ws.prototype.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Is(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71===e[r]){var a=!!(64&e[r+1]),s=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var o=r+5+e[r+4];if(o===r+188)continue}else o=r+4;switch(s){case 0:a&&(o+=e[o]+1),this.o=(31&e[o+10])<<8|e[o+11];break;case 17:case 8191:break;case this.o:a&&(o+=e[o]+1),s={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var l=o+3+((15&(a=e)[o+1])<<8|a[o+2])-4;for(o+=12+((15&a[o+10])<<8|a[o+11]);o<l;){var u=(31&a[o+1])<<8|a[o+2];switch(a[o]){case 15:-1===s.audio&&(s.audio=u,s.audioCodec="aac");break;case 21:-1===s.Ed&&(s.Ed=u);break;case 27:-1===s.video&&(s.video=u,s.videoCodec="avc");break;case 3:case 4:-1===s.audio&&(s.audio=u,s.audioCodec="mp3");break;case 36:-1===s.video&&(s.video=u,s.videoCodec="hvc")}o+=5+((15&a[o+3])<<8|a[o+4])}a=s,null==this.l&&(this.l=a.video),null==this.g&&(this.g=a.audio),null==this.j&&(this.j=a.Ed),i&&!this.s&&(i=!1,r=t-188),this.s=!0;break;case this.l:a=e.subarray(o,r+188),null==this.m&&(o=Cs(a))&&null!=o.pts&&(this.m=o.pts/9e4),this.B.push(a);break;case this.g:a=e.subarray(o,r+188),null==this.h&&(o=Cs(a))&&null!=o.pts&&(this.h=o.pts/9e4),this.u.push(a);break;case this.j:this.i.push(e.subarray(o,r+188));break;default:i=!0}}return this},ws.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},V("shaka.util.TsParser",ws),Ds.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},V("shaka.lcevc.Dil",Ds),Ds.prototype.release=Ds.prototype.release;var Ls=0,Ps=1,Os=2;function xs(e,t,n,i){var r=this;this.j=e,this.F=null,this.m=t,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=n||function(){},this.D=i||null,this.i={},this.u=new Mi,this.o={},this.s=null,this.J=new it,this.l=function(e,t){var n=new MediaSource;return e.u.ma(n,"sourceopen",(function(){URL.revokeObjectURL(e.M),t.resolve()})),e.M=Zs(n),e.j.src=e.M,n}(this,this.J),this.G=new Oi((function(){return function(e){var t,n,i,r,a,s,o;return P((function(l){if(1==l.g){for(n in t=[],e.i)for(i=e.i[n],r=i[0],e.i[n]=i.slice(0,1),r&&t.push(r.p.catch(qe)),a=u(i.slice(1)),s=a.next();!s.done;s=a.next())s.value.p.reject(new Le(2,7,7003,void 0));for(o in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.o)t.push(e.o[o].destroy());return E(l,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.F=null,e.l=null,e.g=null,e.m=null,e.h={},e.o={},e.s=null,e.i={},e.D=null,A(l)}))}(r)})),this.M="",this.B=!1,this.W=new it}function Ms(e,t,n){e.g||(e.g=new zt(e.m));var i=e.g;e=e.H,"application/cea-608"!=t&&"application/cea-708"!=t&&(i.j=(0,Qt[t])(),i.j.setSequenceMode?i.j.setSequenceMode(n):Y('Text parsers should have a "setSequenceMode" method!'),i.u=e)}function Ns(e){return!e.l||"ended"==e.l.readyState}function Bs(e,t){return t==et?e.g.g:ms(Fs(e,t))}function Us(e,t){return t==et?e.g.h:ys(Fs(e,t))}function Fs(e,t){try{return e.h[t].buffered}catch(e){return null}}function Vs(e,t,n,i,r,a,s){var o,l,c,d,h,p,f,g,v,m,y,b,_,T,k,S,w,C,I,D,R,L;return a=void 0!==a&&a,s=void 0!==s&&s,P((function(O){switch(O.g){case 1:if(t!=(o=tt).X){O.A(2);break}if(!e.B){O.A(3);break}return E(O,e.W,4);case 4:l=O.h,e.g.s=l;case 3:return E(O,function(e,t,n,i){var r,a,s,o;return P((function(l){return 1==l.g?E(l,Promise.resolve(),2):e.j&&e.i?null==n||null==i?(e.j.parseInit(Ie(t)),l.return()):(r=e.u?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:r},s=e.j.parseMedia(Ie(t),a),o=s.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m})),e.i.append(o),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),void A(l)):l.return()}))}(e.g,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return O.return();case 2:if(c=Ie(n),d=e.L[t],e.o[t]&&(d=e.o[t].o),0>Is(c)?Js.includes(d)&&((g=Ss(c)).length&&i&&(v={cueTime:i.startTime,data:c,frames:g,dts:i.startTime,pts:i.startTime},e.V([v],0,i.endTime))):(h=(new ws).parse(c),p=i.startTime-(h.getStartTime()[t]||0),f=function(e){for(var t=[],n=new Uint8Array(0),i=e.i.length-1;0<=i;i--){var r=Cs(n=Pt(e.i[i],n));r&&(t.unshift({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:Ss(r.data),dts:r.dts,pts:r.pts}),n=new Uint8Array(0))}return t}(h),f.length&&e.V(f,p,i?i.endTime:null)),!e.o[t]){r&&t==o.va&&(e.g||Ms(e,"text/vtt",e.B),e.s||(e.s=new ds(d)),i?(m=hs(e.s,n)).length&&(y=e.h[o.va].timestampOffset,Zt(e.g,m,i.startTime,i.endTime,y)):e.s.init(n)),O.A(6);break}return a&&e.o[t].g.resetCaptions(),E(O,function(e,t){return e.j=!0,e.h=new it,e.l=[],e.i=[],t=Ie(t),e.g.push(t),e.g.flush(),e.j&&e.h.reject(new Le(2,3,3018)),e.h}(e.o[t],n),7);case 7:b=O.h,e.g||Ms(e,"text/vtt",e.B),b.captions&&b.captions.length&&(_=e.h[o.va].timestampOffset,T=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new re(n.startTime,n.endTime,n.text)});return t}(b.captions),Zt(e.g,T,i?i.startTime:null,i?i.endTime:null,_)),n=b.data;case 6:if(n=function(e,t,n,i){var r=e.O[i];return null==n&&r&&(ct()||ut())&&"mp4"==e.L[i].split(";")[0].split("/")[1]&&(t=function(e){function t(){r=!0}function n(e){a.push(e),Yi(e)}e=Ie(e);var i,r=!1,a=[],s=[];if((new Wi).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).P("stsd",(function(e){i=e,a.push(e),zi(e)})).P("encv",t).P("enca",t).P("hev1",(function(e){s.push({box:e,lb:1701733238})})).P("hvc1",(function(e){s.push({box:e,lb:1701733238})})).P("avc1",(function(e){s.push({box:e,lb:1701733238})})).P("avc3",(function(e){s.push({box:e,lb:1701733238})})).P("ac-3",(function(e){s.push({box:e,lb:1701733217})})).P("ec-3",(function(e){s.push({box:e,lb:1701733217})})).P("mp4a",(function(e){s.push({box:e,lb:1701733217})})).parse(e),r)return e;if(0==s.length||!i)throw Lt(e),new Le(2,3,3019);s.reverse();for(var o=u(s),l=o.next();!l.done;l=o.next())l=l.value,e=Qr(e,i,l.box,a,l.lb);return e}(t)),t}(e,n,i?i.startTime:null,t),k=e.h[t],S=Qs,!e.B||k.mode==S||!i){O.A(8);break}if(w=e.l.duration,!(t==o.va||!(o.va in e.h))){O.A(9);break}return C=[k.appendWindowStart,k.appendWindowEnd],k.appendWindowStart=0,k.appendWindowEnd=1/0,I=k.timestampOffset,k.timestampOffset=0,E(O,zs(e,t,(function(){return js(e,t,n)})),10);case 10:return E(O,zs(e,t,(function(){return Gs(e,t)})),11);case 11:return k.timestampOffset=I,k.appendWindowStart=C[0],k.appendWindowEnd=C[1],D=ms(Fs(e,t)),R=(i.startTime||0)-(D||0),e.W.resolve(R),E(O,zs(e,t,(function(){return Ks(e,t,0,w)})),12);case 12:if(t!=o.va){O.A(9);break}return E(O,zs(e,t,(function(){e.j.currentTime-=.001,Ys(e,t)})),9);case 9:return k.mode=S,E(O,e.Aa(w),8);case 8:return i&&e.B&&t!=o.X&&(a||s)&&(L=i.startTime,zs(e,t,(function(){return Gs(e,t)})),zs(e,t,(function(){return Ws(e,t,L)}))),E(O,zs(e,t,(function(){js(e,t,n)})),16);case 16:A(O)}}))}function Hs(e,t){return P((function(n){return t==tt.X?e.g?E(n,e.g.remove(0,1/0),0):n.return():E(n,zs(e,t,(function(){return Ks(e,t,0,e.l.duration)})),0)}))}function js(e,t,n){if("video"==t&&e.D){var i=e.D;i.g&&i.g.appendBuffer(n,"video",i.i)}e.h[t].appendBuffer(n)}function Ks(e,t,n,i){i<=n?Ys(e,t):e.h[t].remove(n,i)}function Gs(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Ys(e,t)}function Ws(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Ys(e,t)}function Ys(e,t){var n=e.i[t][0];n&&(n.p.resolve(),$s(e,t))}function zs(e,t,n){return xi(e.G),n={start:n,p:new it},e.i[t].push(n),1==e.i[t].length&&Xs(e,t),n.p}function qs(e,t){var n,i,r,a,s;return P((function(o){switch(o.g){case 1:for(r in xi(e.G),n=[],i={},e.h)i.Ub=new it,a={start:function(e){return function(){return e.Ub.resolve()}}(i),p:i.Ub},e.i[r].push(a),n.push(i.Ub),1==e.i[r].length&&a.start(),i={Ub:i.Ub};return _(o,2),E(o,Promise.all(n),4);case 4:k(o,3);break;case 2:throw S(o);case 3:try{t()}catch(e){throw new Le(2,3,3015,e)}finally{for(s in e.h)$s(e,s)}A(o)}}))}function $s(e,t){e.i[t].shift(),Xs(e,t)}function Xs(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Le(2,3,3017,t)):n.p.reject(new Le(2,3,3015,i)),$s(e,t)}}(i=xs.prototype).destroy=function(){return this.G.destroy()},i.init=function(e,t,n){n=void 0!==n&&n;var i,r,a,s,o,l,c,d,h=this;return P((function(p){if(1==p.g)return i=tt,E(p,h.J,2);for(h.B=n,r={},a=u(e.keys()),s=a.next();!s.done;r={na:r.na},s=a.next())r.na=s.value,o=e.get(r.na),l=jt(o.mimeType,o.codecs),r.na==i.X?Ms(h,l,n):(!t&&Q(l)||!Bt(l,r.na)||(h.o[r.na]=new Nt(l),l=Ft(r.na,l)),c=l+h.F.sourceBufferExtraFeatures,d=h.l.addSourceBuffer(c),h.u.C(d,"error",function(e){return function(){h.i[e.na][0].p.reject(new Le(2,3,3014,h.j.error?h.j.error.code:0))}}(r)),h.u.C(d,"updateend",function(e){return function(){return Ys(h,e.na)}}(r)),h.h[r.na]=d,h.L[r.na]=l,h.i[r.na]=[],h.O[r.na]=!!o.drmInfos.length);A(p)}))},i.configure=function(e){this.F=e},i.Na=function(){var e={total:As(this.j.buffered),audio:As(Fs(this,"audio")),video:As(Fs(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return P((function(r){return E(r,e==tt.X?i.g.remove(t,n):zs(i,e,(function(){return Ks(i,e,t,n)})),0)}))},i.flush=function(e){var t=this;return P((function(n){return e==tt.X?n.return():E(n,zs(t,e,(function(){t.j.currentTime-=.001,Ys(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return P((function(n){return E(n,qs(t,(function(){Ns(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},i.Aa=function(e){var t=this;return P((function(n){return E(n,qs(t,(function(){if(e<t.l.duration)for(var n in t.h){var i={start:function(){},p:new it};t.i[n].unshift(i)}t.l.duration=e})),0)}))},i.getDuration=function(){return this.l.duration};var Zs=e.URL.createObjectURL,Qs="sequence",Js=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function eo(e,t,n){this.i=e,this.m=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=void 0===n||n,this.F=0,this.G=!1}function to(e,t,n){this.l=n,this.j=e,this.s=io(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function no(e){this.g=e}function io(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=u(As(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ro(e,t,n,i,r){var a=this;this.o=r,this.g=e,this.s=t,this.D=n,this.i=new Mi,this.m=!1,this.B=e.readyState,this.u=0,this.h=i,this.l=!1,this.i.C(e,"waiting",(function(){return ao(a)})),this.j=new st((function(){ao(a)})).Ca(.25)}function ao(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.B&&(e.B=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,i=io(n),r=n.g.currentTime,a=Date.now()/1e3;t.g==r&&t.s==i||(t.m=a,t.g=r,t.s=i,t.h=!1),(i=(r=a-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new vi("stalldetected"))),t=!i}t&&(t=e.g.currentTime,i=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=As(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)})),0<=e?e:null)}(n=e.g.buffered,t,e.D.gapDetectionThreshold),null==i||0==i&&!e.l||((r=n.start(i))>=e.s.Oa()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,e.u++,e.o(new vi("gapjumped")))))}}}function so(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=oo.value().get(t),n.ma(e,t,i))}(i=eo.prototype).getDuration=function(){return this.j},i.Kf=function(){return this.g},i.Xe=function(e){this.i=e},i.Aa=function(e){this.j=e},i.Pf=function(){return this.i},i.Ve=function(e){this.s=e},i.yc=function(e){this.u=e},i.me=function(e){this.o=e},i.We=function(e){this.m=e},i.Df=function(){return this.m},i.Ib=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,i=(e=u(e)).next();!i.done;i=e.next())i=i.value,t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime);this.Td(t),this.h=Math.max(this.h,n),null!=this.i&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},i.Md=function(){this.G=!0},i.Td=function(e){this.l=null==this.l?e:Math.min(this.l,e)},i.Sd=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},i.U=function(){return 1/0==this.j&&!this.u},i.jb=function(){return 1/0!=this.j&&!this.u},i.Pa=function(){return Math.max(this.B,this.gb()-this.o)},i.Ze=function(e){this.B=e},i.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},i.kc=function(e){var t=Math.max(this.l,this.B);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.o+e,this.Oa()))},i.Db=function(){return this.kc(0)},i.Oa=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},i.df=function(){return!(null==this.i||null!=this.h&&this.D)},i.Ue=function(e){this.F=e},V("shaka.media.PresentationTimeline",eo),eo.prototype.setAvailabilityTimeOffset=eo.prototype.Ue,eo.prototype.usingPresentationStartTime=eo.prototype.df,eo.prototype.getSeekRangeEnd=eo.prototype.Oa,eo.prototype.getSeekRangeStart=eo.prototype.Db,eo.prototype.getSafeSeekRangeStart=eo.prototype.kc,eo.prototype.getSegmentAvailabilityEnd=eo.prototype.gb,eo.prototype.setUserSeekStart=eo.prototype.Ze,eo.prototype.getSegmentAvailabilityStart=eo.prototype.Pa,eo.prototype.isInProgress=eo.prototype.jb,eo.prototype.isLive=eo.prototype.U,eo.prototype.offset=eo.prototype.offset,eo.prototype.notifyMaxSegmentDuration=eo.prototype.Sd,eo.prototype.notifyMinSegmentStartTime=eo.prototype.Td,eo.prototype.lockStartTime=eo.prototype.Md,eo.prototype.notifySegments=eo.prototype.Ib,eo.prototype.getDelay=eo.prototype.Df,eo.prototype.setDelay=eo.prototype.We,eo.prototype.setSegmentAvailabilityDuration=eo.prototype.me,eo.prototype.setStatic=eo.prototype.yc,eo.prototype.setClockOffset=eo.prototype.Ve,eo.prototype.getPresentationStartTime=eo.prototype.Pf,eo.prototype.setDuration=eo.prototype.Aa,eo.prototype.setPresentationStartTime=eo.prototype.Xe,eo.prototype.getMaxSegmentDuration=eo.prototype.Kf,eo.prototype.getDuration=eo.prototype.getDuration,to.prototype.release=function(){this.l=this.j=null,this.i=function(){}},ro.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},ro.prototype.Wd=function(){this.l=!0,ao(this)};var oo=new rt((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function lo(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Mi,this.i=new fo(e),so(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){ho(i,i.j)}))}function uo(e){return e.m?e.g.currentTime:e.j}function co(e,t){0<e.g.readyState?go(e.i,t):so(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){ho(e,e.j)}))}function ho(e,t){.001>Math.abs(e.g.currentTime-t)?po(e):(e.h.ma(e.g,"seeking",(function(){po(e)})),go(e.i,0==e.g.currentTime?t:e.g.currentTime))}function po(e){e.m=!0,e.h.C(e.g,"seeking",(function(){return e.l()}))}function fo(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new st((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function go(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function vo(e){this.g=e,this.j=!1,this.h=null,this.i=new Mi}function mo(e,t,n,i,r,a){var s=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.u=r,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new to(new no(e),t.stallThreshold,n),function(e,t){e.i=t}(t,(function(){i?e.currentTime+=i:(e.pause(),e.play())})),t}(e,n,a),this.j=new ro(e,t.presentationTimeline,n,this.o,a),this.h=new lo(e,(function(){var e=s.j;e.m=!0,e.l=!1;var t=uo(s.h);return e=bo(s,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!s.s||s.s<t-1)?(s.s=t,co(s.h,e),e=void 0):(s.u(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Db():e.g.Oa():0>t&&(t=e.g.Oa()+t),yo(e,Eo(e,t))}(this,i)),this.m=new st((function(){if(0!=s.i.readyState&&!s.i.paused){var e=uo(s.h),t=s.g.Db(),n=s.g.Oa();3>n-t&&(t=n-3),e<t&&(e=bo(s,e),s.i.currentTime=e)}}))}function yo(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function bo(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Db(),a=e.g.Oa(),s=e.g.getDuration();3>a-r&&(r=a-3);var o=e.g.kc(n),l=e.g.kc(i);return n=e.g.kc(n+i),t>=s?yo(e,t):t>a?a:t<r?bs(e.i.buffered,l)?l:n:t>=o||bs(e.i.buffered,t)?t:n}function Eo(e,t){var n=e.g.Db();return t<n?n:t>(e=e.g.Oa())?e:t}function Ao(e){this.g=e,this.h=null,this.i=0,this.j=!1}function _o(e,t){for(var n=(e=u(e.g)).next();!n.done;n=e.next())t(n.value)}function To(e,t,n){return new Ao([new fs(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function ko(e,t,n){this.i=e,this.g=t,this.h=n}function So(){Ao.call(this,[]),this.l=[]}function wo(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Tc(),this.h=new st((function(){t.g.Me(.25*t.i)}))}function Co(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Tc()!=t&&e.g.le(t))}catch(e){}e.h.Ca(.25),0!=e.g.Tc()&&e.g.le(0)}function Io(e){var t=this;this.h=e,this.g=new Set,this.i=new st((function(){Do(t,!1)})).Ca(.25)}function Do(e,t){for(var n=u(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Ro(e){bi.call(this),this.g=new Map,this.h=e}function Lo(e){bi.call(this);var t=this;this.g=new Set,this.i=e,this.h=new st((function(){for(var e=t.i(),n=u(t.g),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&(t.g.delete(i),i=new vi("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}function Po(e){bi.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{rb:null,qb:Mo,ib:function(e,n){return Oo(t,"enter",e,n)}},{rb:xo,qb:Mo,ib:function(e,n){return Oo(t,"enter",e,n)}},{rb:No,qb:Mo,ib:function(e,n){return Oo(t,"enter",e,n)}},{rb:Mo,qb:xo,ib:function(e,n){return Oo(t,"exit",e,n)}},{rb:Mo,qb:No,ib:function(e,n){return Oo(t,"exit",e,n)}},{rb:xo,qb:No,ib:function(e,n){return Oo(t,"skip",e,n)}},{rb:No,qb:xo,ib:function(e,n){return Oo(t,"skip",e,n)}}],this.h=new Mi,this.h.C(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Oo(e,t,n,i){t=new vi(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}lo.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},fo.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(i=vo.prototype).yd=function(){var e=this;so(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==e.h||0==e.h?e.j=!0:(e.i.ma(e.g,"seeking",(function(){e.j=!0})),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},i.zd=function(e){this.h=this.j?this.h:e},i.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},i.ue=function(){return 0},i.te=function(){return 0},i.Ne=function(){},(i=mo.prototype).yd=function(){this.m.Ca(.25)},i.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},i.zd=function(e){co(this.h,e)},i.Ic=function(){var e=uo(this.h);return 0<this.i.readyState&&!this.i.paused?Eo(this,e):e},i.ue=function(){return this.o?this.o.o:0},i.te=function(){return this.j.u},i.Ne=function(){this.j.Wd()},(i=Ao.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},i.cg=function(){this.j=!0},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.j)for(var t=u(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.pc=function(e){if(!this.j&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,c(e))}},i.Hb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.pc(e),this.eb(t)},i.eb=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.Wa=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new fs(e.startTime,t,e.u,e.Ba,e.ka,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.s,e.g,e.status,e.l))}},i.fd=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new st((function(){var e=t();e?n.g.push.apply(n.g,c(e)):(n.h.stop(),n.h=null)})),this.h.Ca(e))},Ao.prototype[Symbol.iterator]=function(){return this.Cb(0)},Ao.prototype.Cb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var a=n.i[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new ko(this,t,i)},V("shaka.media.SegmentIndex",Ao),Ao.forSingleSegment=To,Ao.prototype.getIteratorForTime=Ao.prototype.Cb,Ao.prototype.updateEvery=Ao.prototype.fd,Ao.prototype.fit=Ao.prototype.Wa,Ao.prototype.evict=Ao.prototype.eb,Ao.prototype.mergeAndEvict=Ao.prototype.Hb,Ao.prototype.offset=Ao.prototype.offset,Ao.prototype.get=Ao.prototype.get,Ao.prototype.find=Ao.prototype.find,Ao.prototype.markImmutable=Ao.prototype.cg,Ao.prototype.release=Ao.prototype.release,ko.prototype.vf=function(){return this.g},ko.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.ya().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},ko.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.ya().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},V("shaka.media.SegmentIterator",ko),ko.prototype.next=ko.prototype.next,ko.prototype.current=ko.prototype.current,ko.prototype.currentPosition=ko.prototype.vf,v(So,Ao),(i=So.prototype).clone=function(){var e=new So;return e.l=this.l.slice(),e},i.release=function(){for(var e=u(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},i.find=function(e){for(var t=0,n=u(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.i+i.g.length}return null},i.get=function(e){for(var t=0,n=u(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.i+i.g.length}return null},i.offset=function(){},i.pc=function(){},i.eb=function(){},i.Hb=function(){},i.Wa=function(){},i.fd=function(){},V("shaka.media.MetaSegmentIndex",So),So.prototype.updateEvery=So.prototype.fd,So.prototype.fit=So.prototype.Wa,So.prototype.mergeAndEvict=So.prototype.Hb,So.prototype.evict=So.prototype.eb,So.prototype.merge=So.prototype.pc,So.prototype.offset=So.prototype.offset,So.prototype.get=So.prototype.get,So.prototype.find=So.prototype.find,So.prototype.release=So.prototype.release,wo.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},wo.prototype.set=function(e){this.i=e,Co(this)},wo.prototype.Pc=function(){return this.g.Pc()},Io.prototype.release=function(){this.i.stop();for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},v(Ro,bi),Ro.prototype.release=function(){this.g.clear(),bi.prototype.release.call(this)},Ro.prototype.j=function(e){for(var t=u(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).rc,r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.Od;break e}}i=null}if((r=i)&&(r=!((r=n.Ae)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r)e:{if(r=e,a=i.contentType,(a=this.h()[a])&&0<a.length){var s=a[a.length-1].end;if(r>=a[0].start&&r<s){r=!0;break e}}r=!1}r&&(n.Ae=i,JSON.stringify(i),n=new vi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},v(Lo,bi),Lo.prototype.release=function(){this.g.clear(),this.h.stop(),bi.prototype.release.call(this)},v(Po,bi),Po.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,bi.prototype.release.call(this)},Po.prototype.j=function(e,t){for(var n=u(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?xo:e>i.endTime?No:Mo;this.g.set(i,a);for(var s=u(this.l),o=s.next();!o.done;o=s.next())(o=o.value).rb==r&&o.qb==a&&o.ib(i,t)}};var xo=1,Mo=2,No=3;function Bo(e,t,n,i,r){return e=wi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Uo(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Oi((function(){return function(e){var t,n,i,r;return P((function(a){if(1==a.g){for(t=[],n=u(e.j.values()),i=n.next();!i.done;i=n.next())Zo(r=i.value),t.push(Qo(r));return E(a,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,A(a)}))}(n)}))}function Fo(e,t){var n=e.j.get("video");if(n){var i=n.stream;i&&(t?(t=i.trickModeVideo)&&!n.ob&&(jo(e,t,!1,0,!1),n.ob=i):(i=n.ob)&&(n.ob=null,jo(e,i,!0,0,!1)))}}function Vo(e,t,n,i,r,a){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,a=void 0!==a&&a,e.l=t,e.B&&(t.video&&jo(e,t.video,n,i,r,a),t.audio&&jo(e,t.audio,n,i,r,a))}function Ho(e,t){e.o=t,e.B&&jo(e,t,!0,0,!1)}function jo(e,t,n,i,r,a){var s=e.j.get(t.type);s||t.type!=et?s&&(s.ob&&(t.trickModeVideo?(s.ob=t,t=t.trickModeVideo):s.ob=null),s.stream!=t||r)&&(t.type==et&&Ms(e.g.R,jt(t.mimeType,t.codecs),e.m.sequenceMode),s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.aa=null,s.ve=!!a,n&&(s.ac?s.hd=!0:s.ra?(s.bb=!0,s.Nc=i,s.hd=!0):(Zo(s),$o(e,s,!0,i).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,i;return P((function(r){if(1==r.g)return t.ta?(n=t.stream,i=t.ta,n.segmentIndex?r.A(2):E(r,n.createSegmentIndex(),2)):r.return();if(t.ta!=i||t.stream!=n)return r.return();var a=e.g.Sc(),s=Us(e.g.R,t.type),o=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),l=null==o?null:t.stream.segmentIndex.get(o);o=l&&l.ka?l.ka-l.Ba:null,l&&!o&&(o=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),o?((l=l.h)&&(o+=(l.ka?l.ka-l.Ba:null)||0),a=8*o/(l=e.g.getBandwidthEstimate())<(s||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ta.h.g>o):a=!1,a&&t.ta.abort(),A(r)}))}(e,s).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,i,r,a;P((function(s){switch(s.g){case 1:return n=tt,_(s,2),E(s,Hs(e.g.R,n.X),4);case 4:k(s,3);break;case 2:i=S(s),e.g&&e.g.onError(i);case 3:r=jt(t.mimeType,t.codecs),Ms(e.g.R,r,e.m.sequenceMode),(e.g.R.m.isTextVisible()||e.i.alwaysStreamText)&&(a=Go(t),e.j.set(n.X,a),Xo(e,a,0)),A(s)}}))}(e,t)}function Ko(e,t){t.ac||t.bb||(t.ra?(t.bb=!0,t.Nc=0):null==Bs(e.g.R,t.type)?null==t.Ka&&Xo(e,t,0):(Zo(t),$o(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Go(e){return{stream:e,type:e.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}function Wo(t,n){var i,r,a,s,o;return P((function(l){switch(l.g){case 1:if(xi(t.h),n.ra||null==n.Ka||n.ac)return l.return();if(n.Ka=null,!n.bb){l.A(2);break}return E(l,$o(t,n,n.hd,n.Nc),3);case 3:return l.return();case 2:if(n.stream.segmentIndex){l.A(4);break}return i=n.stream,E(l,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.ra||n.Ka||Xo(t,n,0),l.return();case 4:_(l,6),r=function(t,n){if(zo(n))return function(e,t){var n=Us(e,"video")||0;$t(e.g,t,n)}(t.g.R,n.stream.originalId||""),null;n.type==et&&function(e){e.g&&$t(e.g,"",0)}(t.g.R);var i=t.g.Sc(),r=n.pa?n.pa.endTime:i,a=function(e,t,n){return t==et?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):Es(e=Fs(e,t),n)}(t.g.R,n.type,i),s=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.u,o=t.m.presentationTimeline.getDuration()-r,l=Us(t.g.R,n.type);if(1e-6>o&&l)return n.endOfStream=!0,"video"==n.type&&(t=t.j.get(et))&&zo(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=s)return t.i.updateIntervalSeconds/2;if(a=function(e,t,n,i){if(t.aa)return t.aa.current();if(t.pa||i)return n=t.pa?t.pa.endTime:i,t.Rd=!0,t.aa=t.stream.segmentIndex.Cb(n),t.aa&&t.aa.next().value;e=e.i.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.aa=t.stream.segmentIndex.Cb(i),r=t.aa&&t.aa.next().value),r||(t.aa=t.stream.segmentIndex.Cb(n),r=t.aa&&t.aa.next().value),r}(t,n,i,l),!a)return t.i.updateIntervalSeconds;for(s=1/0,o=u(o=Array.from(t.j.values())),l=o.next();!l.done;l=o.next())zo(l=l.value)||l.aa&&!l.aa.current()||(s=Math.min(s,l.pa?l.pa.endTime:i));return r>=s+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(function(t,n,i,r){var a,s,o,l,u,c,d,h,p,f,g,v,m,y;return P((function(b){switch(b.g){case 1:if(a=tt,s=n.stream,o=n.aa,n.ra=!0,_(b,2),2==r.Eb())throw new Le(1,1,1011);return E(b,function(e,t,n){var i,r,a,s,o,l,u,c;return P((function(d){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(s=n.timestampOffset)==t.Kd&&r==t.Jd&&a==t.Id||(o=function(){var n;return P((function(i){if(1==i.g)return _(i,2),t.Jd=r,t.Id=a,t.Kd=s,E(i,function(e,t,n,i,r,a){return P((function(s){return t==tt.X?(a||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,i,r),s.return()):E(s,Promise.all([zs(e,t,(function(){return Gs(e,t)})),a?Promise.resolve():zs(e,t,(function(){return Ws(e,t,n)})),zs(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,Ys(e,t)}))]),0)}))}(e.g.R,t.type,s,r,a,e.m.sequenceMode),4);if(2!=i.g)return k(i,0);throw n=S(i),t.Jd=null,t.Id=null,t.Kd=null,n}))},i.push(o())),!function(e,t){return e&&t?e.lc()==t.lc()&&e.hc()==t.hc()&&ie(e.ya(),t.ya()):e==t}(n.h,t.Zc)&&(t.Zc=n.h)&&(l=qo(e,t,n.h),u=function(){var i,r,a;return P((function(s){switch(s.g){case 1:return _(s,2),E(s,l,4);case 4:return i=s.h,xi(e.h),(new Wi).box("moov",Yi).box("trak",Yi).box("mdia",Yi).P("mdhd",(function(e){e=rs(e.reader||0,e.version||0),n.h.timescale=e.timescale})).parse(i),r=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(s,e.g.xe(t.type,i),5);case 5:return E(s,Vs(e.g.R,t.type,i,null,r),6);case 6:k(s,0);break;case 2:throw a=S(s),t.Zc=null,a}}))},e.g.fg(n.startTime,n.h),i.push(u())),e.m.sequenceMode&&(c=t.pa?t.pa.m:null,n.m!=c||t.Rd)&&(t.Rd=!1,i.push(function(e,t,n){return P((function(i){return t==tt.X?i.return():(zs(e,t,(function(){return Gs(e,t)})),E(i,zs(e,t,(function(){return Ws(e,t,n)})),0))}))}(e.g.R,t.type,n.startTime))),E(d,Promise.all(i),0)}))}(t,n,r),4);case 4:return xi(t.h),t.s?b.return():(l="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,u=e.ReadableStream,t.i.lowLatencyMode&&u&&l&&!r.l?(d=new Uint8Array(0),p=h=!1,f=function(e){var a,o,l;return P((function(u){return h?u.return():(p=!0,xi(t.h),t.s?u.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),a=!1,o=0,(new Wi).box("mdat",(function(e){o=e.size+e.start,a=!0})).parse(d,!1,!0),a?(l=d.subarray(0,o),d=d.subarray(o),E(u,Yo(t,n,i,s,r,l),0)):u.A(0)))}))},E(b,qo(t,n,r,f),11)):E(b,qo(t,n,r),7));case 7:if(c=b.h,xi(t.h),t.s)return b.return();if(!r.l){b.A(8);break}return E(b,function(t,n,i){var r,a,s,o;return P((function(l){if(1==l.g)return(r=n.l).cryptoKey?l.A(2):E(l,r.fetchKey(),3);if(!(a=r.iv))for(a=Ie(new ArrayBuffer(16)),s=r.firstMediaSequenceNumber+i.g,o=a.byteLength-1;0<=o;o--)a[o]=255&s,s>>=8;return l.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))}))}(c,r,o),9);case 9:c=b.h;case 8:return xi(t.h),n.bb?(n.ra=!1,Xo(t,n,0),b.return()):E(b,Yo(t,n,i,s,r,c),6);case 11:if(g=b.h,p){b.A(6);break}return h=!0,xi(t.h),t.s?b.return():n.bb?(n.ra=!1,Xo(t,n,0),b.return()):E(b,Yo(t,n,i,s,r,g),6);case 6:if(xi(t.h),t.s)return b.return();n.pa=r,o.next(),n.ra=!1,n.be=!1,v=t.g.R.Na(),m=v[n.type],JSON.stringify(m),n.bb||t.g.Wd(r.startTime,r.endTime,n.type),Xo(t,n,0),k(b,0);break;case 2:if(y=S(b),xi(t.h,y),t.s)return b.return();if(n.ra=!1,7001==y.code)n.ra=!1,Zo(n),Xo(t,n,0),b.A(0);else if(n.type==a.X&&t.i.ignoreTextStreamFailures)t.j.delete(a.X),b.A(0);else{if(3017!=y.code)return n.nc=!0,y.severity=2,E(b,Jo(t,y),0);(function(e,t,n){if(!Array.from(e.j.values()).some((function(e){return e!=t&&e.be}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.nc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.be=!0}Xo(e,t,4)})(t,n,y),b.A(0)}}}))}(t,n,i,a).catch((function(){})),null)}(t,n),null!=r&&(Xo(t,n,r),n.nc=!1),k(l,7);break;case 6:return a=S(l),E(l,Jo(t,a),8);case 8:return l.return();case 7:if(s=Array.from(t.j.values()),!t.B||!s.every((function(e){return e.endOfStream}))){l.A(0);break}return E(l,t.g.R.endOfStream(),10);case 10:xi(t.h),0!=(o=t.g.R.getDuration())&&o<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Aa(o),A(l)}}))}function Yo(e,t,n,i,r,a){var s,o,l,u,c,d;return P((function(h){switch(h.g){case 1:return s=i.closedCaptions&&0<i.closedCaptions.size,l=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,u=e.i.parsePrftBox&&!e.D,(l||u)&&(o=new Wi),l&&o.P("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.sc(),s=t.reader.sc(),o=t.reader.K(),l=t.reader.K(),u=t.reader.K(),c=t.reader.K(),d=r.startTime+l/o;else o=t.reader.K(),l=(d=t.reader.$a()/o+r.timestampOffset)-r.startTime,u=t.reader.K(),c=t.reader.K(),a=t.reader.sc(),s=t.reader.sc();t=t.reader.Za(t.reader.S.byteLength-t.reader.Z()),(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.g.gg():"https://aomedia.org/emsg/ID3"==a?(n=Ss(t)).length&&r&&e.g.hg([{cueTime:r.startTime,data:t,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime):(n=new vi("emsg",n=(new Map).set("detail",{startTime:d,endTime:d+u/o,schemeIdUri:a,value:s,timescale:o,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t})),e.g.onEvent(n)))})),u&&o.P("prft",(function(t){e:{if(!e.D&&r.h.timescale){t.reader.K();var n=t.reader.K();if(n=1e3*n+t.reader.K()/Math.pow(2,32)*1e3,0===t.version)var i=t.reader.K();else try{i=t.reader.$a()}catch(t){e.D=!0,i=void 0;break e}t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+n).getTime(),i=new vi("prft",i=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-i/r.h.timescale*1e3)})),e.g.onEvent(i),e.D=!0}i=void 0}return i})),(l||u)&&o.parse(a),E(h,function(e,t,n){var i,r,a;return P((function(s){if(1==s.g)return i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(r=Bs(e.g.R,t.type))||.01>=(a=n-r-i)?s.return():E(s,e.g.R.remove(t.type,r,r+a),2);xi(e.h),A(s)}))}(e,t,n),2);case 2:return xi(e.h),c=t.vc,t.vc=!1,d=t.ve,t.ve=!1,E(h,e.g.xe(t.type,a),3);case 3:return E(h,Vs(e.g.R,t.type,a,r,s,c,d),4);case 4:xi(e.h),A(h)}}))}function zo(e){return e&&e.type==et&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function qo(e,t,n,i){var r,a,s,o,l;return P((function(u){return 1==u.g?(r=Ri,a=Bo(n.ya(),n.Ba,n.ka,e.i.retryParameters,i),s=t.stream,e.g.modifySegmentRequest(a,{type:s.type,init:n instanceof ps,duration:n.endTime-n.startTime,mimeType:s.mimeType,codecs:s.codecs,bandwidth:s.bandwidth}),o=e.g.kb.request(r,a),t.ta=o,E(u,o.promise,2)):(l=u.h,t.ta=null,u.return(l.data))}))}function $o(e,t,n,i){var r,a;return P((function(s){return 1==s.g?(t.bb=!1,t.hd=!1,t.Nc=0,t.ac=!0,t.pa=null,t.Zc=null,t.aa=null,i?(r=e.g.Sc(),a=e.g.R.getDuration(),E(s,e.g.R.remove(t.type,r+i,a),3)):E(s,Hs(e.g.R,t.type),4)):3!=s.g?(xi(e.h),n?E(s,e.g.R.flush(t.type),3):s.A(3)):(xi(e.h),t.ac=!1,t.endOfStream=!1,t.ra||t.Ka||Xo(e,t,0),void A(s))}))}function Xo(e,t,n){var i=t.type;(i!=et||e.j.has(i))&&(t.Ka=new at((function(){var n;return P((function(i){return 1==i.g?(_(i,2),E(i,Wo(e,t),4)):2!=i.g?k(i,0):(n=S(i),e.g&&e.g.onError(n),void A(i))}))})).N(n))}function Zo(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Qo(e){return P((function(t){return e.ta?E(t,e.ta.abort(),0):t.A(0)}))}function Jo(e,t){return P((function(n){if(1==n.g)return E(n,ui(e.F),2);xi(e.h),e.g.onError(t),t.handled||e.i.failureCallback(t),A(n)}))}function el(e,t){var n=Hu(),i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return function(e){return P((function(t){if(e.s.g)t=t.A(0);else{if(0==e.m.length||e.g&&!e.g.hb)var n=!1;else{e.g&&(e.g.Ia.mb(),e.g=null);var i=(n=e.m.shift()).create(e.l);i?(n.Ia.Jb(),e.g={node:i.node,payload:i.payload,hb:i.hb,Ia:n.Ia}):n.Ia.dd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return P((function(i){switch(i.g){case 1:return e.i=e.j.Mf(e.i,e.l,e.g.node,e.g.payload),_(i,2),e.h=e.j.yf(e.i,e.l,e.g.payload),E(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ia.bd(),e.g=null),k(i,0);break;case 2:return 7001==(t=S(i)).code?e.g.Ia.mb():e.g.Ia.onError(t),e.g=null,e.h=null,n=e,E(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,A(i)}}))}(e):(e.j.eg(e.i),e.o=new it,n=e.o),t=E(t,n,1)}return t}))}(i)})),this.s=new Oi((function(){return function(e){var t,n;return P((function(i){if(1==i.g)return e.h&&e.h.abort(),nl(e),E(i,e.u,2);for(e.g&&e.g.Ia.mb(),t=u(e.m),n=t.next();!n.done;n=t.next())n.value.Ia.mb();e.g=null,e.m=[],e.j=null,A(i)}))}(i)}))}function tl(e,t){var n={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return e.m.push({create:t,Ia:n}),e.h&&e.h.abort(),nl(e),n}function nl(e){e.o&&(e.o.resolve(),e.o=null)}function il(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(il).join(""):n+e.payload+t}function rl(e,t){for(var n=(e=u(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)rl(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[],i.payload=il(n),t.push(i)}return t}function al(e){this.g=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function sl(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ol(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function ll(){}function ul(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function cl(t,n){var i=this;this.j=!1,this.i=[],this.B=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new st((function(){pl(i)})).Ca(.25),this.h=new Map,this.s=new Mi,this.s.C(document,"fullscreenchange",(function(){pl(i,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){pl(i,!0)})),this.l.observe(this.g)),this.o=new Map}function dl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function hl(e,t,n,i,r){for(var a=!1,s=[],o=[],l=(t=u(t)).next();!l.done;l=t.next()){l=l.value,r.push(l);var c=e.h.get(l),d=l.startTime<=i&&l.endTime>i,h=c?c.ef:null;c&&(s.push(c.Bd),c.tc&&s.push(c.tc),d||(a=!0,e.h.delete(l),c=null)),d&&(o.push(l),c?dl(e,h)||(a=!0):(fl(e,l,r),h=(c=e.h.get(l)).ef,a=!0)),0<l.nestedCues.length&&h&&hl(e,l.nestedCues,h,i,r),r.pop()}if(a){for(r=(i=u(s)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(o.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),l=(o=u(o)).next();!l.done;l=o.next())(i=e.h.get(l.value)).tc?(n.appendChild(i.tc),i.tc.appendChild(i.Bd)):n.appendChild(i.Bd)}}function pl(e,t){if(e.g){var n=e.B.currentTime;if(!e.j||void 0!==t&&t){for(var i=(t=u(e.o.values())).next();!i.done;i=t.next())ul(i.value);ul(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map;for(var r=(i=u(e.h.keys())).next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));hl(e,e.i,e.g,n,[])}}}function fl(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),i=!i&&0<t.nestedCues.length;var a=document.createElement(r);if("br"!=r&&function(e,t,n,i,r){var a=t.style,s=0==n.nestedCues.length,o=1<i.length;a.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=gl(n.linePadding,n,e.m),a.paddingRight=gl(n.linePadding,n,e.m),a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,(function(e){return e.backgroundColor})))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.textContent=l)}o&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=gl(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(a.position="absolute",n.writingMode==he?(a.width="100%",n.lineAlign==fe?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==fe?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==fe?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))),a.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==he?a.paddingLeft=n.position:a.paddingTop=n.position),"line-left"==n.positionAlign?a.cssFloat="left":"line-right"==n.positionAlign&&(a.cssFloat="right"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==he?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,i),n=null,t.region&&t.region.id)if(r=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==_e?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==_e?"%":"px"),e.o.has(r))n=e.o.get(r);else{var s=document.createElement("span"),o=n.heightUnits==_e?"%":"px",l=n.widthUnits==_e?"%":"px",u=n.viewportAnchorUnits==_e?"%":"px";s.id="shaka-text-region---"+r,s.classList.add("shaka-text-region"),s.style.height=n.height+o,s.style.width=n.width+l,s.style.position="absolute",s.style.top=n.viewportAnchorY+u,s.style.left=n.viewportAnchorX+u,s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(r,s),n=s}r=a,i&&((r=document.createElement("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,a.appendChild(r)),e.h.set(t,{Bd:a,ef:r,tc:n})}function gl(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function vl(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function ml(e,t,n){try{if(e.g.enabled){var i={d:1e3*n.duration,st:e.h.U()?Rl:Dl};i.ot=function(e){var t=e.type;if(e.init)return wl;if("video"==t)return e.codecs.includes(",")?Sl:kl;if("audio"==t)return Tl;if("text"==t)return"application/mp4"===e.mimeType?Il:Cl}(n);var r=i.ot===kl||i.ot===Tl||i.ot===Sl||i.ot===Il;r&&(i.bl=function(e,t){if(t=e.h.Na()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,n.type)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==Il&&(i.tb=function(e,t){var n=e.h.Xa();if(!n.length)return NaN;e=n[0];for(var i=(n=u(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case kl:return e.videoBandwidth||NaN;case Tl:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),bl(e,t,i)}}catch(e){z("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}}function yl(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function bl(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,yl(e)),n.pr=e.h.Rc();var r=n.ot===kl||n.ot===Sl;if(e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),i)e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=(t=u(t)).next();!s.done;s=t.next())s=s.value,r[null!=a[s]?a[s]:1][s]=e[s];for(e=0;e<r.length;e++)(a=El(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=El(n);a&&(t.uris=t.uris.map((function(e){return Al(e,a)})))}}}function El(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},s=Object.keys(e||{}).sort(),o=(s=u(s)).next();!o.done;o=s.next()){var l=e[o=o.value];if(i(l)&&("v"!==o||1!==l)&&("pr"!=o||1!==l)){var c=a[o];c&&(l=c(l));var d;d="string"===(c=typeof l)&&"ot"!==o&&"sf"!==o&&"st"!==o?o+"="+JSON.stringify(l):"boolean"===c?o:"symbol"===c?o+"="+l.description:o+"="+l,r.push(d)}}return r.join(",")}function Al(e,t){return!t||e.includes("offline:")?e:((e=new Oe(e)).g.set("CMCD",t),e.toString())}(i=Uo.prototype).destroy=function(){return this.h.destroy()},i.configure=function(e){this.i=e,this.F=new li({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},i.start=function(){var e=this;return P((function(t){if(1==t.g)return E(t,function(e){var t,n,i,r,a,s,o,l,c,d;return P((function(h){if(1==h.g){if(t=tt,!e.l)throw new Le(2,5,5006);return n=new Map,i=new Set,e.l.audio&&(n.set(t.Hc,e.l.audio),i.add(e.l.audio)),e.l.video&&(n.set(t.va,e.l.video),i.add(e.l.video)),e.o&&(n.set(t.X,e.o),i.add(e.o)),r=e.g.R,a=e.i.forceTransmux,E(h,r.init(n,a,e.m.sequenceMode),2)}for(xi(e.h),e.updateDuration(),s=u(n.keys()),o=s.next();!o.done;o=s.next())l=o.value,c=n.get(l),e.j.has(l)||(d=Go(c),e.j.set(l,d),Xo(e,d,0));A(h)}))}(e),2);xi(e.h),e.B=!0,A(t)}))},i.vc=function(){if(this.g)for(var e=this.g.Sc(),t=u(this.j.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;(n=this.j.get(i)).aa=null;var r=this.g.R;if(i==et?r=null!=(r=r.g).g&&null!=r.h&&(e>=r.g&&e<r.h):r=bs(r=Fs(r,i),e),!r){if((null!=Us(this.g.R,i)||n.ra)&&Ko(this,n),n.ta&&(n.ta.abort(),n.ta=null),i===et&&(i=this.g.R).s)for((i=i.s.g).l=0,i.h=[],i.g=[],(r=i.i).i=[],r.h=[],r.g=0,Za(i),r=(i=u(i.j.values())).next();!r.done;r=i.next())Ya(r.value);n.vc=!0}}},i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))},el.prototype.destroy=function(){return this.s.destroy()},(i=al.prototype).remove=function(e,t){return!!this.g&&(ol(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){var t=rl(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},r=(t=u(t)).next();!r.done;i={sb:i.sb},r=t.next())i.sb=r.value,e.some(function(e){return function(t){return t.startTime==e.sb.startTime&&t.endTime==e.sb.endTime&&t.text==e.sb.payload}}(i))||(r=sl(i.sb))&&n.push(r);for(i=(e=u(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!i.done;i=e.next())this.g.addCue(i.value)},i.destroy=function(){return this.g&&(ol(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},V("shaka.text.SimpleTextDisplayer",al),al.prototype.setTextVisibility=al.prototype.setTextVisibility,al.prototype.isTextVisible=al.prototype.isTextVisible,al.prototype.destroy=al.prototype.destroy,al.prototype.append=al.prototype.append,al.prototype.remove=al.prototype.remove,V("shaka.util.Dom",ll),ll.removeAllChildren=ul,(i=cl.prototype).append=function(e){for(var t=[].concat(c(this.i)),n={},i=(e=u(e)).next();!i.done;n={Cc:n.Cc},i=e.next())n.Cc=i.value,t.some(function(e){return function(t){return ae(t,e.Cc)}}(n))||this.i.push(n.Cc);pl(this)},i.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),pl(this,n>this.i.length),!0},i.isTextVisible=function(){return this.j},i.setTextVisibility=function(e){this.j=e},V("shaka.text.UITextDisplayer",cl),cl.prototype.setTextVisibility=cl.prototype.setTextVisibility,cl.prototype.isTextVisible=cl.prototype.isTextVisible,cl.prototype.remove=cl.prototype.remove,cl.prototype.destroy=cl.prototype.destroy,cl.prototype.append=cl.prototype.append,V("shaka.text.WebVttGenerator",(function(){}));var _l="m",Tl="a",kl="v",Sl="av",wl="i",Cl="c",Il="tt",Dl="v",Rl="l";function Ll(){}function Pl(e,t,n,i,r){var a,s=r in i,o=!0;for(a in t){var l=r+"."+a,u=s?i[r]:n[a];s||a in n?void 0===t[a]?void 0===u||s?delete e[a]:e[a]=Ei(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ei(u)),l=Pl(e[a],t[a],u,i,l),o=o&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(W("Invalid config, wrong type for "+l),o=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&Y("Unexpected number of arguments for "+l),e[a]=t[a]):(W("Invalid config, unrecognized key "+l),o=!1)}return o}function Ol(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function xl(e,t){return e&&t}function Ml(){}function Nl(e){return new Oe(e=_t(e)).Ha}function Bl(e,t,n){function i(e){De(a).setUint32(s,e.byteLength,!0),s+=4,a.set(Ie(e),s),s+=e.byteLength}if(!n||!n.byteLength)throw new Le(2,6,6015);var r;r="string"==typeof t?kt(t,!0):t,e=kt(e=_t(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),a}function Ul(){}function Fl(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return"com.apple.fps.1_0"==n.keySystem&&"skd"==t&&(t=n.serverCertificate,e=Bl(e,n=Nl(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ut()},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return xl([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return xl([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(gt("Web0S")||ct()||gt("CrKey"))&&(i.stallSkip=0);var r={trackSelectionCallback:function(e){return P((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return P((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?E(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return xl([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:t,manifest:n,streaming:i,mediaSource:{sourceBufferExtraFeatures:""},offline:r,abrFactory:function(){return new Kn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return r.trackSelectionCallback=function(e){return P((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=ln(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return rn(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));for(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),t=[],i.length&&(n=Math.floor(i.length/2),i.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(i[n])),e=u(e),i=e.next();!i.done;i=e.next())(i=i.value).type!=et&&"image"!=i.type||t.push(i);return t}(e,a.preferredAudioLanguage))}))},a}function Vl(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Pl(e,t,n||Fl(),i,"")}function Hl(){this.g=null,this.h=[]}function jl(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Kl(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=(e=u(e.h)).next();!i.done;i=e.next())n+=(i=i.value).state==t?i.duration:0;return n}function Gl(){this.i=this.h=null,this.g=[]}function Wl(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Yl(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new Hl,this.h=new Gl}function zl(t,n){bi.call(this);var i=this;this.l=Gu,this.Uc=this.g=null,this.ia=!1,this.Xc=new Mi,this.Xb=new Mi,this.s=new Mi,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.u=null,this.Yd=1e9,this.h=cu(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new ii(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,n&&n(this),this.D=function(e){return new ki((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent($l("downloadheadersreceived",t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent($l("downloadfailed",t))}))}(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,Xu&&(this.F=Xu()),this.Xc.C(e,"online",(function(){i.ce()})),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var r=new Map;r.set(this.W,(function(e,t){return fi(function(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.Xb.C(t.mediaElement,"error",(function(){var t=Ru(e);t&&Iu(e,t)}))),e.g=t.mediaElement,Promise.resolve()}(i,e,t))})),r.set(this.O,(function(e){return e.mediaElement&&(i.Xb.nb(),e.mediaElement=null),i.F&&i.F.release(),i.g=null,fi(e=Promise.resolve())})),r.set(this.da,(function(e){return fi(Xl(i,e))})),r.set(this.wb,(function(e){return e=function(e,t){var n,i,r,a,s;return P((function(o){if(1==o.g)return n=e.h.textDisplayFactory,i=n(),e.Ud=n,r=function(e,t,n,i){return new xs(e,t,n,i)}(t.mediaElement,i,(function(t,n,i){Zl(e,t,n,i)}),e.L),r.configure(e.h.mediaSource),a=e.h.manifest,s=a.segmentRelativeVttTiming,r.H=s,E(o,r.J,2);e.G=r,A(o)}))}(i,e),fi(e)})),r.set(this.Zd,(function(e,t){return e=function(e,t,n){var i,r,a,s;return P((function(o){if(1==o.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.D,e.Nb=i,a=e,E(o,zr(i,r,e.h.manifest.retryParameters,t.mimeType),2);a.Yc=o.h,e.J=e.Yc(),s=Ei(e.h.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(s.disableVideo=!0),e.J.configure(s),A(o)}))}(i,e,t),fi(e)})),r.set(this.Xd,(function(e){return function(e,t){var n=t.uri;t=e.D,e.Fa=new Lo((function(){return e.uc()})),e.Fa.addEventListener("regionadd",(function(t){t=t.region,Du(e,"timelineregionadded",t),e.F&&e.F.onDashTimedMetadata(t)})),e.ua=null,e.h.streaming.observeQualityChanges&&(e.ua=new Ro((function(){return e.Na()})),e.ua.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent($l("mediaqualitychanged",n))})));var i={networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.V;try{i.g.enabled&&(i.o=n.format,bl(i,t,{ot:_l,su:!i.i}))}catch(e){z("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(t,n){ml(e.V,t,n)},filter:function(t){return du(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=u(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(i=u(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=u(r.closedCaptions.keys()),s=a.next();!s.done;s=a.next())if(s=s.value,!n.has(s)){var o=s.startsWith("CC")?"application/cea-608":"application/cea-708",l=new So;o={id:e.Yd++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:o,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(s),label:null,type:et,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(o),n.add(s)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Fa;e:{for(var i=u(n.g),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new vi("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Iu(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.u&&pu(e,n.keySystem,t)}},r=Date.now()/1e3;return new ci(function(){var t,a,s,o;return P((function(l){if(1==l.g)return t=e,E(l,e.J.start(n,i),2);if(t.i=l.h,a=$l("manifestparsed"),e.dispatchEvent(a),0==e.i.variants.length)throw new Le(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),s=Date.now()/1e3,o=s-r,e.o.F=o,A(l)}))}(),(function(){return e.J.stop()}))}(i,e)})),r.set(this.Qd,(function(e){return e=function(e,t){var n,i;return P((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=eu(e,{kb:e.D,onError:function(t){Iu(e,t)},cd:function(t){Lu(e,t)},onExpirationUpdated:function(t,n){Pu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.o.j=Date.now()/1e3-n,e.L&&((t=e.L).g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),E(r,kr(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?E(r,e.m.Yb(t.mediaElement),3):E(r,du(e,e.i),0)}))}(i,e),fi(e)})),r.set(this.ba,(function(e,t){return fi(function(e,t,n){var i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b;return P((function(_){switch(_.g){case 1:for(t.startTime=n.startTime,null!=e.fc&&(t.startTime=e.fc,e.fc=null),i=t.mediaElement,r=t.uri,e.Nb=r,e.H=new wo({Tc:function(){return i.playbackRate},Pc:function(){return i.defaultPlaybackRate},le:function(e){i.playbackRate=e},Me:function(e){i.currentTime+=e}}),a=function(){return vu(e)},s=function(){return gu(e)},e.s.C(i,"playing",a),e.s.C(i,"pause",a),e.s.C(i,"ended",a),e.s.C(i,"ratechange",s),function(e,t){if(t.lcevc.enabled){var n=e.Xa();n&&n[0]&&n[0].videoMimeType==Zu.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(t.streaming.forceTransmux||Y("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),ql(e),null==e.L&&(e.L=new Ds(e.g,e.cf,t.lcevc),e.G&&(e.G.D=e.L))}else ql(e)}(e,e.h),o=e.h.abrFactory,e.u&&e.Nd==o||(e.Nd=o,e.u=o(),"function"!=typeof e.u.setMediaElement&&(qn("AbrManager","Please use an AbrManager with setMediaElement function."),e.u.setMediaElement=function(){}),e.u.configure(e.h.abr)),e.ub=new ii(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.vb=e.h.preferredTextLanguage,e.cc=e.h.preferredTextRole,e.$b=e.h.preferForcedSubs,Ou(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,i){e.j&&t!=e.j.l&&Eu(e,t,!0,void 0!==n&&n,void 0===i?0:i)})),e.u.setMediaElement(i),dn(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new Uo(e.i,{Sc:function(){return e.B?e.B.Ic():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){ml(e.V,t,n)},R:e.G,kb:e.D,onError:function(t){return Iu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gg:function(){e.J&&e.J.update&&e.J.update()},Wd:function(t,n,i){e.B&&e.B.Ne(),nu(e),t=(new Map).set("start",t).set("end",n).set("contentType",i),e.dispatchEvent($l("segmentappended",t))},fg:function(t,n){(n=n.Od)&&e.ua&&function(e,t,n){var i=function(e,t){var n=e.g.get(t);return n||(n={rc:[],Ae:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.rc;t.rc=r.filter((function(e,t){return!(e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i)}))}else t.rc=[]}(e,i),e={Od:t,position:n},t=(i=i.rc).findIndex((function(e){return e.position>=n})),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.ua,n,t)},xe:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&["audio","video"].includes(t)){var r=0,a=u((n=new tr(Ie(n))).data);for(t=a.next();!t.done;t=a.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{for(r=new Uint8Array(r),a=0,t=(n=u(n.data)).next();!t.done;t=n.next())t=t.value,r.set(t,a),a+=t.length;Dr(i,"cenc",r),i=i.o}}else i=Promise.resolve();return i},hg:function(t,n,i){Zl(e,t,n,i)}})}(e),e.j.configure(e.h.streaming),e.l=Wu,i.textTracks&&e.s.C(i.textTracks,"addtrack",(function(t){if(t.track&&"chapters"===(t=t.track).kind)Jl(e,t)})),e.dispatchEvent($l("streaming")),l=null,(c=e.j.l)||(l=yu(e)),d=[],p=u([(h=c||l).video,h.audio]),f=p.next();!f.done;f=p.next())(g=f.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){_.A(2);break}return E(_,Promise.all(d),2);case 2:if(e.B=function(e,t){return new mo(e.g,e.i,e.h.streaming,t,(function(){e.xb&&Do(e.xb,!0),e.j&&e.j.vc(),e.M&&nu(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.xb=function(e){var t=new Po(e.Fa);t.addEventListener("enter",(function(t){Du(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){Du(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Du(e,"timelineregionenter",n),Du(e,"timelineregionexit",n))}));var n=new Io(e.g);return n.g.add(t),e.ua&&n.g.add(e.ua),n}(e),v=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),tu(e,v),c){_.A(4);break}if(Eu(e,l,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){_.A(5);break}return m=e.B.Ic(),E(_,function(e,t){var n,i,r,a,s;return P((function(o){return 1==o.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return P((function(a){return 1==a.g?e?E(a,e.createSegmentIndex(),2):a.return(null):(i=(n=e.segmentIndex.Cb(t))?n.next().value:null)?(r=i.startTime,a.return(r)):a.return(null)}))},E(o,r(n,t),2)):3!=o.g?(a=o.h,E(o,r(i,t),3)):null!=(s=o.h)&&null!=a?o.return(Math.max(s,a)):null!=s?o.return(s):null!=a?o.return(a):o.return(t)}))}(l,m),6);case 6:y=_.h,e.B.zd(y);case 5:_u(e,null,kn(l));case 4:return e.B.yd(),e.Fb().find((function(e){return e.active}))||((b=On(e.i.textStreams,e.vb,e.cc,e.$b)[0]||null)&&Wl(e.o.h,b,!0),l&&(b?(l.audio&&function(e,t,n){if(0==e.h.autoShowText)return!1;if(1==e.h.autoShowText)return!0;var i=rn(e.h.preferredTextLanguage);return n=rn(n.language),2==e.h.autoShowText?en(n,i):3==e.h.autoShowText?(e=rn(t.language),en(n,i)&&!en(e,n)):(Y("Invalid autoShowText setting!"),!1)}(e,l.audio,b)&&(e.ia=!0),e.ia&&e.G.m.setTextVisibility(!0),wu(e)):e.ia=!1),b&&(e.h.streaming.alwaysStreamText||e.Hd())&&Ho(e.j,b)),E(_,e.j.start(),7);case 7:e.h.abr.enabled&&(e.u.enable(),Cu(e)),_n(e.j?e.j.l:null,e.i),Mu(e.i),Tu(e),mu(e),e.i.variants.some((function(e){return e.primary})),e.dc=!0,e.s.ma(i,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),A(_)}}))}(i,e,t))})),r.set(this.de,(function(e,t){return e=function(e,t,n){var i,r,a,s,o,l,u;return P((function(c){return 1==c.g?(i=tt,r=Date.now()/1e3,a=!0,e.m=eu(e,{kb:e.D,onError:function(t){Iu(e,t)},cd:function(t){Lu(e,t)},onExpirationUpdated:function(t,n){Pu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&a&&(a=!1,e.o.j=Date.now()/1e3-r)}}),e.m.configure(e.h.drm),s=n.uri||"",o=$r(s),"application/x-mpegurl"==(l=Zu[o])&&ht()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:l,codecs:n.mimeType?Wt(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,E(c,kr(e.m,[u],[]),2)):E(c,e.m.Yb(t.mediaElement),0)}))}(i,e,t),fi(e)})),r.set(this.yb,(function(e,t){return function(e,t,n){function i(){return vu(e)}t.uri=n.uri,t.startTime=n.startTime,e.Nb=t.uri;var r=t.mediaElement;e.B=new vo(r);var a=!1;e.Zb.push((function(){a=!0})),null!=t.startTime&&e.B.zd(t.startTime),e.H=new wo({Tc:function(){return r.playbackRate},Pc:function(){return r.defaultPlaybackRate},le:function(e){r.playbackRate=e},Me:function(e){r.currentTime+=e}}),tu(e,e.h.streaming.rebufferingGoal),e.s.C(r,"playing",i),e.s.C(r,"pause",i),e.s.C(r,"ended",i),e.s.C(r,"ratechange",(function(){return gu(e)})),"none"!=r.preload&&e.s.ma(r,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),r.audioTracks&&(e.s.C(r.audioTracks,"addtrack",(function(){return Tu(e)})),e.s.C(r.audioTracks,"removetrack",(function(){return Tu(e)})),e.s.C(r.audioTracks,"change",(function(){return Tu(e)}))),r.textTracks&&(e.s.C(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.s.C(t,"cuechange",(function(){if(t.activeCues)for(var n=u(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,Ql(e,i.startTime,i.endTime,i.type,i.value),e.F&&e.F.onCueMetadataChange(i.value)}));var n=new st((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}(e,t);break;case"chapters":Jl(e,t);break;default:Tu(e)}})),e.s.C(r.textTracks,"removetrack",(function(){return Tu(e)})),e.s.C(r.textTracks,"change",(function(){return Tu(e)})));var s=$r(t.uri);r.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=yl(e);e:{switch(n){case"video/webm":case"video/mp4":var r=Sl;break e;case"application/x-mpegurl":r=_l;break e}r=void 0}return i.ot=r,i.su=!0,Al(t,El(i))}catch(e){return z("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.V,t.uri,Zu[s]),(ct()||gt("Web0S"))&&r.load(),e.l=Yu,e.dispatchEvent($l("streaming"));var o=new it;return so(r,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.B.yd(),o.resolve()})),so(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){return P((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.ge(t);var n=e.h.preferredVariantRole;""!=n&&e.ge(t,n)}}(e),ru(e).find((function(e){return"disabled"!=e.mode}))?t.A(2):E(t,new Promise((function(t){e.s.ma(r.textTracks,"change",t),new st(t).N(1)})),2)):a?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.he(t,"",n);var i=e.h.preferredTextRole;""!=i&&e.he(t,i,n)}}(e),void A(t))}))})),r.error?o.reject(Ru(e)):"none"==r.preload&&(Y('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),o.resolve()),e.s.ma(r,"error",(function(){o.reject(Ru(e))})),new ci(o,(function(){return o.reject(new Le(2,7,7001)),Promise.resolve()})).Y((function(){e.dc=!0}))}(i,e,t)})),this.Ga=new el(this.O,{Mf:function(e,t,n,r){var a=null;return e==i.O&&(a=n==i.O?i.O:i.W),e==i.W&&(a=n==i.O||t.mediaElement!=r.mediaElement?i.O:n==i.W?i.W:n==i.wb||n==i.ba?i.wb:n==i.yb?i.de:null),e==i.wb&&(a=n==i.ba&&t.mediaElement==r.mediaElement?i.Zd:i.da),e==i.Zd&&(a=Vu(i.ba,i.Xd,i.da,n,t,r)),e==i.Xd&&(a=Vu(i.ba,i.Qd,i.da,n,t,r)),e==i.Qd&&(a=Vu(i.ba,i.ba,i.da,n,t,r)),e==i.de&&(a=n==i.yb&&t.mediaElement==r.mediaElement?i.yb:i.da),e!=i.ba&&e!=i.yb||(a=i.da),e==i.da&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.W:i.O),a},yf:function(e,t,n){return i.dispatchEvent($l("onstatechange",(new Map).set("state",e.name))),r.get(e)(t,n)},handleError:function(e){return P((function(t){return 1==t.g?E(t,Xl(i,e),2):t.return(e.mediaElement?i.W:i.O)}))},eg:function(e){i.dispatchEvent($l("onstateidle",(new Map).set("state",e.name)))}}),this.af=new st((function(){gn(i.i.variants,i.h.restrictions,i.ec)&&yu(i)})),t&&this.Yb(t,!0)}function ql(e){null!=e.L&&(e.L.release(),e.L=null)}function $l(e,t){return new vi(e,t)}function Xl(e,t){var n,i,r,a,s,o,l,c,d;return P((function(h){switch(h.g){case 1:return e.l!=Ku&&(e.l=Gu),n=e.Zb.map((function(e){return e()})),e.Zb=[],E(h,Promise.all(n),2);case 2:if(e.dispatchEvent($l("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.Fa&&(e.Fa.release(),e.Fa=null),t.mediaElement&&e.s.nb(),e.af.stop(),e.xb&&(e.xb.release(),e.xb=null),e.Vc&&(e.Vc.stop(),e.Vc=null),!e.J){h.A(3);break}return E(h,e.J.stop(),4);case 4:e.J=null,e.Yc=null;case 3:if(!e.u){h.A(5);break}return E(h,e.u.stop(),5);case 5:if(!e.j){h.A(7);break}return E(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.B&&(e.B.release(),e.B=null),!e.G){h.A(9);break}return E(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.F&&e.F.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.A(11);break}return E(h,new Promise((function(e){return new st(e).N(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.A(13);break}return E(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Nb=null,e.M=null,e.i){for(i=u(e.i.variants),r=i.next();!r.done;r=i.next())for(a=r.value,s=u([a.audio,a.video]),o=s.next();!o.done;o=s.next())(l=o.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.i.textStreams),o=c.next();!o.done;o=c.next())(d=o.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.o=new Yl,e.Ud=null,fu(e),A(h)}}))}function Zl(e,t,n,i){for(var r=(t=u(t)).next();!r.done;r=t.next())if((r=r.value).data&&r.cueTime&&r.frames){var a=r.cueTime+n,s=i;s&&a>s&&(s=a);for(var o=u(r.frames),l=o.next();!l.done;l=o.next())Ql(e,a,s,"org.id3",l.value);e.F&&e.F.onHlsTimedMetadata(r,a)}}function Ql(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent($l("metadata",t))}function Jl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new st((function(){t.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}function eu(e,t){return new Tr(t,e.h.drm.updateExpirationTime)}function tu(e,t){e.M=new ri,e.M.g=si,ai(e.M,t,Math.min(.5,t/2)),fu(e),e.Vc=new st((function(){nu(e)})).Ca(.25)}function nu(e){switch(e.l){case Yu:if(e.g.ended)var t=!0;else{var n=ys(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case Wu:e:if(e.g.ended||Ns(e.G))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.gb();var i=ys(e.g.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Es(e.g.buffered,e.g.currentTime);var r=t,a=(n=e.M).h.get(n.g);t=n.g,i=r||i>=a?oi:si,n.g=i,t!=i&&fu(e)}function iu(e){if(e.J){var t=Ei(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.J.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{hu(e,e.i)}catch(t){Iu(e,t)}e.u&&mu(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||bu(e)}if(e.D&&e.D.je(e.h.streaming.forceHTTPS),e.G&&(e.G.configure(e.h.mediaSource),e.G.H=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Ud!=t)){var n=t(),i=e.G,r=i.m;i.m=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.Ud=t,e.j&&((n=(t=e.j).j.get(et))&&jo(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),Cu(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),ai(e.M,t,Math.min(.5,t/2))),e.i&&Ou(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function ru(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function au(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function su(e,t){var n,i;return P((function(r){switch(r.g){case 1:return n=$r(t),(i=Qu[n])?r.return(i):(_(r,2),E(r,qr(t,e.D,e.h.streaming.retryParameters),4));case 4:i=r.h,k(r,3);break;case 2:S(r);case 3:if(i)return r.return(i);throw new Le(1,2,2011,n)}}))}function ou(e,t,n,i,r,a,s){var o,l,u,c;return P((function(d){if(1==d.g)return"text/vtt"!=r||s.length?E(d,lu(e,t,e.D,e.h.streaming.retryParameters),3):d.A(2);2!=d.g&&(o=d.h,l=uu(e,o,r,s),u=new Blob([l],{type:"text/vtt"}),t=Zs(u),r="text/vtt"),c=document.createElement("track");var h=e.V,p=t;try{if(h.g.enabled){var f=yl(h);f.ot=Cl,f.su=!0;var g=Al(p,El(f))}else g=p}catch(e){z("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=p}return c.src=g,c.label=a,c.kind=i,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),d.return(c)}))}function lu(e,t,n,i){var r,a,s;return P((function(o){if(1==o.g){r=Ri,(a=wi([t],i)).method="GET";var l=e.V;try{l.g.enabled&&bl(l,a,{ot:Cl,su:!0})}catch(e){z("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return E(o,n.request(r,a).promise,2)}return s=o.h,o.return(s.data)}))}function uu(e,t,n,i){var r=Qt[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Ie(t),function(e,t){function n(e){for(var n=e,i=u(t),r=i.next();!r.done;r=i.next())(r=r.value).end&&r.start<e&&(n+=r.end-r.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(i=Math.floor(n/60%60))?"0":"")+i+":"+(10>(r=Math.floor(n%60))?"0":"")+r+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var i=rl(e,[]);e="WEBVTT\n\n";for(var r=(i=u(i)).next();!r.done;r=i.next())e+=n((r=r.value).startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case oe:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}(t=n.parseMedia(t,e),i);throw new Le(2,2,2014,n)}function cu(e){var t=Fl();return t.streaming.failureCallback=function(t){if(e.U()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.ce(n))}},t.textDisplayFactory=function(){return e.Uc?new cl(e.g,e.Uc):new al(e.g)},t}function du(e,t){return P((function(n){if(1==n.g)return E(n,function(e,t){return P((function(n){if(1==n.g)return E(n,vn(e.j?e.j.l:null,t),2);Mu(t),A(n)}))}(e,t),2);hu(e,t),A(n)}))}function hu(e,t){if(e.l!=Ku){gn(t.variants,e.h.restrictions,e.ec)&&e.j&&Tu(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var i=u(t.variants),r=i.next();!r.done;r=i.next())r=r.value,pu(e,n.keySystem,r.video),pu(e,n.keySystem,r.audio);xu(e,t)}}function pu(e,t,n){if(n)for(var i=(n=u(n.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t)for(var r=(i=u(i.initData||[])).next();!r.done;r=i.next())r=r.value,Dr(e.m,r.initDataType,r.initData)}function fu(e){var t=e.Fd();if(e.o&&e.M&&e.B){var n=e.H;n.j=t,Co(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),vu(e)}t=(new Map).set("buffering",t),e.dispatchEvent($l("buffering",t))}function gu(e){var t=e.g.playbackRate;0!=t&&(e.H&&e.H.set(t),t=$l("ratechange"),e.dispatchEvent(t))}function vu(e){if(e.o&&e.M){var t=e.o.g;e.M.g==si?jl(t,"buffering"):e.g.paused?jl(t,"paused"):e.g.ended?jl(t,"ended"):jl(t,"playing")}}function mu(e){try{xu(e,e.i)}catch(t){return Iu(e,t),!1}var t=e.i.variants.filter((function(e){return Ln(e)}));return t=e.ub.create(t),e.u.setVariants(Array.from(t.values())),!0}function yu(e){return mu(e)?e.u.chooseVariant():null}function bu(e){var t=yu(e);t&&Eu(e,t,!0,!0,0)}function Eu(e,t,n,i,r){var a=e.j.l;if(t==a)i&&Vo(e.j,t,i,r,!0);else{var s=e.o.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Vo(e.j,t,i,r,void 0,n),i=null,a&&(i=kn(a)),t=kn(t),n?_u(e,i,t):ku(e,i,t)}}function Au(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),ku(e,n=Dn(n),t=Dn(t))}function _u(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&Rs(e.L,n),Nu(e,n=$l("adaptation",t))}function Tu(e){Nu(e,$l("trackschanged"))}function ku(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&Rs(e.L,n),Nu(e,n=$l("variantchanged",t))}function Su(e){Nu(e,$l("textchanged"))}function wu(e){Nu(e,$l("texttrackvisibility"))}function Cu(e){Nu(e,$l("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function Iu(e,t){if(e.l!=Ku)if(function(e,t){if(1002!=t.code&&1011!=t.code||1!=t.category||!navigator.onLine)return!1;var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return!1;n=1}t=e.Xa().find((function(e){return e.active}));for(var i=e.i,r=u(i.variants),a=r.next();!a.done;a=r.next())(a=a.value).id===t.id&&(a.disabledUntilTime=Date.now()/1e3+n);return gn(i.variants,e.h.restrictions,e.ec),!!(t=yu(e))&&(i=e.Na().video.reduce((function(e,t){return e+t.end-t.start}),0),Eu(e,t,!1,!0,i),e.af.N(n),!0)}(e,t))t.handled=!0;else{var n=$l("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Du(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent($l(t,n))}function Ru(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Le(2,3,3016,t,n,e.g.error.message)}function Lu(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.i.variants)).next();!a.done;a=n.next()){var s=[];(a=a.value).audio&&s.push(a.audio),a.video&&s.push(a.video);for(var o=(s=u(s)).next();!o.done;o=s.next()){var l=o.value;if(o=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!qu.includes(c)}o!=a.allowedByKeySystem&&(r=!0)}}r&&!mu(e)||((t=e.j.l)&&!t.allowedByKeySystem&&bu(e),r&&Tu(e))}}function Pu(e,t,n){e.J&&e.J.onExpirationUpdated&&e.J.onExpirationUpdated(t,n),t=$l("expirationupdated"),e.dispatchEvent(t)}function Ou(e,t,n){0<t&&(e.U()||e.Ze(t)),n<(t=e.getDuration())&&(e.U()||e.Aa(n))}function xu(e,t){e=e.m?e.m.Qc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var i=!1,r=!1,a=new Set,s=new Set,o=(t=u(t.variants)).next();!o.done;o=t.next()){var l=[];(o=o.value).audio&&l.push(o.audio),o.video&&l.push(o.video);for(var c=(l=u(l)).next();!c.done;c=l.next())if((c=c.value).keyIds.size)for(var d=(c=u(c.keyIds)).next();!d.done;d=c.next()){d=d.value;var h=e[n?"00":d];h?qu.includes(h)&&s.add(h):a.add(d)}o.allowedByApplication?o.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw new Le(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(s)})}function Mu(e){if(!e.variants.some(Ln))throw new Le(2,4,4032)}function Nu(e,t){P((function(n){if(1==n.g)return E(n,Promise.resolve(),2);e.l!=Ku&&e.dispatchEvent(t),A(n)}))}function Bu(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(rn(n.language)):t.add("und");return t}function Uu(e){for(var t=new Map,n=new Map,i=(e=u(e)).next();!i.done;i=e.next()){var r="und",a=[];(i=i.value).language&&(r=rn(i.language)),(a="variant"==i.type?i.audioRoles:i.roles)&&a.length||(a=[""]),t.has(r)||t.set(r,new Set);for(var s=(a=u(a)).next();!s.done;s=a.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var o=[];return t.forEach((function(e,t){for(var i=(e=u(e)).next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i)),o.push({language:t,role:i,label:r})}})),o}function Fu(){return new Le(2,7,7e3)}function Vu(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Hu(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function ju(e){return new Promise((function(t,n){e.mb=function(){return n(Fu())},e.bd=function(){return t()},e.onError=function(e){return n(e)},e.dd=function(){return n(Fu())}}))}V("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"}),V("shaka.util.ConfigUtils",Ll),Ll.convertToConfigObject=Ol,Ll.mergeConfigObjects=Pl,V("shaka.util.FairPlayUtils",Ml),Ml.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Et(t.data)}catch(e){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=Ce(Dt(n)))}},Ml.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ml.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ml.verimatrixFairPlayRequest=function(e,t){2===e&&(e=It(e=Ie(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Tt("spc="+e))},Ml.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=_t(t).split("skd://").pop().split("?").shift(),i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=new Uint16Array(r);for(var a=0,s=i.length;a<s;a++)r[a]=i.charCodeAt(a);return Bl(t,r,n)},Ml.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bl(e,n=_t(e).split(";").pop(),t))},Ml.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bl(e,n=_t(e).split("skd://").pop(),t))},Ml.initDataTransform=Bl,Ml.defaultGetContentId=Nl,Ml.isFairPlaySupported=function(){var e;return P((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},_(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(S(t),t.return(!1))}))},V("shaka.util.PlayerConfiguration",Ul),Ul.mergeConfigObjects=Vl,Ul.createDefault=Fl,v(zl,bi),(i=zl.prototype).destroy=function(){var e,t=this;return P((function(n){switch(n.g){case 1:return t.l==Ku?n.return():(ql(t),t.l=Ku,e=tl(t.Ga,(function(){return{node:t.O,payload:Hu(),hb:!1}})),E(n,new Promise((function(t){e.Jb=function(){},e.bd=function(){t()},e.mb=function(){t()},e.onError=function(){t()},e.dd=function(){t()}})),2));case 2:return E(n,t.Ga.destroy(),3);case 3:if(t.Xc&&(t.Xc.release(),t.Xc=null),t.Xb&&(t.Xb.release(),t.Xb=null),t.s&&(t.s.release(),t.s=null),t.Nd=null,t.u=null,t.h=null,t.o=null,t.Uc=null,t.V=null,!t.D){n.A(4);break}return E(n,t.D.destroy(),5);case 5:t.D=null;case 4:bi.prototype.release.call(t),A(n)}}))},i.Yb=function(e,t){if(t=void 0===t||t,this.l==Ku)return Promise.reject(Fu());var n=Hu();n.mediaElement=e,ot()||(t=!1);var i=t?this.wb:this.W;return(e=tl(this.Ga,(function(){return{node:i,payload:n,hb:!1}}))).Jb=function(){},ju(e)},i.lf=function(e){this.cf=e},i.detach=function(){var e=this;if(this.l==Ku)return Promise.reject(Fu());var t=tl(this.Ga,(function(){return{node:e.O,payload:Hu(),hb:!1}}));return t.Jb=function(){},ju(t)},i.re=function(e){var t=this;if(e=void 0===e||e,this.l==Ku)return Promise.reject(Fu());this.dc=!1,ot()||(e=!1),ql(this);var n=Hu(),i=tl(this.Ga,(function(i){var r=i.mediaElement&&e?t.wb:i.mediaElement?t.W:t.O;return n.mediaElement=i.mediaElement,{node:r,payload:n,hb:!1}}));return i.Jb=function(){},ju(i)},i.Fg=function(e){this.fc=e},i.load=function(e,t,n){var i=this;if(this.fc=null,this.dc=!1,this.l==Ku)return Promise.reject(Fu());this.dispatchEvent($l("loading"));var r=Hu();r.uri=e,r.ne=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!ot())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=$r(i),n=Zu[n]),n){if(""==(t.mediaElement||vt()).canPlayType(n))return!1;if(!ot()||!(n in Xr)&&!($r(i)in Zr)||e.h.streaming.preferNativeHls)return!0;if(ht())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,r)?this.yb:this.ba,s=tl(this.Ga,(function(e){return null==e.mediaElement?null:(r.mediaElement=e.mediaElement,{node:a,payload:r,hb:!0})}));return this.o=new Yl,this.V=function(e){return new vl({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Na:function(){return e.Na()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Xa:function(){return e.Xa()},Rc:function(){return e.Rc()},U:function(){return e.U()}},e.h.cmcd)}(this),s.Jb=function(){},new Promise((function(e,t){s.dd=function(){return t(new Le(2,7,7002))},s.bd=function(){e(),i.dispatchEvent($l("loaded"))},s.mb=function(){return t(Fu())},s.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ol(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(qn("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Vl(this.h,e,cu(this));return iu(this),n},i.getConfiguration=function(){var e=cu(this);return Vl(e,this.h,cu(this)),e},i.Bf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.uc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.rg=function(){for(var e in this.h)delete this.h[e];Vl(this.h,cu(this),cu(this)),iu(this)},i.Hf=function(){return this.l},i.Lf=function(){return this.g},i.jc=function(){return this.D},i.Dd=function(){return this.Nb},i.Ge=function(){return this.F?this.F:null},i.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},i.Zf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Oa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.Xf=function(){this.U()&&(this.g.currentTime=this.uc().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.m?this.m.g:null},i.ic=function(){return this.m?this.m.ic():1/0},i.Qc=function(){return this.m?this.m.Qc():{}},i.Fd=function(){return!!this.M&&this.M.g==si},i.Rc=function(){return this.g?this.H?this.H.i:1:0},i.Ag=function(e){0==e?Y("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(e),this.l==Wu&&(this.u.playbackRateChanged(e),Fo(this.j,1<Math.abs(e))))},i.pf=function(){var e=this.H.Pc();this.l==Yu&&this.H.set(e),this.l==Wu&&(this.H.set(e),this.u.playbackRateChanged(e),Fo(this.j,!1))},i.Xa=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,i=u(this.i.variants),r=i.next();!r.done;r=i.next())if(Ln(r=r.value)){var a=kn(r);a.active=r==e,a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return Dn(e)})):[]},i.Fb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=u(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=Sn(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?ru(this).map((function(e){return In(e)})):[]},i.Ff=function(){return this.i?this.i.imageStreams.map((function(e){return wn(e)})):[]},i.Tf=function(e,t){var n,i,r,a,s,o,l,u,c,d,h,p,f,g,v,m,y,b,A,_,T=this;return P((function(k){return 1==k.g?T.i?(n=T.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?k.A(3):E(k,n.createSegmentIndex(),3):k.return(null):k.A(2):2!=k.g?null==(i=n.segmentIndex.find(t))?k.return(null):(r=n.segmentIndex.get(i),a=r.tilesLayout||n.tilesLayout,(s=/(\d+)x(\d+)/.exec(a))?(o=n.width||0,l=n.height||0,u=parseInt(s[1],10),c=parseInt(s[2],10),d=o/u,h=l/c,p=u*c,f=r.j-r.startTime,g=r.s||f/p,v=r.startTime,y=m=0,1<p&&(b=Math.floor((t-r.startTime)/g),v=r.startTime+b*g,m=b%u*d,y=Math.floor(b/u)*h),A=!1,(_=r.o)&&(A=!0,h=_.height,m=_.positionX,y=_.positionY,d=_.width),k.return({imageHeight:l,imageWidth:o,height:h,positionX:m,positionY:y,startTime:v,duration:g,uris:r.ya(),width:d,sprite:A})):k.return(null)):k.return(null)}))},i.Se=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(Wl(this.o.h,t,!1),Ho(this.j,t),Su(this),this.vb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=u(t=ru(this))).next();!n.done;n=t.next())Cn(n=n.value)==e.id?n.mode=this.ia?"showing":"hidden":n.mode="disabled";Su(this)}},i.Te=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&Ln(i)&&(Eu(this,i,!1,t,n),this.ub=new ni(i),mu(this))}else if(this.g&&this.g.audioTracks)for(n=(t=u(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(Cn(n=n.value)==e.id){Au(this,n);break}},i.Af=function(){return Uu(this.Xa())},i.Rf=function(){return Uu(this.Fb())},i.zf=function(){return Array.from(Bu(this.Xa()))},i.Qf=function(){return Array.from(Bu(this.Fb()))},i.ge=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.B){this.ub=new ii(e,t||"",n,""),t=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},e=this.j.l;var i=this.ub.create(this.i.variants);n=null;for(var r=(i=u(i.values())).next();!r.done;r=i.next())r=r.value,(!n||t(n,e)>t(r,e))&&(n=r);n?(t=kn(n),this.Te(t,!0)):bu(this)}else if(this.g&&this.g.audioTracks){r=Array.from(this.g.audioTracks),e=rn(e),i=n=null;for(var a=(r=u(r)).next();!a.done;a=r.next()){var s=Dn(a=a.value);rn(s.language)==e&&(n=a,t?s.roles.includes(t)&&(i=a):0==s.roles.length&&(i=a))}i?Au(this,i):n&&Au(this,n)}},i.he=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.B)this.vb=e,this.cc=t||"",this.$b=n,(e=On(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&e!=this.j.o&&(Wl(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(Ho(this.j,e),Su(this));else{var i=rn(e);(e=this.Fb().find((function(e){return rn(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Se(e)}},i.tg=function(e){if(this.i&&this.B){for(var t=null,n=u(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.ub=new ii(t.language,"",0,e),bu(this))}},i.Hd=function(){var e=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?ru(this).some((function(e){return"showing"==e.mode})):e},i.He=function(){return this.g&&this.g.src&&this.g.textTracks?au(this).map((function(e){return In(e)})):[]},i.Cf=function(e){var t=rn(e),n=au(this).filter((function(e){return rn(e.language)==t}));if(!n||!n.length)return[];e=[];for(var i=new Set,r=(n=u(n)).next();!r.done;r=n.next())if((r=r.value)&&r.cues)for(var a=(r=u(r.cues)).next();!a.done;a=r.next()){var s=a.value;(a=s.id)&&""!=a||(a=s.startTime+"-"+s.endTime+"-"+s.text),s={id:a,title:s.text,startTime:s.startTime,endTime:s.endTime},i.has(a)||(e.push(s),i.add(a))}return e},i.yg=function(e){if(e=!!e,this.ia!=e){if(this.ia=e,this.l==Wu)this.G.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=On(this.i.textStreams,this.vb,this.cc,this.$b)).length&&(Ho(this.j,e[0]),Su(this)):function(e){var t=e.j.get(et);t&&(Zo(t),Qo(t).catch((function(){})),e.j.delete(et)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=ru(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");wu(this)}},i.Of=function(){if(!this.U())return null;var e=this.Ga.l,t=0;if(this.B)t=this.B.Ic();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.Na=function(){if(this.l==Wu)return this.G.Na();var e={total:[],audio:[],video:[],text:[]};return this.l==Yu&&(e.total=As(this.g.buffered)),e},i.getStats=function(){if(this.l!=Wu&&this.l!=Yu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};vu(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.o;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.B&&(this.o.M=this.B.te(),this.o.O=this.B.ue()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.o;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.J=i,this.o.H=Number(n.corruptedVideoFrames)}this.m?n=(n=this.m).H?n.H:NaN:n=NaN,this.o.s=n,this.l==Wu&&((n=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*n.bandwidth),n&&n.video&&(t=this.o,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.U()&&(n=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.o.u=n),this.l==Yu&&(n=this.o,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.o;e=r.o,n=r.l,t=r.B,i=r.J;for(var a=r.L,s=r.H,o=r.O,l=r.M,c=r.u,d=r.i,h=r.m,p=r.F,f=r.j,g=Kl(r.g,"playing"),v=Kl(r.g,"paused"),m=Kl(r.g,"buffering"),y=r.s,b=r.D,E=r.G,A=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(r.g),_=[],T=(r=u(r.h.g)).next();!T.done;T=r.next())T=T.value,_.push({timestamp:T.timestamp,id:T.id,type:T.type,fromAdaptation:T.fromAdaptation,bandwidth:T.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:a,corruptedFrames:s,stallsDetected:o,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:p,drmTimeSeconds:f,playTime:g,pauseTime:v,bufferingTime:m,licenseTime:y,liveLatency:b,maxSegmentDuration:E,stateHistory:A,switchHistory:_}},i.hf=function(e,t,n,i,r,a,s){s=void 0!==s&&s;var o,l,u,c,d,h,p,f,g,v,m=this;return P((function(y){switch(y.g){case 1:if(m.l!=Wu&&m.l!=Yu)throw new Le(1,7,7004);if(i){y.A(2);break}return E(y,su(m,e),3);case 3:i=y.h;case 2:if(o=[],m.F)try{o=m.F.getServerSideCuePoints()}catch(e){}if(m.l!=Yu){y.A(4);break}return s&&(n="forced"),E(y,ou(m,e,t,n,i,a||"",o),5);case 5:if(l=m.Fb(),u=l.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return Tu(m),y.return(u);throw new Le(1,2,2012);case 4:if(c=tt,1/0==(d=m.i.presentationTimeline.getDuration()))throw new Le(1,4,4033);if(!o.length){y.A(6);break}return E(y,lu(m,e,m.D,m.h.streaming.retryParameters),7);case 7:h=y.h,p=uu(m,h,i,o),f=new Blob([p],{type:"text/vtt"}),e=Zs(f),i="text/vtt";case 6:if(g={id:m.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:To(0,d,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},v=jt(g.mimeType,g.codecs),!qt(v))throw new Le(2,2,2014,i);return m.i.textStreams.push(g),Tu(m),y.return(Sn(g))}}))},i.jf=function(e,t){var n,i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b=this;return P((function(A){switch(A.g){case 1:if(b.l!=Wu&&b.l!=Yu)throw new Le(1,7,7004);if(b.l==Yu)throw new Le(1,2,2016);if(t){A.A(2);break}return E(A,su(b,e),3);case 3:t=A.h;case 2:if("text/vtt"!=t)throw new Le(1,2,2017,e);if(n=tt,1/0==(i=b.i.presentationTimeline.getDuration()))throw new Le(1,4,4045);return E(A,lu(b,e,b.D,b.h.streaming.retryParameters),4);case 4:if(r=A.h,!(a=Qt[t]))throw new Le(2,2,2014,t);for(s=a(),o={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},l=Ie(r),c=s.parseMedia(l,o),d=[],h={},p=u(c),f=p.next();!f.done;h={Rb:h.Rb},f=p.next())g=f.value,h.Rb=Xe([e],[g.payload])[0],v=new fs(g.startTime,g.endTime,function(e){return function(){return[e.Rb]}}(h),0,null,null,0,0,1/0),h.Rb.includes("#xywh")&&(4===(m=h.Rb.split("#xywh=")[1].split(",")).length&&v.Ye({height:parseInt(m[3],10),positionX:parseInt(m[0],10),positionY:parseInt(m[1],10),width:parseInt(m[2],10)})),d.push(v);return y={id:b.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ao(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},b.i.imageStreams.push(y),Tu(b),A.return(wn(y))}}))},i.gf=function(e,t,n){var i,r,a,s,o=this;return P((function(l){switch(l.g){case 1:if(o.l!=Wu&&o.l!=Yu)throw new Le(1,7,7004);if(n){l.A(2);break}return E(l,su(o,e),3);case 3:n=l.h;case 2:if(i=[],o.F)try{i=o.F.getServerSideCuePoints()}catch(e){}return E(l,ou(o,e,t,"chapters",n,"",i),4);case 4:if(r=l.h,a=o.He(),!(s=a.find((function(e){return e.language==t})))){l.A(5);break}return E(l,new Promise((function(e,t){o.s.ma(r,"load",e),o.s.ma(r,"error",(function(){t(new Le(1,2,2015))}))})),6);case 6:return l.return(s);case 5:throw new Le(1,2,2012)}}))},i.ke=function(e,t){this.ec.width=e,this.ec.height=t},i.ce=function(e){if(this.l==Wu){var t=this.j;if(e=void 0===e?.1:e,t.h.g)t=!1;else if(t.s)t=!1;else{for(var n=u(t.j.values()),i=n.next();!i.done;i=n.next())!(i=i.value).nc||i.ra||i.Ka||(i.nc=!1,Xo(t,i,e));t=!0}}else t=!1;return t},i.If=function(){return Y("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Jf=function(){return this.Yc},i.$e=function(e){this.Uc=e},V("shaka.Player",zl),zl.prototype.setVideoContainer=zl.prototype.$e,zl.prototype.getManifestParserFactory=zl.prototype.Jf,zl.prototype.getManifest=zl.prototype.If,zl.prototype.retryStreaming=zl.prototype.ce,zl.prototype.setMaxHardwareResolution=zl.prototype.ke,zl.prototype.addChaptersTrack=zl.prototype.gf,zl.prototype.addThumbnailsTrack=zl.prototype.jf,zl.prototype.addTextTrackAsync=zl.prototype.hf,zl.prototype.getStats=zl.prototype.getStats,zl.prototype.getBufferedInfo=zl.prototype.Na,zl.prototype.getPresentationStartTimeAsDate=zl.prototype.Ie,zl.prototype.getPlayheadTimeAsDate=zl.prototype.Of,zl.prototype.setTextTrackVisibility=zl.prototype.yg,zl.prototype.getChapters=zl.prototype.Cf,zl.prototype.getChaptersTracks=zl.prototype.He,zl.prototype.isTextTrackVisible=zl.prototype.Hd,zl.prototype.selectVariantsByLabel=zl.prototype.tg,zl.prototype.selectTextLanguage=zl.prototype.he,zl.prototype.selectAudioLanguage=zl.prototype.ge,zl.prototype.getTextLanguages=zl.prototype.Qf,zl.prototype.getAudioLanguages=zl.prototype.zf,zl.prototype.getTextLanguagesAndRoles=zl.prototype.Rf,zl.prototype.getAudioLanguagesAndRoles=zl.prototype.Af,zl.prototype.selectVariantTrack=zl.prototype.Te,zl.prototype.selectTextTrack=zl.prototype.Se,zl.prototype.getThumbnails=zl.prototype.Tf,zl.prototype.getImageTracks=zl.prototype.Ff,zl.prototype.getTextTracks=zl.prototype.Fb,zl.prototype.getVariantTracks=zl.prototype.Xa,zl.prototype.cancelTrickPlay=zl.prototype.pf,zl.prototype.trickPlay=zl.prototype.Ag,zl.prototype.getPlaybackRate=zl.prototype.Rc,zl.prototype.isBuffering=zl.prototype.Fd,zl.prototype.getKeyStatuses=zl.prototype.Qc,zl.prototype.getExpiration=zl.prototype.ic,zl.prototype.drmInfo=zl.prototype.drmInfo,zl.prototype.keySystem=zl.prototype.keySystem,zl.prototype.goToLive=zl.prototype.Xf,zl.prototype.seekRange=zl.prototype.uc,zl.prototype.isAudioOnly=zl.prototype.Zf,zl.prototype.isInProgress=zl.prototype.jb,zl.prototype.isLive=zl.prototype.U,zl.prototype.getAdManager=zl.prototype.Ge,zl.prototype.getAssetUri=zl.prototype.Dd,zl.prototype.getNetworkingEngine=zl.prototype.jc,zl.prototype.getMediaElement=zl.prototype.Lf,zl.prototype.getLoadMode=zl.prototype.Hf,zl.prototype.resetConfiguration=zl.prototype.rg,zl.prototype.getBufferFullness=zl.prototype.Bf,zl.prototype.getConfiguration=zl.prototype.getConfiguration,zl.prototype.configure=zl.prototype.configure,zl.prototype.load=zl.prototype.load,zl.prototype.updateStartTime=zl.prototype.Fg,zl.prototype.unload=zl.prototype.re,zl.prototype.detach=zl.prototype.detach,zl.prototype.attachCanvas=zl.prototype.lf,zl.prototype.attach=zl.prototype.Yb,zl.probeSupport=function(e){var t,n,i,r,a;return e=void 0===e||e,P((function(s){if(1==s.g)return t={},e?E(s,function(){var e,t,n,i,r,a;return P((function(s){return 1==s.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return P((function(s){switch(s.g){case 1:if(_(s,2),"org.w3.clearkey"===e&&ft())throw Error("Unsupported keySystem");return E(s,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=s.h,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),gt("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),E(s,t.createMediaKeys(),5);case 5:k(s,0);break;case 2:S(s),i.set(e,null),A(s)}}))},a=e.map((function(e){return r(e)})),E(s,Promise.all(a),2)):s.return(Vi(i))}))}(),3):s.A(2);2!=s.g&&(t=s.h);var o={};if(ot()){for(var l in Xr)o[l]=!0;for(var d in Zr)o[d]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(d=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=d.next())o[h=h.value]=ot()?!!Xr[h]:lt(h);for(var p in l)o[p]=ot()?!!Zr[p]:lt(l[p]);for(n=o,o={},l=(p=u(p='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(c(Js)))).next();!l.done;l=p.next())o[l=l.value]=ot()?!!qt(l)||(Q(l)||Bt(l)):lt(l),o[d=l.split(";")[0]]=o[d]||o[l];for(a in i={manifest:n,media:o,drm:t},r=$u)i[a]=r[a]();return s.return(i)}))},zl.isBrowserSupported=function(){if(e.Promise||Y("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||gt("Trident/"))return!1;var t=ft();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!ot()||lt("application/x-mpegurl"))},zl.setAdManagerFactory=function(e){Xu=e},zl.registerSupportPlugin=function(e,t){$u[e]=t},zl.prototype.destroy=zl.prototype.destroy;var Ku=0,Gu=1,Wu=2,Yu=3;zl.LoadMode={DESTROYED:Ku,NOT_LOADED:Gu,MEDIA_SOURCE:Wu,SRC_EQUALS:Yu},zl.version="v4.3.4";var zu=["4","3"];Zn=new function(e){this.g=e,this.i=$n,this.h=Xn}(new zn(Number(zu[0]),Number(zu[1])));var qu=["output-restricted","internal-error"],$u={},Xu=null,Zu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Qu={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Ju(){this.h=[],this.j=this.i=this.g=0}function ec(e,t,n){var i=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new Mi,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0})),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}function tc(t,n,i,r){var a=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new Mi,google.ima.settings.setLocale(i),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new vi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=n.getAdsManager(t.i),t.l(new vi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var r=(i=u(i)).next();!r.done;r=i.next())n.push({start:r.value,end:null});t.l(new vi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new vi(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){nc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.i.addEventListener("play",(function(){t.g.start()}),{once:!0})}catch(e){ac(t,null)}}(a,t)})),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){nc(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function nc(e,t){t.getError(),ac(e,null),e.l(new vi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function ic(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function rc(e,t){var n=t.getAd();n?(e.j=new ec(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new vi("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())):Y("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ac(e,t){e.l(new vi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function sc(e,t){this.i=e,this.h=null,this.g=t}function oc(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Mi,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new vi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new vi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(r,e)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.m=new sc(e,r.l),r.u&&(r.m.h=r.u),r.i(new vi("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new vi("ad-first-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new vi("ad-midpoint"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new vi("ad-third-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new vi("ad-complete")),r.i(new vi("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new vi("ad-skipped")),r.i(new vi("ad-stopped"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new vi("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function lc(){bi.call(this),this.g=this.i=null,this.h=new Ju,this.j=navigator.language}function uc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof vi){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(e=u(Object.getOwnPropertyNames(t))).next();!n.done;n=e.next())i.add(n.value);for(e={},n=(i=u(i)).next();!n.done;n=i.next())e[n=n.value]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=u(As(t))).next();!n.done;n=t.next())e=(n=n.value).end,i.start.push(n.start),i.end.push(e);t=i}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function cc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(i=ec.prototype).getDuration=function(){return this.h.getDuration()},i.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.isLinear=function(){return this.h.isLinear()},i.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.h.getTitle()},i.getDescription=function(){return this.h.getDescription()},i.release=function(){this.g=this.h=null},V("shaka.ads.ClientSideAd",ec),ec.prototype.release=ec.prototype.release,ec.prototype.getDescription=ec.prototype.getDescription,ec.prototype.getTitle=ec.prototype.getTitle,ec.prototype.getPositionInSequence=ec.prototype.getPositionInSequence,ec.prototype.getSequenceLength=ec.prototype.getSequenceLength,ec.prototype.setMuted=ec.prototype.setMuted,ec.prototype.resize=ec.prototype.resize,ec.prototype.isLinear=ec.prototype.isLinear,ec.prototype.isMuted=ec.prototype.isMuted,ec.prototype.setVolume=ec.prototype.setVolume,ec.prototype.getVolume=ec.prototype.getVolume,ec.prototype.play=ec.prototype.play,ec.prototype.pause=ec.prototype.pause,ec.prototype.skip=ec.prototype.skip,ec.prototype.canSkipNow=ec.prototype.canSkipNow,ec.prototype.getTimeUntilSkippable=ec.prototype.getTimeUntilSkippable,ec.prototype.isSkippable=ec.prototype.isSkippable,ec.prototype.isPaused=ec.prototype.isPaused,ec.prototype.getRemainingTime=ec.prototype.getRemainingTime,ec.prototype.getMinSuggestedDuration=ec.prototype.getMinSuggestedDuration,ec.prototype.getDuration=ec.prototype.getDuration,tc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&ul(this.o)},tc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(i=sc.prototype).getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.i.getTitle()},i.getDescription=function(){return this.i.getDescription()},i.release=function(){this.g=this.h=this.i=null},V("shaka.ads.ServerSideAd",sc),sc.prototype.release=sc.prototype.release,sc.prototype.getDescription=sc.prototype.getDescription,sc.prototype.getTitle=sc.prototype.getTitle,sc.prototype.getPositionInSequence=sc.prototype.getPositionInSequence,sc.prototype.getSequenceLength=sc.prototype.getSequenceLength,sc.prototype.setMuted=sc.prototype.setMuted,sc.prototype.resize=sc.prototype.resize,sc.prototype.isLinear=sc.prototype.isLinear,sc.prototype.isMuted=sc.prototype.isMuted,sc.prototype.setVolume=sc.prototype.setVolume,sc.prototype.getVolume=sc.prototype.getVolume,sc.prototype.play=sc.prototype.play,sc.prototype.pause=sc.prototype.pause,sc.prototype.skip=sc.prototype.skip,sc.prototype.canSkipNow=sc.prototype.canSkipNow,sc.prototype.getTimeUntilSkippable=sc.prototype.getTimeUntilSkippable,sc.prototype.isSkippable=sc.prototype.isSkippable,sc.prototype.isPaused=sc.prototype.isPaused,sc.prototype.getRemainingTime=sc.prototype.getRemainingTime,sc.prototype.getMinSuggestedDuration=sc.prototype.getMinSuggestedDuration,sc.prototype.getDuration=sc.prototype.getDuration,oc.prototype.stop=function(){this.B="",this.o=null,this.D=[]},oc.prototype.release=function(){this.stop(),this.h&&this.h.release()},oc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},v(lc,bi),(i=lc.prototype).setLocale=function(e){this.j=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Le(2,10,1e4);this.i&&this.i.release(),this.i=new tc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),bi.prototype.release.call(this)},i.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new vi("ad-stopped")),this.h=new Ju},i.requestClientSideAds=function(e){if(!this.i)throw new Le(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Le(2,10,10002);this.g&&this.g.release(),this.g=new oc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Le(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",(n=this.g).j?e=Promise.reject(new Le(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new it,n.g.requestStream(e),n.B=t||"",n.G=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Le(1,10,10003);(e.mpt||e.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new Le(1,10,10003);return this.g.D},i.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},V("shaka.ads.AdManager",lc),lc.prototype.onCueMetadataChange=lc.prototype.onCueMetadataChange,lc.prototype.onHlsTimedMetadata=lc.prototype.onHlsTimedMetadata,lc.prototype.onDashTimedMetadata=lc.prototype.onDashTimedMetadata,lc.prototype.getStats=lc.prototype.getStats,lc.prototype.getServerSideCuePoints=lc.prototype.getServerSideCuePoints,lc.prototype.replaceServerSideAdTagParameters=lc.prototype.replaceServerSideAdTagParameters,lc.prototype.requestServerSideStream=lc.prototype.requestServerSideStream,lc.prototype.initServerSide=lc.prototype.initServerSide,lc.prototype.requestClientSideAds=lc.prototype.requestClientSideAds,lc.prototype.onAssetUnload=lc.prototype.onAssetUnload,lc.prototype.release=lc.prototype.release,lc.prototype.initClientSide=lc.prototype.initClientSide,lc.prototype.setLocale=lc.prototype.setLocale,lc.ADS_LOADED="ads-loaded",lc.AD_STARTED="ad-started",lc.AD_FIRST_QUARTILE="ad-first-quartile",lc.AD_MIDPOINT="ad-midpoint",lc.AD_THIRD_QUARTILE="ad-third-quartile",lc.AD_COMPLETE="ad-complete",lc.AD_STOPPED="ad-stopped",lc.AD_SKIPPED="ad-skipped",lc.AD_VOLUME_CHANGED="ad-volume-changed",lc.AD_MUTED="ad-muted",lc.AD_PAUSED="ad-paused",lc.AD_RESUMED="ad-resumed",lc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",lc.CUEPOINTS_CHANGED="ad-cue-points-changed",lc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",lc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",lc.AD_CLICKED="ad-clicked",lc.AD_PROGRESS="ad-progress",lc.AD_BUFFERING="ad-buffering",lc.AD_IMPRESSION="ad-impression",lc.AD_DURATION_CHANGED="ad-duration-changed",lc.AD_CLOSED="ad-closed",lc.AD_LOADED="ad-loaded",lc.ALL_ADS_COMPLETED="all-ads-completed",lc.AD_LINEAR_CHANGED="ad-linear-changed",lc.AD_METADATA="ad-metadata",lc.AD_RECOVERABLE_ERROR="ad-recoverable-error",lc.AD_BREAK_READY="ad-break-ready",lc.AD_INTERACTION="ad-interaction",Xu=function(){return new lc};var dc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),hc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),pc=["loop","playbackRate"],fc=["pause","play"],gc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},vc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},mc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},yc=[["getConfiguration","configure"]],bc=[["isTextTrackVisible","setTextTrackVisibility"]],Ec="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Ac=["attach","attachCanvas","detach","load","unload"];function _c(e,t,n,i,r,a,s){var o=this;this.G=e,this.M=s,this.j=new st(t),this.O=n,this.u=!1,this.s=i,this.F=r,this.J=a,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return Cc(o)},this.D=function(e,t){switch((e=cc(t)).type){case"event":var n=e.targetName,i=mi(e.event);o.s(n,i);break;case"update":for(i in n=e.update)for(var r in e=o.g[i]||{},n[i])e[r]=n[i][r];o.u&&(o.O(),o.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,e=o.i[i],delete o.i[i],e)if(r){for(n in i=new Le(r.severity,r.category,r.code),r)i[n]=r[n];e.reject(i)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,xc.add(this)}function Tc(e,t,n){Pc=n,n.addUpdateListener(e.B),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),Cc(e),Dc(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function kc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Le(2,8,n,t))}function Sc(e,t){var n=e.J();e.l=new it,e.u=!0,Tc(e,n,t)}function wc(e){var t=Pc;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Cc(e){var t=!!Pc&&"connected"==Pc.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Ic(e)}e.h=t,e.L=t?Pc.receiver.friendlyName:"",e.j.Mb()}function Ic(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Le(1,7,7e3))}}function Dc(e,t){t=uc(t);var n=Pc;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),q)}catch(i){throw t=new Le(2,8,8005,i),n=new vi("error",(new Map).set("detail",t)),e.s("player",n),e.Ab(),t}}(i=_c.prototype).destroy=function(){return xc.delete(this),Ic(this),Pc&&wc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},i.sa=function(){return this.h},i.ae=function(){return this.L},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(xc),n=t.next();!n.done;n=t.next())Sc(n.value,e)}),(function(e){for(var t=u(xc),n=t.next();!n.done;n=t.next())n=n.value,Lc="available"==e,n.j.Mb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Lc&&this.j.N(Rc),(t=Pc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Sc(this,t):Pc=null}else e.__onGCastApiAvailable!==Mc&&(Oc=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Mc)},i.ie=function(e){this.o=e,this.h&&Dc(this,{type:"appData",appData:this.o})},i.cast=function(e){var t=this;return P((function(n){if(!t.m)throw new Le(1,8,8e3);if(!Lc)throw new Le(1,8,8001);if(t.h)throw new Le(1,8,8002);return t.l=new it,chrome.cast.requestSession((function(n){return Tc(t,e,n)}),(function(e){return kc(t,e)})),E(n,t.l,0)}))},i.Ab=function(){if(this.h){if(Ic(this),Pc){wc(this);try{Pc.stop((function(){}),(function(){}))}catch(e){}Pc=null}Cc(this)}},i.get=function(e,t){var n=this;if("video"==e){if(fc.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(c(O.apply(0,arguments))))}}else if("player"==e){if(mc[t]&&!this.get("player","isLive")())return function(){};if(Ec.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(c(O.apply(0,arguments))))};if(Ac.includes(t))return function(){return n.og.apply(n,[e,t].concat(c(O.apply(0,arguments))))};if(gc[t]||vc[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Dc(this,{type:"set",targetName:e,property:t,value:n})},i.Qe=function(e,t){Dc(this,{type:"call",targetName:e,methodName:t,args:O.apply(2,arguments)})},i.og=function(e,t){var n=O.apply(2,arguments),i=new it,r=this.H.toString();this.H++,this.i[r]=i;try{Dc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var Rc=.02,Lc=!1,Pc=null,Oc=null,xc=new Set;function Mc(t){if(Oc?e.__onGCastApiAvailable=Oc:delete e.__onGCastApiAvailable,Oc=null,t)for(var n=u(xc),i=n.next();!i.done;i=n.next())i.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Nc(e,t,n,i){i=void 0!==i&&i,bi.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.B=i,this.u=new Map,this.g=new _c(n,(function(){return Fc(r)}),(function(){return Vc(r)}),(function(e,t){return Kc(r,e,t)}),(function(){return Hc(r)}),(function(){return Uc(r)}),i),function(e){e.g.init(),e.m=new Mi;for(var t=u(dc),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,(function(t){e.g.sa()||(t=mi(t),e.j.dispatchEvent(t))}));for(var i in yi)e.m.C(e.h,yi[i],(function(t){e.g.sa()||e.o.dispatchEvent(t)}));for(var r in e.l={},t={},e.i)t.Sb=r,Object.defineProperty(e.l,t.Sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return jc(e,t.Sb)}}(t),set:function(t){return function(n){var i=t.Sb;e.g.sa()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={Sb:t.Sb};e.s={},Bc(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,i){return e.o.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.o.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.jc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Ge()};if("setVideoContainer"==t)return function(t){return e.h.$e(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){return Y(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Y(t+"() does not work while casting!"),Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(gc[t]||vc[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Bc(e,(function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.u.set(n,i):e.u.set(i,n)):t.set(i,n)}))}(e),e.j=new bi,e.j.Wc=e.l,e.o=new bi,e.o.Wc=e.s}(this)}function Bc(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!a.has(e)}var i,r=e.h,a=new Set;for(i in r)n(i)&&(a.add(i),t(i,r[i]));for(e=Object.getPrototypeOf(r),i=Object.getPrototypeOf({});e&&e!=i;){for(var s=u(Object.getOwnPropertyNames(e)),o=s.next();!o.done;o=s.next())n(o=o.value)&&(a.add(o),t(o,r[o]));e=Object.getPrototypeOf(e)}}function Uc(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dd(),startTime:null};e.i.pause();for(var n=u(pc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=u(yc)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=u(bc)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Fc(e){var t=new vi("caststatuschanged");e.dispatchEvent(t)}function Vc(e){var t=new vi(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Hc(e){for(var t=u(yc),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i));var s={};for(i=(n=u(pc)).next();!i.done;i=n.next())i=i.value,s[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=u(pc),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=s[n];for(n=(t=u(bc)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}e.i.autoplay=a,r&&e.i.play()}}),(function(t){t=new vi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function jc(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Kc(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Gc(e,t,n,i){bi.call(this);var r=this;this.g=e,this.h=t,this.j=new Mi,this.H={video:e,player:t},this.D=n||function(){},this.J=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new st((function(){qc(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Wc(e)},t.onSenderDisconnected=function(){return Wc(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Qc(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Qc(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=cc(t.data);switch(n.type){case"PLAY":e.g.play(),Jc(e);break;case"PAUSE":e.g.pause(),Jc(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.g.play(),Jc(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),Jc(e));break;case"STOP":e.h.re().then((function(){e.h&&Jc(e)}));break;case"GET_STATUS":Xc(e,Number(n.requestId));break;case"VOLUME":t=(i=n.volume).level,i=i.muted;var r=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=i&&(e.g.muted=i),r==e.g.volume&&a==e.g.muted||Jc(e);break;case"LOAD":e.m=0,e.B=!1,e.u=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),a=n.autoplay||!0,e.D(t.customData),a&&(e.g.autoplay=!0),e.h.load(r,i).then((function(){e.h&&Xc(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Qc(e,{requestId:Number(n.requestId),type:i},e.s)}));break;default:Qc(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=cc(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.u=!0,function(e,t,n){var i,r,a,s,o,l,u,c,d,h;P((function(p){switch(p.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.D(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,_(p,5),E(p,e.h.load(t.manifest,t.startTime),7)):E(p,Promise.resolve(),3);case 7:k(p,3);break;case 5:return s=S(p),o=(new Map).set("detail",s),l=new vi("error",o),e.h&&e.h.dispatchEvent(l),p.return();case 3:if(!e.h)return p.return();for(u in t.video)c=t.video[u],e.g[u]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),Jc(e)),A(p)}}))}(e,n.initState,n.appData),qc(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":(i=e.H[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.B=!1);var a=n.id,s=t.senderId;n=(t=e.H[i])[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.u=!0}))),n.then((function(){return Zc(e,s,a,null)}),(function(t){return Zc(e,s,a,t)}))}}(e,t)},t.start();for(var n=(t=u(dc)).next();!n.done;n=t.next())e.j.C(e.g,n.value,(function(t){return zc(e,"video",t)}));for(var i in yi)e.j.C(e.h,yi[i],(function(t){return zc(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.ke(3840,2160):e.h.ke(1920,1080),e.j.C(e.g,"loadeddata",(function(){e.B=!0})),e.j.C(e.h,"loading",(function(){e.o=!1,Yc(e)})),e.j.C(e.g,"playing",(function(){e.o=!1,Yc(e)})),e.j.C(e.g,"pause",(function(){Yc(e)})),e.j.C(e.h,"unloading",(function(){e.o=!0,Yc(e)})),e.j.C(e.g,"ended",(function(){new st((function(){e.g&&e.g.ended&&(e.o=!0,Yc(e))})).N(td)}))}(this)}function Wc(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Yc(e)}function Yc(e){var t;P((function(n){return 1==n.g?E(n,Promise.resolve(),2):e.h?(t=new vi("caststatuschanged"),e.dispatchEvent(t),$c(e)||Jc(e),void A(n)):n.return()}))}function zc(e,t,n){e.h&&(qc(e),Qc(e,{type:"event",targetName:t,event:n},e.l))}function qc(e){e.G.N(ed);for(var t={video:{},player:{}},n=u(hc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.U())for(var r in mc)0==e.m%mc[r]&&(t.player[r]=e.h[r]());for(var a in gc)0==e.m%gc[a]&&(t.player[a]=e.h[a]());for(var s in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Qc(e,{type:"update",update:t},e.l),vc)0==e.m%vc[s]&&((t={player:{}}).player[s]=e.h[s](),Qc(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),$c(e)}function $c(e){return!(!e.u||!e.g.duration&&!e.h.U())&&(Xc(e),e.u=!1,!0)}function Xc(e,t){var n={contentId:e.h.Dd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Jc(e,void 0===t?0:t,n)}function Zc(e,t,n,i){e.h&&Qc(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Qc(e,t,n,i){e.F&&(e=uc(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Jc(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?nd:e.h.Fd()?rd:e.g.paused?ad:id,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Qc(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}v(Nc,bi),(i=Nc.prototype).destroy=function(e){return e&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,bi.prototype.release.call(this),Promise.all(e)},i.Wf=function(){return this.l},i.Nf=function(){return this.s},i.nf=function(){return this.g.m&&Lc},i.sa=function(){return this.g.sa()},i.ae=function(){return this.g.ae()},i.cast=function(){var e,t=this;return P((function(n){return 1==n.g?(e=Uc(t),E(n,t.g.cast(e),2)):t.h?E(n,t.h.re(),0):n.return()}))},i.ie=function(e){this.g.ie(e)},i.zg=function(){!function(e){if(e.h){var t=e.J();chrome.cast.requestSession((function(n){return Tc(e,t,n)}),(function(t){return kc(e,t)}))}}(this.g)},i.Ab=function(){this.g.Ab()},i.qf=function(e,t){t=void 0!==t&&t;var n=this;return P((function(i){if(1==i.g)return e==n.D&&t==n.B?i.return():(n.D=e,n.B=t,n.g.Ab(),E(i,n.g.destroy(),2));n.g=null,n.g=new _c(e,(function(){return Fc(n)}),(function(){return Vc(n)}),(function(e,t){return Kc(n,e,t)}),(function(){return Hc(n)}),(function(){return Uc(n)}),t),n.g.init(),A(i)}))},V("shaka.cast.CastProxy",Nc),Nc.prototype.changeReceiverId=Nc.prototype.qf,Nc.prototype.forceDisconnect=Nc.prototype.Ab,Nc.prototype.suggestDisconnect=Nc.prototype.zg,Nc.prototype.setAppData=Nc.prototype.ie,Nc.prototype.cast=Nc.prototype.cast,Nc.prototype.receiverName=Nc.prototype.ae,Nc.prototype.isCasting=Nc.prototype.sa,Nc.prototype.canCast=Nc.prototype.nf,Nc.prototype.getPlayer=Nc.prototype.Nf,Nc.prototype.getVideo=Nc.prototype.Wf,Nc.prototype.destroy=Nc.prototype.destroy,v(Gc,bi),(i=Gc.prototype).isConnected=function(){return this.F},i.$f=function(){return this.o},i.wg=function(e){this.i=e},i.uf=function(){this.i=null},i.xg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.vg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.ug=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return P((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.H=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,bi.prototype.release.call(t),E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),A(n)}))},V("shaka.cast.CastReceiver",Gc),Gc.prototype.destroy=Gc.prototype.destroy,Gc.prototype.setContentArtist=Gc.prototype.ug,Gc.prototype.setContentImage=Gc.prototype.vg,Gc.prototype.setContentTitle=Gc.prototype.xg,Gc.prototype.clearContentMetadata=Gc.prototype.uf,Gc.prototype.setContentMetadata=Gc.prototype.wg,Gc.prototype.isIdle=Gc.prototype.$f,Gc.prototype.isConnected=Gc.prototype.isConnected;var ed=.5,td=5,nd="IDLE",id="PLAYING",rd="BUFFERING",ad="PAUSED";function sd(e,t,n){var i=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=ld(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],s=new Set(i.map((function(e){return e.keyId})));if(s.delete(null),1<s.size)throw new Le(2,4,4010);if(t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.fe||(r=e.init||r,!1)}))).length&&(e=function(e,t,n,i){for(var r=[],a=(t=u(t)).next();!a.done;a=t.next()){var s=n[(a=a.value).fe];if(s){var o;if(o=rr(a.node,"urn:microsoft:playready","pro")){o=Dt(o.textContent);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);o=[{initData:nr(o,l,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else o=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.fe)if(0==(l=i).size)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);l=[{initData:nr(new Uint8Array([]),c,l,1),initDataType:"cenc",keyId:a.keyId}]}o=Ze(s,a.init||e||o||l),(s=cd.get(s))&&(o.licenseServerUri=s(a)),r.push(o)}}return r}(r,a,n,s),0==e.length&&(e=[Ze("",r)])),i.length&&(t||!a.length))for(e=[],n=(t=u(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Ze(n,r));if(s=Array.from(s)[0]||null)for(n=(t=u(e)).next();!n.done;n=t.next())for(i=(n=u(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=s;return{Be:s,uh:r,drmInfos:e,Fe:!0}}function od(e){return(e=rr(e.node,"urn:microsoft:playready","pro"))?(e=function(e){var t=0,n=De(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=Ie(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=Dt(e.textContent)).filter((function(e){return e.type===ud}))[0],e&&(e=Er(e=At(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}function ld(e){var t=e.getAttribute("schemeIdUri"),n=or(e,"urn:mpeg:cenc:2013","default_KID"),i=sr(e,"urn:mpeg:cenc:2013","pssh").map(ur);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Le(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:Dt(e),keyId:null}}))}catch(e){throw new Le(2,4,4007)}return{node:e,fe:t,keyId:n,init:0<r.length?r:null}}var ud=1,cd=(new Map).set("com.widevine.alpha",(function(e){return(e=rr(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",od).set("com.microsoft.playready.recommendation",od).set("com.microsoft.playready.software",od).set("com.microsoft.playready.hardware",od).set("org.w3.clearkey",(function(e){return(e=rr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function dd(t,n,i,r,a){var s={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=s[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function hd(e,t){var n=pd(e,t,"timescale"),i=1;n&&(i=vr(n)||1);var r=pd(e,t,"duration");n=vr(r||""),"image"==e.I.contentType&&(n=yr(r||"")),n&&(n/=i);var a=pd(e,t,"startNumber");r=Number(pd(e,t,"presentationTimeOffset"))||0;var s=mr(a||"");if(null!=a&&null!=s||(s=1),a=fd(e,t,"SegmentTimeline"),t=null,a){t=i,e=e.T.duration||1/0,a=ar(a,"S");for(var o=[],l=-r,u=0;u<a.length;++u){var c=a[u],d=a[u+1],h=dr(c,"t",mr),p=dr(c,"d",mr);if(c=dr(c,"r",gr),null!=h&&(h-=r),!p)break;if(h=null!=h?h:l,0>(c=c||0))if(d){if(null==(d=dr(d,"t",mr)))break;if(h>=d)break;c=Math.ceil((d-h)/p)-1}else{if(1/0==e)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/p)-1}for(0<o.length&&h!=l&&(o[o.length-1].end=h/t),d=0;d<=c;++d)l=h+p,o.push({start:h/t,end:l/t,Dg:h}),h=l}t=o}return{timescale:i,ha:n,Lb:s,Sa:r/i||0,se:r,timeline:t}}function pd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function fd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return ir(e,n)})).reduce((function(e,t){return e||t}))}function gd(e,t,n,i,r,a){if(a=void 0===a?0:a,or(e,"http://www.w3.org/1999/xlink","href")){var s=function(e,t,n,i,r,a){for(var s=or(e,"http://www.w3.org/1999/xlink","href"),o=or(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return di(new Le(2,4,4028));if("onLoad"!=o)return di(new Le(2,4,4027));var d=Xe([i],[s]);return r.request(0,wi(d,t)).Y((function(i){if(!(i=Ar(i.data,e.tagName)))return di(new Le(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var o=i.childNodes[0];i.removeChild(o),e.appendChild(o)}for(o=(i=u(Array.from(i.attributes))).next();!o.done;o=i.next())e.setAttributeNode(o.value.cloneNode(!1));return gd(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(s=s.Y(void 0,(function(){return gd(e,t,n,i,r,a)}))),s}s=[];for(var o=u(Array.from(e.childNodes)),l=o.next();!l.done;l=o.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==or(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&s.push(gd(l,t,n,i,r,a)));return gi(s).Y((function(){return e}))}function vd(e,t,n,i,r,a,s){var o,l=(new Wi).P("sidx",(function(e){o=function(e,t,n,i,r,a,s){var o=[];s.reader.skip(4);var l=s.reader.K();if(0==l)throw new Le(2,3,3005);if(0==s.version)var u=s.reader.K(),c=s.reader.K();else u=s.reader.$a(),c=s.reader.$a();s.reader.skip(2);var d=s.reader.$d();for(e=e+s.size+c,c=0;c<d;c++){var h=s.reader.K(),p=(2147483648&h)>>>31;h&=2147483647;var f=s.reader.K();if(s.reader.skip(4),1==p)throw new Le(2,3,3006);o.push(new fs(u/l+n,(u+f)/l+n,(function(){return a}),e,e+h-1,t,n,i,r)),u+=f,e+=h}return s.parser.stop(),o}(t,i,r,a,s,n,e)}));if(e&&l.parse(e),o)return o;throw new Le(2,3,3004)}function md(e){this.h=De(e),this.g=new ji(this.h,0)}function yd(e){var t=bd(e);if(7<t.length)throw new Le(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=bd(e);e:{for(var r=(i=u(Ed)).next();!r.done;r=i.next())if(Se(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Z();else{if(8==t.length&&224&t[1])throw new Le(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.Z()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Z(),i=De(e.h,e.g.Z(),t),e.g.skip(t),new Ad(n,i)}function bd(e){var t=e.g.Z(),n=e.g.Ra();if(0==n)throw new Le(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ie(e.h,t,n)}md.prototype.ga=function(){return this.g.ga()};var Ed=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Ad(e,t){this.id=e,this.g=t}function _d(e){if(8<e.g.byteLength)throw new Le(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Le(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function Td(e){var t=new md(e.g);if(179!=(e=yd(t)).id)throw new Le(2,3,3013);if(e=_d(e),183!=(t=yd(t)).id)throw new Le(2,3,3012);t=new md(t.g);for(var n=0;t.ga();){var i=yd(t);if(241==i.id){n=_d(i);break}}return{Eg:e,ng:n}}function kd(e,t){if(!(t=fd(e,t,"Initialization")))return null;var n=e.I.wa,i=t.getAttribute("sourceURL");i&&(n=Xe(e.I.wa,[i])),i=0;var r=null;return(t=dr(t,"range",fr))&&(i=t.start,r=t.end),new ps((function(){return n}),i,r,Rd(e))}function Sd(e,t){var n=Number(pd(e,Cd,"presentationTimeOffset"))||0,i=pd(e,Cd,"timescale"),r=1;i&&(r=vr(i)||1);var a=n/r||0,s=kd(e,Cd);!function(e,t){if(Dd(e,t),!Id(e))throw new Le(2,4,4002)}(e,s);var o=Ai(e);return{Bb:function(){var e=fd(o,Cd,"RepresentationIndex"),n=o.I.wa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Xe(o.I.wa,[e])),e=Id(o),wd(o,t,s,n,e.start,e.end,a)}}}function wd(e,t,n,i,r,a,s){var o,l,u,c,d,h,p,f,g,v,m,y,b,A,_;return P((function(T){if(1==T.g)return o=e.presentationTimeline,l=!e.Ma||!e.T.Gd,u=e.T.start,c=e.T.duration,d=e.I.mimeType.split("/")[1],p=null,f=[(h=t)(i,r,a),"webm"==d?h(n.ya(),n.Ba,n.ka):null],h=null,E(T,Promise.all(f),2);if(g=T.h,v=g[0],m=g[1]||null,null,b=u-s,A=u,_=c?u+c:1/0,"mp4"==d)var k=vd(v,r,i,n,b,A,_);else{if(440786851!=yd(k=new md(m)).id)throw new Le(2,3,3008);var S=yd(k);if(408125543!=S.id)throw new Le(2,3,3009);k=S.g.byteOffset,S=new md(S.g);for(var w=null;S.ga();){var C=yd(S);if(357149030==C.id){w=C;break}}if(!w)throw new Le(2,3,3010);for(w=new md(w.g),C=1e6,S=null;w.ga();){var I=yd(w);if(2807729==I.id)C=_d(I);else if(17545==I.id)if(4==I.g.byteLength)S=I.g.getFloat32(0);else{if(8!=I.g.byteLength)throw new Le(2,3,3003);S=I.g.getFloat64(0)}}if(null==S)throw new Le(2,3,3011);if(S*=w=C/1e9,475249515!=(C=yd(new md(v))).id)throw new Le(2,3,3007);k=function(e,t,n,i,r,a,s,o,l){function u(){return r}var c=[];e=new md(e.g);for(var d=null,h=null;e.ga();){var p=yd(e);if(187==p.id){var f=Td(p);f&&(p=n*f.Eg,f=t+f.ng,null!=d&&c.push(new fs(d+s,p+s,u,h,f-1,a,s,o,l)),d=p,h=f)}}return null!=d&&c.push(new fs(d+s,i+s,u,h,null,a,s,o,l)),c}(C,k,w,S,i,n,b,A,_)}return y=k,o.Ib(y),p=new Ao(y),l&&p.Wa(A,_,!0),T.return(p)}))}function Cd(e){return e.wc}function Id(e){var t=fd(e,Cd,"RepresentationIndex");return e=fr((e=pd(e,Cd,"indexRange"))||""),t&&(e=dr(t,"range",fr,e)),e}function Dd(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=et&&"mp4"!=n&&"webm"!=n)throw new Le(2,4,4006);if("webm"==n&&!t)throw new Le(2,4,4005)}function Rd(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ad,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Ld(e,t){var n=kd(e,Pd),i=function(e){var t=function(e){return[e.I.ab,e.ea.ab,e.$.ab].filter($e).map((function(e){return ar(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Ke&&(e.Ke=!0),{dg:t.getAttribute("media"),start:(t=dr(t,"mediaRange",fr,{start:0,end:null})).start,end:t.end}}))}(e);e=hd(e,Pd);var n=e.Lb;0==n&&(n=1);var i=0;return e.ha?i=e.ha*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{ha:e.ha,startTime:i,Lb:n,Sa:e.Sa,timeline:e.timeline,Gb:t}}(e);if(!i.ha&&!i.timeline&&1<i.Gb.length)throw new Le(2,4,4002);if(!i.ha&&!e.T.duration&&!i.timeline&&1==i.Gb.length)throw new Le(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Le(2,4,4002);var r=null,a=null;e.$.id&&e.I.id&&(a=t[e.$.id+","+e.I.id])&&(r=a.segmentIndex);var s=function(e,t,n,i,r){var a=i.Gb.length;i.timeline&&i.timeline.length!=i.Gb.length&&(a=Math.min(i.timeline.length,i.Gb.length));for(var s=e-i.Sa,o=t?e+t:1/0,l=[],u=i.startTime,c={},d=0;d<a;c={od:c.od},d++){var h=i.Gb[d];c.od=Xe(n,[h.dg]);var p=void 0;p=null!=i.ha?u+i.ha:i.timeline?i.timeline[d].end:u+t,l.push(new fs(e+u,e+p,function(e){return function(){return e.od}}(c),h.start,h.end,r,s,e,o)),u=p}return l}(e.T.start,e.T.duration,e.I.wa,i,n);return t=!r,r?r.Hb(s,e.presentationTimeline.Pa()):r=new Ao(s),e.presentationTimeline.Ib(s),e.Ma&&e.T.Gd||r.Wa(e.T.start,e.T.duration?e.T.start+e.T.duration:1/0,t),a&&(a.segmentIndex=r),{Bb:function(){return r&&0!=r.g.length||r.pc(s),Promise.resolve(r)}}}function Pd(e){return e.ab}function Od(e,t,n,i,r,a){var s=function(e){var t=pd(e,xd,"initialization");if(!t)return null;var n=e.I.id,i=e.bandwidth||null,r=e.I.wa;return new ps((function(){var e=dd(t,n,null,i,null);return Xe(r,[e])}),0,null,Rd(e))}(e),o=function(e){var t=hd(e,xd),n=pd(e,xd,"media");return e=pd(e,xd,"index"),{ha:t.ha,timescale:t.timescale,Lb:t.Lb,Sa:t.Sa,se:t.se,timeline:t.timeline,Pd:n,oc:e}}(e);!function(e){var t=e.oc?1:0;if(t+=e.timeline?1:0,t+=e.ha?1:0,0==t)throw new Le(2,4,4002);if(1!=t&&(e.oc&&(e.timeline=null),e.ha=null),!e.oc&&!e.Pd)throw new Le(2,4,4002)}(o);var l=Ai(e);if(o.oc)return Dd(e,s),{Bb:function(){var e=dd(o.oc,l.I.id,null,l.bandwidth||null,null);return e=Xe(l.I.wa,[e]),wd(l,t,s,e,0,null,o.Sa)}};if(o.ha)return i||"image"===e.ea.contentType||(e.presentationTimeline.Sd(o.ha),e.presentationTimeline.Td(e.T.start)),{Bb:function(){return function(e,t,n,i,r){function a(e){var n=(e-f)*p,r=n+t.Sa,a=n+c;return n=a+p,(a=new fs(a,Math.min(n,o()),(function(){var t=dd(v,y,e,m,r*g);return Xe(b,[t])}),0,null,i,E,c,o())).j=n,a}function s(){var e=[Math.max(l.Pa(),c),Math.min(l.gb(),o())].map((function(e){return e-c}));return[Math.ceil(e[0]/p),Math.ceil(e[1]/p)-1].map((function(e){return e+f}))}function o(){var e=null!=d&&r[d]||h;return e?c+e:1/0}var l=e.presentationTimeline,c=e.T.start,d=e.$.id,h=e.T.duration,p=t.ha,f=t.Lb,g=t.timescale,v=t.Pd,m=e.bandwidth||null,y=e.I.id,b=e.I.wa,E=c-t.Sa,A=s();e=e.Ma?Math.max(A[0],A[1]-n+1):A[0],A=A[1],n=[];for(var _=e;_<=A;++_){var T=a(_);n.push(T)}var k=new Ao(n);if(n=l.gb()<o(),_=l.U(),n||_){var S=Math.max(e,A+1);k.fd(p,(function(){var e=l.Pa();k.eb(e);var t=u(s());t.next(),t=t.next().value;for(var n=[];S<=t;){var i=a(S);n.push(i),S++}return e>o()&&!n.length?null:n}))}return Promise.resolve(k)}(l,o,r,s,a)}};var c=null;i=i=null,e.$.id&&e.I.id&&(i=n[i=e.$.id+","+e.I.id])&&(c=i.segmentIndex);var d=function(e,t,n){var i=e.T.start,r=e.T.duration,a=i-t.Sa;r=r?i+r:1/0;for(var s=[],o={},l=0;l<t.timeline.length;o={nd:o.nd,rd:o.rd,ud:o.ud,kd:o.kd,wd:o.wd,ld:o.ld},l++){var u=t.timeline[l],c=u.start,d=u.Dg;u=u.end,o.ud=l+t.Lb,o.wd=d+t.se,o.rd=e.I.id,o.kd=e.bandwidth||null,o.nd=t.Pd,o.ld=e.I.wa,s.push(new fs(i+c,i+u,function(e){return function(){var t=dd(e.nd,e.rd,e.ud,e.kd||null,e.wd);return Xe(e.ld,[t]).map((function(e){return e.toString()}))}}(o),0,null,n,a,i,r))}return s}(l,o,s);n=e.T.start;var h=e.T.duration?e.T.start+e.T.duration:1/0,p=!(e.Ma&&e.T.Gd);return c?(p&&new Ao(d).Wa(n,h,!0),c.Hb(d,e.presentationTimeline.Pa())):c=new Ao(d),e.presentationTimeline.Ib(d),p&&c.Wa(n,h),i&&e.Ma&&(i.segmentIndex=c),{Bb:function(){return c&&0!=c.g.length||c.pc(d),Promise.resolve(c)}}}function xd(e){return e.xc}function Md(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function Nd(e,t,n){var i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b,_,T,k,S,w,C,I,D,R,L,O,x;return P((function(P){switch(P.g){case 1:if(i=tt,function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).Kc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,s=u(n),o=s.next();!o.done;o=s.next())o=o.value,r.id!=o.id&&r.channelsCount==o.channelsCount&&r.language==o.language&&r.bandwidth==o.bandwidth&&r.label==o.label&&r.codecs==o.codecs&&r.mimeType==o.mimeType&&ne(r.roles,o.roles)&&r.audioSamplingRate==o.audioSamplingRate&&r.primary==o.primary&&(a=!0);a||n.push(r)}t.Kc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).gd),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,s=u(n),o=s.next();!o.done;o=s.next())o=o.value,r.id!=o.id&&r.width==o.width&&r.frameRate==o.frameRate&&r.codecs==o.codecs&&r.mimeType==o.mimeType&&r.label==o.label&&ne(r.roles,o.roles)&&Hi(r.closedCaptions,o.closedCaptions)&&r.bandwidth==o.bandwidth&&(a=!0);a||n.push(r)}t.gd=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,s=u(n),o=s.next();!o.done;o=s.next())o=o.value,r.id!=o.id&&r.language==o.language&&r.label==o.label&&r.codecs==o.codecs&&r.mimeType==o.mimeType&&r.bandwidth==o.bandwidth&&ne(r.roles,o.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,s=u(n),o=s.next();!o.done;o=s.next())o=o.value,r.id!=o.id&&r.width==o.width&&r.codecs==o.codecs&&r.mimeType==o.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}(t),!n&&1==t.length){r=t[0],e.g=r.Kc,e.h=r.gd,e.j=r.textStreams,e.i=r.imageStreams,P.A(2);break}for(a=-1,s=0;s<t.length;s++)o=t[s],e.m.has(o.id)||(e.m.add(o.id),-1==a&&(a=s));if(-1==a)return P.return();for(l=t.map((function(e){return e.Kc})),c=t.map((function(e){return e.gd})),d=t.map((function(e){return e.textStreams})),h=t.map((function(e){return e.imageStreams})),p=u(d),f=p.next();!f.done;f=p.next())f.value.push(th(i.X));for(g=u(h),v=g.next();!v.done;v=g.next())v.value.push(th(i.Wb));return E(P,Ud(e.g,l,a,jd,Gd),3);case 3:return E(P,Ud(e.h,c,a,jd,Gd),4);case 4:return E(P,Ud(e.j,d,a,jd,Gd),5);case 5:return E(P,Ud(e.i,h,a,jd,Gd),2);case 2:if(m=0,y=[],e.h.length&&e.g.length)for(w=u(e.g),C=w.next();!C.done;C=w.next())for(I=C.value,D=u(e.h),R=D.next();!R.done;R=D.next())L=R.value,O=Br(I.drmInfos,L.drmInfos),I.drmInfos.length&&L.drmInfos.length&&!O.length||(x=m++,y.push({id:x,language:I.language,primary:I.primary,audio:I,video:L,bandwidth:(I.bandwidth||0)+(L.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=e.h.concat(e.g),_=u(b),T=_.next();!T.done;T=_.next())k=T.value,S=m++,y.push({id:S,language:k.language,primary:k.primary,audio:k.type==i.Hc?k:null,video:k.type==i.va?k:null,bandwidth:k.bandwidth||0,drmInfos:k.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,A(P)}}))}function Bd(e){var t,n,i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b,A,_,T,k,S,w;return P((function(C){switch(C.g){case 1:if(t=tt,1==e.length)return C.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.Hc}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.va}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.X}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.Wb}))})),s=u(r),o=s.next();!o.done;o=s.next())o.value.push(eh(t.X));for(l=u(a),c=l.next();!c.done;c=l.next())c.value.push(eh(t.Wb));return E(C,Ud([],n,0,Kd,Wd),2);case 2:return d=C.h,E(C,Ud([],i,0,Kd,Wd),3);case 3:return h=C.h,E(C,Ud([],r,0,Kd,Wd),4);case 4:return p=C.h,E(C,Ud([],a,0,Kd,Wd),5);case 5:if(f=C.h,g=0,h.length&&d.length)for(b=u(d),A=b.next();!A.done;A=b.next())for(_=A.value,T=u(h),k=T.next();!k.done;k=T.next())S=k.value,w=g++,S.variantIds.push(w),_.variantIds.push(w);else for(v=h.concat(d),m=u(v),y=m.next();!y.done;y=m.next())y.value.variantIds=[g++];return C.return(h.concat(d).concat(p).concat(f))}}))}function Ud(e,t,n,i,r){var a,s,o,l,c,d,h,p,f,g,v,m,y,b,A,_,T,k;return P((function(S){switch(S.g){case 1:for(a=tt,s=[],o=0;o<t.length;o++)o>=n?s.push(new Set(t[o])):s.push(new Set);l=u(e),c=l.next();case 2:if(c.done){S.A(4);break}return E(S,function(e,t,n,i,r){return P((function(a){return 1==a.g?(Yd(t,e),e.matchedStreams?e.segmentIndex?E(a,Fd(e,n),2):a.A(2):a.return(!1)):(Hd(e,n,i,r),a.return(!0))}))}(c.value,t,n,r,s),5);case 5:if(!S.h)throw new Le(2,4,4037);c=l.next(),S.A(2);break;case 4:for(d=u(s),h=d.next();!h.done;h=d.next())for(p=h.value,f=u(p),g=f.next();!g.done;g=f.next())v=g.value,(m=Vd(v,t,i,r,s))&&e.push(m);for(y=u(s),h=y.next();!h.done;h=y.next())for(b=h.value,A={},_=u(b),g=_.next();!g.done;A={Va:A.Va},g=_.next())if(A.Va=g.value,T=A.Va.type==a.X&&!A.Va.language,k=A.Va.type==a.Wb&&!A.Va.tilesLayout,!T&&!k&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Gt(t.codecs)==Gt(e.Va.codecs)}}(A)))throw new Le(2,4,4037);return S.return(e)}}))}function Fd(e,t){var n,i,r,a,s,o,l;return P((function(c){if(1==c.g){for(n=[],i=e.matchedStreams,r=u(i),a=r.next();!a.done;a=r.next())s=a.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return E(c,Promise.all(n),2)}if(e.segmentIndex instanceof So)for(o=0;o<i.length;o++)(l=i[o]).segmentIndex&&o>=t&&e.segmentIndex.l.push(l.segmentIndex);A(c)}))}function Vd(e,t,n,i,r){var a=n(e);return Yd(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return P((function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new So,E(e,Fd(a,0),0))}))}),a.matchedStreams?(Hd(a,0,i,r),a):null}function Hd(e,t,n,i){for(var r=e.matchedStreams,a=0;a<r.length;a++)if(a>=t){var s=r[a];n(e,s);var o=!0;"audio"==e.type&&0==an(e.language,s.language)&&(o=!1),o&&i[a].delete(s)}}function jd(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=u(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Kd(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Gd(e,t){var n,i;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(c(n),c(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=Br(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Le(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(r=u(t.closedCaptions)).next();!a.done;a=r.next()){var s=u(a.value);a=s.next().value,s=s.next().value,e.closedCaptions.set(a,s)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=jd(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Gd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Gd(e.trickModeVideo,t)}function Wd(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(c(e.keyIds),c(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,c(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=u(t.closedCaptions)).next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}}function Yd(e,t){for(var n=[],i=(e=u(e)).next();!i.done;i=e.next()){for(var r=t,a={audio:zd,video:zd,text:qd,image:$d}[r.type],s={audio:Xd,video:Zd,text:Qd,image:Jd}[r.type],o=null,l=(i=u(i.value)).next();!l.done;l=i.next())!a(r,l=l.value)||o&&!s(r,o,l)||(o=l);if(!(r=o))return;n.push(r)}t.matchedStreams=n}function zd(e,t){var n;return!(n=t.mimeType!=e.mimeType||Gt(t.codecs)!=Gt(e.codecs))&&(n=e.drmInfos)&&(e=e.drmInfos,t=t.drmInfos,n=!(!e.length||!t.length||0<Br(e,t).length)),!n}function qd(e,t){return!!e.language&&(!t.language||0!=an(e.language,t.language)&&t.kind==e.kind)}function $d(e){return!!e.tilesLayout}function Xd(e,t,n){if(e.id==n.id)return!0;var i=an(e.language,t.language),r=an(e.language,n.language);return r>i||!(r<i)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((i=nh(e.channelsCount,t.channelsCount,n.channelsCount))==rh||i!=sh&&((i=nh(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==rh||i!=sh&&!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=rh)))))}function Zd(e,t,n){if(e.id==n.id)return!0;var i=nh(e.width*e.height,t.width*t.height,n.width*n.height);if(i==rh)return!0;if(i==sh)return!1;if(e.frameRate){if((i=nh(e.frameRate,t.frameRate,n.frameRate))==rh)return!0;if(i==sh)return!1}return!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=rh)}function Qd(e,t,n){if(e.id==n.id)return!0;var i=an(e.language,t.language),r=an(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Jd(e,t,n){return e.id==n.id||nh(e.width*e.height,t.width*t.height,n.width*n.height)==rh}function eh(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function th(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ao([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function nh(e,t,n){if(t==e&&e!=n)return sh;if(n==e&&e!=t)return rh;if(t>e){if(n<=e||n-e<t-e)return rh;if(n-e>t-e)return sh}else{if(n>e)return sh;if(e-n<e-t)return rh;if(e-n>e-t)return sh}return ah}function ih(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?rh:t<e?sh:ah}Md.prototype.release=function(){for(var e=u(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var rh=1,ah=0,sh=-1;function oh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new Md,this.F=0,this.H=new H(5),this.D=new st((function(){!function(e){var t,n;P((function(i){switch(i.g){case 1:return t=0,_(i,2),E(i,lh(e),4);case 4:t=i.h,k(i,3);break;case 2:n=S(i),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return i.return();hh(e,t),A(i)}}))}(e)})),this.o=new _i,this.s=null,this.J=[],this.u=1/0,this.B=!1}function lh(e){var t,n,i,r,a,s,o;return P((function(l){return 1==l.g?(t=wi(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),i=Date.now(),r=n.request(0,t),Ti(e.o,r),E(l,r.promise,2)):3!=l.g?(a=l.h,e.h?(a.uri&&!e.m.includes(a.uri)&&e.m.unshift(a.uri),E(l,function(e,t,n){var i,r,a,s;return P((function(o){if(1==o.g){if(!(i=Ar(t,"MPD")))throw new Le(2,4,4001,n);return e.g.dash.disableXlinkProcessing?o.return(uh(e,i,n)):(r=e.g.dash.xlinkFailGracefully,a=gd(i,e.g.retryParameters,r,n,e.h.networkingEngine),Ti(e.o,a),E(o,a.promise,2))}return s=o.h,o.return(uh(e,s,n))}))}(e,a.data,a.uri),3)):l.return(0)):(s=Date.now(),o=(s-i)/1e3,e.H.sample(1,o),l.return(o))}))}function uh(e,t,n){var i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b,T,w,C,I,D,R,L,O,x,M,N,B,U;return P((function(F){switch(F.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),r=[n],0<(a=ar(t,"Location").map(ur).filter($e)).length&&(s=Xe(r,a),r=e.m=s),o=ar(t,"BaseURL"),l=o.map(ur),c=Xe(r,l),d=0,o&&o.length&&(d=dr(o[0],"availabilityTimeOffset",yr)||0),h=e.g.dash.ignoreMinBufferTime,p=0,h||(p=dr(t,"minBufferTime",pr)||0),e.F=dr(t,"minimumUpdatePeriod",pr,-1),f=dr(t,"availabilityStartTime",hr),g=dr(t,"timeShiftBufferDepth",pr),v=e.g.dash.ignoreSuggestedPresentationDelay,m=null,v||(m=dr(t,"suggestedPresentationDelay",pr)),y=e.g.dash.ignoreMaxSegmentDuration,b=null,y||(b=dr(t,"maxSegmentDuration",pr)),T=t.getAttribute("type")||"static",e.i)for(w=e.i.presentationTimeline,C=u(Object.values(e.l)),I=C.next();!I.done;I=C.next())(D=I.value).segmentIndex&&D.segmentIndex.eb(w.Pa());else R=e.g.defaultPresentationDelay||1.5*p,w=new eo(f,null!=m?m:R,e.g.dash.autoCorrectDrift);return w.yc("static"==T),w.U()&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),w.me(g),L=t.getAttribute("profiles")||"",O={Ma:"static"!=T,presentationTimeline:w,$:null,T:null,ea:null,I:null,bandwidth:0,Ke:!1,zb:d,profiles:L.split(",")},x=function(e,t,n,i){var r=dr(i,"mediaPresentationDuration",pr),a=[],s=0;i=ar(i,"Period");for(var o=0;o<i.length;o++){var l=i[o],u=i[o+1],c=dr(l,"start",pr,s),d=l.id,h=dr(l,"duration",pr),p=null;if(u){var f=dr(u,"start",pr);null!=f&&(p=f-c)}else null!=r&&(p=r-c);if(null==p&&(p=h),!(null!==e.s&&null!==d&&null!==c&&c<e.s)||e.J.includes(d)||o+1==i.length){if(null!==c&&(null===e.s||c>e.s)&&(e.s=c),s=ch(e,t,n,{start:c,duration:p,node:l,Gd:null==p||!u}),a.push(s),t.$.id&&p&&(e.L[t.$.id]=p),null==p){s=null;break}s=c+p}}return e.J=a.map((function(e){return e.id})),null!=r?{periods:a,duration:r,De:!1}:{periods:a,duration:s,De:!0}}(e,O,c,t),M=x.duration,N=x.periods,"static"!=T&&x.De||w.Aa(M||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?w.Ue(e.u):e.u&&Y("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),w.Sd(b||1),E(F,Nd(e.j,N,O.Ma),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),F.A(3);break}if(e.i={presentationTimeline:w,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:p||0,sequenceMode:e.g.dash.sequenceMode},!w.df()){F.A(4);break}return B=ar(t,"UTCTiming"),E(F,function(e,t,n){var i,r,a,s,o,l,c,d;return P((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=u(i),s=a.next();case 2:if(s.done){h.A(4);break}switch(o=s.value,_(h,5),l=o.scheme,c=o.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Y("NTP UTCTiming scheme is not supported");break;default:Y("Unrecognized scheme in UTCTiming element",l)}h.A(9);break;case 7:return E(h,fh(e,t,c,"HEAD"),10);case 10:return h.return(h.h);case 8:return E(h,fh(e,t,c,"GET"),11);case 11:return h.return(h.h);case 9:k(h,3);break;case 5:S(h);case 3:s=a.next(),h.A(2);break;case 4:return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,c,B),5);case 5:if(U=F.h,!e.h)return F.return();w.Ve(U);case 4:w.Md();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),A(F)}}))}function ch(e,t,n,i){t.$=ph(i.node,null,n),t.T=i,t.$.zb=t.zb,t.$.id||(t.$.id="__shaka_period_"+i.start);var r=ar(i.node,"EventStream");n=t.presentationTimeline.Pa();for(var a=(r=u(r)).next();!a.done;a=r.next())gh(e,i.start,i.duration,a.value,n);if(n=ar(i.node,"AdaptationSet").map((function(n){return function(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ea=ph(n,t.$,null);var r,a=!1,s=ar(n,"Role"),o=s.map((function(e){return e.getAttribute("value")})).filter($e),l=void 0,d=t.ea.contentType==et;d&&(l="subtitle");for(var h=(s=u(s)).next();!h.done;h=s.next()){var p=(h=h.value).getAttribute("schemeIdUri");if(null==p||"urn:mpeg:dash:role:2011"==p)switch(h=h.getAttribute("value"),h){case"main":a=!0;break;case"caption":case"subtitle":l=h}}p=ar(n,"EssentialProperty"),s=null,h=!1;for(var f=(p=u(p)).next();!f.done;f=p.next()){var g=(f=f.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?s=f.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?r=i(parseInt(f.getAttribute("value"),10)):h=!0}for(p=u(p=ar(n,"SupplementalProperty")),f=p.next();!f.done;f=p.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(f=f.value).getAttribute("schemeIdUri")&&(r=i(parseInt(f.getAttribute("value"),10)));p=ar(n,"Accessibility");var v=new Map;for(p=u(p),f=p.next();!f.done;f=p.next())if(g=f.value,f=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==f)if(f=1,null!=g)for(var m=u(g=g.split(";")),y=m.next();!y.done;y=m.next()){var b=y.value,_=y=void 0;b.includes("=")?(y=(b=b.split("="))[0].startsWith("CC")?b[0]:"CC"+b[0],_=b[1]||"und"):(y="CC"+f,2==g.length?f+=2:f++,_=b),v.set(y,rn(_))}else v.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==f)if(f=1,null!=g)for(g=u(g.split(";")),y=g.next();!y.done;y=g.next())y=y.value,b=m=void 0,y.includes("=")?(y=y.split("="),m="svc"+y[0],b=y[1].split(",")[0].split(":").pop()):(m="svc"+f,f++,b=y),v.set(m,rn(b));else v.set("svc1","und");else"urn:mpeg:dash:role:2011"==f&&null!=g&&(o.push(g),"captions"==g&&(l="caption"));if(h)return null;h=ar(n,"ContentProtection");var T=sd(h,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),k=rn(n.getAttribute("lang")||"und"),S=n.getAttribute("label");if((h=ar(n,"Label"))&&h.length&&(h=h[0],h.textContent&&(S=h.textContent)),h=ar(n,"Representation"),n=h.map((function(n){return(n=function(e,t,n,i,r,a,s,o,l,u){if(t.I=ph(u,t.ea,null),e.u=Math.min(e.u,t.I.zb),!function(e){var t=e.wc?1:0;return t+=e.ab?1:0,t+=e.xc?1:0,0==t?e.contentType==et||"application"==e.contentType:(1!=t&&(e.wc&&(e.ab=null),e.xc=null),!0)}(t.I))return null;var c=t.T.start;t.bandwidth=dr(u,"bandwidth",vr)||0;var d=t.I.contentType,h=d==et||"application"==d;d="image"==d;try{var p=function(t,n,i){return function(e,t,n,i){var r,a,s,o,l;return P((function(u){return 1==u.g?(r=Ri,a=Bo(t,n,i,e.g.retryParameters),s=e.h.networkingEngine,o=s.request(r,a),Ti(e.o,o),E(u,o.promise,2)):(l=u.h,u.return(l.data))}))}(e,t,n,i)};if(t.I.wc)var f=Sd(t,p);else if(t.I.ab)f=Ld(t,e.l);else if(t.I.xc)f=Od(t,p,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.I.wa,v=t.T.duration||0;f={Bb:function(){return Promise.resolve(To(c,v,g))}}}}catch(e){if((h||d)&&4002==e.code)return null;throw e}p=ar(u,"ContentProtection"),p=function(e,t,n,i){var r=sd(e,n,i);if(t.Fe)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Fe=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Le(2,4,4008);return r.Be||t.Be}(p,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),p=new Set(p?[p]:[]);var m=!1;ar(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(m=!0);var y,b,_=!1;if(h&&(_=o.includes("forced_subtitle")||o.includes("forced-subtitle")),d&&((u=ar(u,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=u.getAttribute("value")),!y))return null;u=t.I.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(u.includes("hvc1.2.4.L153.B0")||u.includes("hev1.2.4.L153.B0"))&&(b="PQ");var T=t.I.id?t.$.id+","+t.I.id:"",k={id:e.G++,originalId:t.I.id,createSegmentIndex:function(){var n,i;return P((function(r){if(1==r.g)return(n=T&&t.Ma&&e.l[T]?e.l[T]:k).segmentIndex?r.A(0):(i=n,E(r,f.Bb(),3));i.segmentIndex=r.h,A(r)}))},closeSegmentIndex:function(){k.segmentIndex&&(k.segmentIndex.release(),k.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:r,label:a,type:t.ea.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:o,forced:_,channelsCount:t.I.ad,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:m,closedCaptions:l,hdr:b,tilesLayout:y,matchedStreams:[]};return T&&t.Ma&&!e.l[T]&&(e.l[T]=k),k}(e,t,T,l,k,S,a,o,v,n))&&(n.hdr=n.hdr||r),n})).filter((function(e){return!!e})),0==n.length){if(s="image"==t.ea.contentType,e.g.dash.ignoreEmptyAdaptationSet||d||s)return null;throw new Le(2,4,4003)}if(!t.ea.contentType||"application"==t.ea.contentType)for(t.ea.contentType=vh(n[0].mimeType,n[0].codecs),d=u(n),p=d.next();!p.done;p=d.next())p.value.type=t.ea.contentType;for(d=u(n),p=d.next();!p.done;p=d.next())for(p=p.value,f=u(T.drmInfos),g=f.next();!g.done;g=f.next())(g=g.value).keyIds=g.keyIds&&p.keyIds?new Set([].concat(c(g.keyIds),c(p.keyIds))):g.keyIds||p.keyIds;return d=h.map((function(e){return e.getAttribute("id")})).filter($e),{id:t.ea.id||"__fake__"+e.G++,contentType:t.ea.contentType,language:k,vh:a,streams:n,drmInfos:T.drmInfos,qe:s,qg:d}}(e,t,n)})).filter($e),t.Ma){for(i=[],a=(r=u(n)).next();!a.done;a=r.next())for(var s=(a=u(a.value.qg)).next();!s.done;s=a.next())i.push(s.value);if(i.length!=new Set(i).size)throw new Le(2,4,4018)}for(i=n.filter((function(e){return!e.qe})),r=(n=u(n=n.filter((function(e){return e.qe})))).next();!r.done;r=n.next()){a=(r=r.value).qe.split(" ");for(var o=(s=u(i)).next();!o.done;o=s.next()){var l=o.value;if(a.includes(l.id)){o={};for(var d=(l=u(l.streams)).next();!d.done;o={Gc:o.Gc},d=l.next())o.Gc=d.value,o.Gc.trickModeVideo=r.streams.find(function(e){return function(t){return Gt(e.Gc.codecs)==Gt(t.codecs)}}(o))}}}if(r=e.g.disableAudio?[]:dh(i,"audio"),s=e.g.disableVideo?[]:dh(i,"video"),a=e.g.disableText?[]:dh(i,et),n=e.g.disableThumbnails?[]:dh(i,"image"),!s.length&&!r.length)throw new Le(2,4,4004);for(i=[],o=(r=u(r)).next();!o.done;o=r.next())i.push.apply(i,c(o.value.streams));for(r=[],o=(s=u(s)).next();!o.done;o=s.next())r.push.apply(r,c(o.value.streams));for(s=[],o=(a=u(a)).next();!o.done;o=a.next())s.push.apply(s,c(o.value.streams));for(a=[],o=(n=u(n)).next();!o.done;o=n.next())a.push.apply(a,c(o.value.streams));return{id:t.$.id,Kc:i,gd:r,textStreams:s,imageStreams:a}}function dh(e,t){return e.filter((function(e){return e.contentType==t}))}function hh(e,t){0>e.F||e.D.N(Math.max(3,e.F-t,j(e.H)))}function ph(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},n=n||t.wa;for(var i=ar(e,"BaseURL"),r=i.map(ur),a=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,l=dr(e,"frameRate",br)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,d=ar(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),p=(d=u(d)).next();!p.done;p=d.next())p=p.value.getAttribute("schemeIdUri"),h.includes(p)||h.push(p);d=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=ar(e,"AudioChannelConfiguration"))||t.ad,p=dr(e,"audioSamplingRate",mr)||t.audioSamplingRate,a||(a=vh(s,o));var f=ir(e,"SegmentBase"),g=ir(e,"SegmentTemplate"),v=f&&dr(f,"availabilityTimeOffset",yr)||0,m=g&&dr(g,"availabilityTimeOffset",yr)||0;return i=i&&i.length&&dr(i[0],"availabilityTimeOffset",yr)||0,i=t.zb+i+v+m,{wa:Xe(n,r),wc:f||t.wc,ab:ir(e,"SegmentList")||t.ab,xc:g||t.xc,width:dr(e,"width",mr)||t.width,height:dr(e,"height",mr)||t.height,contentType:a,mimeType:s,codecs:o,frameRate:l,pixelAspectRatio:c,emsgSchemeIdUris:h,id:e.getAttribute("id"),ad:d,audioSamplingRate:p,zb:i}}function fh(e,t,n,i){var r,a,s,o,l,u;return P((function(c){if(1==c.g)return r=Xe(t,[n]),(a=wi(r,e.g.retryParameters)).method=i,s=e.h.networkingEngine.request(4,a),Ti(e.o,s),E(c,s.promise,2);if(o=c.h,"HEAD"==i){if(!o.headers||!o.headers.date)return c.return(0);l=o.headers.date}else l=Et(o.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function gh(e,t,n,i,r){for(var a=i.getAttribute("schemeIdUri")||"",s=i.getAttribute("value")||"",o=dr(i,"timescale",mr)||1,l=(i=u(ar(i,"Event"))).next();!l.done;l=i.next()){var c=dr(l=l.value,"presentationTime",mr)||0,d=dr(l,"duration",mr)||0;d=(c=c/o+t)+d/o,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(l={schemeIdUri:a,value:s,startTime:c,endTime:d,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}function vh(e,t){return qt(jt(e,t))?et:e.split("/")[0]}function mh(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function yh(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function bh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Eh(e,t){if(!(e=e.getAttribute(t)))throw new Le(2,4,4023,t);return e.value}function Ah(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function _h(e,t){this.name=e,this.value=t}function Th(e,t){return e.filter((function(e){return e.name==t}))}function kh(e,t){return e.filter((function(e){return Eh(e,"TYPE")==t}))}function Sh(e,t){return(e=Th(e,t)).length?e[0]:null}function wh(e,t){var n=0;return n=void 0===n?0:n,(e=Sh(e,t))?Number(e.value):n}function Ch(e,t){return Xe([e],[t])[0]}function Ih(e){this.h=e,this.g=0}function Dh(e){Rh(e,/[ \t]+/gm)}function Rh(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Lh(e){return e.g==e.h.length?null:(e=Rh(e,/[^ \t\n]*/gm))?e[0]:null}function Ph(){this.g=0}function Oh(e,t,n){var i=(t=(t=Et(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Le(2,4,4015);t=0;for(var r=!0,a=u(i),s=a.next();!s.done;s=a.next())if(s=s.value,/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=xh(e,s),--e.g,Mh.includes(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(r=!0)}for(a=[],r=!0,s=0;s<i.length;s++){var o=i[s],l=i[s+1];if(/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=xh(e,o),Nh.includes(o.name)){if(1!=t)throw new Le(2,4,4017);var c=i.splice(s,i.length-s);i=n,r=[],s=[],l=[],o=null;for(var d=(c=u(c)).next();!d.done;d=c.next())d=d.value,/^(#EXT)/.test(d)?(d=xh(e,d),Mh.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?o=d:"EXT-X-PART"==d.name?l.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==bh(d,"TYPE")?l.push(d):"MAP"==bh(d,"TYPE")&&(d.name="EXT-X-MAP",o=d):s.push(d)):/^#(?!EXT)/m.test(d)||(d=Ch(i,d.trim()),o&&s.push(o),r.push(new Ah(d,s,l)),s=[],l=[]);return l.length&&(o&&s.push(o),r.push(new Ah("",s,l))),new mh(n,t,a,r)}a.push(o),"EXT-X-STREAM-INF"==o.name&&(o.g.push(new _h("URI",l)),r=!0)}}return new mh(n,t,a)}function xh(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Le(2,4,4016,t);t=n[1];var i,r=n[2];if(n=[],r){var a;(a=Rh(r=new Ih(r),/^([^,=]+)(?:,|$)/g))&&(i=a[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Rh(r,s);)n.push(new _h(a[1],a[2]||a[3])),Dh(r)}return new yh(e,t,n,i)}(i=oh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i=this;return P((function(r){if(1==r.g)return i.B=t.isLowLatencyMode(),i.m=[e],i.h=t,E(r,lh(i),2);if(n=r.h,i.h&&hh(i,n),!i.h)throw new Le(2,7,7001);return r.return(i.i)}))},i.stop=function(){for(var e=u(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},i.update=function(){var e,t=this;return P((function(n){return 1==n.g?(_(n,2),E(n,lh(t),4)):2!=n.g?k(n,0):(e=S(n),t.h&&e?(t.h.onError(e),void A(n)):n.return())}))},i.onExpirationUpdated=function(){},V("shaka.dash.DashParser",oh),Zr.mpd=function(){return new oh},Xr["application/dash+xml"]=function(){return new oh},Xr["video/vnd.mpeg.dash.mpd"]=function(){return new oh},yh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},yh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Mh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Nh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Bh(){}function Uh(e){try{var t=Fh(e);return pi({uri:e,Oe:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return di(e)}}function Fh(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Le(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new Le(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?Dt(t):Tt(t),contentType:i}}function Vh(){var e=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(et,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new Ph,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new st((function(){!function(e){var t,n;P((function(i){return 1==i.g?e.i?(_(i,2),E(i,e.update(),4)):i.return():2!=i.g?(pp(e)&&(t=e.O,e.m.N(t)),k(i,0)):(n=S(i),e.i?(n.severity=1,e.i.onError(n),e.m.N(.1),void A(i)):i.return())}))}(e)})),this.ia=Ap,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new _i,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}function Hh(e,t){return pp(e)?e.F.get(t.type):t.$c}function jh(e,t){var n,i,r,a,s,o,l,u,d,h,p,f,g,v,m,y;return P((function(b){if(1==b.g)return n=t.Jc,i=new Oe(n),e.l&&t.Mc&&Ne(i,new We("_HLS_skip=YES")),E(b,hp(e,i.toString()),2);if(r=b.h,!t.stream.segmentIndex)return b.return();if(1!=(a=Oh(e.W,r.data,r.uri)).type)throw new Le(2,4,4017);s=Th(a.g,"EXT-X-DEFINE"),o=Wh(e,s),l=t.stream,u=Hh(e,t),d=tp(a,l.mimeType),h=d.keyIds,p=d.drmInfos,f=function(e,t){return e.size===t.size&&[].concat(c(e)).every((function(e){return t.has(e)}))},f(l.keyIds,h)||(l.keyIds=h,l.drmInfos=p,e.i.newDrmInfo(l)),g=lp(e,a,l.type,u,o),l.segmentIndex.Hb(g,e.j.Pa()),g.length&&(v=wh(a.g,"EXT-X-MEDIA-SEQUENCE"),m=u.get(v),l.segmentIndex.eb(m)),y=g[g.length-1],Sh(a.g,"EXT-X-ENDLIST")&&(t.mc=!0,t.Ya=y.endTime),A(b)}))}function Kh(e,t,n){t.Ya+=n;for(var i=(t=u(e=Hh(e,t))).next();!i.done;i=t.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}}function Gh(e){if(pp(e)){if(e.O=e.J,e.ia==Tp){var t=Xh(e);e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.me(t)}}else e.j.Aa(Xh(e));e.j.Md()}function Wh(e,t){for(var n=new Map,i=(t=u(t)).next();!i.done;i=t.next()){var r=i.value;i=bh(r,"NAME");var a=bh(r,"VALUE");r=bh(r,"IMPORT"),i&&a&&n.set(i,a),r&&(i=e.o.get(r))&&n.set(r,i)}return n}function Yh(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=bh(t,"CODECS",n.join(",")).split(/\s*,\s*/),e=new Set,t=[];for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=Yt(i=i.value)[0];e.has(r)||(t.push(i),e.add(r))}return t}function zh(e){return rn(e=bh(e,"LANGUAGE")||"und")}function qh(e,t){var n=Eh(t,"GROUP-ID"),i="",r=Eh(t,"TYPE").toLowerCase();"subtitles"==r&&(r=et);var a=r;if(a!=et&&n&&e.s.has(n)&&(i=e.s.get(n)),r=up(Eh(t,"URI"),e.o),e.h.has(r))return e.h.get(r);var s=zh(t),o=bh(t,"NAME"),l="YES"==bh(t,"DEFAULT"),u="audio"==a&&(u=bh(t,"CHANNELS"))?parseInt(u.split("/")[0],10):null,c="audio"==a&&(!!(c=bh(t,"CHANNELS"))&&c.includes("/JOC"));return i=$h(e,r,i,a,s,l,o,u,null,bh(t,"CHARACTERISTICS"),t="YES"==bh(t,"FORCED"),c),e.u.has(n)?e.u.get(n).push(i):e.u.set(n,[i]),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i)}function $h(e,t,n,i,r,a,s,o,l,c,d,h){function p(p){var f,m,y,b,_,T,k,S,w,C,I,D,R;return P((function(L){if(1==L.g)return E(L,hp(e,v.Jc),2);if(3!=L.g)return f=L.h,p.aborted?L.return():(m=f.uri,y=Oh(e.W,f.data,m),b=pp(e),E(L,Jh(e,y,t,m,n,i,r,a,s,o,l,c,d,h),3));if(_=L.h,p.aborted)return L.return();if(T=_.stream,pp(e)&&!b&&rp(e),v.Jc=m,v.Ya=_.Ya,v.Mc=_.Mc,v.mc=_.mc,v.$c=_.$c,v.Ld=!0,g.segmentIndex=T.segmentIndex,g.encrypted=T.encrypted,g.drmInfos=T.drmInfos,g.keyIds=T.keyIds,g.mimeType=T.mimeType,Js.includes(g.mimeType)&&(g.codecs=""),g.drmInfos.length&&e.i.newDrmInfo(g),i==(k=tt).va||i==k.Hc)for(S=u(e.h.values()),w=S.next();!w.done;w=S.next())(C=w.value).Ld||C.type!=i||(C.stream.mimeType=T.mimeType,Js.includes(C.stream.mimeType)&&(C.stream.codecs=""));(function(e){if(!e.D)return!1;for(var t=[],n=[],i=(e=u(e.D.variants)).next();!i.done;i=e.next())(i=i.value).video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex})))})(e)&&(e.Ga?Qh(e,[v]):(e.Ga=!0,I=Array.from(e.h.values()),D=I.filter((function(e){return e.stream.segmentIndex})),Qh(e,D),Gh(e),0<(R=e.O)&&e.m.N(R))),A(L)}))}var f=Ch(e.M,t),g=ep(e,n,i,r,a,s,o,l,c,d,h);Js.includes(g.mimeType)&&(g.codecs="");var v={stream:g,type:i,Ac:t,Jc:f,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},m=null,y=new AbortController;return g.createSegmentIndex=function(){return m||(y=new AbortController,m=new Promise((function(e){e(p(y.signal))})))},g.closeSegmentIndex=function(){m&&!g.segmentIndex&&y.abort(),g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),m=null},v}function Xh(e){for(var t=1/0,n=(e=u(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Ya));return t}function Zh(e,t){for(var n=[],i=(t=u(t)).next();!i.done;i=t.next())(i=i.value).segmentIndex&&_o(i.segmentIndex,(function(e){n.push(e)}));e.j.Ib(n)}function Qh(e,t){if(!pp(e))for(var n=Xh(e),i=u(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Wa(0,n);for(r=(n=u(t)).next();!r.done;r=n.next())r=r.value.stream,Js.includes(r.mimeType)&&(r.codecs="");Zh(e,t.map((function(e){return e.stream}))),e.g.hls.ignoreManifestProgramDateTime?function(e,t){for(var n=-1==e.B,i=u(t),r=i.next();!r.done;r=i.next()){var a=(r=r.value).stream.segmentIndex,s=Hh(e,r);if(a=a.g[0]||null)for(var o=(s=u(s)).next();!o.done;o=s.next()){var l=(o=u(o.value)).next().value;if(o.next().value==a.startTime){n&&(e.B=Math.max(e.B,l)),r.Cd=l;break}}}if(!(0>e.B))for(r=(t=u(t)).next();!r.done;r=t.next())(i=(n=r.value).stream.segmentIndex)&&(i.g.splice(0,e.B-n.Cd),(i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),Kh(e,n,i)))}(e,t):function(e,t){if(1/0==e.H)for(var n=(t=u(t)).next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.H=Math.min(e.H,i.g))}if(1/0!=(t=e.H))for(n=(i=u(e.h.values())).next();!n.done;n=i.next()){var r=(n=n.value).stream.segmentIndex;if(null!=r){var a=r.g[0]||null;if(null==a.g)W("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Ac,"Expect AV sync issues!");else for(Kh(e,n,a.g-t-a.startTime),r=(n=u(r)).next();!r.done;r=n.next())r.value.oe(t)}}}(e,t)}function Jh(e,t,n,i,r,a,s,o,l,u,c,d,h,p,f){var g,v,m,y,b,A,_,T,k,S,w,C,I,D,R;return P((function(L){if(1==L.g){if(1!=t.type)throw new Le(2,4,4017);return g=Th(t.g,"EXT-X-DEFINE"),v=Wh(e,g),ip(e,t),f?L.A(2):E(L,function(e,t,n,i,r){var a,s,o,l,u,c,d,h,p,f;return P((function(g){return 1==g.g?(a=Ri,s=Math.trunc((i.segments.length-1)/2),o=up(i.segments[s].i,r),l=new Oe(o),u=l.qa.split(".").pop(),c=bp[t],(d=c[u])||(d=vp[u])||(d=cp(t,n))?g.return(d):((h=wi([o],e.g.retryParameters)).method="HEAD",E(g,gp(e,h,a),2))):(p=g.h,(f=p.headers["content-type"])?g.return(f.split(";")[0]):g.return(dp(t)))}))}(e,a,r,t,v),3)}if(2!=L.g&&(f=L.h),m=tp(t,f),y=m.drmInfos,b=m.keyIds,A=m.encrypted,_=m.kf,A&&!y.length&&!_)throw new Le(2,4,4026);return T=pp(e)?e.F.get(a):new Map,k=e.l,S=lp(e,t,a,T,v),k!=e.l&&ip(e,t),w=S[S.length-1].endTime,C=new Ao(S),D=!!(I=Sh(t.g,"EXT-X-SERVER-CONTROL"))&&null!=I.getAttribute("CAN-SKIP-UNTIL"),(R=ep(e,r,a,s,o,l,u,c,d,h,p)).segmentIndex=C,R.encrypted=A,R.drmInfos=y,R.keyIds=b,R.mimeType=f,L.return({stream:R,type:a,Ac:n,Jc:i,Ya:w,Mc:D,mc:!1,Cd:-1,$c:T,Ld:!1})}))}function ep(e,t,n,i,r,a,s,o,l,u,c){var d=cp(n,t)||dp(n);return{id:e.Fa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==et?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,label:a,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:l?l.split(","):[],forced:u,channelsCount:s,audioSamplingRate:null,spatialAudio:c,closedCaptions:o,hdr:void 0,tilesLayout:void 0}}function tp(e,t){var n=[];if(e.segments)for(var i=(e=u(e.segments)).next();!i.done;i=e.next())i=Th(i.value.g,"EXT-X-KEY"),n.push.apply(n,c(i));i=e=!1;for(var r=[],a=new Set,s=(n=u(n)).next();!s.done;s=n.next()){var o=Eh(s=s.value,"METHOD");if("NONE"!=o)if(e=!0,"AES-128"==o)i=!0;else if(o=bh(s,"KEYFORMAT")||"identity",s=(o=Ep[o])?o(s,t):null){if(s.keyIds)for(var l=(o=u(s.keyIds)).next();!l.done;l=o.next())a.add(l.value);r.push(s)}}return{drmInfos:r,keyIds:a,encrypted:e,kf:i}}function np(t,n,i){if(!e.crypto||!e.crypto.subtle)throw Y("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Le(2,4,4042);var r=0,a=bh(n,"IV","");if(a){var s=Rt(a.substr(2));if(16!=s.byteLength)throw new Le(2,4,4043)}else r=wh(i.g,"EXT-X-MEDIA-SEQUENCE");var o=wi([n=Ch(i.h,Eh(n,"URI"))],t.g.retryParameters),l={method:"AES-128",iv:s,firstMediaSequenceNumber:r,fetchKey:function(){var n,i,r;return P((function(a){if(1==a.g)return E(a,gp(t,o,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new Le(2,4,4044);return i={name:"AES-CBC"},r=l,E(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h,l.fetchKey=void 0,A(a)}))}};return l}function ip(e,t){var n=Sh(t.g,"EXT-X-PLAYLIST-TYPE"),i=Sh(t.g,"EXT-X-ENDLIST");if(i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i)fp(e,Ap);else{if(fp(e,n?Tp:_p),!(i=Sh(t.g,"EXT-X-TARGETDURATION")))throw new Le(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),n=Sh(t.g,"EXT-X-PART-INF"),e.l&&n?(e.da=Number(Eh(n,"PART-TARGET")),e.J=Math.min(e.da,e.J),t=Sh(t.g,"EXT-X-SERVER-CONTROL"),e.V=t?Number(Eh(t,"PART-HOLD-BACK")):0):e.J=Math.min(i,e.J),e.ca=Math.max(i,e.ca)}}function rp(e){var t=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ca*e.g.hls.liveSegmentsDelay;e.j.Xe(0),e.j.We(t),e.j.yc(!1)}function ap(e,t,n,i){return(n=Sh(n,"EXT-X-MAP"))?(t=[i=up(Ch(t,Eh(n,"URI")),i),bh(n,"BYTERANGE","")].join("-"),e.ba.has(t)||(n=function(e,t){var n=0,i=null;(t=bh(t,"BYTERANGE"))&&(n=t.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1);return new ps((function(){return[e]}),n,i)}(i,n),e.ba.set(t,n)),e.ba.get(t)):null}function sp(e,t,n,i,r,a,s,o,l){var c=i.g,d=up(i.i,a),h=Sh(c,"EXTINF"),p=a=0,f=null;i.h.length&&!e.l&&Y("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var g=null;if(!e.g.hls.ignoreManifestProgramDateTime){var v=Sh(c,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(g=hr(v.value))}if(v=gs,Sh(c,"EXT-X-GAP")&&(v=2),!h){if(0==i.h.length)throw new Le(2,4,4024,"EXTINF");if(!e.l)return null}var m=[];if(e.l)for(var y={},b=0;b<i.h.length;y={pd:y.pd},b++){var E=i.h[b],A=0==b?n:m[m.length-1],_=0==b?r:A.endTime,T=Number(bh(E,"DURATION"))||e.da;if(T){T=_+T;var k=0,S=null;"EXT-X-PRELOAD-HINT"==E.name?k=(k=bh(E,"BYTERANGE-START"))?Number(k):0:(k=(S=u(op(A,k=bh(E,"BYTERANGE")))).next().value,S=S.next().value),(A=bh(E,"URI"))&&(y.pd=Ch(s,A),A=gs,"YES"==bh(E,"GAP")&&(A=2),m.push(new fs(_,T,function(e){return function(){return[e.pd]}}(y),k,S,t,0,0,1/0,[],"",null,null,A)))}}return a=h?r+Number(h.value.split(",")[0]):m[m.length-1].endTime,(e=Sh(c,"EXT-X-BYTERANGE"))?(p=(f=u(op(n,e.value))).next().value,f=f.next().value):m.length&&(p=m[0].Ba,f=m[m.length-1].ka),n="",e=null,"image"==o&&(n="1x1",o=Sh(c,"EXT-X-TILES"))&&(n=Eh(o,"LAYOUT"),(o=bh(o,"DURATION"))&&(e=Number(o))),new fs(r,a,(function(){return d.length?[d]:[]}),p,f,t,0,0,1/0,m,n,e,g,v,l)}function op(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),i=(n=n[1]?Number(n[1]):e.ka+1)+t-1),[n,i]}function lp(e,t,n,i,r){var a=t.segments,s=void 0,o=wh(t.g,"EXT-X-DISCONTINUITY-SEQUENCE"),l=wh(t.g,"EXT-X-MEDIA-SEQUENCE"),c=Sh(t.g,"EXT-X-SKIP"),d=l+(c=c?Number(bh(c,"SKIPPED-SEGMENTS")):0),h=0;pp(e)&&i.has(d)&&(h=i.get(d));for(var p=[],f=null,g=0;g<a.length;g++){var v=a[g],m=0==g?h:f.endTime;d=l+c+g,Sh(v.g,"EXT-X-DISCONTINUITY")&&o++;for(var y=u(v.g),b=y.next();!b.done;b=y.next())"EXT-X-KEY"==(b=b.value).name&&(s="AES-128"==Eh(b,"METHOD")?np(e,b,t):void 0);i.set(d,m),y=ap(e,t.h,v.g,r),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(f=v=sp(e,y,f,v,m,r,t.h,n,s))&&(v.m=o,e.g.hls.ignoreManifestProgramDateTime&&null!=e.B&&d<e.B||p.push(v))}if(t=p.some((function(e){return null!=e.g})))for(n={},i=0;i<p.length;n={Qb:n.Qb,Pb:n.Pb,Bc:n.Bc,Ta:n.Ta,Ob:n.Ob},i++)if(n.Ta=p[i],null==n.Ta.g)for(n.Pb=0,n.Qb=i,r=function(e){return function(){var t=p[e.Qb];if(t){if(null!=t.g)return t.g+e.Pb;e.Pb-=t.endTime-t.startTime,e.Qb+=1}return null}}(n),n.Ob=0,n.Bc=i,a=function(e){return function(){var t=p[e.Bc];if(t){if(t!=e.Ta&&(e.Ob+=t.endTime-t.startTime),null!=t.g)return t.g+e.Ob;--e.Bc}return null}}(n);null==n.Ta.g;)n.Ta.g=a(),null==n.Ta.g&&(n.Ta.g=r());if(t)for(i=(n=u(p)).next();!i.done;i=n.next())for(i=(r=i.value).g,a=(r=u(r.i)).next();!a.done;a=r.next())(a=a.value).g=i,i+=a.endTime-a.startTime;if(e=e.H,t&&1/0!=e)for(i=(t=u(p)).next();!i.done;i=t.next())i.value.oe(e);return p}function up(e,t){var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=(i=i.value).slice(2,i.length-1),a=t.get(r);if(!a)throw new Le(2,4,4039,r);e=e.replace(i,a)}return e}function cp(e,t){if(e==et){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function dp(e){return e==et?"text/vtt":bp[e].mp4}function hp(e,t){return t=wi([t],e.g.retryParameters),e.i.modifyManifestRequest(t,{format:"h"}),gp(e,t,0)}function pp(e){return e.ia!=Ap}function fp(e,t){e.ia=t,e.j&&e.j.yc(!pp(e)),pp(e)||e.m.stop()}function gp(e,t,n){if(!e.G)throw new Le(2,7,7001);return t=e.i.networkingEngine.request(n,t),Ti(e.G,t),t.promise}V("shaka.net.DataUriPlugin",Bh),Bh.parse=Uh,Si("data",Uh),(i=Vh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i=this;return P((function(r){return 1==r.g?(i.i=t,i.l=t.isLowLatencyMode(),E(r,hp(i,e),2)):3!=r.g?(n=r.h,i.M=n.uri,E(r,function(e,t,n){var i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b,T,k,w,C,I,D,R,L,O,x,M,N,B,U,F;return P((function(V){switch(V.g){case 1:i=Oh(e.W,t,e.M);for(var H=u(Th(i.g,"EXT-X-DEFINE")),j=H.next();!j.done;j=H.next()){var K=j.value;j=bh(K,"NAME"),K=bh(K,"VALUE"),j&&K&&(e.o.has(j)||e.o.set(j,K))}if(r=[],a=[],s=[],1==i.type)return w=e.g.hls.mediaPlaylistFullMimeType,i.segments.length&&(C=new Oe(i.segments[0].i),I=C.qa.split(".").pop(),(D=vp[I])?w=D:"ts"!==I&&"mp4"!==I&&(mp[I]?(D=mp[I],R=e.g.hls.defaultAudioCodec,w=D+'; codecs="'+R+'"'):yp[I]&&(D=yp[I],L=e.g.hls.defaultVideoCodec,w=D+'; codecs="'+L+'"'))),O=w.split(";")[0],x=O.split("/")[0],M=Wt(w),N=new Map,E(V,Jh(e,i,n,n,M,x,"",!0,"Media Playlist",null,N,null,!1,!1,O),5);for(o=Th(i.g,"EXT-X-MEDIA"),l=Th(i.g,"EXT-X-STREAM-INF"),c=Th(i.g,"EXT-X-IMAGE-STREAM-INF"),d=Th(i.g,"EXT-X-SESSION-KEY"),j=(H=u(l)).next();!j.done;j=H.next()){var G=j.value;K=bh(G,"AUDIO"),j=bh(G,"VIDEO");var W=bh(G,"SUBTITLES");if(G=Yh(e,G),W){var Y=Je(et,G);e.s.set(W,Y),te(G,Y)}K&&((W=Je("audio",G))||(W=e.g.hls.defaultAudioCodec),e.s.set(K,W)),j&&((K=Je("video",G))||(K=e.g.hls.defaultVideoCodec),e.s.set(j,K))}for(h=Th(i.g,"EXT-X-SESSION-DATA"),p=u(h),f=p.next();!f.done;f=p.next())g=f.value,v=bh(g,"DATA-ID"),m=bh(g,"URI"),y=bh(g,"LANGUAGE"),b=bh(g,"VALUE"),T=(new Map).set("id",v),m&&T.set("uri",Ch(e.M,m)),y&&T.set("language",y),b&&T.set("value",b),k=new vi("sessiondata",T),e.i&&e.i.onEvent(k);for(function(e,t){t=t.filter((function(e){var t=bh(e,"URI")||"";return"SUBTITLES"!=bh(e,"TYPE")&&""!=t}));for(var n=(t=u(t)).next();!n.done;n=t.next())qh(e,n.value)}(e,o),j=(H=u(H=kh(o,"CLOSED-CAPTIONS"))).next();!j.done;j=H.next())j=zh(W=j.value),K=Eh(W,"GROUP-ID"),W=Eh(W,"INSTREAM-ID"),e.L.get(K)||e.L.set(K,new Map),e.L.get(K).set(W,j);return r=function(e,t,n){var i=[],r=new Set;if(0<n.length)for(var a=(n=u(n)).next();!a.done;a=n.next()){var s=Eh(a=a.value,"METHOD");if("NONE"!=s&&"AES-128"!=s&&(s=bh(a,"KEYFORMAT")||"identity",a=(s=Ep[s])?s(a,""):null)){if(a.keyIds)for(var o=(s=u(a.keyIds)).next();!o.done;o=s.next())r.add(o.value);i.push(a)}}return t=t.map((function(t){var n=bh(t,"FRAME-RATE"),a=Number(bh(t,"AVERAGE-BANDWIDTH"))||Number(Eh(t,"BANDWIDTH")),s=bh(t,"RESOLUTION"),o=(s=u(s?s.split("x"):[null,null])).next().value,l=s.next().value,c=bh(t,"VIDEO-RANGE");t=function(e,t){var n=Yh(e,t),i=bh(t,"AUDIO"),r=bh(t,"VIDEO"),a=i||r;a=a&&e.u.has(a)?e.u.get(a):[],i={audio:i?a:[],video:r?a:[]},r=!1;var s=Eh(t,"URI"),o=i.audio.find((function(e){return e&&e.Ac==s})),l=Je("video",n),u=Je("audio",n);return u&&!l?a="audio":!a.length&&u&&l?(a="video",n=[[l,u].join()]):i.audio.length&&o?(a="audio",r=!0):a=i.video.length&&!i.audio.length?"audio":"video",r||(e=function(e,t,n,i){var r=up(Eh(t,"URI"),e.o);return e.h.has(r)?e.h.get(r):(t=bh(t,"CLOSED-CAPTIONS"),t="video"==i&&t&&"NONE"!=t?e.L.get(t):null,n=Qe(i,n),i=$h(e,r,n,i,"und",!1,null,null,t,null,!1,!1),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i))}(e,t,n,a),i[e.stream.type]=[e]),i}(e,t),s=t.audio;for(var d=u(t=t.video),h=d.next();!h.done;h=d.next())(h=h.value.stream)&&(h.width=Number(o)||void 0,h.height=Number(l)||void 0,h.frameRate=Number(n)||void 0,h.hdr=c||void 0);for(n=e.g.disableAudio,s.length&&!n||(s=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],o=(s=u(s)).next();!o.done;o=s.next())for(o=o.value,c=(l=u(t)).next();!c.done;c=l.next()){var p=c.value;(c=o?o.stream:null)&&(c.drmInfos=i,c.keyIds=r),(d=p?p.stream:null)&&(d.drmInfos=i,d.keyIds=r),h=o?o.stream.drmInfos:null;var f=p?p.stream.drmInfos:null;p=(p?p.Ac:"")+" - "+(o?o.Ac:""),c&&d&&h.length&&f.length&&!(0<Br(h,f).length)||e.ua.has(p)||(c={id:e.Fa++,language:c?c.language:"und",primary:!!c&&c.primary||!!d&&d.primary,audio:c,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(c),e.ua.add(p))}return n})).reduce(ze,[]),t=t.filter((function(e){return null!=e}))}(e,l,d),a=function(e,t){var n=kh(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return qh(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=Eh(i.value,"GROUP-ID");if((i=e.s.get(r))&&(r=e.u.get(r)))for(var a=(r=u(r)).next();!a.done;a=r.next())(a=a.value).stream.codecs=i,a.stream.mimeType=cp(et,i)||dp(et)}return t.filter((function(e){return e}))}(e,o),E(V,function(e,t){var n,i;return P((function(r){return 1==r.g?(n=t.map((function(t){var n,i;return P((function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(_(r,2),E(r,function(e,t){var n,i,r,a,s,o,l,u,c,d;return P((function(h){return 1==h.g?(n=up(Eh(t,"URI"),e.o),i=bh(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(r=zh(t),a=bh(t,"NAME"),s=bh(t,"CHARACTERISTICS"),o=$h(e,n,i,"image",r,!1,a,null,null,s,!1,!1),e.h.has(n)?h.return(e.h.get(n)):(l=bh(t,"RESOLUTION"))?E(h,o.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(u=o.stream.segmentIndex.get(0),c=u.tilesLayout)&&(o.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),o.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(d=bh(t,"BANDWIDTH"))&&(o.stream.bandwidth=Number(d)),e.h.set(n,o),h.return(o))}))}(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=S(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i}))})),E(r,Promise.all(n),2)):(i=r.h,r.return(i.filter((function(e){return e}))))}))}(e,c),4);case 4:s=V.h,V.A(3);break;case 5:B=V.h,e.h.set(n,B),r.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==x?B.stream:null,video:"video"==x?B.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new Le(2,7,7001);e.j=new eo(null,0),e.j.yc(!0),1==i.type&&(pp(e)&&(rp(e),U=e.O,e.m.N(U)),F=Array.from(e.h.values()),Qh(e,F),Gh(e)),e.D={presentationTimeline:e.j,variants:r,textStreams:a,imageStreams:s,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.D),A(V)}}))}(i,n.data,e),3)):r.return(i.D)}))},i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},i.update=function(){var e,t,n,i,r,a,s,o,l=this;return P((function(d){if(1==d.g){if(!pp(l))return d.return();for(e=[],t=Array.from(l.h.values()),n=t.filter((function(e){return e.stream.segmentIndex})),i=u(n),r=i.next();!r.done;r=i.next())a=r.value,e.push(jh(l,a));return E(d,Promise.all(e),2)}Zh(l,n.map((function(e){return e.stream}))),s=n.some((function(e){return 0==e.mc})),n.length&&!s&&(fp(l,kp.ff),o=t.map((function(e){return e.Ya})),l.j.Aa(Math.min.apply(Math,c(o))),l.i.updateDuration()),A(d)}))},i.onExpirationUpdated=function(){},V("shaka.hls.HlsParser",Vh);var vp={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},mp={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},yp={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},bp={audio:mp,video:yp,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Ep={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new Le(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Le(2,4,4041);return Ze("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Eh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Ze("com.widevine.alpha",[{initDataType:"cenc",initData:t=Ie((t=Fh(t=Eh(e,"URI"))).data)}]),(e=bh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Eh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Ze("com.microsoft.playready",[{initDataType:"cenc",initData:e=nr(e=Ie((e=Fh(e=Eh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=Eh(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Ze("org.w3.clearkey",null):null}},Ap="VOD",_p="EVENT",Tp="LIVE",kp={ff:Ap,Pg:_p,Ug:Tp};function Sp(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Oe:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=_t(t)}catch(e){}throw new Le(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function wp(){}function Cp(e,t,n,i,r){var a=new Op;Fi(t.headers).forEach((function(e,t){a.append(t,e)}));var s=new Lp,o={ye:!1,bf:!1};if(e=function(e,t,n,i,r,a,s){var o,l,u,c,d,h,p,f,g,v,m,y,b;return P((function(T){switch(T.g){case 1:return o=Rp,l=Pp,h=d=0,p=Date.now(),_(T,2),E(T,o(e,n),4);case 4:return u=T.h,a(Ip(u.headers)),f=u.clone().body.getReader(),v=(g=u.headers.get("Content-Length"))?parseInt(g,10):0,m=function(e){function t(){var n,i;return P((function(a){switch(a.g){case 1:return _(a,2),E(a,f.read(),4);case 4:n=a.h,k(a,3);break;case 2:return S(a),a.return();case 3:if(n.done){a.A(5);break}if(d+=n.value.byteLength,!s){a.A(5);break}return E(a,s(n.value),5);case 5:(100<(i=Date.now())-p||n.done)&&(r(i-p,d-h,v-d),h=d,p=i),n.done?e.close():(e.enqueue(n.value),t()),A(a)}}))}t()},new l({start:m}),E(T,u.arrayBuffer(),5);case 5:c=T.h,k(T,3);break;case 2:if(y=S(T),i.ye)throw new Le(1,1,7001,e,t);if(i.bf)throw new Le(1,1,1003,e,t);throw new Le(1,1,1002,e,y,t);case 3:return b=Ip(u.headers),T.return(Sp(b,c,u.status,e,u.url,t))}}))}(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i,r,t.streamDataCallback),e=new ci(e,(function(){return o.ye=!0,s.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var l=new st((function(){o.bf=!0,s.abort()}));l.N(t/1e3),e.finally((function(){l.stop()}))}return e}function Ip(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Dp(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}gt("Tizen 3")||gt("Tizen 2")||dt()||(Zr.m3u8=function(){return new Vh},Xr["application/x-mpegurl"]=function(){return new Vh},Xr["application/vnd.apple.mpegurl"]=function(){return new Vh}),V("shaka.net.HttpFetchPlugin",wp),wp.isSupported=Dp,wp.parse=Cp;var Rp=e.fetch,Lp=e.AbortController,Pp=e.ReadableStream,Op=e.Headers;function xp(){}function Mp(e,t,n,i,r){var a=new Bp,s=Date.now(),o=0,l=new Promise((function(l,u){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials,a.onabort=function(){u(new Le(1,1,7001,e,n))};var c=!1;for(var d in a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Np(a);r(e),c=!0}},a.onload=function(){var t=Np(a),i=a.response;try{var r=Sp(t,i,a.status,e,a.responseURL,n);l(r)}catch(e){u(e)}},a.onerror=function(t){u(new Le(1,1,1002,e,t,n))},a.ontimeout=function(){u(new Le(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-s||e.lengthComputable&&e.loaded==e.total)&&(i(t-s,e.loaded-o,e.total-e.loaded),o=e.loaded,s=t)},t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)}));return new ci(l,(function(){return a.abort(),Promise.resolve()}))}function Np(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=u(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Dp()&&(Si("http",Cp,2,!0),Si("https",Cp,2,!0),Si("blob",Cp,2,!0)),V("shaka.net.HttpXHRPlugin",xp),xp.parse=Mp;var Bp=e.XMLHttpRequest;function Up(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function Fp(e){return e.ya().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ka}function Vp(e,t){return Bo(e.g.ya(),e.g.Ba,e.g.ka,t.streaming.retryParameters)}function Hp(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function jp(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Kp(e){var t=this;this.o=e,this.j=new Map,this.i=new Oi((function(){return Gp(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new Hp}function Gp(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function Wp(e,t,n,i,r,a){xi(e.i);var s=(e.j.get(t)||Promise.resolve()).then((function(){var t,s,o,l,u,c,d;return P((function(h){if(1==h.g)return E(h,function(e,t){var n,i,r,a;return P((function(s){return 1==s.g?(n=Ri,i=e.o.request(n,t),r=function(){return i.abort()},e.h.push(r),E(s,i.promise,2)):(a=s.h,te(e.h,r),s.return(a.data))}))}(e,n),2);if(t=h.h,e.i.g)throw new Le(2,9,7001);if(r)for(l in s=Ie(t),(o=new tr(s)).data)u=Number(l),c=o.data[u],d=o.g[u],e.l(c,d);e.g.close(i,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),h.return(a(t))}))}));e.j.set(t,s)}function Yp(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new it,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function zp(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return P((function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,E(i,t(e.key,e.value,e),2));e.continue(),A(i)}))}}))}function qp(e){this.h=e,this.g=[]}function $p(e,t){return Xp(e,t,"readwrite")}function Xp(e,t,n){var i=new Yp(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then((function(){te(e.g,i)}),(function(){te(e.g,i)})),i}function Zp(e,t,n){this.h=new qp(e),this.i=t,this.g=n}function Qp(e){return Promise.reject(new Le(2,9,9011,"Cannot add new value to "+e))}function Jp(e,t,n,i){t=(e=$p(e.h,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Ec:r.Ec},a=n.next())r.Ec=a.value,t.delete(r.Ec).onsuccess=function(e){return function(){return i(e.Ec)}}(r);return e.promise()}function ef(e,t,n){var i,r,a,s,o,l,c;return P((function(d){if(1==d.g){for(i=Xp(e.h,t,"readonly"),r=i.store(),a={},s=[],o={},l=u(n),c=l.next();!c.done;o={Vb:o.Vb,Tb:o.Tb},c=l.next())o.Tb=c.value,o.Vb=r.get(o.Tb),o.Vb.onsuccess=function(e){return function(){null==e.Vb.result&&s.push(e.Tb),a[e.Tb]=e.Vb.result}}(o);return E(d,i.promise(),2)}if(s.length)throw new Le(2,9,9012,"Could not find values for "+s);return d.return(n.map((function(e){return a[e]})))}))}function tf(e){this.g=new qp(e)}function nf(){this.g=new Map}function rf(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{za:n,ja:i},ja:e})}))})),t)return t;throw new Le(2,9,9013,"Could not find a cell that supports add-operations")}function af(e,t,n){if(!(e=e.g.get(t)))throw new Le(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Le(2,9,9013,"Could not find cell with name "+n);return t}function sf(e,t){of.set(e,t)}Si("http",Mp,1,!0),Si("https",Mp,1,!0),Si("blob",Mp,1,!0),Hp.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Kp.prototype.destroy=function(){return this.i.destroy()},Yp.prototype.abort=function(){var e=this;return P((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return _(t,2),E(t,e.g,4)}if(2!=t.g)return k(t,0);S(t),A(t)}))},Yp.prototype.store=function(){return this.h},Yp.prototype.promise=function(){return this.g},qp.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=Zp.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Qp(this.i)},i.removeSegments=function(e,t){return Jp(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return P((function(i){return 1==i.g?E(i,ef(n,n.i,e),2):(t=i.h,i.return(t.map((function(e){return n.ze(e)}))))}))},i.addManifests=function(){return Qp(this.g)},i.updateManifest=function(){return Promise.reject(new Le(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=$p(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Jp(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return P((function(i){return 1==i.g?E(i,ef(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map((function(e){return n.bc(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return P((function(i){return 1==i.g?(e=Xp(n.h,n.g,"readonly"),t=new Map,E(i,zp(e,(function(e,i){var r;return P((function(a){if(1==a.g)return E(a,n.bc(i),2);r=a.h,t.set(e,r),A(a)}))})),2)):3!=i.g?E(i,e.promise(),3):i.return(t)}))},i.ze=function(e){return e},i.bc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,s,o,l,c=this;return P((function(d){if(1==d.g){for(n=$p(c.h,e),i=n.store(),r=[],a={},s=u(t),o=s.next();!o.done;a={Fc:a.Fc},o=s.next())l=o.value,a.Fc=i.add(l),a.Fc.onsuccess=function(e){return function(){r.push(e.Fc.result)}}(a);return E(d,n.promise(),2)}return d.return(r)}))},tf.prototype.destroy=function(){return this.g.destroy()},tf.prototype.getAll=function(){var e,t,n=this;return P((function(i){return 1==i.g?(e=Xp(n.g,"session-ids","readonly"),t=[],E(i,zp(e,(function(e,n){t.push(n)})),2)):3!=i.g?E(i,e.promise(),3):i.return(t)}))},tf.prototype.add=function(e){for(var t=$p(this.g,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},tf.prototype.remove=function(e){var t,n=this;return P((function(i){return 1==i.g?E(i,zp(t=$p(n.g,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):E(i,t.promise(),0)}))},nf.prototype.destroy=function(){for(var e=[],t=u(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},nf.prototype.init=function(){var e=this;of.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=u(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",nf),nf.unregister=function(e){of.delete(e)},nf.register=sf,nf.prototype.destroy=nf.prototype.destroy;var of=new Map;function lf(){Zp.apply(this,arguments)}function uf(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var s=n++;i.variantIds.push(s),a.variantIds.push(s)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?cf(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=cf(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function cf(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Le(2,9,9004,"Could not parse uri "+e)}function df(){Zp.apply(this,arguments)}function hf(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function pf(){Zp.apply(this,arguments)}function ff(){this.m=this.j=this.i=this.h=this.g=this.l=null}function gf(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function vf(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new gf(t,n,i,Number(e[4])):null}function mf(e,t){this.h=e,this.g=t}function yf(e,t){var n=new eo(null,0);n.Aa(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=u(t),s=a.next();!s.done;s=a.next()){var o=u(s.value.variantIds);for(s=o.next();!s.done;s=o.next())r.add(s.value)}for(a=u(n),s=a.next();!s.done;s=a.next())for(o=u(s.value.variantIds),s=o.next();!s.done;s=o.next())r.add(s.value);for(a=new Map,r=u(r),s=r.next();!s.done;s=r.next())s=s.value,a.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,s=bf(e,r,i),o=u(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).language=s.language,r.primary=r.primary||s.primary,r.audio=s;for(n=u(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=bf(e,r,i),s=u(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return e.type==et})).map((function(t){return bf(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return bf(e,t,n)})),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=u(i.values()),l=o.next();!l.done;l=o.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function bf(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new gf("segment",e.h,e.g,t.dataKey);return new fs(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new gf("segment",e.h,e.g,t);return new ps((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.Ib(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ao(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Ef(){this.g=null}function Af(){}function _f(e){var t=vf(e);return t&&"manifest"==t.g?e=pi(e={uri:e,Oe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.g?function(e,t){var n=new nf;return pi(void 0).Y((function(){return n.init()})).Y((function(){return af(n,t.za(),t.ja())})).Y((function(e){return e.getSegments([t.key()])})).Y((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):di(new Le(2,1,9004,e)),e}function Tf(e,t,n){var i,r,a,s,o,l;return P((function(c){switch(c.g){case 1:i=[];for(var d=[],h=u(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=u(d),v=g.next();!v.done;v=g.next())if(kf((v=v.value).info,p)){v.sessionIds.push(p.sessionId),f=!0;break}f||d.push({info:p,sessionIds:[p.sessionId]})}r=u(d),a=r.next();case 2:if(a.done){c.A(4);break}return s=a.value,o=function(e,t,n){var i,r;return P((function(a){switch(a.g){case 1:return i=new Tr({kb:t,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),_(a,2),i.configure(e),E(a,function(e,t,n,i,r,a){var s=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),Pr(e,s,[])}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:k(a,3);break;case 2:return S(a),E(a,i.destroy(),5);case 5:case 9:return a.return([]);case 3:return _(a,6),E(a,Cr(i),8);case 8:k(a,7);break;case 6:return S(a),E(a,i.destroy(),9);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return P((function(t){return 1==t.g?(_(t,2),E(t,function(e,t){var n,i,r;return P((function(a){return 1==a.g?E(a,Or(e,t),2):3!=a.g?(n=a.h)?(i=[],(r=e.i.get(n))&&(r.Ja=new it,i.push(r.Ja)),i.push(n.remove()),E(a,Promise.all(i),3)):a.return():(e.i.delete(n),void A(a))}))}(i,e),4)):2!=t.g?(r.push(e),k(t,0)):(S(t),void A(t))}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,s),E(c,o,5);case 5:l=c.h,i=i.concat(l),a=r.next(),c.A(2);break;case 4:return c.return(i)}}))}function kf(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ne(e.audioCapabilities,t.audioCapabilities,n)&&ne(e.videoCapabilities,t.videoCapabilities,n)}function Sf(e,t){var n=yf(new mf(e.za(),e.ja()),t),i=t.appMetadata||{};return n=wf(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function wf(e){for(var t=[],n=function(e){return e.filter((function(e){return Ln(e)}))}(e.variants),i=(n=u(n)).next();!i.done;i=n.next())t.push(kn(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(Sn(n.value));return t}function Cf(){this.g={}}function If(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth),e.g[n.id]=r,e.g[i.id]=a}}function Df(e,t){e.g[t.id]=t.bandwidth||2048}function Rf(e,t){return null==(e=e.g[t])&&(e=0),e}function Lf(e){var t=this;if(e&&e.constructor!=zl)throw new Le(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.jc()):(this.h=Fl(),this.g=new ki),this.i=[],this.j=[];var n=!e;this.l=new Oi((function(){var e,i,r,a,s;return P((function(o){switch(o.g){case 1:return E(o,Promise.all(t.j.map((function(e){return Gp(e)}))),2);case 2:for(e=function(){},i=[],r=u(t.i),a=r.next();!a.done;a=r.next())s=a.value,i.push(s.then(e,e));return E(o,Promise.all(i),3);case 3:if(!n){o.A(4);break}return E(o,t.g.destroy(),4);case 4:t.h=null,t.g=null,A(o)}}))}))}function Pf(){if(ot())e:{for(var e=u(of.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Of(e){var t,n,i;return P((function(r){switch(r.g){case 1:return E(r,(t=new nf).init(),2);case 2:return E(r,rf(t),3);case 3:return n=r.h,i=new gf("manifest",n.path.za,n.path.ja,e),E(r,t.destroy(),4);case 4:return E(r,(new Lf).remove(i.toString()),0)}}))}function xf(e,t,n,i,r,a){var s,o,l,c,d,h,p,f,g,v,m;return P((function(y){switch(y.g){case 1:for(s=!1,_(y,2),o=!0,l=u(n.streams),c=l.next();!c.done;c=l.next())for(d=c.value,h=u(d.segments),p=h.next();!p.done;p=h.next())f=p.value,null!=(g=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null)&&(f.dataKey=g,f.pendingSegmentRefId=void 0),null!=(g=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=g,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(o=!1),f.pendingInitSegmentRefId&&(o=!1);return n.size+=r,o&&(n.isIncomplete=!1),E(y,e.updateManifest(t,n),4);case 4:s=!0,a(),k(y,0);break;case 2:return v=S(y),E(y,Of(t),5);case 5:if(s){y.A(6);break}return m=Object.values(i),E(y,e.removeSegments(m,(function(){})),6);case 6:throw v}}))}function Mf(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Nf(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Bf(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:jt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:jt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Uf(e,t,n){return P((function(i){return E(i,function(e,t,n,i){var r,a,s;return P((function(o){return 1==o.g?i.drmInfo?(r=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Le(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Bf(i,!1),videoCapabilities:Bf(i,!0)}})),E(o,Tf(t,e,a),2)):o.return():3!=o.g?(s=o.h,E(o,r.remove(s),3)):E(o,r.add(a.filter((function(e){return!s.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Ff(e,t,n){function i(){}var r=function(e){for(var t=new Set,n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return Sf(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function Vf(e,t,n,i,r,a){var s={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout},o=r.offline.numberOfParallelDownloads,l=0;return function(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Pa(),(function(n){var r=Fp(n),u=void 0;if(!a.has(r)){var c=n.endTime-n.startTime;c=Rf(t,i.id)*c,c=jp(e.g,c),a.set(r,new Up(n,c,l,!1))}n.h&&(u=Fp(n.h),a.has(u)||(c=.5*Rf(t,i.id),c=jp(e.g,c),a.set(u,new Up(n.h,c,l,!0)))),s.segments.push({pendingInitSegmentRefId:u,initSegmentKey:u?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:r,dataKey:0}),l=(l+1)%o})),s}function Hf(e){if(e.l.g)throw new Le(2,9,7001)}function jf(){if(!Pf())throw new Le(2,9,9e3)}function Kf(e,t){return P((function(n){return 1==n.g?(e.i.push(t),T(n),E(n,t,4)):2!=n.g?n.return(n.h):(w(n),te(e.i,t),C(n,0))}))}function Gf(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=u(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(lf,Zp),lf.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return P((function(s){return n=$p(a.h,a.g),i=n.store(),r=new it,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Le(2,9,9012,"Could not find values for "+e))},E(s,Promise.all([n.promise(),r]),0)}))},lf.prototype.bc=function(e){var t,n,i,r,a,s;return P((function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=uf(e.periods[n],r),t.push(a);return E(o,Bd(t),2)}return s=o.h,o.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},lf.prototype.ze=function(e){return{data:e.data}},v(df,Zp),df.prototype.bc=function(e){var t,n,i,r,a,s;return P((function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=u(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(hf(h,l.startTime,l.startTime+r));a=c,t.push(a)}return E(o,Bd(t),2)}return s=o.h,o.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})}))},v(pf,Zp),(i=pf.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var i=(e=$p(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},i.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=ff.prototype).init=function(){var t=this,n=new it,i=!1,r=new st((function(){i=!0,n.reject(new Le(2,9,9017))}));r.N(2);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!i){var e=a.result;t.l=e;var s=e.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new lf(e,"segment","manifest"):null,t.g=s,s=(s=e.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new df(e,"segment-v2","manifest-v2"):null,t.h=s,s=(s=e.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new df(e,"segment-v3","manifest-v3"):null,t.i=s,s=(s=e.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new pf(e,"segment-v5","manifest-v5"):null,t.j=s,e=e.objectStoreNames.contains("session-ids")?new tf(e):null,t.m=e,r.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){i||(n.reject(new Le(2,9,9001,a.error)),r.stop(),e.preventDefault())},n},i.destroy=function(){var e=this;return P((function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),A(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return P((function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return E(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return E(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return E(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return E(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),E(n,function(){var t=new it,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Le(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,E(n,t.init(),0)}}))},sf("idb",(function(){return gt("CrKey")||ut()||!e.indexedDB?null:new ff})),gf.prototype.za=function(){return this.i},gf.prototype.ja=function(){return this.h},gf.prototype.key=function(){return this.l},gf.prototype.toString=function(){return this.j},(i=Ef.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,s,o,l=this;return P((function(u){switch(u.g){case 1:if(n=vf(e),l.g=n,null==n||"manifest"!=n.g)throw new Le(2,1,9004,e);return i=new nf,T(u),E(u,i.init(),4);case 4:return E(u,af(i,n.za(),n.ja()),5);case 5:return E(u,u.h.getManifests([n.key()]),6);case 6:return r=u.h,a=r[0],s=new mf(n.za(),n.ja()),o=yf(s,a),t.makeTextStreamsForClosedCaptions(o),u.return(o);case 2:return w(u),E(u,i.destroy(),7);case 7:C(u,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,s,o,l,u=this;return P((function(c){switch(c.g){case 1:return n=u.g,i=new nf,_(c,2,3),E(c,i.init(),5);case 5:return E(c,af(i,n.za(),n.ja()),6);case 6:return E(c,(r=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,s=a[0],o=s.sessionIds.includes(e),l=null==s.expiration||s.expiration>t,!o||!l){c.A(3);break}return E(c,r.updateManifestExpiration(n.key(),t),3);case 3:return w(c),E(c,i.destroy(),10);case 10:C(c,0);break;case 2:S(c),c.A(3)}}))},Xr["application/x-offline-manifest"]=function(){return new Ef},V("shaka.offline.OfflineScheme",Af),Af.plugin=_f,Si("offline",_f),(i=Lf.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ol(e,t)),Vl(this.h,e)},i.getConfiguration=function(){var e=Fl();return Vl(e,this.h,Fl()),e},i.jc=function(){return this.g},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Kp(this.g);return this.j.push(a),t=function(e,t,n,i,r,a){var s,o,l,c,d,h,p,f,g,v,m,y,b;return P((function(T){switch(T.g){case 1:return jf(),o=s=null,l=new nf,h=d=c=null,_(T,2,3),E(T,i(),5);case 5:return s=T.h,E(T,function(e,t,n,i){var r,a,s,o,l;return P((function(u){if(1==u.g)return r=null,a=e.g,s={networkingEngine:a,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(i.manifest),Hf(e),E(u,n.start(t,s),2);if(3!=u.g)return o=u.h,Hf(e),l=Gf(o),E(u,Promise.all(Ui(l,(function(e){return e.createSegmentIndex()}))),3);if(Hf(e),r)throw r;return u.return(o)}))}(e,t,s,r),6);case 6:if(p=T.h,Hf(e),!(!p.presentationTimeline.U()&&!p.presentationTimeline.jb()))throw new Le(2,9,9005,t);return E(T,function(e,t,n,i){var r;return P((function(a){switch(a.g){case 1:return(r=new Tr({kb:e.g,onError:n,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),E(a,function(e,t,n){return e.da=!0,e.B=[],e.L=n,Sr(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,Cr(r),3);case 3:return E(a,Ir(r),4);case 4:return a.return(r)}}))}(e,p,(function(e){h=h||e}),r),7);case 7:if(o=T.h,Hf(e),h)throw h;return E(T,function(e,t){var n,i,r,a,s,o,l,c,d,h,p,f,g,v,m,y,b,T,w,C,I,D,R,L,O,x,M,N;return P((function(P){switch(P.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return fn(e,t,n)}))}(e,t.restrictions,n),E(P,mn(e,t.offline.usePersistentLicense),2);case 2:for(i=[],r=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,s=t.preferredVideoCodecs,o=t.preferredAudioCodecs,dn(e,s,o,r,a),l=u(e.variants),c=l.next();!c.done;c=l.next())d=c.value,i.push(kn(d));for(h=u(e.textStreams),p=h.next();!p.done;p=h.next())f=p.value,i.push(Sn(f));for(g=u(e.imageStreams),v=g.next();!v.done;v=g.next())m=v.value,i.push(wn(m));return E(P,t.offline.trackSelectionCallback(i),3);case 3:for(y=P.h,b=e.presentationTimeline.getDuration(),T=0,w=u(y),C=w.next();!C.done;C=w.next())I=C.value,D=I.bandwidth*b/8,T+=D;return _(P,4),E(P,t.offline.downloadSizeCallback(T),6);case 6:if(!P.h)throw new Le(2,9,9014);k(P,5);break;case 4:if((R=S(P))instanceof Le)throw R;throw new Le(2,9,9015);case 5:for(L=new Set,O=new Set,x=new Set,M=u(y),C=M.next();!C.done;C=M.next())"variant"==(N=C.value).type&&L.add(N.id),"text"==N.type&&O.add(N.id),"image"==N.type&&x.add(N.id);e.variants=e.variants.filter((function(e){return L.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return O.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return x.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),i=n.next();!i.done;i=n.next())for(var r=(i=u(t)).next();!r.done;r=i.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),i=n.next();!i.done;i=n.next());}(e),A(P)}}))}(p,r),8);case 8:return E(T,l.init(),9);case 9:return Hf(e),E(T,rf(l),10);case 10:return c=T.h,Hf(e),f=function(e,t,n,i,r,a){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=wf(t),appMetadata:n,isIncomplete:!1}}(n,t,i),o=r.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(a,(function(e,t){s.size=t,o(s,e)}),(function(t,n){l&&r.offline.usePersistentLicense&&c==n&&Dr(e,"cenc",t)}));var l=Mf(t)&&!Nf(t),c=null;l&&(c=Wf.get(e.g.keySystem));for(var d=new Cf,h=u(t.textStreams),p=h.next();!p.done;p=h.next())d.g[p.value.id]=52;for(h=u(t.imageStreams),p=h.next();!p.done;p=h.next())Df(d,p.value);for(p=u(t.variants),h=p.next();!h.done;h=p.next())If(d,h.value);return d=function(e,t,n,i){for(var r=new Map,a=Gf(n),s=new Map,o=(a=u(a)).next();!o.done;o=a.next()){var l=Vf(e,t,n,o=o.value,i,r);s.set(o.id,l)}for(e=u(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),pe:Array.from(r.values())}}(a,d,t,r),a=d.streams,d=d.pe,p=e.g,h=r.offline.usePersistentLicense,p&&h&&(p.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ic(),streams:a,sessionIds:h?Lr(e):[],drmInfo:p,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode},pe:d}}(o,p,t,n,r,a),g=f.ag,v=f.pe,E(T,c.ja.addManifests([g]),11);case 11:if(m=T.h,Hf(e),d=m[0],Hf(e),h)throw h;return E(T,function(e,t,n,i,r,a,s,o,l){var c,d,h,p,f,g,v,m,y,b;return P((function(T){switch(T.g){case 1:if(c={},d=0,h=function(t,h){var p,f,g,v,m,y,b;return P((function(_){if(1==_.g){for(p={},f=u(t),g=f.next();!g.done;p={cb:p.cb},g=f.next())p.cb=g.value,v=Vp(p.cb,a),m=p.cb.i,y=p.cb.h,b=function(t){return function(n){var i,r,a;return P((function(o){if(1==o.g)return E(o,s.addSegments([{data:n}]),2);i=o.h,Hf(e),r=t.cb.g,a=Fp(r),c[a]=i[0],d+=n.byteLength,A(o)}))}}(p),Wp(r,p.cb.groupId,v,m,y,b);return E(_,function(e){return P((function(t){return 1==t.g?E(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(r),2)}return h?(Hf(e),function(e,t,n,i){if(t.expiration=n.ic(),n=Lr(n),t.sessionIds=i.offline.usePersistentLicense?n:[],Mf(e)&&i.offline.usePersistentLicense&&!n.length)throw new Le(2,9,9007)}(o,i,l,a),E(_,s.updateManifest(n,i),0)):_.A(0)}))},p=!1,_(T,2),!Mf(o)||!p||Nf(o)){T.A(4);break}return E(T,h(t.filter((function(e){return e.h})),!0),5);case 5:return Hf(e),t=t.filter((function(e){return!e.h})),f=c,g=d,c={},d=0,E(T,xf(s,n,i,f,g,(function(){return Hf(e)})),6);case 6:Hf(e);case 4:if(p){T.A(7);break}return E(T,h(t,!1),8);case 8:return Hf(e),v=c,m=d,c={},d=0,E(T,xf(s,n,i,v,m,(function(){return Hf(e)})),9);case 9:Hf(e);case 7:k(T,0);break;case 2:return y=S(T),b=Object.values(c),E(T,s.removeSegments(b,(function(){})),10);case 10:throw y}}))}(e,v,d,g,a,r,c.ja,p,o),12);case 12:return Hf(e),y=new gf("manifest",c.path.za,c.path.ja,d),T.return(Sf(y,g));case 3:return w(T),E(T,l.destroy(),13);case 13:if(!s){T.A(14);break}return E(T,s.stop(),14);case 14:if(!o){T.A(16);break}return E(T,o.destroy(),16);case 16:C(T,0);break;case 2:if(b=S(T),null==d){T.A(18);break}return E(T,Of(d),18);case 18:throw h||b}}))}(this,e,t||{},(function(){var t;return P((function(a){return 1==a.g?E(a,zr(e,i.g,r.manifest.retryParameters,n||null),2):(t=a.h,a.return(t()))}))}),r,a),(t=new ci(t,(function(){return Gp(a)}))).finally((function(){te(i.j,a)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){te(e.i,n)}))}(this,t)},i.remove=function(e){return Kf(this,function(e,t){var n,i,r,a,s,o;return P((function(l){switch(l.g){case 1:if(jf(),null==(n=vf(t))||"manifest"!=n.g)throw new Le(2,9,9004,t);return i=n,r=new nf,T(l),E(l,r.init(),4);case 4:return E(l,af(r,i.za(),i.ja()),5);case 5:return E(l,(a=l.h).getManifests([i.key()]),6);case 6:return s=l.h,o=s[0],E(l,Promise.all([Uf(e,o,r),Ff(a,i,o)]),2);case 2:return w(l),E(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.pg=function(){return Kf(this,function(e){var t,n,i,r,a,s,o,l,c,d;return P((function(h){switch(h.g){case 1:return jf(),t=e.g,n=e.h.drm,i=new nf,r=!1,T(h),E(h,i.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),s=u(a),o=s.next();case 5:if(o.done){h.A(2);break}return E(h,(l=o.value).getAll(),8);case 8:return c=h.h,E(h,Tf(n,t,c),9);case 9:return d=h.h,E(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),o=s.next(),h.A(5);break;case 2:return w(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}(this))},i.list=function(){return Kf(this,P((function(i){switch(i.g){case 1:return jf(),e=[],t=new nf,T(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({za:n,ja:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return P((function(n){if(1==n.g)return E(n,i.getAllManifests(),2);n.h.forEach((function(n,i){n=Sf(new gf("manifest",t.za,t.ja,i),n),e.push(n)})),A(n)}))}))})),E(i,n,2);case 2:return w(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},V("shaka.offline.Storage",Lf),Lf.deleteAll=function(){var e;return P((function(t){return 1==t.g?(e=new nf,T(t),E(t,function(e){var t,n;return P((function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||of.forEach((function(e){(e=e())&&t.push(e)})),E(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.A(0):E(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(w(t),E(t,e.destroy(),5)):C(t,0)}))},Lf.prototype.list=Lf.prototype.list,Lf.prototype.removeEmeSessions=Lf.prototype.pg,Lf.prototype.remove=Lf.prototype.remove,Lf.prototype.store=Lf.prototype.store,Lf.prototype.getNetworkingEngine=Lf.prototype.jc,Lf.prototype.getConfiguration=Lf.prototype.getConfiguration,Lf.prototype.configure=Lf.prototype.configure,Lf.prototype.destroy=Lf.prototype.destroy,Lf.support=Pf;var Wf=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Yf(){}function zf(e,t){for(e={priority:t||0,mf:e},t=0;t<qf.length;t++)if(qf[t].priority<e.priority)return void qf.splice(t,0,e);qf.push(e)}$u.offline=Pf,V("shaka.polyfill",Yf),Yf.register=zf,Yf.installAll=function(){for(var e=u(qf),t=e.next();!t.done;t=e.next()){t=t.value;try{t.mf()}catch(e){Y("Error installing polyfill!",e)}}};var qf=[];function $f(){this.g=new Zf}function Xf(){e.AbortController||(e.AbortController=$f,e.AbortSignal=Zf)}function Zf(){bi.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Qf(){}function Jf(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=u(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())eg(t.value)}function eg(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function tg(){}function ng(){Hm()}function ig(){}function rg(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ag),document.addEventListener("webkitfullscreenerror",ag),document.addEventListener("mozfullscreenchange",ag),document.addEventListener("mozfullscreenerror",ag),document.addEventListener("MSFullscreenChange",ag),document.addEventListener("MSFullscreenError",ag)}}function ag(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function sg(){}function og(){var e=!0;(ht()||gt("PlayStation 5")||pt()||gt("Web0S")||ct()||gt("CrKey")||gt("PC=EOS")||gt("Hisense")||gt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),gg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=lg)}function lg(t){var n,i,r,a,s,o,l,u,c,d,h,p,f;return P((function(g){switch(g.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return g.return(n);if(i=t.video,r=t.audio,"media-source"==t.type){if(!ot())return g.return(n);if(i){if(gt("CrKey")){if(!e.cast)throw new Le(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var v=i.contentType;i.width&&i.height&&(v+="; width="+i.width+"; height="+i.height),i.framerate&&(v+="; framerate="+i.framerate),"pq"===i.transferFunction&&(v+="; eotf=smpte2084"),v=cast.__platform__.canDisplayType(v)}else v=Q(i.contentType)}else v=Q(i.contentType);if(!v)return g.return(n)}if(r&&(a=r.contentType,!Q(a)))return g.return(n)}else{if("file"!=t.type)return g.return(n);if(i&&(s=i.contentType,!lt(s))||r&&(o=r.contentType,!lt(o)))return g.return(n)}return t.keySystemConfiguration?(l=t.keySystemConfiguration,u=[],c=[],l.audio&&(d={robustness:l.audio.robustness||"",contentType:t.audio.contentType},u.push(d)),l.video&&(h={robustness:l.video.robustness||"",contentType:t.video.contentType},c.push(h)),p={initDataTypes:[l.initDataType],distinctiveIdentifier:l.distinctiveIdentifier,persistentState:l.persistentState,sessionTypes:l.sessionTypes},u.length&&(p.audioCapabilities=u),c.length&&(p.videoCapabilities=c),_(g,3),E(g,navigator.requestMediaKeySystemAccess(l.keySystem,[p]),5)):(n.supported=!0,g.return(Promise.resolve(n)));case 5:f=g.h,k(g,4);break;case 3:S(g);case 4:f&&(n.supported=!0,n.keySystemAccess=f);case 2:return g.return(n)}}))}$f.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new vi("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},s.Object.defineProperties($f.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yf.AbortController=$f,$f.install=Xf,v(Zf,bi),s.Object.defineProperties(Zf.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zf(Xf),Yf.Aria=Qf,Qf.install=Jf,zf(Jf),Yf.EncryptionScheme=tg,tg.install=ng,zf(ng,-2),Yf.Fullscreen=ig,ig.install=rg,zf(rg),Yf.MediaCapabilities=sg,sg.install=og;var ug,cg,dg,hg,pg,fg,gg=null;function vg(){}function mg(){var t=ft();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?12>=t?(yg(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):yg():(gt("Tizen 2")||gt("Tizen 3")||gt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Yt(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;gt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function yg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,O.apply(0,arguments));return t.abort=function(){},t}}function bg(){}function Eg(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Ag;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new vi("change");n.dispatchEvent(e)}))}()}function Ag(){bi.call(this),this.type="",this.angle=0}function _g(){}function Tg(e,t){try{var n=new wg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function kg(e){var t=this.mediaKeys;return t&&t!=e&&Ig(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ig(e,this):Promise.resolve()}function Sg(e){if(De(e=Ie(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Tt(e=At(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ce(e),this.dispatchEvent(t)}function wg(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=u(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=u(n.audioCapabilities),s=a.next();!s.done;s=a.next())(s=s.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(s=(n=u(n.videoCapabilities)).next();!s.done;s=n.next())(a=s.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Cg(e){this.h=new WebKitMediaKeys(e),this.g=new Mi}function Ig(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",Sg);try{return so(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Dg(e){bi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Mi,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new Lg}function Rg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new vi("keystatuseschange"),e.dispatchEvent(t)}function Lg(){this.size=0,this.g=void 0}function Pg(){}function Og(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=xg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mg,e.MediaKeys=Ng,e.MediaKeySystemAccess=Bg,e.shakaMediaKeysPolyfill=!0)}function xg(){return Promise.reject(Error("The key system specified is not supported."))}function Mg(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ng(){throw new TypeError("Illegal constructor.")}function Bg(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Ug(){}function Fg(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Qg="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Hg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jg,e.MediaKeys=Gg,e.MediaKeySystemAccess=Kg,e.shakaMediaKeysPolyfill=!0}}function Vg(e){return Qg?Qg+e.charAt(0).toUpperCase()+e.slice(1):e}function Hg(e,t){try{var n=new Kg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function jg(e){var t=this.mediaKeys;return t&&t!=e&&Wg(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Wg(e,this),Promise.resolve()}function Kg(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=(t=u(t)).next();!a.done;a=t.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},o=!1;if(a.audioCapabilities)for(var l=u(a.audioCapabilities),c=l.next();!c.done;c=l.next())(c=c.value).contentType&&(o=!0,r.canPlayType(c.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(c),i=!0));if(a.videoCapabilities)for(c=(l=u(a.videoCapabilities)).next();!c.done;c=l.next())(c=c.value).contentType&&(o=!0,r.canPlayType(c.contentType,this.g)&&(s.videoCapabilities.push(c),i=!0));if(o||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Gg(e){this.l=e,this.h=null,this.g=new Mi,this.i=[],this.j=new Map}function Wg(e,t){e.h=t,e.g.nb();var n=Qg;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Ce(t.initData),e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=Yg(e,t.sessionId);n&&(t=new vi("message",t=(new Map).set("messageType",null==n.keyStatuses.Eb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){(t=Yg(e,t.sessionId))&&(Xg(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.C(t,n+"keyerror",(function(t){var n=Yg(e,t.sessionId);n&&n.handleError(t)})))}function Yg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function zg(e,t,n){bi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new Zg}function qg(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=Ie(Tt("LOAD_SESSION|"+n));else{var r=Tt("PERSISTENT|");i=Pt(r,t)}else i=Ie(t)}catch(e){return Promise.reject(e)}e.h=new it;var a=Vg("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new st((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).N(.01)}return e.h}function $g(e,t,n){if(e.g)e.g.then((function(){return $g(e,t,n)})).catch((function(){return $g(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Et(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Dt(r.keys[0].k),r=Dt(r.keys[0].kid)}else i=Ie(n),r=null;var a=Vg("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function Xg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new vi("keystatuseschange"),e.dispatchEvent(t)}function Zg(){this.size=0,this.g=void 0}sg.originalMcap=gg,zf(og,-1),Yf.MediaSource=vg,vg.install=mg,zf(mg),Yf.Orientation=bg,bg.install=Eg,v(Ag,bi),Ag.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Ag.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zf(Eg),Yf.PatchedMediaKeysApple=_g,_g.uninstall=function(){ug&&(ug=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",cg),HTMLMediaElement.prototype.setMediaKeys=dg,e.MediaKeys=hg,e.MediaKeySystemAccess=pg,navigator.requestMediaKeySystemAccess=fg,cg=fg=dg=pg=hg=null,e.shakaMediaKeysPolyfill=!1)},_g.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(ug=!0,cg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),dg=HTMLMediaElement.prototype.setMediaKeys,hg=e.MediaKeys,pg=e.MediaKeySystemAccess,fg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kg,e.MediaKeys=Cg,e.MediaKeySystemAccess=wg,navigator.requestMediaKeySystemAccess=Tg,e.shakaMediaKeysPolyfill=!0)},wg.prototype.createMediaKeys=function(){var e=new Cg(this.keySystem);return Promise.resolve(e)},wg.prototype.getConfiguration=function(){return this.g},Cg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Dg(this.h)},Cg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Dg,bi),(i=Dg.prototype).generateRequest=function(e,t){var n=this;this.h=new it;try{var i=this.l.createSession("video/mp4",Ie(t));this.i=i,this.sessionId=i.sessionId||"",this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new vi("message",e=(new Map).set("messageType",null==n.keyStatuses.Eb()?"license-request":"license-renewal").set("message",Ce(e.message))),n.dispatchEvent(e)})),this.j.C(i,"webkitkeyadded",(function(){n.g&&(Rg(n,"usable"),n.g.resolve(),n.g=null)})),this.j.C(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rg(n,"output-not-allowed");break;default:Rg(n,"internal-error")}})),Rg(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new it;try{this.i.update(Ie(e))}catch(e){this.g.reject(e)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Lg.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wr.value();return!(!this.g||!Se(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},Yf.PatchedMediaKeysNop=Pg,Pg.install=Og,Ng.prototype.createSession=function(){},Ng.prototype.setServerCertificate=function(){},Bg.prototype.getConfiguration=function(){},Bg.prototype.createMediaKeys=function(){},zf(Og,-10),Yf.PatchedMediaKeysWebkit=Ug,Ug.install=Fg,Kg.prototype.createMediaKeys=function(){var e=new Gg(this.g);return Promise.resolve(e)},Kg.prototype.getConfiguration=function(){return this.h},Gg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new zg(t,this.l,e),this.i.push(e),e},Gg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(zg,bi),(i=zg.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Xg(this,"output-restricted"):Xg(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return qg(this,t,null)},i.load=function(e){return"persistent-license"==this.l?qg(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new it;return $g(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Vg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Zg.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wr.value();return!(!this.g||!Se(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Qg="";function Jg(){}function ev(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=nv,Object.defineProperty(t,"disablePictureInPicture",{get:rv,set:av,enumerable:!0,configurable:!0}),document.exitPictureInPicture=iv,document.addEventListener("webkitpresentationmodechanged",tv,!0))}}function tv(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function nv(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function iv(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function rv(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function av(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function sv(){}function ov(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=lv))}function lv(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function uv(){}function cv(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=dv)}function dv(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function hv(){}function pv(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:fv})}function fv(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function gv(){}function vv(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function mv(){}function yv(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||dt())&&(t.getVideoPlaybackQuality=bv)}}function bv(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Ev(){}function Av(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=_v;else if(6==n)t=Tv;else{try{var i=!!_v(1,2,"")}catch(e){i=!1}i&&(t=_v)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function _v(t,n,i){return new e.TextTrackCue(t,n,i)}function Tv(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function kv(){}zf(Fg),Yf.PiPWebkit=Jg,Jg.install=ev,zf(ev),Yf.RandomUUID=sv,sv.install=ov,zf(ov),Yf.StorageEstimate=uv,uv.install=cv,zf(cv),Yf.Symbol=hv,hv.install=pv,zf(pv),Yf.VideoPlayPromise=gv,gv.install=vv,zf(vv),Yf.VideoPlaybackQuality=mv,mv.install=yv,zf(yv),Yf.VTTCue=Ev,Ev.install=Av,zf(Av),kv.prototype.parseInit=function(){},kv.prototype.setSequenceMode=function(){},kv.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=(e=u(e=Et(e).split(/\r?\n/))).next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=Sv.exec(r))){var a=wv.exec(r[1]);r=new re(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,r[2]),n&&(n.endTime=a,i.push(n)),n=r}return n&&i.push(n),i},V("shaka.text.LrcTextParser",kv),kv.prototype.parseMedia=kv.prototype.parseMedia,kv.prototype.setSequenceMode=kv.prototype.setSequenceMode,kv.prototype.parseInit=kv.prototype.parseInit;var Sv=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,wv=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Cv(){}function Iv(e,t,n,i,r,a,s,o,l,c,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var f=null,g=u(em),v=g.next();!v.done&&!(f=xv(p,"backgroundImage",i,"#",v.value)[0]);v=g.next());if(g=d,("p"==e.nodeName||f)&&(d=!0),o="default"==(p.getAttribute("xml:space")||(o?"default":"preserve")),e=[],!(v=Array.from(p.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var m=u(p.childNodes),y=m.next();!y.done;y=m.next())(y=Iv(y.value,t,n,i,r,a,s,o,l,p,d))&&e.push(y);i=null!=c,m=/\S/.test(p.textContent);var b=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur");if(!(b||m||"br"==p.tagName||0!=e.length||i&&!o))return null;for(m=(y=Nv(p,n)).start,y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)m=(y=Mv(h,n,m,y)).start,y=y.end,h=h.parentNode;if(null==m&&(m=0),m+=t.periodStart,y=null==y?1/0:y+t.periodStart,m=Math.max(m,t.segmentStart),y=Math.min(y,t.segmentEnd),!b&&0<e.length)for(m=1/0,y=0,n=(t=u(e)).next();!n.done;n=t.next())n=n.value,m=Math.min(m,n.startTime),y=Math.max(y,n.endTime);if("br"==p.tagName)return(r=new re(m,y,"")).lineBreak=!0,r;if(t="",v&&(t=p.textContent,o&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new re(m,y,t)).nestedCues=e,d||(t.isContainer=!0),l&&(t.cellResolution=l),l=xv(p,"region",a,"")[0],p.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var E=l.getAttribute("xml:id");t.region=s.filter((function(e){return e.id==E}))[0]}return s=l,c&&i&&!p.getAttribute("region")&&!p.getAttribute("style")&&(s=xv(c,"region",a,"")[0]),function(e,t,n,i,r,a,s){a=a||s,"rtl"==Rv(t,n,r,"direction",a)&&(e.direction="rtl"),s=Rv(t,n,r,"writingMode",a),"tb"==s||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=de),(s=Rv(t,n,r,"textAlign",!0))?(e.positionAlign=Zv[s],e.lineAlign=Xv[s],e.textAlign=le[s.toUpperCase()]):e.textAlign=oe,(s=Rv(t,n,r,"displayAlign",!0))&&(e.displayAlign=ce[s.toUpperCase()]);(s=Rv(t,n,r,"color",a))&&(e.color=s);(s=Rv(t,n,r,"backgroundColor",a))&&(e.backgroundColor=s);(s=Rv(t,n,r,"border",a))&&(e.border=s);if(s=Rv(t,n,r,"fontFamily",a))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s}(s=Rv(t,n,r,"fontWeight",a))&&"bold"==s&&(e.fontWeight=700),s=Rv(t,n,r,"wrapOption",a),e.wrapLine=!s||"noWrap"!=s,(s=Rv(t,n,r,"lineHeight",a))&&s.match(jv)&&(e.lineHeight=s),(s=Rv(t,n,r,"fontSize",a))&&(s.match(jv)||s.match(Hv))&&(e.fontSize=s),(s=Rv(t,n,r,"fontStyle",a))&&(e.fontStyle=Ee[s.toUpperCase()]);if(i){s=i.getAttribute("imageType")||i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==s&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=Rv(t,n,r,"textOutline",a))&&(i=i.split(" "),i[0].match(jv)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(jv)?e.textStrokeWidth=i[0]:e.textStrokeColor="");(i=Rv(t,n,r,"letterSpacing",a))&&i.match(jv)&&(e.letterSpacing=i),(i=Rv(t,n,r,"linePadding",a))&&i.match(jv)&&(e.linePadding=i),(a=Rv(t,n,r,"opacity",a))&&(e.opacity=parseFloat(a));(n=Lv(n,r,"textDecoration"))&&Dv(e,n),(t=Pv(t,r,"textDecoration"))&&Dv(e,t)}(t,p,s,f,r,g,0==e.length),t}function Dv(e,t){for(var n=(t=u(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&te(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&te(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&te(e.textDecoration,"overline")}}function Rv(e,t,n,i,r){return r=void 0===r||r,(e=Pv(e,n,i))?e:r?Lv(t,n,i):null}function Lv(e,t,n){if(!e)return null;var i=lr(e,Jv,n);return i||Ov(e,t,n)}function Pv(e,t,n){var i=lr(e,Jv,n);return i||Ov(e,t,n)}function Ov(e,t,n){e=xv(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=or(e[r],"urn:ebu:tt:style",n);a||(a=lr(e[r],Jv,n)),a||(a=Pv(e[r],t,n)),a&&(i=a)}return i}function xv(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var s=e;for(e=null;s&&!(e=r?or(s,r,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(r=(t=u(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,s=(e=u(n)).next();!s.done;s=e.next())if(i+(s=s.value).getAttribute("xml:id")==r){a.push(s);break}return a}function Mv(e,t,n,i){return e=Nv(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function Nv(e,t){var n=Bv(e.getAttribute("begin"),t),i=Bv(e.getAttribute("end"),t);return e=Bv(e.getAttribute("dur"),t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function Bv(e,t){var n=null;if(Gv.test(e)){e=Gv.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);n=(r+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*i+3600*n}else if(Wv.test(e))n=Uv(Wv,e);else if(Yv.test(e))n=Uv(Yv,e);else if(zv.test(e))e=zv.exec(e),n=Number(e[1])/t.frameRate;else if(qv.test(e))e=qv.exec(e),n=Number(e[1])/t.g;else if($v.test(e))n=Uv($v,e);else if(e)throw new Le(2,2,2001,"Could not parse cue time range in TTML");return n}function Uv(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Fv(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Qt["application/x-subtitle-lrc"]=function(){return new kv},Cv.prototype.parseInit=function(){},Cv.prototype.setSequenceMode=function(){},Cv.prototype.parseMedia=function(e,t){var n=Et(e);if(e=[],""==n)return e;var i=Er(n,"tt");if(!i)throw new Le(2,2,2005,"Failed to parse TTML.");if(!(n=i.getElementsByTagName("body")[0]))return[];var r=lr(i,Qv,"frameRate"),a=lr(i,Qv,"subFrameRate"),s=lr(i,Qv,"frameRateMultiplier"),o=lr(i,Qv,"tickRate"),l=lr(i,Qv,"cellResolution"),c=i.getAttribute("xml:space")||"default",d=lr(i,Jv,"extent");if("default"!=c&&"preserve"!=c)throw new Le(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,r=new Fv(r,a,s,o),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{columns:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,a=(a=i.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(a):[],s=Array.from(i.getElementsByTagName("style")),o=[];for(var h=u(i=Array.from(i.getElementsByTagName("region"))),p=h.next();!p.done;p=h.next()){var f=p.value;p=new Ae;var g=f.getAttribute("xml:id");if(g){p.id=g;var v,m,y=null;d&&(y=Vv.exec(d)||Kv.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(v=Lv(f,s,"extent"))&&(null!=(v=(m=Vv.exec(v))||Kv.exec(v))&&(p.width=Number(v[1]),p.height=Number(v[2]),m||(null!=g&&(p.width=100*p.width/g),null!=y&&(p.height=100*p.height/y)),p.widthUnits=m||null!=g?_e:0,p.heightUnits=m||null!=y?_e:0)),(f=Lv(f,s,"origin"))&&(null!=(v=(m=Vv.exec(f))||Kv.exec(f))&&(p.viewportAnchorX=Number(v[1]),p.viewportAnchorY=Number(v[2]),m||(null!=y&&(p.viewportAnchorY=100*p.viewportAnchorY/y),null!=g&&(p.viewportAnchorX=100*p.viewportAnchorX/g)),p.viewportAnchorUnits=m||null!=g?_e:0))}else p=null;p&&o.push(p)}if(ar(n,"p").length)throw new Le(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=u(ar(n,"div"))).next();!h.done;h=d.next())if(ar(h.value,"span").length)throw new Le(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Iv(n,t,r,a,s,i,o,c,l,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},V("shaka.text.TtmlTextParser",Cv),Cv.prototype.parseMedia=Cv.prototype.parseMedia,Cv.prototype.setSequenceMode=Cv.prototype.setSequenceMode,Cv.prototype.parseInit=Cv.prototype.parseInit;var Vv=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Hv=/^(\d{1,2}(?:\.\d+)?|100)%$/,jv=/^(\d+px|\d+em|\d*\.?\d+c)$/,Kv=/^(\d+)px (\d+)px$/,Gv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Yv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,zv=/^(\d*(?:\.\d*)?)f$/,qv=/^(\d*(?:\.\d*)?)t$/,$v=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Xv={left:fe,center:"center",right:"end",start:fe,end:"end"},Zv={left:"line-left",center:"center",right:"line-right"},Qv=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Jv=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],em=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function tm(){this.g=new Cv}function nm(){this.g=!1}function im(e){for(var t=u(Object.entries(ve)),n=t.next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value,i=i.next().value;var r=new re(0,0,"");r.color=i,e.set("."+n,r)}for(n=(t=u(Object.entries(me))).next();!n.done;n=t.next())n=(i=u(n.value)).next().value,i=i.next().value,(r=new re(0,0,"")).backgroundColor=i,e.set("."+n,r)}function rm(e,t,n){0===n.size&&im(n);e:{var i=e;e=[];for(var r=-1,a="",s=0;s<i.length;s++)if("/"===i[s]&&0<s&&"<"===i[s-1]){var o=i.indexOf(">",s);if(o<=s){e=i;break e}if((o=i.substring(s+1,o))&&"c"===o){var l=e.pop();l?l===o?(a+="/"+o+">",s+=o.length+1):l.startsWith("c.")?(s+=o.length+1,a+="/"+l+">"):a+=i[s]:a+=i[s]}else a+=i[s]}else"<"===i[s]?"c"!=i[r=s+1]&&(r=-1):">"===i[s]&&0<r&&(e.push(i.substr(r,s-r)),r=-1),a+=i[s];e=a}for(i=[],a=-1,r=0;r<e.length;r++)"<"===e[r]?a=r+1:">"===e[r]&&0<a&&((a=e.substr(a,r-a)).match(cm)&&i.push(a),a=-1);for(r=(i=u(i)).next();!r.done;r=i.next())r=r.value,e=e.replace("<"+r+">",'<div time="'+r+'">'),e+="</div>";e:{for(r=e,a=[],s=-1,i="",e=!1,o=0;o<r.length;o++)if("/"===r[o]){if(-1===(l=r.indexOf(">",o))){e=r;break e}if((l=r.substring(o+1,l))&&"v"==l){e=!0;var c=null;if(a.length&&(c=a[a.length-1]),c){if(c===l)i+="/"+l+">";else{if(!c.startsWith("v")){i+=r[o];continue}i+="/"+c+">"}o+=l.length+1}else i+=r[o]}else i+=r[o]}else"<"===r[o]?"v"!=r[s=o+1]&&(s=-1):">"===r[o]&&0<s&&(a.push(r.substr(s,o-s)),s=-1),i+=r[o];for(a=(r=u(a)).next();!a.done;a=r.next())s=(a=a.value).replace(" ",".voice-"),i=(i=i.replace("<"+a+">","<"+s+">")).replace("</"+a+">","</"+s+">"),e||(i+="</"+s+">");e=i}if(r=Er("<span>"+e+"</span>","span")){if(i=[],1==(r=r.childNodes).length&&((a=r[0]).nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=e);for(r=(e=u(r)).next();!r.done;r=e.next())sm(r.value,t,i,n);t.nestedCues=i}else t.payload=e}function am(e,t){return e&&0<e.length?e:t}function sm(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=u(e.nodeName.split(/(?=[ .])+/g)),s=a.next();!s.done;s=a.next()){var o=s=s.value;if(o.startsWith(".voice-")){var l=o.split("-").pop();o='v[voice="'+l+'"]',i.has(o)||(o="v[voice="+l+"]")}switch(i.has(o)&&(o=i.get(o))&&(r.backgroundColor=am(o.backgroundColor,r.backgroundColor),r.color=am(o.color,r.color),r.fontFamily=am(o.fontFamily,r.fontFamily),r.fontSize=am(o.fontSize,r.fontSize),r.fontWeight=o.fontWeight,r.fontStyle=o.fontStyle,r.opacity=o.opacity,r.wrapLine=o.wrapLine),s){case"br":(s=t.clone()).lineBreak=!0,n.push(s);break;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"div":(s=e.getAttribute("time"))&&(s=lm(new Ih(s)))&&(r.startTime=s)}}if(cr(e))for(a=!0,i=u(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||((a=t.clone()).lineBreak=!0,n.push(a)),0<e.length&&((a=r.clone()).payload=e,n.push(a)),a=!1;else for(e=(t=u(e.childNodes)).next();!e.done;e=t.next())sm(e.value,r,n,i)}function om(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?oe:le[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter((function(e){return e.id==t})),e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ge[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=pe,e.line=Number(n[1]),n[2]&&(e.lineAlign=ge[n[2].toUpperCase()]))}function lm(e){if(null==(e=Rh(e,cm)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function um(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}Qt["application/ttml+xml"]=function(){return new Cv},tm.prototype.parseInit=function(e){var t=!1;if((new Wi).box("moov",Yi).box("trak",Yi).box("mdia",Yi).box("minf",Yi).box("stbl",Yi).P("stsd",zi).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Le(2,2,2007)},tm.prototype.setSequenceMode=function(){},tm.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Wi).box("mdat",$i((function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!i)throw new Le(2,2,2007);return r},V("shaka.text.Mp4TtmlParser",tm),tm.prototype.parseMedia=tm.prototype.parseMedia,tm.prototype.setSequenceMode=tm.prototype.setSequenceMode,tm.prototype.parseInit=tm.prototype.parseInit,Qt['application/mp4; codecs="stpp"']=function(){return new tm},Qt['application/mp4; codecs="stpp.ttml"']=function(){return new tm},Qt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new tm},Qt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new tm},nm.prototype.parseInit=function(){},nm.prototype.setSequenceMode=function(e){this.g=e},nm.prototype.parseMedia=function(e,t){var n=(e=(e=Et(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Le(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){if(null==(e=lm(new Ih(i[1]))))throw new Le(2,2,2e3);for(r=Number(r[1]),i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}for(t=[],i=(r=u(n[0].split("\n"))).next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Ih(i);var a=new Ae;Lh(i),Dh(i);for(var s=Lh(i);s;){var o=a,l=s;(s=/^id=(.*)$/.exec(l))?o.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(l))?o.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(l))?(o.height=Number(s[1]),o.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.regionAnchorX=Number(s[1]),o.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.viewportAnchorX=Number(s[1]),o.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(l)&&(o.scroll="up"),Dh(i),s=Lh(i)}t.push(a)}for(im(r=new Map),i=[],a=(n=u(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(o=[],s=-1,l=1;l<a.length;l++)a[l].includes("::cue")&&(o.push([]),s=o.length-1),-1!=s&&(o[s].push(a[l]),a[l].includes("}")&&(s=-1));for(s=(o=u(o)).next();!s.done;s=o.next()){var c=s.value;s="global",(l=c[0].match(/\((.*)\)/))&&(s=l.pop()),l=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(l=c[1].split(";")),(c=r.get(s))||(c=new re(0,0,""));for(var d=!1,h=0;h<l.length;h++){var p=/^\s*([^:]+):\s*(.*)/.exec(l[h]);if(p){var f=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":d=!0,c.backgroundColor=f;break;case"color":d=!0,c.color=f;break;case"font-family":d=!0,c.fontFamily=f;break;case"font-size":d=!0,c.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||"bold"==f)&&(d=!0,c.fontWeight=700);break;case"font-style":switch(f){case"normal":d=!0,c.fontStyle=be;break;case"italic":d=!0,c.fontStyle="italic";break;case"oblique":d=!0,c.fontStyle="oblique"}break;case"opacity":d=!0,c.opacity=parseFloat(f);break;case"text-shadow":d=!0,c.textShadow=f;break;case"white-space":d=!0,c.wrapLine="noWrap"!=f}}}d&&r.set(s,c)}}if(d=e,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else{if(o=null,a[0].includes("--\x3e")||(o=a[0],a.splice(0,1)),l=lm(s=new Ih(a[0])),h=Rh(s,/[ \t]+--\x3e[ \t]+/g),c=lm(s),null==l||null==h||null==c)throw new Le(2,2,2001,"Could not parse cue time range in WebVTT");for(l+=d,c+=d,d=um(a.slice(1).join("\n").trim()),r.has("global")?((a=r.get("global").clone()).startTime=l,a.endTime=c,a.payload=""):a=new re(l,c,""),rm(d,a,r),Dh(s),l=Lh(s);l;)om(a,l,t),Dh(s),l=Lh(s);null!=o&&(a.id=o)}a&&i.push(a)}return i},V("shaka.text.VttTextParser",nm),nm.prototype.parseMedia=nm.prototype.parseMedia,nm.prototype.setSequenceMode=nm.prototype.setSequenceMode,nm.prototype.parseInit=nm.prototype.parseInit;var cm=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function dm(){this.g=null}function hm(e,t,n){var i,r,a;return(new Wi).box("payl",$i((function(e){i=Et(e)}))).box("iden",$i((function(e){r=Et(e)}))).box("sttg",$i((function(e){a=Et(e)}))).parse(e),i?function(e,t,n,i,r){if(i=new re(i,r,""),rm(e,i,new Map),t&&(i.id=t),n)for(e=new Ih(n),t=Lh(e);t;)om(i,t,[]),Dh(e),t=Lh(e);return i}(i,r,a,t,n):null}function pm(){}function fm(e){if(null==(e=Rh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function gm(){this.g=new nm}function vm(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=u((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function mm(){}function ym(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=bm(n))&&(e.color=n),(n=t.BackColour)&&(n=bm(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ue,e.textAlign="start";break;case 2:e.displayAlign=ue,e.textAlign=oe;break;case 3:e.displayAlign=ue,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=oe;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=oe;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function bm(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Em(e){return 3600*((e=wm.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Qt["text/vtt"]=function(){return new nm},Qt['text/vtt; codecs="vtt"']=function(){return new nm},Qt['text/vtt; codecs="wvtt"']=function(){return new nm},dm.prototype.parseInit=function(e){var t=this,n=!1;if((new Wi).box("moov",Yi).box("trak",Yi).box("mdia",Yi).P("mdhd",(function(e){e=rs(e.reader,e.version),t.g=e.timescale})).box("minf",Yi).box("stbl",Yi).P("stsd",zi).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Le(2,2,2008);if(!n)throw new Le(2,2,2008)},dm.prototype.setSequenceMode=function(){},dm.prototype.parseMedia=function(e,t){if(!this.g)throw new Le(2,2,2008);var n,i=0,r=[],a=[],s=!1,o=!1,l=!1,c=null;if((new Wi).box("moof",Yi).box("traf",Yi).P("tfdt",(function(e){s=!0,i=is(e.reader,e.version).we})).P("tfhd",(function(e){c=ns(e.reader,e.flags).Ce})).P("trun",(function(e){o=!0,r=as(e.reader,e.version,e.flags).Re})).box("mdat",$i((function(e){l=!0,n=e}))).parse(e,!1),!l&&!s&&!o)throw new Le(2,2,2008);e=i;for(var d=new ji(n,0),h=u(r),p=h.next();!p.done;p=h.next()){var f=(p=p.value).ee||c,g=p.ed?i+p.ed:e;e=g+(f||0);var v=0;do{var m=d.K();v+=m;var y=null;"vttc"==Zi(d.K())?8<m&&(y=d.Za(m-8)):d.skip(m-8),f&&y&&(m=hm(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(m))}while(p.sampleSize&&v<p.sampleSize)}return a.filter($e)},V("shaka.text.Mp4VttParser",dm),dm.prototype.parseMedia=dm.prototype.parseMedia,dm.prototype.setSequenceMode=dm.prototype.setSequenceMode,dm.prototype.parseInit=dm.prototype.parseInit,Qt['application/mp4; codecs="wvtt"']=function(){return new dm},pm.prototype.parseInit=function(){},pm.prototype.setSequenceMode=function(){},pm.prototype.parseMedia=function(e){var t=Et(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=u(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new Ih((n=n.value.split("\n"))[0]),r=fm(i),a=Rh(i,/,/g);if(i=fm(i),null==r||null==a||null==i)throw new Le(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new re(r,i,n.slice(1).join("\n").trim()))}return e},V("shaka.text.SbvTextParser",pm),pm.prototype.parseMedia=pm.prototype.parseMedia,pm.prototype.setSequenceMode=pm.prototype.setSequenceMode,pm.prototype.parseInit=pm.prototype.parseInit,Qt["text/x-subviewer"]=function(){return new pm},gm.prototype.parseInit=function(){},gm.prototype.setSequenceMode=function(){},gm.prototype.parseMedia=function(e,t){return e=Ie(Tt(e=vm(e=Et(e)))),this.g.parseMedia(e,t)},V("shaka.text.SrtTextParser",gm),gm.srt2webvtt=vm,gm.prototype.parseMedia=gm.prototype.parseMedia,gm.prototype.setSequenceMode=gm.prototype.setSequenceMode,gm.prototype.parseInit=gm.prototype.parseInit,Qt["text/srt"]=function(){return new gm},mm.prototype.parseInit=function(){},mm.prototype.setSequenceMode=function(){},mm.prototype.parseMedia=function(e){for(var t="",n="",i=(e=u(e=Et(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=Tm.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null;for(var a=(t=u(t.split(/\r?\n/))).next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=km.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(Sm);else if("Style"==r){r=a.split(Sm),a={};for(var s=0;s<i.length&&s<r.length;s++)a[i[s]]=r[s];e.push(a)}for(i=[],t=null,r={},a=(n=u(n.split(/\r?\n/))).next();!a.done;r={vd:r.vd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(s=km.exec(a)))if(a=s[1].trim(),s=s[2].trim(),"Format"==a)t=s.split(Sm);else if("Dialogue"==a){s=s.split(Sm),a={};for(var o=0;o<t.length&&o<s.length;o++)a[t[o]]=s[o];s=new re(o=Em(a.Start),Em(a.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.vd=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.vd}}(r)))&&ym(s,a),i.push(s)}return i},V("shaka.text.SsaTextParser",mm),mm.prototype.parseMedia=mm.prototype.parseMedia,mm.prototype.setSequenceMode=mm.prototype.setSequenceMode,mm.prototype.parseInit=mm.prototype.parseInit;var Am,_m,Tm=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,km=/^\s*([^:]+):\s*(.*)/,Sm=/\s*,\s*/,wm=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function Cm(){}function Im(){Am?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Am=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Dm):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Dm(e,t){var n,i=this;return P((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Am.call(i,e,t),2)):Fm(n=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Am,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Rm,r.return(Rm.call(i,e,t)))}))}function Rm(e,t){var n,i,r,a,s,o,l,c,d,h,p=this;return P((function(f){if(1==f.g){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Um(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())s=a.value,o=Lm(s.videoCapabilities,n),l=Lm(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!o.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||((c=Object.assign({},s)).videoCapabilities=o,c.audioCapabilities=l,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(f,Am.call(p,e,i),2)}return h=f.h,f.return(new Bm(h,n))}))}function Lm(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Pm(){}function Om(){_m?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(_m=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=xm):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function xm(e){var t,n,i,r=this;return P((function(a){switch(a.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(a,_m.call(r,e),2);case 2:if(t=a.h,!e.keySystemConfiguration)return a.return(t);if((n=t.keySystemAccess)&&Fm(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=_m,a.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Mm,n){a.A(3);break}return i=t,E(a,Nm(e),4);case 4:return i.keySystemAccess=a.h,a.return(t);case 3:return a.return(Mm.call(r,e))}}))}function Mm(e){var t,n,i,r,a,s,o,l,u=this;return P((function(c){switch(c.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=Um(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?c.return(s):E(c,_m.call(u,e),2);case 2:if((o=c.h).keySystemAccess){o.keySystemAccess=new Bm(o.keySystemAccess,t),c.A(3);break}if(!e.keySystemConfiguration){c.A(3);break}return l=o,E(c,Nm(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(o)}}))}function Nm(e){var t,n;return P((function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],s=[];return r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(r.audioCapabilities=a),s.length&&(r.videoCapabilities=s),t=r,E(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)}))}function Bm(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Um(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Fm(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Vm(){}function Hm(){Im(),Om()}Qt["text/x-ssa"]=function(){return new mm},V("EmeEncryptionSchemePolyfill",Cm),Cm.install=Im,V("McEncryptionSchemePolyfill",Pm),Pm.install=Om,Bm.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Bm.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},V("EncryptionSchemePolyfills",Vm),Vm.install=Hm,void 0!==n&&n.exports&&(n.exports=Vm)}.call(n,e,e,void 0),n.shaka)t[i]=n.shaka[i]}()})),Jp=ua((function(e,t){var n;window,n=function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s="./src/clappr-dash-shaka-playback.js")}({"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
    !*** ./src/clappr-dash-shaka-playback.js ***!
    \*******************************************/
/*! no static exports found */function(e,t,n){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(/*! clappr */"clappr"),s=(r=n(/*! shaka-player */"shaka-player"))&&r.__esModule?r:{default:r};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},l(e,t,n||e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,e);var t=h(n);function n(){var e;o(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._levels=[],e._pendingAdaptationEvent=!1,e._isShakaReadyState=!1,e._minDvrSize=void 0===e.options.shakaMinimumDvrSize?60:e.options.shakaMinimumDvrSize,e}return c(n,[{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){if(!this.shakaPlayerInstance)return 0;var e=this.shakaPlayerInstance.getMediaElement();return e?e.currentTime-this.seekRange.start:0}},{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return s.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.seekRange():{start:0,end:0}}},{key:"currentLevel",set:function(e){var t=this;this._currentLevelId=e;var n=-1===this._currentLevelId;this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_START),n?(this._player.configure({abr:{enabled:!0}}),this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))},get:function(){return this._currentLevelId||-1}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"latency",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().liveLatency:0}},{key:"currentProgramDateTime",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getPlayheadTimeAsDate():null}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationStartTimeAsDate",get:function(){return this.shakaPlayerInstance&&this.shakaPlayerInstance.getPresentationStartTimeAsDate()?new Date(this.shakaPlayerInstance.getPresentationStartTimeAsDate().getTime()+1e3*this.seekRange.start):0}},{key:"bandwidthEstimate",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().estimatedBandwidth:null}},{key:"sourceMedia",get:function(){return this._options.src}}],[{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s.default.polyfill.installAll();var n=s.default.Player.isBrowserSupported(),i=e.split("?")[0].match(/.*\.(.*)$/)||[];return n&&("mpd"===i[1]||t.indexOf("application/dash+xml")>-1)}},{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return s.default}}]),c(n,[{key:"getProgramDateTime",value:function(){return this.presentationStartTimeAsDate}},{key:"_updateDvr",value:function(e){this.trigger(a.Events.PLAYBACK_DVR,e),this.trigger(a.Events.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(a.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),this.dvrEnabled&&this._updateDvr(e<this._duration-3),e+=this._startTime,this.el.currentTime=e}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"play",value:function(){this._player||this.load(),this.isReady?(l(f(n.prototype),"play",this).call(this),this._startTimeUpdateTimer(),this._stopped=!1,this._src=this.el.src):this.once(n.Events.SHAKA_READY,this.play)}},{key:"load",value:function(e){e&&(this._options.src=e),this._setup()}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return l(f(n.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,l(f(n.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,l(f(n.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(n.Events.SHAKA_READY),this.trigger(a.Events.PLAYBACK_READY,this.name)}},{key:"error",value:function(e){a.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._stopped=!0,this._player?(this._sendStats(),this._player.unload().then((function(){l(f(n.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){a.Log.error("shaka could not be unloaded")}))):l(f(n.prototype),"stop",this).call(this)}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(a.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),a.Log.error("shaka could not be destroyed")})):this._destroy(),l(f(n.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1;var t=function(){e._player=e._createPlayer(),e._setInitialConfig(),e._loadSource()};this._player?this._player.destroy().then((function(){return t()})):t()}},{key:"_createPlayer",value:function(){var e=new s.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e}},{key:"_setInitialConfig",value:function(){this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player)}},{key:"_loadSource",value:function(){var e=this;this._player.load(this._options.src).then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(a.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:"".concat(e.height,"p")}})).reverse(),this.trigger(a.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this,t=this._options.shakaSendStatsInterval||3e4;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_sendStats",value:function(){this.trigger(a.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var t={shakaError:e,videoError:this.el.error},i=t.shakaError.detail||t.shakaError,r=i.category,o=i.code,u=i.severity;if(t.videoError||!o&&!r)return l(f(n.prototype),"_onError",this).call(this);var c=u===s.default.util.Error.Severity.CRITICAL,d={code:"".concat(r,"_").concat(o),description:"Category: ".concat(r,", code: ").concat(o,", severity: ").concat(u),level:c?a.PlayerError.Levels.FATAL:a.PlayerError.Levels.WARN,raw:e},h=this.createError(d);a.Log.error("Shaka error event:",h),this.trigger(a.Events.PLAYBACK_ERROR,h)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),a.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(a.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(a.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(a.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,a.Log.debug("shaka was destroyed")}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.textTracks||[]).filter((function(e){return"subtitle"===e.kind})).map((function(t){return{id:e++,name:t.label||t.language,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return l(f(n.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return void a.Log.warn('Track id "'.concat(e,'" not found'));if(this._shakaTTVisible&&!0===t.track.active)return void a.Log.info('Track id "'.concat(e,'" already showing'))}t?(this._player.selectTextTrack(t.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(a.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}}]),n}(a.HTML5Video),v=g;t.default=v,e.exports=t.default},clappr:
/*!******************************************************************************************!*\
    !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
    \******************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e},"shaka-player":
/*!************************!*\
    !*** external "shaka" ***!
    \************************/
/*! no static exports found */function(e,n){e.exports=t}})},e.exports=n(vo,Qp)})),ef=la(Jp),tf='@font-face {\n  font-family: "opensans-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "opensans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "proximanova-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "proximanova-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "proximanova-xbold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "clearsans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "clearsans-bolditalic";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bolditalic.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n@font-face {\n  font-family: "globotipo-tx-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal;\n}\n.clappr-player#wp3-player-0 {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "lucida grande", tahoma, verdana, arial, sans-serif;\n  text-shadow: none;\n  box-sizing: border-box;\n  display: block;\n  max-width: none;\n  box-sizing: inherit;\n  float: none;\n  -webkit-tap-highlight-color: transparent;\n  /*\n  * Utility class to hide content visually while keeping it screen reader-accessible.\n  * Source: https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html\n  */\n}\n.clappr-player#wp3-player-0:focus {\n  outline: 0;\n}\n.clappr-player#wp3-player-0.fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n}\n.clappr-player#wp3-player-0.nocursor {\n  cursor: none;\n}\n.clappr-player#wp3-player-0 .visually-hidden:not(:focus):not(:active) {\n  clip: rect(0 0 0 0);\n  -webkit-clip-path: inset(100%);\n          clip-path: inset(100%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}',nf=i(i(i(i({DFP:dr,DAI:Dr,GloboMediaControl:qr},{PlayButton:$r,TimeIndicator:ea,LiveIndicator:rs,LiveButton:Ba,Volume:Ha,Seekbar:Ga,PipButton:Qr,FullscreenButton:Jr,Settings:Us,BackButton:Zr,VideoInfo:Ks,Share:es,SkipRecap:aa,SkipIntro:sa,StartOver:xa,QuickSeek:qa,QuickSeekHint:$a,ChromecastSenderIndicator:Zs,MediaControlPlaceHolder:go}),{},{TapToUnmute:is,ErrorScreen:oo,Chromecast:Xs,ThumbPreview:Fs,SeekTime:jr},Yp),{},{Subtitle:du,Poster:wo,Spinner:Co,StreamSense:xo,Comscore:Ro,WebmediaAPIHit:Uo,Horizon:Tu,WaitingRoom:ic,PlayerStats:yo,GloboYoubora:mh,GoogleAnalytics:Bu,GoogleAnalytics4:nc,BitrateCapping:Yh,LockClient:qh,Cuepoints:bo,EPG:ko,ClickToPause:Ur},zp),{},{Overlay:lo,DrawerHeader:fo,SimulcastPing:np,WatchSession:ip}),rf=[ef,Zp,Xp],af=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["play_button","time_indicator","live_indicator","live_button","volume","seekbar","seekbar_info","fullscreen_button","settings","back_button","video_info","share","skip_recap","skip_intro","start_over","quick_seek","quick_seek_hint","chromecast_sender_indicator","media_control_placeholder","pip_button"],n=e.filter((function(e){return e&&-1===t.indexOf(e)}));return t.concat(n)},sf={html5_video:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls_fairplay_playback:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls:function(e){if(e.raw.type===Cs.ErrorTypes.NETWORK_ERROR)switch(e.raw.details){case Cs.ErrorDetails.MANIFEST_LOAD_ERROR:case Cs.ErrorDetails.LEVEL_LOAD_ERROR:case Cs.ErrorDetails.FRAG_LOAD_ERROR:case Cs.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:var t=e.raw.response;return!(t.code>=400&&t.code<500);case Cs.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case Cs.ErrorDetails.LEVEL_LOAD_TIMEOUT:case Cs.ErrorDetails.FRAG_LOAD_TIMEOUT:case Cs.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:return!0;default:return!1}return!1},dash_shaka_playback:function(e){var t=e.raw.code||e.raw.detail&&e.raw.detail.code,n=e.raw.data||e.raw.detail&&e.raw.detail.data;switch(t){case Qp.util.Error.Code.BAD_HTTP_STATUS:var i=m(n,2)[1];return!(i>=400&&i<500);case Qp.util.Error.Code.HTTP_ERROR:case Qp.util.Error.Code.TIMEOUT:return!0;default:return!1}}},of=function(e){if(Cs){var t=function(t){u(i,t);var n=f(i);function i(){return a(this,i),n.apply(this,arguments)}return o(i,[{key:"load",value:function(t,n,r){if("manifest"===t.type){var a=r.onSuccess;r.onSuccess=function(t,n,i,r){var s={pop:r.getResponseHeader("x-pop"),host:r.getResponseHeader("x-host")};e.trigger(In.WM_STREAMING_DATA_LOADED,s),a(t,n,i)}}v(c(i.prototype),"load",this).call(this,t,n,r)}}]),i}(Cs.DefaultConfig.loader);return e.video.isLive?t:void 0}},lf={enableWorker:!0,liveSyncDurationCount:2,backBufferLength:1/0,liveBackBufferLength:90,lowLatencyMode:!1,capLevelToPlayerSize:!0,enableWebVTT:!1,xhrSetup:function(e){e.withCredentials=!0}},uf=function(e){e.getNetworkingEngine().registerRequestFilter((function(e,t){e!==Qp.net.NetworkingEngine.RequestType.LICENSE&&(t.allowCrossSiteCredentials=!0)}))},cf=function(e){e.shakaConfiguration=e.shakaConfiguration||{};var t=function(e){return{maxAttempts:"manifest"===e?4:8}};["drm","manifest","streaming"].forEach((function(n){return e.shakaConfiguration[n]=function(n){return i(i({},e.shakaConfiguration[n]||{}),{},{retryParameters:t(n)})}(n)}))},df=wn.LocalStorage,hf=wn.getHostname,pf=wn.getHostAndPathName,ff=window.WM&&window.WM.Settings||{},gf={limited:J.isFirefox&&J.isAndroid,preferredLevel:df.load("selectedlevel",parseInt),changeFavicon:!1,mediacontrol:{plugins:af()},chromecast:{appId:function(){if(ff.CastSenders){var e=Object.keys(ff.CastSenders).find((function(e){return e===hf()||e===pf()}));return e&&ff.CastSenders[e]}}()},preload:"none",hlsMinimumDvrSize:120,useDvrControls:!1,useBackgroundButton:!1,useHardwareVideoDecoder:!1,playback:{controls:!1,preload:"none",playInline:!0,recycleVideo:J.isMobile,setHLSJSConfig:function(e,t){var n=function(e){return e.hlsRecoverAttempts=1,{manifestLoadingMaxRetry:3,fragLoadingMaxRetry:7,levelLoadingMaxRetry:7}}(e);e.playback.hlsjsConfig=i(i(i(i({},lf),n),e.HLSJSConfiguration||{}),{},{pLoader:of(t)}),e.hlsPlayback={preload:!t.isLive}},setShakaConfig:function(e,t){e.shakaOnBeforeLoad=uf,e.shakaMinimumDvrSize=180,e.shakaConfiguration=e.shakaConfiguration||{},cf(e),function(e){var t;e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{preferredAudioLanguage:(null===(t=e.defaultAudio)||void 0===t?void 0:t.language)||"por"})}(e),t.isLive||(function(e){e.shakaConfiguration=e.shakaConfiguration||{},e.shakaConfiguration.streaming=i(i({},e.shakaConfiguration.streaming||{}),{bufferingGoal:120,rebufferingGoal:2,bufferBehind:30})}(e),function(e){var t=((window.WM&&window.WM.Settings||{}).ShakaConfig||{})["shaka-config-set-control"]||{};e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{streaming:i(i({},e.shakaConfiguration.streaming||{}),t.streaming),abr:i(i({},e.shakaConfiguration.abr||{}),t.abr)})}(e),function(e){e.shakaConfiguration=i(i({},e.shakaConfiguration),{},{manifest:i(i({},e.shakaConfiguration.manifest||{}),{},{dash:i(i({},e.shakaConfiguration.manifest&&e.shakaConfiguration.manifest.dash||{}),{},{ignoreMinBufferTime:!0})})})}(e))},recoverableErros:sf},gaAccount:null,gaTrackerName:null,allowLocation:!1,disableVideoTagContextMenu:!0,stretched:!1,maxQualityLevel:"max",allowRestrictedContent:ff.allowRestrictedContent,videoInfo:{inlineEnabled:!1,fullscreenEnabled:!0},includeResetStyle:!0,customStyle:{mainStyle:tf,resetStyle:'.clappr-player#wp3-player-0 div, .clappr-player#wp3-player-0 span, .clappr-player#wp3-player-0 applet, .clappr-player#wp3-player-0 object, .clappr-player#wp3-player-0 iframe,\n.clappr-player#wp3-player-0 h1, .clappr-player#wp3-player-0 h2, .clappr-player#wp3-player-0 h3, .clappr-player#wp3-player-0 h4, .clappr-player#wp3-player-0 h5, .clappr-player#wp3-player-0 h6, .clappr-player#wp3-player-0 p, .clappr-player#wp3-player-0 blockquote, .clappr-player#wp3-player-0 pre,\n.clappr-player#wp3-player-0 a, .clappr-player#wp3-player-0 abbr, .clappr-player#wp3-player-0 acronym, .clappr-player#wp3-player-0 address, .clappr-player#wp3-player-0 big, .clappr-player#wp3-player-0 cite, .clappr-player#wp3-player-0 code,\n.clappr-player#wp3-player-0 del, .clappr-player#wp3-player-0 dfn, .clappr-player#wp3-player-0 em, .clappr-player#wp3-player-0 img, .clappr-player#wp3-player-0 ins, .clappr-player#wp3-player-0 kbd, .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 s, .clappr-player#wp3-player-0 samp,\n.clappr-player#wp3-player-0 small, .clappr-player#wp3-player-0 strike, .clappr-player#wp3-player-0 strong, .clappr-player#wp3-player-0 sub, .clappr-player#wp3-player-0 sup, .clappr-player#wp3-player-0 tt, .clappr-player#wp3-player-0 var,\n.clappr-player#wp3-player-0 b, .clappr-player#wp3-player-0 u, .clappr-player#wp3-player-0 i, .clappr-player#wp3-player-0 center,\n.clappr-player#wp3-player-0 dl, .clappr-player#wp3-player-0 dt, .clappr-player#wp3-player-0 dd, .clappr-player#wp3-player-0 ol, .clappr-player#wp3-player-0 ul, .clappr-player#wp3-player-0 li,\n.clappr-player#wp3-player-0 fieldset, .clappr-player#wp3-player-0 form, .clappr-player#wp3-player-0 label, .clappr-player#wp3-player-0 legend,\n.clappr-player#wp3-player-0 table, .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 tbody, .clappr-player#wp3-player-0 tfoot, .clappr-player#wp3-player-0 thead, .clappr-player#wp3-player-0 tr, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td,\n.clappr-player#wp3-player-0 article, .clappr-player#wp3-player-0 aside, .clappr-player#wp3-player-0 canvas, .clappr-player#wp3-player-0 details, .clappr-player#wp3-player-0 embed,\n.clappr-player#wp3-player-0 figure, .clappr-player#wp3-player-0 figcaption, .clappr-player#wp3-player-0 footer, .clappr-player#wp3-player-0 header, .clappr-player#wp3-player-0 hgroup,\n.clappr-player#wp3-player-0 menu, .clappr-player#wp3-player-0 nav, .clappr-player#wp3-player-0 output, .clappr-player#wp3-player-0 ruby, .clappr-player#wp3-player-0 section, .clappr-player#wp3-player-0 summary,\n.clappr-player#wp3-player-0 time, .clappr-player#wp3-player-0 mark, .clappr-player#wp3-player-0 audio, .clappr-player#wp3-player-0 video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline;\n}\n.clappr-player#wp3-player-0 table {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n.clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle;\n}\n.clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 blockquote {\n  quotes: none;\n}\n.clappr-player#wp3-player-0 q:before, .clappr-player#wp3-player-0 q:after, .clappr-player#wp3-player-0 blockquote:before, .clappr-player#wp3-player-0 blockquote:after {\n  content: "";\n  content: none;\n}\n.clappr-player#wp3-player-0 a img {\n  border: none;\n}'},customErrors:io,shouldDeviceUseWebVTT:!0,clickToPauseConfig:{onClickPayload:{userInvoked:!0}}};Object.values(nf).forEach((function(e){return at.registerPlugin(e)})),rf.forEach((function(e){return at.registerPlayback(e)}));var vf=wn.DOM.hasPlayerElement,mf=wn.getExperimentAlternative,yf=window.WM&&window.WM.Settings||{},bf=yf&&yf.Domains||[],Ef=function(e){u(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n);var s=n.hasSourceMapped(r.source);s&&(r.source=s);var o=i(i({},gf),r);o.clapprStats={runEach:1e3,onReport:function(t){return e.onMetricsReceived(t)}},o.mediacontrol.plugins=af(o.mediaControl&&o.mediaControl.plugins),o.bitrateCappingDisabled=yf.bitrateCapping&&yf.bitrateCapping.disabled||yf.bitrateCappingDisabled,o.stretched&&(o.width=o.stretchWidth||o.width,o.height=o.stretchHeight||o.height),n.overrideOptions(o),o.plugins&&(o.plugins.loadExternalPluginsFirst=!1),!o.includeResetStyle&&delete o.customStyle.resetStyle,"string"==typeof(e=t.call(this,o)).options.defaultAudio&&(e.options.defaultAudio=e._forceNewAudioFormat(e.options)),"string"==typeof e.options.defaultSubtitle&&(e.options.defaultSubtitle=e._forceNewSubtitleFormat(e.options));var l=mf(e.options,"player-isolated-experiment-02");J.isAndroid&&"android_dvr"===l&&(J.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}}),J.isiOS&&"ios_dvr"===l&&(J.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}});var u=/hlsjs-live-sync-duration-count-(\d+)/,c=l.match(u)&&l.match(u)[1];return c&&(e.options.HLSJSConfiguration={liveSyncDurationCount:c}),e}return o(n,[{key:"eventsMapping",get:function(){return Object.assign(v(c(n.prototype),"eventsMapping",this),{onPipAdded:In.PLAYER_PIP_ADDED,onPipDiscarded:In.PLAYER_PIP_DISCARDED,onMasterAdded:In.PLAYER_MASTER_ADDED,onMasterChanged:In.PLAYER_MASTER_CHANGED,onPipToMaster:In.PLAYER_PIPTOMASTER,onMediaControlShow:In.PLAYER_MEDIACONTROL_SHOW,onMediaControlHide:In.PLAYER_MEDIACONTROL_HIDE,onBackButtonClicked:In.BACK_BUTTON_CLICKED,onDrawerShow:In.DID_SHOW_DRAWER,onDrawerHide:In.DID_HIDE_DRAWER,onDrawerShowHint:In.DID_SHOW_DRAWER_HINT,onDrawerHideHint:In.DID_HIDE_DRAWER_HINT,onSubtitleChanged:In.WM_SUBTITLE_CHANGED,onAudioChanged:In.WM_AUDIO_CHANGED,onDidLoadCuepoints:In.DID_LOAD_CUEPOINTS,onDidReachCuepoint:In.DID_REACH_CUEPOINT})}},{key:"defaultOptions",get:function(){return gf}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"onMetricsReceived",value:function(e){this.container.trigger(In.WM_STATS_REPORTED,e)}},{key:"normalizeSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sources||(void 0===e.source?[]:["".concat(e.source)]);return 0===(t=t.map((function(e){return"".concat(e||"")}))).length?["no.op"]:t}},{key:"isUnsupportedBrowser",value:function(){return J.version<{chrome:41,firefox:38,ie:12,msie:12,safari:8}[J.name.toLowerCase()]}},{key:"attachTo",value:function(e){X(e).html(""),this.element=e,this.options.parentElement=e,this.options.customStyle&&this._renderCustomStyles(e,this.options.customStyle),this.core&&this.core.destroy(),v(c(n.prototype),"attachTo",this).call(this,e),this.core.$el.attr("id","wp3-player-".concat(this.core.options.playerId)),this.core.$el.addClass("clappr-player"),this.validatePlayerEnvironment()}},{key:"validatePlayerEnvironment",value:function(){var e=this.playback&&"function"==typeof this.playback.onError,t=!n.isAllowedDomain(window.location.hostname)&&!n.isDevMode()&&e,i=this.isUnsupportedBrowser()&&e;t&&this.playback.onError(io.NOT_ALLOWED_DOMAIN,{useCodePrefix:!1}),i&&this.playback.onError(io.UNSUPPORTED_BROWSER,{useCodePrefix:!1})}},{key:"load",value:function(e){if(vf(this.element)){var t=n.hasSourceMapped(e)||e;v(c(n.prototype),"load",this).call(this,t),this.validatePlayerEnvironment()}}},{key:"configure",value:function(e){var t=n.hasSourceMapped(e.source);t&&(e.source=t),this.options.stretched&&(e.width||e.height)&&(e.width=this.options.stretchWidth||e.width,e.height=this.options.stretchHeight||e.height),this.hasSourceChanged(e)||(delete e.sources,delete e.source),e.env=Vt.get(e.env,e.httpOnly),"string"==typeof e.defaultAudio&&(e.defaultAudio=this._forceNewAudioFormat(e)),"string"==typeof e.defaultSubtitle&&(e.defaultSubtitle=this._forceNewSubtitleFormat(e)),n.overrideOptions(e,this.options),e.plugins&&(e.plugins.loadExternalPluginsFirst=!1),v(c(n.prototype),"configure",this).call(this,e),this.validatePlayerEnvironment()}},{key:"hasSourceChanged",value:function(e){var t=this.normalizeSources(this.options),n=this.normalizeSources(e);return t[0]!==n[0]}},{key:"_forceNewAudioFormat",value:function(e){return{language:e.defaultAudio}}},{key:"_forceNewSubtitleFormat",value:function(e){return{language:e.defaultSubtitle,role:"subtitle"}}},{key:"_addEventListeners",value:function(){var e=this;v(c(n.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,In.WM_PIP_ADDED,this.onPipAdded),this.listenTo(this.core,In.WM_PIP_DISCARDED,this.onPipDiscarded),this.listenTo(this.core,In.WM_MASTER_ADDED,this.onMasterAdded),this.listenTo(this.core,In.WM_MASTER_CHANGED,this.onMasterChanged),this.listenTo(this.core,In.BACK_BUTTON_CLICKED,this.onBackButtonClicked),this.listenTo(this.core.mediaControl,Le.MEDIACONTROL_SHOW,(function(){return e.trigger(In.PLAYER_MEDIACONTROL_SHOW)})),this.listenTo(this.core.mediaControl,Le.MEDIACONTROL_HIDE,(function(){return e.trigger(In.PLAYER_MEDIACONTROL_HIDE)})),this.listenTo(this.core,In.DID_SHOW_DRAWER,this.onDrawerShow),this.listenTo(this.core,In.DID_HIDE_DRAWER,this.onDrawerHide),this.listenTo(this.core,In.DID_SHOW_DRAWER_HINT,this.onDrawerShowHint),this.listenTo(this.core,In.DID_HIDE_DRAWER_HINT,this.onDrawerHideHint)}},{key:"_addContainerEventListeners",value:function(){v(c(n.prototype),"_addContainerEventListeners",this).call(this),this.listenTo(this.container,In.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,In.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,In.DID_LOAD_CUEPOINTS,this.onDidLoadCuepoints),this.listenTo(this.container,In.DID_REACH_CUEPOINT,this.onDidReachCuepoint),this.listenTo(this.container,In.WM_AUDIO_CHANGED,this.onAudioChanged)}},{key:"onDrawerHide",value:function(){this.trigger(In.DID_HIDE_DRAWER)}},{key:"onDrawerShow",value:function(){this.trigger(In.DID_SHOW_DRAWER)}},{key:"onDrawerHideHint",value:function(){this.trigger(In.DID_HIDE_DRAWER_HINT)}},{key:"onDrawerShowHint",value:function(){this.trigger(In.DID_SHOW_DRAWER_HINT)}},{key:"onDidLoadCuepoints",value:function(e){this.trigger(In.DID_LOAD_CUEPOINTS,e)}},{key:"onDidReachCuepoint",value:function(e){this.trigger(In.DID_REACH_CUEPOINT,e)}},{key:"onSubtitleChanged",value:function(e){this.trigger(In.WM_SUBTITLE_CHANGED,e)}},{key:"onAudioChanged",value:function(e){this.trigger(In.WM_AUDIO_CHANGED,e)}},{key:"onBackButtonClicked",value:function(){this.trigger(In.BACK_BUTTON_CLICKED)}},{key:"onPipAdded",value:function(){this.trigger(In.PLAYER_PIP_ADDED)}},{key:"onPipDiscarded",value:function(){this.trigger(In.PLAYER_PIP_DISCARDED)}},{key:"onMasterAdded",value:function(){this.trigger(In.PLAYER_MASTER_ADDED)}},{key:"onMasterChanged",value:function(){this.trigger(In.PLAYER_MASTER_CHANGED)}},{key:"onPipToMaster",value:function(){this.trigger(In.PLAYER_PIPTOMASTER)}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}}],[{key:"version",get:function(){return"7.85.0"}},{key:"allVersions",get:function(){return{Player:"7.85.0",PlayerCore:"1.49.0",PlayerPlugins:"1.91.0",Clappr:At,ShakaPlayer:Qp.Player.version,HLSjs:Cs.version}}},{key:"overrideOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.chromeless&&t.chromeless&&(e.chromeless=t.chromeless),e.videoInfo&&(e.videoInfo=i(i({},gf.videoInfo),e.videoInfo));var n=e.chromecast||{},r=n.appId||gf.chromecast.appId;e.chromecast={enabled:n.enabled&&!J.isChromecast&&!!r,appId:r,enableBingeWatch:n.enableBingeWatch}}},{key:"hasSourceMapped",value:function(e){return J.isChrome&&yf.sourceMapping&&yf.sourceMapping[e]}}]),n}(Nn);return Ef.isDevMode=function(){return!1},Ef.isAllowedDomain=function(e){return!yf.Domains||bf.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Clappr,e.DrawerBottom=po,e.Environment=Vt,e.Errors=io,e.Events=In,e.MediaControlPlugin=Ii,e.Playbacks=rf,e.Player=Ef,e.Plugins=nf,e.Styler=Cn,e.mergeMediaControlPlugins=af,e.playerStyle=tf,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
