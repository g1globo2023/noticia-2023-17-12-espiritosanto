(()=>{"use strict";function e(e,n,i,r,t,a,l){try{var o=e[a](l),s=o.value}catch(e){return void i(e)}o.done?n(s):Promise.resolve(s).then(r,t)}function n(n){return function(){var i=this,r=arguments;return new Promise((function(t,a){var l=n.apply(i,r);function o(n){e(l,t,a,o,s,"next",n)}function s(n){e(l,t,a,o,s,"throw",n)}o(void 0)}))}}var i={},r=function(){var e=n((function*(e){return new Promise(((n,i)=>{if(e){var r=e.getObj||(()=>globalThis[e.name]);if(r())n(r());else{var t=document.querySelector('script[src="'+e.url+'"]');t&&(t.addEventListener("load",(()=>n(r())),{once:!0}),t.addEventListener("error",(()=>i()),{once:!0}))}}else i()}))}));return function(n){return e.apply(this,arguments)}}(),t=["LoginScreen","VideoRecommendationPlugin","clapprDetachPlugin","ViewportPlayPlugin","ChartbeatPlugin"],a=function(){var e=n((function*(e){void 0===e&&(e=t);var{config:n}=i,a=Object.keys(n).filter((i=>e.includes(n[i].name))).map((e=>n[e]));yield Promise.all([...a.map((e=>r(e)))]);var l=e=>()=>{var n=globalThis[e.name];e.isDefault&&n&&(n=globalThis[e.name].default);var i=e.needsClappr?globalThis.Clappr:void 0;return n?n(i):void 0},o={core:[...a.filter((e=>!e.isContainer)).map((e=>l(e)))],container:[...a.filter((e=>!!e.isContainer)).map((e=>l(e)))]};return globalThis.PlayerPlugins=o,o}));return function(n){return e.apply(this,arguments)}}();i.init=function(e){void 0===e&&(e={}),i.config=JSON.parse(JSON.stringify(e)),globalThis.promiseResolvePlayerAssets&&globalThis.promiseResolvePlayerAssets(),r(i.config.WM).then((()=>{setTimeout((()=>{globalThis.WM&&globalThis.sendCommonEvent&&globalThis.WM.playerAvailable.then((()=>{globalThis.sendCommonEvent("video_perf","player_available",Date.now()-globalThis.glbDebug.firstTick)}))}),200)}))},i.getPlugins=a,i.getAsset=r,globalThis.playerAssetsManager=i,i.init(globalThis.playerAssetsConfig)})();